{"version":3,"sources":["Components/TypeDetector.js","../node_modules/@iobroker/adapter-react/assets/rooms sync /^/.*$","../node_modules/@iobroker/adapter-react/assets/devices sync /^/.*$","Devices/SmartDetector.js","icons/Jalousie.js","icons/PushButton.js","icons/DoorOpened.js","icons/FireOn.js","icons/FloodOn.js","icons/Gate.js","icons/Humidity.js","icons/MotionOn.js","icons/RGB.js","icons/Socket.js","icons/Thermometer.js","icons/Thermostat.js","icons/HeatValve.js","icons/WindowOpened.js","icons/WindowTilted.js","Components/icons/Cleaner.js","Components/TypeIcon.js","Components/icons/WindowTilted.js","Components/icons/Material.js","Components/TypeOptions.js","Components/UploadImage.js","Dialogs/DialogEditProperties.js","Dialogs/AddState.js","Dialogs/DialogEditDevice.js","Components/helpers/search.js","Components/TreeView.js","Dialogs/DialogNewDevice.js","Devices/SmartGeneric.js","Dialogs/DialogEditEnums.js","Dialogs/DeleteFolder.js","Dialogs/DialogEditFolder.js","Components/DragWrapper.js","Components/DropWrapper.js","Dialogs/DialogImporter.js","Components/helpers/hooks/useStateLocal.js","Tabs/ListDevices.js","App.js","serviceWorker.js","index.js"],"names":["Types","unknown","airCondition","blind","button","buttonSensor","camera","url","image","dimmer","door","fireAlarm","floodAlarm","gate","humidity","info","instance","light","lock","location","media","motion","rgb","ct","rgbSingle","hue","slider","socket","temperature","thermostat","valve","volume","vacuumCleaner","volumeGroup","window","windowTilt","weatherCurrent","weatherForecast","warning","ChannelDetector","this","patternWorking","role","indicator","name","required","defaultRole","patternUnreach","type","patternLowbat","patternMaintain","patternError","patternDirection","patterns","mediaPlayer","states","write","noSubscribe","notSingle","defaultUnit","min","max","stateName","multiple","inverted","unit","searchInParent","rgbOld","defaultStates","0","1","2","3","4","5","6","blinds","enums","roleOrEnumBlind","roleOrEnumGate","read","roleOrEnumWindow","channelRole","obj","roleOrEnum","doorsRoles","doorsWords","roleOrEnumLight","ignoreRole","location_one","levelSlider","noDeviceDetection","roles","words","indexOf","common","found","forEach","en","pos","lastIndexOf","lang","substring","hasOwnProperty","find","reg","test","checkEnum","lightWords","de","ru","lightRoles","blindWords","blindRoles","gateWords","gateRoles","windowRoles","that","getAllStatesInChannel","keys","channelId","list","RegExp","replace","_id","push","getAllStatesInDevice","getParentId","id","copyState","oldState","newState","JSON","parse","stringify","Array","t","length","original","icon","_applyPattern","objects","statePattern","match","state","split","pop","undefined","noOneOk","_getEnumsForId","members","getFunctionEnums","result","e","channel","_testOneState","context","pattern","channelStates","usedIds","_usedIds","ignoreIndicators","parts","console","log","j","_found","u","c","error","cid","bind","_detectNext","options","_keysOptional","_usedIdsOptional","allowedTypes","excludedTypes","s","allRequiredFound","a","oneOf","b","deviceStates","deviceId","i","m","exec","detect","cache","Object","sort","detected","getPatterns","copyPatterns","item","toString","enum","module","exports","default","map","webpackContext","req","webpackContextResolve","__webpack_require__","o","Error","code","resolve","IOBChannelDetector","detector","forceRebuildKeys","Jalousie","props","viewBox","d","fill","PushButton","DoorOpened","FireOn","FloodOn","Gate","Humidity","MotionOn","cx","cy","r","RGB","style","stroke","fillRule","fillOpacity","Socket","width","height","Thermometer","Thermostat","HeatValve","WindowOpened","strokeWidth","strokeMiterlimit","WindowTilted","Cleaner","x","y","TYPE_ICONS","TypeIconAC","TypeIconBlinds","TypeIconButton","TypeIconButtonSensor","TypeIconCamera","TypeIconURL","TypeIconImage","TypeIconDimmer","TypeIconDoor","TypeIconFireAlarm","TypeIconFloodAlarm","TypeIconGate","TypeIconHumidity","TypeIconInfo","TypeIconLight","TypeIconLock","TypeIconLocation","TypeIconMedia","TypeIconMotion","TypeIconRGB","TypeIconCT","TypeIconRGBSingle","TypeIconHUE","TypeIconSlider","TypeIconSocket","TypeIconTemperature","TypeIconThermostat","TypeIconValve","TypeIconVacuumCleaner","TypeIconVolume","TypeIconVolumeGroup","TypeIconWindow","TypeIconWindowTilt","TypeIconWeather","TypeIconWarning","defaultStyle","marginTop","marginLeft","TypeIcon","src","assign","className","alt","Icon","Component","Material","rx","ry","TYPE_OPTIONS","alexa","alisa","google","material","blindButtons","ICONS_TYPE","margin","STATES_NAME_ICONS","AiOutlineAppstoreAdd","MdWork","IconUnreach","IconLowbat","IconMaintain","IconError","MdDirections","IconWorking","BiLastPage","FaCompressArrowsAlt","FaCompress","FaVolumeMute","GiLaserPrecision","AiOutlineRadiusBottomleft","AiOutlineColumnHeight","AiOutlineColumnWidth","AiOutlineSwap","MdGpsFixed","FaToggleOn","FaDoorOpen","GiStopSign","IoIosWater","GiNuclearWaste","AiFillPauseCircle","GiMatterStates","MdDeveloperMode","AiOutlinePoweroff","SiBoost","WiHumidity","WiThermometer","WiDaySunny","FaRunning","WiFire","WiSmoke","GiTreeSwing","GiSpeedometer","UploadImage","anchorEl","cropHandler","cropperRef","createRef","disabled","classes","crop","onChange","position","buttonCropWrapper","Tooltip","title","IconButton","onClick","setState","currentTarget","stopPropagation","color","Menu","keepMounted","open","onClose","MenuItem","imageElement","current","cropper","getCroppedCanvas","toDataURL","label","customClasses","iconPickerLabel","base64","value","ref","initialAspectRatio","viewMode","guides","minCropBoxHeight","minCropBoxWidth","background","checkOrientation","defaultProps","maxSize","removeIconFunc","accept","el","withStyles","theme","objectFit","display","zIndex","right","top","buttonIconsWrapper","border","fontSize","fontWeight","DialogEditProperties","checkedName","initName","join","Utils","FORBIDDEN_CHARS","channelObj","getObjectNameFromObj","language","I18n","getLanguage","functions","enumIDs","filter","startsWith","includes","rooms","smartName","getSmartName","changeProperties","prevProps","prevState","realParent","ids","objs","getObjectName","getObjectIcon","Select","oidField","fullWidth","renderValue","arrId","newArr","renderValueWrapper","renderValueCurrent","enumIcon","target","custom","iotNoCommon","iot","file","newValue","data","divOids","divOidField","oidName","TextField","FormControlLabel","disableSwitchLabel","control","Switch","disableSwitch","checked","placeholder","helperText","renderSelectEnum","clsx","colorButton","dropZone","divDialogContent","renderProperties","React","PureComponent","paddingTop","paddingBottom","marginBottom","verticalAlign","divDevice","palette","divIndicators","fontFamily","buttonPen","headerButtons","textAlign","marginRight","alignItems","funcDivEdit","funcEditName","funcEdit","tableIconImg","opacity","spacing","node","useStyles","makeStyles","root","backgroundColor","paper","maxWidth","overflowHidden","flexDirection","pre","overflow","whiteSpace","showDialog","nameField","roleField","typeField","unitField","minField","maxField","minMax","typeArray","AddState","cb","arrayStateDefault","useState","setOpen","setRole","roleInput","setRoleInput","setRoles","setName","setUnit","setType","checkedRead","setCheckedRead","checkedWrite","setCheckedWrite","setMin","setMax","useEffect","rolesArr","key","document","body","removeChild","ThemeProvider","getThemeName","Dialog","DialogTitle","DialogContent","dividers","Paper","padding","p","toUpperCase","Autocomplete","freeSolo","event","onInputChange","renderInput","params","FormControl","InputLabel","Checkbox","DialogActions","Button","variant","autoFocus","setObject","startIcon","TabPanel","children","index","other","hidden","aria-labelledby","Typography","component","DialogEditDevice","handleClose","updateNewState","array","addedStates","stateObj","alias","fx","handleOk","startTheProcess","initChangeProperties","onSaveProperties","onCopyDevice","onDelete","delObject","onToggleTypeStates","stateDevice","newIds","channelInfo","attr","parentId","updateFx","getAddedChannelStates","extendedAvailable","idsInit","extended","localStorage","getItem","expertMode","selectIdFor","selectIdPrefix","editFxFor","newChannelId","newChannelError","disabledButton","tab","_sortedKeys","channelPrefix","channelPrefixEnd","getChannelItems","objOriginal","noType","nextProps","selected","imagePrefix","dialogName","findRealDevice","statesOnly","onOk","isAlias","native","themeType","header","divExtended","menuWrapperIcons","setItem","transform","createElement","appendChild","ReactDOM","render","prefix","fxRead","fxWrite","aria-describedby","titleBackground","titleColor","defaultValue","isAdded","dName","titleTooltip","linkedDevices","IconsState","getStateIcon","divOidFieldObj","displayFlex","displayFlexRow","wrapperOidName","oidNameIcon","addedName","stateSubCategory","width100","FormHelperTextProps","wrapperItemButtons","emptyButton","divCollapsed","renderVariable","wrapperHeaderIndicators","headerIndicatorsLine","headerIndicatorsName","renderSelectDialog","renderEditFxDialog","content","AppBar","LinearProgress","wrapperIconHead","iconStyle","showDeviceIcon","deviceText","Tabs","_","newTab","indicatorColor","textColor","scrollButtons","aria-label","Tab","a11yProps","renderHeader","renderVariables","initState","HUMIDITY","TEMPERATURE","WATER","FIRE","SMOKE","SPEED","BRIGHTNESS","MOTION","WINDOW","MdHelpOutline","textTransform","minWidth","textOverflow","lineHeight","headerButton","float","idEditName","idEdit","justifyContent","flexGrow","borderTop","prepareList","modified","depth","parent","engine","parseInt","regEx","it","parentIndex","images","IconTypeDimmer","IconTypeLight","IconTypeSwitch","def","IconTypeGeneric","TreeView","generateId","addNewName","expanded","listItems","renaming","deleting","errorText","filterMenuOpened","addNew","typeFilter","searchText","newExp","ensureSelectedIsVisible","filterTimer","dialogNew","addNewFolderTitle","dialogNewForm","noValidate","autoComplete","onKeyPress","ev","preventDefault","onAddNew","toggleExpanded","dialogNewInput","changed","saveExpanded","onlyOpen","slice","splice","flex","isExpanded","expandButton","onCollapse","onExpand","onSelect","items","childrenFiltered","isFilteredOut","depthPx","toLowerCase","paddingLeft","borderRadius","cursor","reorder","filteredPartly","secondary","dark","countSpan","childrenCount","ListItem","onDoubleClick","folder","element","ListItemIcon","itemIcon","iconCommon","getTextStyle","fontStyle","ListItemSecondaryAction","renderOneItem","dragging","List","dense","disablePadding","buttonWrapper","onExpandAll","onCollapseAll","renderAllItems","wrapperFoldersBlock","renderAddButton","renderTree","renderNewItemDialog","addButton","maxHeight","overflowY","paddingRight","userSelect","UNSUPPORTED_TYPES","getLastPart","DialogNewDevice","copyDevice","handleCancel","typesWords","typeId","types","stateIds","nondeletable","functionStorage","roomsStorage","notUnique","Promise","tasks","desc","concat","processTasks","setStateAsync","container","treeDiv","addNewFolder","blockFields","htmlFor","itemChildrenWrapper","selectIcon","selectText","iconWrapper","emptyIcon","nameDiv","viewDiv","input","overflowX","flexFlow","direction","styles","left","SmartGeneric","subscribes","subscribed","defaultIcon","Theme","tile","doubleState","showCorner","stateRx","executing","settings","showSettings","editMode","defaultEnabling","lastEnabledChange","val","indicators","workingId","unreachId","lowbatId","maintainId","errorId","directionId","undef","up","down","constructor","componentReady","settingsId","instanceId","onMouseUpBind","onMouseUp","registerHandler","onTileMouseDown","setBackgroundImage","nameStyle","getNameFontSize","enabled","setVisibility","setColorOn","colorOn","tileOn","setColorOff","colorOff","tileOff","doubleSize","setSize","onCollectIds","enumNames","trim","timer","clearTimeout","removeEventListener","passive","capture","onToggleValue","setTimeout","onLongClick","addEventListener","newSettings","onSaveSettings","customSettings","enumSettings","getSettings","user","URLs","enumId","setDelete","saveSettings","decimals","toFixed","titles","strVal","IconDirectionUp","IconDirectionDown","IconDirection","tileIndicator","tileIndicators","unshift","aspect","iconOff","getDefaultIcon","useDefaultIcon","Date","now","stateId","noPointerEvents","styleState","styleName","styleText","tileText2","tileName2","getStateText","tileState2","tileStateOn","tileStateOff","tileText","tileName","tileState","getIcon","pointerEvents","getFirstName","getAdditionalName","toggleEnabled","checkIcon","size","buttonIcon","editIcon","removeIcon","buttonIconRemoved","onMouseDown","tileCorner","getIndicators","wrapContent","getObjectNameCh","channelName","newName","CapitalWords","DialogEditEnums","values","isRefresh","onToggle","ListItemText","primary","edge","deviceName","DeleteFolder","device","setChecked","getTime","deleteFolderAndDeviceCallBack","time","fiveMin","DialogEditFolder","devices","deleteDevice","dataEdit","setDataEdit","arrayObjects","setArrayObjects","newId","setId","setStartTheProcess","getNonEmptyName","idsObject","onCloseLocal","onChangeCopy","dataFolder","newDevices","deleteFolderID","delObjects","newDataEdit","icons","sizeDropZone","DragWrapper","openFolder","backgroundRow","deviceIdx","useRef","useDrag","canDrag","end","monitor","getDropResult","targetId","getTargetIds","didDrop","collect","isDragging","dragRef","setError","useDrop","canDrop","partsId","handlerId","getHandlerId","isOver","drop","hover","dropRef","TableRow","DropWrapper","transition","deviceWrapper","fontStyleId","wrapperTitleAndId","alignSelf","tableIcon","wrapperDevices","wrapperItems","wrapperCloning","wrapperNameAndId","wrapperCheckbox","enumsWrapper","wrapperIconEnumCell","nameEnumCell","backgroundRed","emptyList","enumsStyle","formControlLabel","headerWrapElement","backgroundSilver","RenderNewItemDialog","object","checkDeviceInObjects","DialogImporter","arrayDevice","setArrayDevice","useStateLocal","cloningMethod","setCloningMethod","idsFolder","setSdsFolder","selectFolder","setSelectFolder","checkedSelect","setCheckedSelect","openEdit","setOpenEdit","skipElement","setSkipElement","originalIds","originalId","newArray","selectId","objName","addDevice","arrayDeviceFunction","checkEnumsScip","newObjFolder","renderEnumCell","generateFolders","indexDevice","newDevice","newArrayDevice","getThemeType","indeterminate","indexCurrent","colorSet","colorRead","actionsMapping","turnOn","IconOn","turnOff","setTargetTemperature","IconTemperature","incrementTargetTemperature","IconUp","decrementTargetTemperature","IconDown","setPercentage","IconPercentage","incrementPercentage","decrementPercentage","setColor","IconColor","setColorTemperature","IconBulb","incrementColorTemperature","decrementColorTemperature","getTargetTemperature","IconThermometer","getTemperatureReading","setLockState","IconLock","getLockState","TYPES_MAPPING","level","action","WIDTHS","ALIAS","LINKEDDEVICES","IS_CHROME","navigator","userAgent","vendor","ListDevices","onHashChange","Router","getLocation","dialog","editId","onObjectChanged","loading","updateTimeout","updateListItems","onResize","resizeTimer","windowWidth","innerWidth","idsInEnums","enumObj","funcEnums","roomsEnums","updateEnumsForOneDevice","onObjectsGenerate","expandedIDs","browse","editCreatedId","doNavigate","searchIcon","noEdit","showId","devicesArr","instances","inst","extIcon","importer","linkeddevices","devicesArrLinkeddevices","partsLinkedDevices","arrayParent","deviceObj","cIcon","addToEnum","getObject","removeFromEnum","task","alert","onEditFinished","refresh","somethingChanged","defaultMin","defaultMax","attrs","isLinked","parentType","detectDevices","oldName","oldSmartName","setSmartName","setEnumsOfDevice","sid","mainStateId","renderImporterDialog","showImporterDialog","renderEditFolder","showEditFolder","translated","copyId","deleteId","editEnum","showAddDialog","showConfirmation","message","orderBy","lastChanged","onlyAliases","hideInfo","updating","inputRef","timerChanged","waitForUpdateID","onUpdateBound","onUpdate","SmartDetector","getAdapterInstances","catch","then","noCommon","subscribeObject","unsubscribeObject","getAdapters","getObjects","getEnums","statesCount","usedStates","functionsNames","roomsNames","text","elem","updateState","deviceAllparams","names","ButtonBase","focusRipple","onEditEnum","enumsEdit","focusVisibleClassName","enumsEditFocusVisible","spaceBetween","typeCellNameAndIcon","iconStyleType","childrenFilter","searchStyle","invertColor","WrapperRow","hoverRow","TableCell","colSpan","iconOpen","renderTypeCell","align","buttonsCell","wrapperButton","onCopy","onEdit","emptyBlock","paperTable","Table","stickyHeader","table","TableHead","tableExpandIconCell","tableIconCell","headerCell","tableNameCell","buttonsCellHeader","TableBody","group","newSmartName","copiedDevice","createDevice","forceUpdate","CircularProgress","small","DndProvider","backend","TouchBackend","HTML5Backend","Card","wrapperIcon","viewCategory","emptyBlockFlex","InputLabelProps","shrink","setFilter","InputProps","endAdornment","InputAdornment","emptyClear","wrapperName","themeName","renderDevices","renderMessage","renderEditDialog","renderAddDialog","renderEditEnumDialog","withWidth","column","columnDiv","buttonLinkedDevices","devLineExpand","devLineEnabled","devLineEdit","devLineDelete","devLineName","devLineNumber","editedId","enumLineSubName","devLine","devLineDescription","devLineActions","devLineProgress","channelLineActions","devLineNameBlock","columnHeader","contrastText","devModified","actionIcon","devSubLine","devSubLineName","devSubSubLineName","devSubLineByOn","devSubLineDelete","devSubLineEdit","devSubLineTypeTitle","orderSelector","tableLine","tableSmartName","tableIdCell","tableEditButtonCell","tableGroup","main","tableGroupCell","tableExpandIcon","tableGroupIcon","minHeight","App","extendedProps","bottomButtons","adapterName","translations","require","toggleTheme","currentThemeName","newThemeName","setThemeName","createTheme","selectedTab","loaded","square","elevation","tabContent","onError","onLoad","onLoadConfig","updateNativeValue","renderError","renderSaveCloseButtons","GenericApp","wrapperMenu","wrapperIconHeader","isLocalhost","Boolean","hostname","registerValidSW","swUrl","config","serviceWorker","register","registration","onupdatefound","installingWorker","installing","onstatechange","controller","onSuccess","version","host","Sentry","dsn","integrations","SentryIntegrations","build","onThemeChange","_themeName","getElementById","URL","process","href","origin","fetch","response","contentType","headers","get","status","ready","unregister","reload","checkValidServiceWorker"],"mappings":"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","file":"static/js/main.ae4d4d50.chunk.js","sourcesContent":["/**\r\n * Copyright 2018-2020 bluefox <dogafox@gmail.com>\r\n *\r\n * The MIT License (MIT)\r\n *\r\n * Permission is hereby granted, free of charge, to any person obtaining a copy\r\n * of this software and associated documentation files (the \"Software\"), to deal\r\n * in the Software without restriction, including without limitation the rights\r\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\r\n * copies of the Software, and to permit persons to whom the Software is\r\n * furnished to do so, subject to the following conditions:\r\n *\r\n * The above copyright notice and this permission notice shall be included in\r\n * all copies or substantial portions of the Software.\r\n *\r\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\r\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\r\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\r\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\r\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\r\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\r\n * THE SOFTWARE.\r\n **/\r\n// Version 0.1.6, 2019.08.14\r\n// Keep this file ES5 conform! No const, let, not lambdas => , no ..., no default values for arguments, no let [arg] = abc() and other modern stuff.\r\n\r\n// eslint-disable-next-line\r\n'use strict';\r\n\r\nvar Types = {\r\n    unknown: 'unknown',\r\n\r\n    airCondition: 'airCondition',\r\n    blind: 'blind',\r\n    button: 'button',\r\n    buttonSensor: 'buttonSensor',\r\n    camera: 'camera',\r\n    url: 'url',\r\n    image: 'image',\r\n    dimmer: 'dimmer',\r\n    door: 'door',\r\n    fireAlarm: 'fireAlarm',\r\n    floodAlarm: 'floodAlarm',\r\n    gate: 'gate',\r\n    humidity: 'humidity',\r\n    info: 'info',\r\n    instance: 'instance',\r\n    light: 'light',\r\n    lock: 'lock',\r\n    location: 'location',\r\n    media: 'media',\r\n    motion: 'motion',\r\n    rgb: 'rgb',\r\n    ct: 'ct',\r\n    rgbSingle: 'rgbSingle',\r\n    hue: 'hue',\r\n    slider: 'slider',\r\n    socket: 'socket',\r\n    temperature: 'temperature',\r\n    thermostat: 'thermostat',\r\n    valve: 'valve',\r\n    volume: 'volume',\r\n    vacuumCleaner: 'vacuumCleaner',\r\n    volumeGroup: 'volumeGroup',\r\n    window: 'window',\r\n    windowTilt: 'windowTilt',\r\n    weatherCurrent: 'weatherCurrent',\r\n    weatherForecast: 'weatherForecast',\r\n    warning: 'warning'\r\n};\r\n\r\n// Description of flags\r\n// role - RegEx to detect role\r\n// channelRole - RegEx to detect channel role of state\r\n// ignoreRole - RegEx to ignore some specific roles\r\n// indicator - is it will be shown like small icon or as a value\r\n// type - state type: 'number', 'string' or 'boolean' or array of possible values\r\n// name - own TAG of the state to process it in the logic\r\n// write - if set to true or false, it will be checked the write attribute, if no attribute, so \"false\" will be assumed\r\n// read - if set to true or false, it will be checked the write attribute, if no attribute, so \"true\" will be assumed\r\n// min - type of attribute: number', 'string' or 'boolean'. This attribute must exists in common\r\n// max - type of attribute: number', 'string' or 'boolean'. This attribute must exists in common\r\n// required - if required to detect the pattern as valid\r\n// noSubscribe - no automatic subscription for this state (e.g if write only)\r\n// searchInParent - if this pattern should be search in device too and not only in channel\r\n// enums - function to execute custom category detection\r\n// multiple - if more than one state may have this pattern in channel\r\n// noDeviceDetection - do not search indicators in parent device\r\n// notSingle - this state may belong to more than one tile simultaneously (e.g. volume tile and media with volume)\r\n// inverted - is state of indicator must be inverted\r\n// stateName - regex for state names (IDs). Not suggested\r\n// defaultRole - is for detection irrelevant, but will be used by iobroker.devices.\r\n\r\nfunction ChannelDetector() {\r\n    if (!(this instanceof ChannelDetector)) {\r\n        return new ChannelDetector();\r\n    }\r\n\r\n    var patternWorking   = {role: /^indicator\\.working$/,                 indicator: true,                                            name: 'WORKING',            required: false, defaultRole: 'indicator.working'};\r\n    var patternUnreach   = {role: /^indicator(\\.maintenance)?\\.unreach$/, indicator: true,  type: 'boolean',                          name: 'UNREACH',            required: false, defaultRole: 'indicator.maintenance.unreach'};\r\n    var patternLowbat    = {role: /^indicator(\\.maintenance)?\\.lowbat$|^indicator(\\.maintenance)?\\.battery/,  indicator: true,  type: 'boolean',  name: 'LOWBAT', required: false, defaultRole: 'indicator.maintenance.lowbat'};\r\n    var patternMaintain  = {role: /^indicator\\.maintenance$/,             indicator: true,  type: 'boolean',                          name: 'MAINTAIN',           required: false, defaultRole: 'indicator.maintenance'};\r\n    var patternError     = {role: /^indicator\\.error$/,                   indicator: true,                                            name: 'ERROR',              required: false, defaultRole: 'indicator.error'};\r\n    var patternDirection = {role: /^indicator\\.direction$/,               indicator: true,                                            name: 'DIRECTION',          required: false, defaultRole: 'indicator.direction'};\r\n    var patternReachable = {role: /^indicator\\.reachable$/,               indicator: true,  type: 'boolean',                          name: 'CONNECTED',          required: false, defaultRole: 'indicator.reachable', inverted: true};\r\n\r\n    var patterns = {\r\n        mediaPlayer: {\r\n            // receive the state of player via media.state. Controlling of the player via buttons\r\n            states: [\r\n                // one of\r\n                {role: /^media.state(\\..*)?$/,                               indicator: false,                   type: ['boolean', 'number'], name: 'STATE',    required: true,   defaultRole: 'media.state'},\r\n                // optional\r\n                {role: /^button.play(\\..*)?$|^action.play(\\..*)?$/,          indicator: false,     write: true,  type: 'boolean', name: 'PLAY',     required: false, noSubscribe: true,   defaultRole: 'button.play'},\r\n                {role: /^button.pause(\\..*)?$|^action.pause(\\..*)?$/,        indicator: false,     write: true,  type: 'boolean', name: 'PAUSE',    required: false, noSubscribe: true,   defaultRole: 'button.pause'},\r\n                {role: /^button.stop(\\..*)?$|^action.stop(\\..*)?$/,          indicator: false,     write: true,  type: 'boolean', name: 'STOP',     required: false, noSubscribe: true,   defaultRole: 'button.stop'},\r\n                {role: /^button.next(\\..*)?$|^action.next(\\..*)?$/,          indicator: false,     write: true,  type: 'boolean', name: 'NEXT',     required: false, noSubscribe: true,   defaultRole: 'button.next'},\r\n                {role: /^button.prev(\\..*)?$|^action.prev(\\..*)?$/,          indicator: false,     write: true,  type: 'boolean', name: 'PREV',     required: false, noSubscribe: true,   defaultRole: 'button.prev'},\r\n                {role: /^media.mode.shuffle(\\..*)?$/,   indicator: false,     write: true,  type: 'boolean', name: 'SHUFFLE',  required: false, noSubscribe: true,   defaultRole: 'media.mode.shuffle'},\r\n                {role: /^media.mode.repeat(\\..*)?$/,    indicator: false,     write: true,  type: 'number',  name: 'REPEAT',   required: false, noSubscribe: true,   defaultRole: 'media.mode.repeat'},\r\n                {role: /^media.artist(\\..*)?$/,         indicator: false,     write: false, type: 'string',  name: 'ARTIST',   required: false,   defaultRole: 'media.artist'},\r\n                {role: /^media.album(\\..*)?$/,          indicator: false,     write: false, type: 'string',  name: 'ALBUM',    required: false,   defaultRole: 'media.album'},\r\n                {role: /^media.title(\\..*)?$/,          indicator: false,     write: false, type: 'string',  name: 'TITLE',    required: false,   defaultRole: 'media.title'},\r\n                // one of following\r\n                [\r\n                    {role: /^media.cover$|^media.cover.big$/, indicator: false,     write: false, type: 'string',  name: 'COVER',    required: false, notSingle: true,   defaultRole: 'media.cover'},\r\n                    {role: /^media.cover(\\..*)$/,             indicator: false,     write: false, type: 'string',  name: 'COVER',    required: false, notSingle: true},\r\n                ],\r\n                {role: /^media.duration(\\..*)?$/,       indicator: false,     write: false, type: 'number',  name: 'DURATION', required: false, noSubscribe: true,   defaultRole: 'media.duration', defaultUnit: 'sec'},\r\n                {role: /^media.elapsed(\\..*)?$/,        indicator: false,                   type: 'number',  name: 'ELAPSED',  required: false, noSubscribe: true,   defaultRole: 'media.elapsed', defaultUnit: 'sec'},\r\n                {role: /^media.seek(\\..*)?$/,           indicator: false,     write: true,  type: 'number',  name: 'SEEK',     required: false, noSubscribe: true,   defaultRole: 'media.seek'},\r\n                {role: /^media.track(\\..*)?$/,          indicator: false,                   type: 'string',  name: 'TRACK',    required: false, noSubscribe: true,   defaultRole: 'media.track'},\r\n                {role: /^media.episode(\\..*)?$/,        indicator: false,                   type: 'string',  name: 'EPISODE',  required: false, noSubscribe: true,   defaultRole: 'media.episode'},\r\n                {role: /^media.season(\\..*)?$/,         indicator: false,                   type: 'string',  name: 'SEASON',   required: false, noSubscribe: true,   defaultRole: 'media.season'},\r\n                {role: /^level.volume?$/,               indicator: false,                   type: 'number',  min: 'number', max: 'number', write: true,       name: 'VOLUME',         required: false, notSingle: true, noSubscribe: true,   defaultRole: 'level.volume'},\r\n                {role: /^value.volume?$/,               indicator: false,                   type: 'number',  min: 'number', max: 'number', write: false,      name: 'VOLUME_ACTUAL',  required: false, notSingle: true, noSubscribe: true,   defaultRole: 'value.volume'},\r\n                {role: /^media.mute?$/,                 indicator: false,                   type: 'boolean',                               write: true,       name: 'MUTE',           required: false, notSingle: true, noSubscribe: true,   defaultRole: 'media.mute'},\r\n                // Ignore following states of chromecast\r\n                {stateName: /\\.paused$|\\.playerState$/, indicator: false,                                                                                     name: 'IGNORE',         required: false, multiple: true,  noSubscribe: true},\r\n                patternReachable,\r\n                patternLowbat,\r\n                patternMaintain,\r\n                patternError\r\n            ],\r\n            type: Types.media\r\n        },\r\n        weatherForecast : {\r\n            states: [\r\n                {role: /^weather.icon$|^weather.icon.forecast.0$/,                   indicator: false, type: 'string',  name: 'ICON',          required: true, defaultRole: 'weather.icon.forecast.0'},\r\n                {role: /^value.temperature.min.forecast.0$/,                         indicator: false, type: 'number',  name: 'TEMP_MIN',      required: true, defaultRole: 'value.temperature.min.forecast.0'},\r\n                {role: /^value.temperature.max.forecast.0$/,                         indicator: false, type: 'number',  name: 'TEMP_MAX',      required: true, defaultRole: 'value.temperature.max.forecast.0'},\r\n                // optional\r\n                {role: /^value.precipitation$|^value.precipitation.forecast.0$/,     indicator: false, type: 'number',  name: 'PRECIPITATION_CHANCE',     unit: '%', required: false, defaultRole: 'value.precipitation.forecast.0'},\r\n                {role: /^value.precipitation$|^value.precipitation.forecast.0$/,     indicator: false, type: 'number',  name: 'PRECIPITATION',            unit: 'mm', required: false, defaultRole: 'value.precipitation.forecast.0'},\r\n                {role: /^date$|^date.forecast.0$/,                                   indicator: false, type: 'string',  name: 'DATE',          required: false, defaultRole: 'date.forecast.0'},\r\n                {role: /^dayofweek$|^dayofweek.forecast.0$/,                         indicator: false, type: 'string',  name: 'DOW',           required: false, defaultRole: 'dayofweek.forecast.0'},\r\n                {role: /^weather.state$|^weather.state.forecast.0$/,                 indicator: false, type: 'string',  name: 'STATE',         required: false, defaultRole: 'weather.state.forecast.0'},\r\n                {role: /^value.temperature$|^value.temperature.forecast.0$/,         indicator: false, type: 'number',  name: 'TEMP',          required: false, defaultRole: 'value.temperature.forecast.0'},\r\n                {role: /^value.pressure$/,                                           indicator: false, type: 'number',  name: 'PRESSURE',      required: false, defaultRole: 'weather.icon.forecast.0'},\r\n\r\n                {role: /^value.humidity$|value.humidity.forecast.0$/,                indicator: false, type: 'number',  name: 'HUMIDITY',      required: false, defaultRole: 'value.humidity.forecast.0'},\r\n\r\n                {role: /^value.temperature.windchill$|^value.temperature.windchill.forecast.0$/, indicator: false, type: 'number',  name: 'WIND_CHILL',    required: false, defaultRole: 'value.temperature.windchill.forecast.0'},\r\n                {role: /^value.temperature.feelslike$|^value.temperature.feelslike.forecast.0$/, indicator: false, type: 'number',  name: 'FEELS_LIKE',    required: false, defaultRole: 'value.temperature.feelslike.forecast.0'},\r\n                {role: /^value.speed.wind$|^value.speed.wind.forecast.0$/,           indicator: false, type: 'number',  name: 'WIND_SPEED',    required: false, defaultRole: 'value.speed.wind.forecast.0'},\r\n                {role: /^value.direction.wind$|^value.direction.wind.forecast.0$/,   indicator: false, type: 'number',  name: 'WIND_DIRECTION',required: false, defaultRole: 'value.direction.wind.forecast.0'},\r\n                {role: /^weather.direction.wind$|^weather.direction.wind.forecast.0$/, indicator: false, type: 'string',  name: 'WIND_DIRECTION_STR',required: false, defaultRole: 'weather.direction.wind.forecast.0'},\r\n                {role: /^weather.icon.wind$|^weather.icon.wind.forecast.0$/,         indicator: false, type: 'string',  name: 'WIND_ICON',     required: false, defaultRole: 'weather.icon.wind.forecast.0'},\r\n                {role: /^weather.chart.url$/,                                        indicator: false, type: 'string',  name: 'HISTORY_CHART',   required: false, noSubscribe: true, defaultRole: 'weather.chart.url'},\r\n                {role: /^weather.chart.url.forecast$/,                               indicator: false, type: 'string',  name: 'FORECAST_CHART',  required: false, noSubscribe: true, defaultRole: 'weather.chart.url.forecast'},\r\n                {role: /^location$/,                                                 indicator: false, type: 'string',  name: 'LOCATION',        required: false, multiple: true, defaultRole: 'location'},\r\n\r\n                // other days\r\n                {role: /^weather.icon.forecast.(\\d)$/,                               indicator: false, type: 'string',  name: 'ICON%d',          required: false, searchInParent: true, multiple: true, noSubscribe: true, notSingle: true},\r\n\r\n                {role: /^value.temperature.min.forecast.(\\d)$/,                      indicator: false, type: 'number',  name: 'TEMP_MIN%d',      required: false, searchInParent: true, multiple: true, noSubscribe: true},\r\n                {role: /^value.temperature.max.forecast.(\\d)$/,                      indicator: false, type: 'number',  name: 'TEMP_MAX%d',      required: false, searchInParent: true, multiple: true, noSubscribe: true},\r\n\r\n                {role: /^date.forecast.(\\d)$/,                                       indicator: false, type: 'string',  name: 'DATE%d',          required: false, searchInParent: true, multiple: true, noSubscribe: true},\r\n                {role: /^dayofweek.forecast.(\\d)$/,                                  indicator: false, type: 'string',  name: 'DOW%d',           required: false, searchInParent: true, multiple: true, noSubscribe: true},\r\n                {role: /^weather.state.forecast.(\\d)$/,                              indicator: false, type: 'string',  name: 'STATE%d',         required: false, searchInParent: true, multiple: true, noSubscribe: true},\r\n                {role: /^value.temperature.forecast.(\\d)$/,                          indicator: false, type: 'number',  name: 'TEMP%d',          required: false, searchInParent: true, multiple: true, noSubscribe: true},\r\n\r\n                {role: /^value.humidity.forecast.(\\d)$/,                             indicator: false, type: 'number',  name: 'HUMIDITY%d',      required: false, searchInParent: true, multiple: true, noSubscribe: true},\r\n                {role: /^value.humidity.max.forecast.(\\d)$/,                         indicator: false, type: 'number',  name: 'HUMIDITY_MAX%d',  required: false, searchInParent: true, multiple: true, noSubscribe: true},\r\n\r\n                {role: /^value.precipitation.forecast.(\\d)$/,                        indicator: false, type: 'number',  unit: '%', name: 'PRECIPITATION_CHANCE%d', required: false, searchInParent: true, multiple: true, noSubscribe: true},\r\n                {role: /^value.precipitation.forecast.(\\d)$/,                        indicator: false, type: 'number',  unit: 'mm', name: 'PRECIPITATION%d', required: false, searchInParent: true, multiple: true, noSubscribe: true},\r\n\r\n                {role: /^value.speed.wind.forecast.(\\d)$/,                           indicator: false, type: 'number',  name: 'WIND_SPEED%d',    required: false, searchInParent: true, multiple: true, noSubscribe: true},\r\n                {role: /^value.direction.wind.forecast.(\\d)$/,                       indicator: false, type: 'number',  name: 'WIND_DIRECTION%d',required: false, searchInParent: true, multiple: true, noSubscribe: true},\r\n                {role: /^weather.direction.wind.forecast.(\\d)$/,                     indicator: false, type: 'string',  name: 'WIND_DIRECTION_STR%d',required: false, searchInParent: true, multiple: true, noSubscribe: true},\r\n                {role: /^weather.icon.wind.forecast.(\\d)$/,                          indicator: false, type: 'string',  name: 'WIND_ICON%d',     required: false, searchInParent: true, multiple: true, noSubscribe: true},\r\n            ],\r\n            type: Types.weatherForecast\r\n        },\r\n        rgb: {\r\n            states: [\r\n                {role: /^level\\.color\\.red$/,                             indicator: false, type: 'number',  write: true,           name: 'RED',           required: true,   defaultRole: 'level.color.red'},\r\n                {role: /^level\\.color\\.green$/,                           indicator: false, type: 'number',  write: true,           name: 'GREEN',         required: true,   defaultRole: 'level.color.green'},\r\n                {role: /^level\\.color\\.blue$/,                            indicator: false, type: 'number',  write: true,           name: 'BLUE',          required: true,   defaultRole: 'level.color.blue'},\r\n                {role: /^level\\.color\\.white$/,                           indicator: false, type: 'number',  write: true,           name: 'WHITE',         required: false,  defaultRole: 'level.color.white'},\r\n                {role: /^level\\.dimmer$/,                                 indicator: false, type: 'number',  write: true,           name: 'DIMMER',        required: false,  defaultRole: 'level.dimmer', defaultUnit: '%'},\r\n                {role: /^level\\.brightness$/,                             indicator: false, type: 'number',  write: true,           name: 'BRIGHTNESS',    required: false},\r\n                {role: /^level\\.color\\.saturation$/,                      indicator: false, type: 'number',  write: true,           name: 'SATURATION',    required: false},\r\n                {role: /^level\\.color\\.temperature$/,                     indicator: false, type: 'number',  write: true,           name: 'TEMPERATURE',   required: false,  defaultRole: 'level.color.temperature', defaultUnit: '°K'},\r\n                {role: /^switch\\.light$/,                                 indicator: false, type: 'boolean', write: true,           name: 'ON',            required: false,  defaultRole: 'switch.light'},\r\n                {role: /^switch$/,                                        indicator: false, type: 'boolean', write: true,           name: 'ON',            required: false,  defaultRole: 'switch.light'},\r\n                {role: /^state(\\.light)?$/,                               indicator: false, type: 'boolean', write: false,          name: 'ON_ACTUAL',     required: false,  defaultRole: 'state.light'},\r\n                patternWorking,\r\n                patternUnreach,\r\n                patternLowbat,\r\n                patternMaintain,\r\n                patternError\r\n            ],\r\n            type: Types.rgb\r\n        },\r\n        // remove it when all adapters fixed (2018.08.15) r=>red, g=>green, b=>blue\r\n        rgbOld: {\r\n            states: [\r\n                {role: /^level\\.color\\.r$/,                               indicator: false, type: 'number',  write: true,           name: 'RED',           required: true},\r\n                {role: /^level\\.color\\.g$/,                               indicator: false, type: 'number',  write: true,           name: 'GREEN',         required: true},\r\n                {role: /^level\\.color\\.b$/,                               indicator: false, type: 'number',  write: true,           name: 'BLUE',          required: true},\r\n                {role: /^level\\.dimmer$/,                                 indicator: false, type: 'number',  write: true,           name: 'DIMMER',        required: false},\r\n                {role: /^level\\.brightness$/,                             indicator: false, type: 'number',  write: true,           name: 'BRIGHTNESS',    required: false},\r\n                {role: /^level\\.color\\.saturation$/,                      indicator: false, type: 'number',  write: true,           name: 'SATURATION',    required: false},\r\n                {role: /^level\\.color\\.temperature$/,                     indicator: false, type: 'number',  write: true,           name: 'TEMPERATURE',   required: false,  defaultUnit: '°K'},\r\n                {role: /^switch\\.light$/,                                 indicator: false, type: 'boolean', write: true,           name: 'ON',            required: false,  defaultRole: 'switch.light'},\r\n                {role: /^switch$/,                                        indicator: false, type: 'boolean', write: true,           name: 'ON',            required: false},\r\n                patternWorking,\r\n                patternUnreach,\r\n                patternLowbat,\r\n                patternMaintain,\r\n                patternError\r\n            ],\r\n            type: Types.rgb\r\n        },\r\n        rgbSingle: {\r\n            states: [\r\n                {role: /^level\\.color\\.rgb$/,                             indicator: false, type: 'string',  write: true,           name: 'RGB',           required: true,   defaultRole: 'level.color.rgb'},\r\n                {role: /^level\\.dimmer$/,                                 indicator: false, type: 'number',  write: true,           name: 'DIMMER',        required: false,  defaultRole: 'level.dimmer'},\r\n                {role: /^level\\.brightness$/,                             indicator: false, type: 'number',  write: true,           name: 'BRIGHTNESS',    required: false, defaultUnit: '%'},\r\n                {role: /^level\\.color\\.saturation$/,                      indicator: false, type: 'number',  write: true,           name: 'SATURATION',    required: false},\r\n                {role: /^level\\.color\\.temperature$/,                     indicator: false, type: 'number',  write: true,           name: 'TEMPERATURE',   required: false,  defaultRole: 'level.color.temperature', defaultUnit: '°K'},\r\n                {role: /^switch\\.light$/,                                 indicator: false, type: 'boolean', write: true,           name: 'ON',            required: false,  defaultRole: 'switch.light'},\r\n                {role: /^switch$/,                                        indicator: false, type: 'boolean', write: true,           name: 'ON',            required: false,  defaultRole: 'switch.light'},\r\n                {role: /^state(\\.light)?$/,                               indicator: false, type: 'boolean', write: false,          name: 'ON_ACTUAL',     required: false,  defaultRole: 'state.light'},\r\n                patternWorking,\r\n                patternUnreach,\r\n                patternLowbat,\r\n                patternMaintain,\r\n                patternError\r\n            ],\r\n            type: Types.rgbSingle\r\n        },\r\n        hue: {\r\n            states: [\r\n                {role: /^level\\.color\\.hue$/,                             indicator: false, type: 'number',  write: true,           name: 'HUE',           required: true,  defaultRole: 'level.color.hue', defaultUnit: '°'},\r\n                {role: /^level\\.dimmer$/,                                 indicator: false, type: 'number',  write: true,           name: 'DIMMER',        required: false, searchInParent: true, defaultRole: 'level.dimmer', defaultUnit: '°C'},\r\n                {role: /^level\\.brightness$/,                             indicator: false, type: 'number',  write: true,           name: 'BRIGHTNESS',    required: false},\r\n                {role: /^level\\.color\\.saturation$/,                      indicator: false, type: 'number',  write: true,           name: 'SATURATION',    required: false},\r\n                {role: /^level\\.color\\.temperature$/,                     indicator: false, type: 'number',  write: true,           name: 'TEMPERATURE',   required: false, defaultRole: 'level.color.temperature', defaultUnit: '°K'},\r\n                {role: /^switch\\.light$/,                                 indicator: false, type: 'boolean', write: true,           name: 'ON',            required: false, defaultRole: 'switch.light'},\r\n                {role: /^switch$/,                                        indicator: false, type: 'boolean', write: true,           name: 'ON',            required: false, defaultRole: 'switch.light'},\r\n                {role: /^state(\\.light)?$/,                               indicator: false, type: 'boolean', write: false,          name: 'ON_ACTUAL',     required: false,  defaultRole: 'state.light'},\r\n                patternWorking,\r\n                patternUnreach,\r\n                patternLowbat,\r\n                patternMaintain,\r\n                patternError\r\n            ],\r\n            type: Types.hue\r\n        },\r\n        ct: {\r\n            states: [\r\n                {role: /^level\\.color\\.temperature$/,                     indicator: false, type: 'number',  write: true,           name: 'TEMPERATURE',   required: true,  defaultRole: 'level.color.temperature', defaultUnit: '°K'},\r\n                {role: /^level\\.dimmer$/,                                 indicator: false, type: 'number',  write: true,           name: 'DIMMER',        required: false, defaultRole: 'level.dimmer', defaultUnit: '%'},\r\n                {role: /^level\\.brightness$/,                             indicator: false, type: 'number',  write: true,           name: 'BRIGHTNESS',    required: false},\r\n                {role: /^level\\.color\\.saturation$/,                      indicator: false, type: 'number',  write: true,           name: 'SATURATION',    required: false},\r\n                {role: /^switch\\.light$/,                                 indicator: false, type: 'boolean', write: true,           name: 'ON',            required: false, defaultRole: 'switch.light'},\r\n                {role: /^switch$/,                                        indicator: false, type: 'boolean', write: true,           name: 'ON',            required: false, defaultRole: 'switch.light'},\r\n                patternWorking,\r\n                patternUnreach,\r\n                patternLowbat,\r\n                patternMaintain,\r\n                patternError\r\n            ],\r\n            type: Types.ct\r\n        },\r\n        warning: {\r\n            states: [\r\n                {role: /^value\\.warning$/,                                indicator: false,                  name: 'LEVEL',         required: true,  defaultRole: 'value.warning'},\r\n                // optional\r\n                {role: /^weather\\.title\\.short$/,                         indicator: false, type: 'string',  name: 'TITLE',         required: false, defaultRole: 'weather.title.short'},\r\n                {role: /^weather\\.title$/,                                indicator: false, type: 'string',  name: 'INFO',          required: false, defaultRole: 'weather.title'},\r\n                {role: /^date\\.start$/,                                   indicator: false, type: 'string',  name: 'START',         required: false, defaultRole: 'date.start'},\r\n                {role: /^date\\.end$/,                                     indicator: false, type: 'string',  name: 'END',           required: false, defaultRole: 'date.end'},\r\n                {role: /^date$/,                                          indicator: false, type: 'string',  name: 'START',         required: false},\r\n                {role: /^weather\\.chart\\.url/,                            indicator: false, type: 'string',  name: 'ICON',          required: false, defaultRole: 'weather.chart.url'},\r\n\r\n                // For detailed screen\r\n                {role: /^weather\\.state$/,                                indicator: false, type: 'string',  name: 'DESC',          required: false, noSubscribe: true, defaultRole: 'weather.state'},\r\n            ],\r\n            type: Types.warning\r\n        },\r\n        // most full description could be found here: https://yandex.ru/dev/dialogs/alice/doc/smart-home/concepts/device-type-thermostat-ac-docpage/\r\n        airCondition: {\r\n            states: [\r\n                {role: /temperature(\\..*)?$/,          indicator: false,     write: true,  type: 'number',                                                    name: 'SET',                required: true,  defaultRole: 'level.temperature',     defaultUnit: '°C'},\r\n                // AUTO, COOL, HEAT, ECO, OFF, DRY, FAN_ONLY\r\n                {role: /thermostat$/,                  indicator: false,     write: true,  type: 'number',    searchInParent: true,                           name: 'MODE',               required: true,  defaultRole: 'level.mode.thermostat', defaultStates: {0: 'OFF', 1: 'AUTO', 2: 'COOL', 3: 'HEAT', 4: 'ECO', 5: 'FAN_ONLY', 6: 'DRY'}},\r\n                // optional\r\n                {role: /speed\\.fan$/,                  indicator: false,     write: true,  type: 'number',                                                    name: 'SPEED',              required: false, defaultRole: 'level.mode.fan',        defaultStates: {0: 'AUTO', 1: 'HIGH', 2: 'LOW', 3: 'MEDIUM', 4: 'QUIET', 5: 'TURBO'}},\r\n                {role: /^switch\\.power$/,              indicator: false,     write: true,  type: ['boolean', 'number'],   searchInParent: true,               name: 'POWER',              required: false, defaultRole: 'switch.power'},\r\n                {role: /^switch$/,                     indicator: false,     write: true,  type: 'boolean',   searchInParent: true,                           name: 'POWER',              required: false},\r\n                {role: /temperature(\\..*)?$/,          indicator: false,     write: false, type: 'number',    searchInParent: true,                           name: 'ACTUAL',             required: false, defaultRole: 'value.temperature',     defaultUnit: '°C'},\r\n                {role: /humidity(\\..*)?$/,             indicator: false,     write: false, type: 'number',    searchInParent: true,                           name: 'HUMIDITY',           required: false, defaultRole: 'value.humidity',        defaultUnit: '%'},\r\n                {role: /^switch\\.boost(\\..*)?$/,       indicator: false,     write: true,  type: ['boolean', 'number'],   searchInParent: true,               name: 'BOOST',              required: false, defaultRole: 'switch.boost'},\r\n                {role: /swing$/,                       indicator: false,     write: true,  type: 'number',    searchInParent: true,                           name: 'SWING',              required: false, defaultRole: 'level.mode.swing',      defaultStates: {0: 'AUTO', 1: 'HORIZONTAL', 2: 'STATIONARY', 3: 'VERTICAL'}},\r\n                patternUnreach,\r\n                patternMaintain,\r\n                patternError\r\n            ],\r\n            type: Types.airCondition\r\n        },\r\n        thermostat: {\r\n            states: [\r\n                {role: /temperature(\\..*)?$/,          indicator: false,     write: true,  type: 'number',                                                    name: 'SET',                required: true,  defaultRole: 'level.temperature', defaultUnit: '°C'},\r\n                // optional\r\n                {role: /temperature(\\..*)?$/,          indicator: false,     write: false, type: 'number',    searchInParent: true,                           name: 'ACTUAL',             required: false, defaultRole: 'value.temperature', defaultUnit: '°C'},\r\n                {role: /humidity(\\..*)?$/,             indicator: false,     write: false, type: 'number',    searchInParent: true,                           name: 'HUMIDITY',           required: false, defaultRole: 'value.humidity', defaultUnit: '%'},\r\n                {role: /^switch(\\.mode)?\\.boost(\\..*)?$/, indicator: false,  write: true,  type: ['boolean', 'number'],   searchInParent: true,               name: 'BOOST',              required: false, defaultRole: 'switch.mode.boost'},\r\n                {role: /^switch\\.power$/,              indicator: false,     write: true,  type: ['boolean', 'number'],   searchInParent: true,               name: 'POWER',              required: false, defaultRole: 'switch.power'},\r\n                {role: /^switch(\\.mode)?\\.party$/,     indicator: false,     write: true,  type: ['boolean', 'number'],   searchInParent: true,               name: 'PARTY',              required: false, defaultRole: 'switch.mode.party'},\r\n                {role: /^switch$/,                     indicator: false,     write: true,  type: 'boolean',   searchInParent: true,                           name: 'POWER',              required: false},\r\n                {role: /^level(\\.mode)?\\.thermostat$/, indicator: false,     write: true,  type: 'number',    searchInParent: true,                           name: 'MODE',               required: false, defaultRole: 'level.mode.thermostat', defaultStates: {0: 'AUTO', 1: 'MANUAL'}},\r\n                patternWorking,\r\n                patternUnreach,\r\n                patternLowbat,\r\n                patternMaintain,\r\n                patternError\r\n            ],\r\n            type: Types.thermostat\r\n        },\r\n        vacuumCleaner: {\r\n            states: [\r\n                {role: /^switch\\.power$/,              indicator: false,     write: true,  type: ['boolean', 'number'],   searchInParent: true,               name: 'POWER',              required: true,  defaultRole: 'switch.power'},\r\n                // AUTO, ECO, EXPRESS, NORMAL, QUIET\r\n                {role: /mode\\.cleanup$/,               indicator: false,     write: true,  type: 'number',                                                    name: 'MODE',               required: true,  defaultRole: 'level.mode.cleanup', defaultStates: {0: 'AUTO', 1: 'NORMAL', 2: 'QUIET', 3: 'ECO', 4: 'EXPRESS'}},\r\n                // optional\r\n                {role: /mode\\.work$/,                  indicator: false,     write: true,  type: 'number',                                                    name: 'WORK_MODE',          required: false, defaultRole: 'level.mode.work',    defaultStates: {0: 'AUTO', 1: 'FAST', 2: 'MEDIUM', 3: 'SLOW', 4: 'TURBO'}},\r\n                {role: /^value\\.water$/,               indicator: false,     write: true,  type: 'number',               unit: '%',                           name: 'WATER',              required: false, defaultRole: 'value.water', defaultUnit: '%'},\r\n                {role: /^value\\.waste$/,               indicator: false,     write: true,  type: 'number',               unit: '%',                           name: 'WASTE',              required: false, defaultRole: 'value.waste', defaultUnit: '%'},\r\n                {role: /^value\\.battery$/,             indicator: false,     write: true,  type: 'number',               unit: '%',                           name: 'BATTERY',            required: false, defaultRole: 'value.battery', defaultUnit: '%'},\r\n                {role: /^value\\.state$/,               indicator: false,     write: true,  type: ['number', 'string'],                                        name: 'STATE',              required: false, defaultRole: 'value.state'},\r\n                {role: /^switch\\.pause$/,              indicator: false,     write: true,  type: 'boolean',               searchInParent: true,               name: 'PAUSE',              required: false, defaultRole: 'switch.pause'},\r\n                {role: /^indicator(\\.maintenance)?\\.waste$|^indicator(\\.alarm)?\\.waste/,  indicator: true,  type: 'boolean',                                  name: 'WASTE_ALARM',        required: false, defaultRole: 'indicator.maintenance.waste'},\r\n                {role: /^indicator(\\.maintenance)?\\.water$|^indicator(\\.alarm)?\\.water/,  indicator: true,  type: 'boolean',                                  name: 'WATER_ALARM',        required: false, defaultRole: 'indicator.maintenance.water'},\r\n                patternUnreach,\r\n                patternLowbat,\r\n                patternMaintain,\r\n                patternError\r\n            ],\r\n            type: Types.vacuumCleaner\r\n        },\r\n        blinds: {\r\n            states: [\r\n                {role: /^level(\\.blind)?$/,                   indicator: false, type: 'number',  write: true, enums: roleOrEnumBlind, name: 'SET',                 required: true, defaultRole: 'level.blind', defaultUnit: '%'},\r\n                // optional\r\n                {role: /^value(\\.blind)?$/,                   indicator: false, type: 'number',               enums: roleOrEnumBlind, name: 'ACTUAL',              required: false, defaultRole: 'value.blind', defaultUnit: '%'},\r\n                {role: /^button\\.stop$|^action\\.stop$/,       indicator: false, type: 'boolean', write: true, enums: roleOrEnumBlind, name: 'STOP',                required: false, noSubscribe: true, defaultRole: 'button.stop'},\r\n                patternDirection,\r\n                patternWorking,\r\n                patternUnreach,\r\n                patternLowbat,\r\n                patternMaintain,\r\n                patternError\r\n            ],\r\n            type: Types.blind\r\n        },\r\n        gate: {\r\n            states: [\r\n                {role: /^switch(\\.gate)?$/,                   indicator: false, type: 'boolean',  write: true, enums: roleOrEnumGate, name: 'SET',                 required: true, defaultRole: 'switch.gate'},\r\n                // optional\r\n                {role: /^value(\\.position)?|^value(\\.gate)?$/,indicator: false, type: 'number',                enums: roleOrEnumGate,  name: 'ACTUAL',             required: false, defaultRole: 'value.blind', defaultUnit: '%'},\r\n                {role: /^button\\.stop$|^action\\.stop$/,       indicator: false, type: 'boolean', write: true,  enums: roleOrEnumGate,  name: 'STOP',               required: false, noSubscribe: true, defaultRole: 'button.stop'},\r\n                patternDirection,\r\n                patternWorking,\r\n                patternUnreach,\r\n                patternMaintain,\r\n                patternError\r\n            ],\r\n            type: Types.gate\r\n        },\r\n        weatherCurrent: {\r\n            states: [\r\n                {role: /^value(\\.temperature)?$/,                     indicator: false, type: 'number',                name: 'ACTUAL',                                      required: true, defaultRole: 'value.temperature', defaultUnit: '°C'},\r\n                {role: /^weather\\.icon$/,                             indicator: false,                                name: 'ICON',                                        required: true, defaultRole: 'weather.icon'},\r\n                // optional\r\n                {role: /^value\\.precipitation\\.chance$/,              indicator: false, type: 'number',                name: 'PRECIPITATION_CHANCE',                        defaultRole: 'value.precipitation.chance', defaultUnit: '%'},\r\n                {role: /^value\\.precipitation\\.type$/,                indicator: false, type: 'number',                name: 'PRECIPITATION_TYPE',                          defaultRole: 'value.precipitation.type', defaultStates: {0: 'NO', 1: 'RAIN', 2: 'SNOW', 3: 'HAIL'}},\r\n                {role: /^value\\.pressure$/,                           indicator: false, type: 'number',                name: 'PRESSURE',                                    defaultRole: 'value.pressure', defaultUnit: 'mbar'},\r\n                {role: /^value\\.pressure\\.tendency$/,                 indicator: false, type: 'string',                name: 'PRESSURE_TENDENCY',                           defaultRole: 'value.pressure.tendency'},\r\n                {role: /^value\\.temperature\\.windchill$/,             indicator: false, type: 'number',                name: 'REAL_FEEL_TEMPERATURE',                       defaultRole: 'value.temperature.windchill', defaultUnit: '°C'},\r\n                {role: /^value.humidity$/,                            indicator: false, type: 'number',                name: 'HUMIDITY',                                    defaultRole: 'value.humidity', defaultUnit: '%'},\r\n                {role: /^value.uv$/,                                  indicator: false, type: 'number',                name: 'UV',                                          defaultRole: 'value.uv'},\r\n                {role: /^weather\\.state$/,                            indicator: false, type: 'string',                name: 'WEATHER',                                     defaultRole: 'weather.state'},\r\n                {role: /^value\\.direction\\.wind$/,                    indicator: false, type: 'string',                name: 'WIND_DIRECTION',                              defaultRole: 'value.direction.wind', defaultUnit: '°'},\r\n                {role: /^value\\.speed\\.wind\\.gust$/,                  indicator: false, type: 'number',                name: 'WIND_GUST',                                   defaultRole: 'value.speed.wind.gust', defaultUnit: 'km/h'},\r\n                {role: /^value\\.speed\\.wind$/,                        indicator: false, type: 'number',                name: 'WIND_SPEED',                                  defaultRole: 'value.speed.wind$', defaultUnit: 'km/h'},\r\n                patternLowbat,\r\n                patternUnreach,\r\n                patternMaintain,\r\n                patternError\r\n            ],\r\n            type: Types.weatherCurrent\r\n        },\r\n        camera: {\r\n            states: [\r\n                {role: /^camera(\\.\\w+)?$/,                                        indicator: false, type: 'file',     name: 'FILE',                           required: true, defaultRole: 'camera'},\r\n                // optional\r\n                {role: /^switch(\\.camera)?\\.autofocus$/,                          indicator: false, type: 'boolean',  write: true,  name: 'AUTOFOCUS',        required: false, defaultRole: 'switch.camera.autofocus'},\r\n                {role: /^switch(\\.camera)?\\.autowhitebalance$/,                   indicator: false, type: 'boolean',  write: true,  name: 'AUTOWHITEBALANCE', required: false, defaultRole: 'switch.camera.autowhitebalance'},\r\n                {role: /^switch(\\.camera)?\\.brightness$/,                         indicator: false, type: 'boolean',  write: true,  name: 'BRIGHTNESS',       required: false, defaultRole: 'switch.camera.brightness'},\r\n                {role: /^switch(\\.camera)?\\.nightmode$/,                          indicator: false, type: 'boolean',  write: true,  name: 'NIGHTMODE',        required: false, defaultRole: 'switch.camera.nightmode'},\r\n                {role: /^level(\\.camera)?\\.position$|^level(\\.camera)?(\\.ptz)$/,  indicator: false, type: 'number',   write: true,  name: 'PTZ',              required: false, defaultRole: 'level.camera.position'},\r\n                patternUnreach,\r\n                patternLowbat,\r\n                patternMaintain,\r\n                patternError\r\n            ],\r\n            type: Types.camera\r\n        },\r\n        lock: {\r\n            states: [\r\n                {role: /^switch\\.lock$/,                      indicator: false, type: 'boolean',  write: true,              name: 'SET',                 required: true, defaultRole: 'switch.lock'},\r\n                // optional\r\n                {role: /^state$/,                             indicator: false, type: 'boolean',  write: false,             name: 'ACTUAL',              required: false, defaultRole: 'state'},\r\n                {                                             indicator: false, type: 'boolean',  write: true, read: false, name: 'OPEN',                required: false, noSubscribe: true, defaultRole: 'button'},\r\n                patternDirection,\r\n                patternWorking,\r\n                patternUnreach,\r\n                patternLowbat,\r\n                patternMaintain,\r\n                patternError\r\n            ],\r\n            type: Types.lock\r\n        },\r\n        motion: {\r\n            states: [\r\n                {role: /^state\\.motion$|^sensor\\.motion$/,                   indicator: false, type: 'boolean', name: 'ACTUAL',     required: true, defaultRole: 'sensor.motion'},\r\n                // optional\r\n                {role: /brightness$/,                                        indicator: false, type: 'number',  name: 'SECOND',     required: false, defaultRole: 'value.brightness', defaultUnit: 'lux'},\r\n                patternUnreach,\r\n                patternLowbat,\r\n                patternMaintain,\r\n                patternError\r\n            ],\r\n            type: Types.motion\r\n        },\r\n        window: {\r\n            states: [\r\n                {role: /^state(\\.window)?$|^sensor(\\.window)?/,                   indicator: false, type: 'boolean', enums: roleOrEnumWindow, name: 'ACTUAL',     required: true, defaultRole: 'sensor.window'},\r\n                // optional\r\n                patternUnreach,\r\n                patternLowbat,\r\n                patternMaintain,\r\n                patternError\r\n            ],\r\n            type: Types.window\r\n        },\r\n        windowTilt: {\r\n            states: [\r\n                {role: /^state?$|^value(\\.window)?$/,                             indicator: false, type: 'number',  enums: roleOrEnumWindow, name: 'ACTUAL',     required: true, defaultRole: 'value.window'},\r\n                // optional\r\n                patternUnreach,\r\n                patternLowbat,\r\n                patternMaintain,\r\n                patternError\r\n            ],\r\n            type: Types.windowTilt\r\n        },\r\n        fireAlarm: {\r\n            states: [\r\n                {role: /^state(\\.alarm)?\\.fire$|^sensor(\\.alarm)?\\.fire/,                        indicator: false, type: 'boolean', name: 'ACTUAL',     required: true, channelRole: /^sensor(\\.alarm)?\\.fire$/, defaultRole: 'sensor.alarm.fire'},\r\n                // optional\r\n                patternUnreach,\r\n                patternLowbat,\r\n                patternMaintain,\r\n                patternError\r\n            ],\r\n            type: Types.fireAlarm\r\n        },\r\n        floodAlarm: {\r\n            states: [\r\n                {role: /^state(\\.alarm)?\\.flood$|^sensor(\\.alarm)?\\.flood/,                        indicator: false, type: 'boolean', name: 'ACTUAL',     required: true, channelRole: /^sensor(\\.alarm)?\\.flood$/, defaultRole: 'sensor.alarm.flood'},\r\n                // optional\r\n                patternUnreach,\r\n                patternLowbat,\r\n                patternMaintain,\r\n                patternError\r\n            ],\r\n            type: Types.floodAlarm\r\n        },\r\n        door: {\r\n            states: [\r\n                {role: /^state?$|^state(\\.door)?$|^sensor(\\.door)?/,              indicator: false, type: 'boolean', write: false, enums: roleOrEnumDoor, name: 'ACTUAL',     required: true, defaultRole: 'sensor.door'},\r\n                // optional\r\n                patternUnreach,\r\n                patternLowbat,\r\n                patternMaintain,\r\n                patternError\r\n            ],\r\n            type: Types.door\r\n        },\r\n        dimmer: {\r\n            states: [\r\n                {role: /^level(\\.dimmer)?$|^level\\.brightness$/, indicator: false, type: 'number',  write: true,       enums: roleOrEnumLight, name: 'SET',        required: true, defaultRole: 'level.dimmer', ignoreRole: /^level\\.dimspeed$/, defaultUnit: '%'},\r\n                // optional\r\n                {role: /^value(\\.dimmer)?$/,                   indicator: false, type: 'number',  write: false,      enums: roleOrEnumLight, name: 'ACTUAL',      required: false, defaultRole: 'value.dimmer', defaultUnit: '%'},\r\n                {role: /^switch(\\.light)?$|^state$/,           indicator: false, type: 'boolean', write: true,       enums: roleOrEnumLight, name: 'ON_SET',      required: false, defaultRole: 'switch.light'},\r\n                {role: /^switch(\\.light)?$|^state$/,           indicator: false, type: 'boolean', write: false,      enums: roleOrEnumLight, name: 'ON_ACTUAL',   required: false, defaultRole: 'switch.light'},\r\n                patternWorking,\r\n                patternUnreach,\r\n                patternLowbat,\r\n                patternMaintain,\r\n                patternError\r\n            ],\r\n            type: Types.dimmer\r\n        },\r\n        light: {\r\n            states: [\r\n                {role: /^switch(\\.light)?$|^state$/,           indicator: false, type: 'boolean', write: true,       enums: roleOrEnumLight, name: 'SET',         required: true,  defaultRole: 'switch.light'},\r\n                // optional\r\n                {role: /^switch(\\.light)?$|^state$/,           indicator: false, type: 'boolean', write: false,      enums: roleOrEnumLight, name: 'ACTUAL',      required: false, defaultRole: 'switch.light'},\r\n                patternWorking,\r\n                patternUnreach,\r\n                patternLowbat,\r\n                patternMaintain,\r\n                patternError\r\n            ],\r\n            type: Types.light\r\n        },\r\n        volume: {\r\n            states: [\r\n                {role: /^level\\.volume$/,                   indicator: false, type: 'number',  min: 'number', max: 'number', write: true,       name: 'SET',         required: true,   defaultRole: 'level.volume'},\r\n                // optional\r\n                {role: /^value\\.volume$/,                   indicator: false, type: 'number',  min: 'number', max: 'number', write: false,      name: 'ACTUAL',      required: false,  defaultRole: 'value.volume'},\r\n                {role: /^media\\.mute$/,                     indicator: false, type: 'boolean',                               write: true,       name: 'MUTE',        required: false,  defaultRole: 'media.mute'},\r\n                patternWorking,\r\n                patternUnreach,\r\n                patternLowbat,\r\n                patternMaintain,\r\n                patternError\r\n            ],\r\n            type: Types.volume\r\n        },\r\n        location_one: {\r\n            states: [\r\n                {role: /^value\\.gps$/,                             indicator: false, type: 'string',  write: false,      name: 'GPS',           required: true,  defaultRole: 'value.gps'},\r\n                // optional\r\n                {role: /^value\\.gps\\.elevation$/,                  indicator: false, type: 'number',  write: false,      name: 'ELEVATION',     required: false,  defaultRole: 'value.gps.elevation'},\r\n                {role: /^value\\.radius$|value\\.gps\\.radius$/,      indicator: false, type: 'number',  write: false,      name: 'RADIUS',        required: false,  defaultRole: 'value.gps.radius'},\r\n                {role: /^value\\.accuracy$|^value\\.gps\\.accuracy$/, indicator: false, type: 'number',  write: false,      name: 'ACCURACY',      required: false,  defaultRole: 'value.gps.accuracy'},\r\n                patternUnreach,\r\n                patternLowbat,\r\n                patternMaintain,\r\n                patternError\r\n            ],\r\n            type: Types.location\r\n        },\r\n        location: {\r\n            states: [\r\n                {role: /^value\\.gps\\.longitude$/,                  indicator: false, type: 'number',  write: false,      name: 'LONGITUDE',     required: true,  defaultRole: 'value.gps.longitude', defaultUnit: '°'},\r\n                {role: /^value\\.gps\\.latitude$/,                   indicator: false, type: 'number',  write: false,      name: 'LATITUDE',      required: true,  defaultRole: 'value.gps.latitude', defaultUnit: '°'},\r\n                // optional\r\n                {role: /^value\\.gps\\.elevation$/,                  indicator: false, type: 'number',  write: false,      name: 'ELEVATION',     required: false,  defaultRole: 'value.gps.elevation'},\r\n                {role: /^value\\.radius$|value\\.gps\\.radius$/,      indicator: false, type: 'number',  write: false,      name: 'RADIUS',        required: false,  defaultRole: 'value.gps.radius'},\r\n                {role: /^value\\.accuracy$|^value\\.gps\\.accuracy$/, indicator: false, type: 'number',  write: false,      name: 'ACCURACY',      required: false,  defaultRole: 'value.gps.accuracy'},\r\n                patternUnreach,\r\n                patternLowbat,\r\n                patternMaintain,\r\n                patternError\r\n            ],\r\n            type: Types.location\r\n        },\r\n        volumeGroup: {\r\n            states: [\r\n                {role: /^level\\.volume\\.group?$/,            indicator: false, type: 'number',  min: 'number', max: 'number', write: true,       name: 'SET',         required: true,  defaultRole: 'level.volume.group'},\r\n                {role: /^value\\.volume\\.group$/,             indicator: false, type: 'number',  min: 'number', max: 'number', write: false,      name: 'ACTUAL',      required: false, defaultRole: 'value.volume.group'},\r\n                {role: /^media\\.mute\\.group$/,               indicator: false, type: 'boolean',                               write: true,       name: 'MUTE',        required: false, defaultRole: 'media.mute.group'},\r\n                patternWorking,\r\n                patternUnreach,\r\n                patternLowbat,\r\n                patternMaintain,\r\n                patternError\r\n            ],\r\n            type: Types.volumeGroup\r\n        },\r\n        levelSlider: {\r\n            states: [\r\n                {role: /^level(\\..*)?$/,                   indicator: false, type: 'number',  min: 'number', max: 'number', write: true,       name: 'SET',         required: true, defaultRole: 'level', defaultUnit: '%'},\r\n                {role: /^value(\\..*)?$/,                   indicator: false, type: 'number',  min: 'number', max: 'number', write: false,      name: 'ACTUAL',      required: false, defaultRole: 'value'},\r\n                patternWorking,\r\n                patternUnreach,\r\n                patternLowbat,\r\n                patternMaintain,\r\n                patternError\r\n            ],\r\n            type: Types.slider\r\n        },\r\n        socket: {\r\n            states: [\r\n                {role: /^switch$|^state$|^switch\\.active$/,           indicator: false, type: 'boolean', write: true,       name: 'SET',         required: true, defaultRole: 'switch'},\r\n                {role: /^state$|^state\\.active$/,                     indicator: false, type: 'boolean', write: false,      name: 'ACTUAL',      required: false, defaultRole: 'switch'},\r\n                patternWorking,\r\n                patternUnreach,\r\n                patternLowbat,\r\n                patternMaintain,\r\n                patternError\r\n            ],\r\n            type: Types.socket\r\n        },\r\n        button: {\r\n            states: [\r\n                {role: /^button(\\.[.\\w]+)?$|^action(\\.[.\\w]+)?$/,           indicator: false, type: 'boolean', read: false, write: true,       name: 'SET',         required: true, noSubscribe: true, defaultRole: 'button'},\r\n                patternUnreach,\r\n                patternLowbat,\r\n                patternMaintain,\r\n                patternError\r\n            ],\r\n            type: Types.button\r\n        },\r\n        buttonSensor: {\r\n            states: [\r\n                {role: /^button(\\.[.\\w]+)?$/,           indicator: false, type: 'boolean', read: true, write: false,       name: 'PRESS',         required: true,  defaultRole: 'button.press'},\r\n                // optional\r\n                {role: /^button\\.long/,                 indicator: false, type: 'boolean', read: true, write: false,       name: 'PRESS_LONG',    required: false, defaultRole: 'button.long'},\r\n                patternUnreach,\r\n                patternLowbat,\r\n                patternMaintain,\r\n                patternError\r\n            ],\r\n            type: Types.buttonSensor\r\n        },\r\n        temperature: {\r\n            states: [\r\n                {role: /temperature$/,             indicator: false, write: false, type: 'number',  name: 'ACTUAL',     required: true,  defaultRole: 'value.temperature', defaultUnit: '°C'},\r\n                {role: /humidity$/,                indicator: false, write: false, type: 'number',  name: 'SECOND',     required: false, defaultRole: 'value.humidity', defaultUnit: '%'},\r\n                patternUnreach,\r\n                patternLowbat,\r\n                patternMaintain,\r\n                patternError\r\n            ],\r\n            type: Types.temperature\r\n        },\r\n        humidity: {\r\n            states: [\r\n                {role: /humidity$/,                indicator: false, write: false, type: 'number',  name: 'ACTUAL',     required: true, defaultRole: 'value.humidity', defaultUnit: '%'},\r\n                patternUnreach,\r\n                patternLowbat,\r\n                patternMaintain,\r\n                patternError\r\n            ],\r\n            type: Types.humidity\r\n        },\r\n        image: {\r\n            states: [\r\n                {role: /\\.icon$|^icon$|^icon\\.|\\.icon\\.|\\.chart\\.url\\.|\\.chart\\.url$|^url.icon$/, indicator: false, write: false, type: 'string', name: 'URL', required: true},\r\n                patternUnreach,\r\n                patternLowbat,\r\n                patternMaintain,\r\n                patternError\r\n            ],\r\n            type: Types.image\r\n        },\r\n        info: {\r\n            states: [\r\n                {                                  indicator: false,                                 name: 'ACTUAL',         required: true, multiple: true, noDeviceDetection: true, ignoreRole: /\\.inhibit$/, defaultRole: 'state'},\r\n                patternWorking,\r\n                patternUnreach,\r\n                patternLowbat,\r\n                patternMaintain,\r\n                patternError\r\n            ],\r\n            type: Types.info\r\n        }\r\n    };\r\n\r\n    function checkEnum(obj, enums, words) {\r\n        var found = false;\r\n        if (enums) {\r\n            enums.forEach(function(en) {\r\n                var pos = en.lastIndexOf('.');\r\n                if (pos !== -1) {\r\n                    en = en.substring(pos + 1);\r\n                }\r\n                for (var lang in words) {\r\n                    if (words.hasOwnProperty(lang)) {\r\n                        if (words[lang].find(function (reg) {return reg.test(en);})) {\r\n                            found = true;\r\n                            return false;\r\n                        }\r\n                    }\r\n                }\r\n            });\r\n        }\r\n        return found;\r\n    }\r\n\r\n    function roleOrEnum(obj, enums, roles, words) {\r\n        if (roles && roles.indexOf(obj.common.role) !== -1) {\r\n            return true;\r\n        }\r\n        return checkEnum(obj, enums, words);\r\n    }\r\n\r\n// -------------- LIGHT -----------------------------------------\r\n    var lightWords = {\r\n        en: [/lights?/i,    /lamps?/i,      /ceilings?/i],\r\n        de: [/licht(er)?/i, /lampen?/i,     /beleuchtung(en)?/i],\r\n        ru: [/свет/i,       /ламп[аы]/i,    /торшеры?/, /подсветк[аи]/i, /лампочк[аи]/i, /светильники?/i]\r\n    };\r\n    var lightRoles = ['switch.light', 'dimmer', 'value.dimmer', 'level.dimmer', 'sensor.light', 'state.light'];\r\n    function roleOrEnumLight(obj, enums) {\r\n        return roleOrEnum(obj, enums, lightRoles, lightWords);\r\n    }\r\n\r\n// -------------- BLINDS -----------------------------------------\r\n    var blindWords = {\r\n        en: [/blinds?/i,    /windows?/i,    /shutters?/i],\r\n        de: [/rollladen?/i, /fenstern?/i,   /beschattung(en)?/i],\r\n        ru: [/ставни/i,     /рольставни/i,  /окна|окно/, /жалюзи/i]\r\n    };\r\n\r\n    var blindRoles = ['blind', 'level.blind', 'value.blind', 'action.stop', 'button.stop'];\r\n    function roleOrEnumBlind(obj, enums) {\r\n        return roleOrEnum(obj, enums, blindRoles, blindWords);\r\n    }\r\n\r\n// -------------- GATES ------------------------------------------\r\n    var gateWords = {\r\n        en: [/gates?/i],\r\n        de: [/toren/i, /tor/i],\r\n        ru: [/ворота/i],\r\n    };\r\n\r\n    var gateRoles = ['gate', 'value.gate', 'switch.gate', 'action.stop', 'button.stop'];\r\n    function roleOrEnumGate(obj, enums) {\r\n        return roleOrEnum(obj, enums, gateRoles, gateWords);\r\n    }\r\n\r\n// -------------- WINDOWS -----------------------------------------\r\n    var windowRoles = ['window', 'state.window', 'sensor.window', 'value.window'];\r\n    function roleOrEnumWindow(obj, enums) {\r\n        return roleOrEnum(obj, enums, windowRoles, blindWords);\r\n    }\r\n\r\n// -------------- DOORS -----------------------------------------\r\n    var doorsWords = {\r\n        en: [/doors?/i,      /gates?/i,      /wickets?/i,        /entry|entries/i],\r\n        de: [/türe?/i,       /tuere?/i,      /tore?/i,           /einfahrt(en)?/i,  /pforten?/i],\r\n        ru: [/двери|дверь/i, /ворота/i,      /калитка|калитки/,  /въезды?/i,        /входы?/i]\r\n    };\r\n\r\n    var doorsRoles = ['door', 'state.door', 'sensor.door'];\r\n    function roleOrEnumDoor(obj, enums) {\r\n        return roleOrEnum(obj, enums, doorsRoles, doorsWords);\r\n    }\r\n\r\n    function getAllStatesInChannel(keys, channelId) {\r\n        var list = [];\r\n        var reg = new RegExp('^' + channelId.replace(/([$^.)([\\]{}])/g, '\\\\$1') + '\\\\.[^.]+$');\r\n        keys.forEach(function(_id) {\r\n            if (reg.test(_id)) list.push(_id);\r\n        });\r\n        return list;\r\n    }\r\n    function getAllStatesInDevice(keys, channelId) {\r\n        var list = [];\r\n        var reg = new RegExp('^' + channelId.replace(/([$^.)([\\]{}])/g, '\\\\$1') + '\\\\.[^.]+\\\\.[^.]+$');\r\n        keys.forEach(function(_id) {\r\n            if (reg.test(_id)) list.push(_id);\r\n        });\r\n        return list;\r\n    }\r\n\r\n    function getFunctionEnums(objects) {\r\n        var enums = [];\r\n        var reg = /^enum\\.functions\\./;\r\n        for (var id in objects) {\r\n            if (objects.hasOwnProperty(id) && reg.test(id) && objects[id] && objects[id].type === 'enum' && objects[id].common && objects[id].common.members && objects[id].common.members.length) {\r\n                enums.push(id);\r\n            }\r\n        }\r\n        return enums;\r\n    }\r\n\r\n    function getParentId(id) {\r\n        var pos = id.lastIndexOf('.');\r\n        if (pos !== -1) {\r\n            return id.substring(0, pos);\r\n        } else {\r\n            return id;\r\n        }\r\n    }\r\n\r\n    this._applyPattern = function (objects, id, statePattern) {\r\n        if (objects[id] && objects[id].common) {\r\n            var role = null;\r\n            if (!statePattern) {\r\n                debugger;\r\n            }\r\n            if (statePattern.role) {\r\n                role = statePattern.role.test(objects[id].common.role || '');\r\n\r\n                if (role && statePattern.channelRole) {\r\n                    var channelId = getParentId(id);\r\n                    if (objects[channelId] && (objects[channelId].type === 'channel' || objects[channelId].type === 'device')) {\r\n                        role = statePattern.channelRole.test(objects[channelId].common.role);\r\n                    } else {\r\n                        role = false;\r\n                    }\r\n                }\r\n            }\r\n            if (role === false) {\r\n                return;\r\n            }\r\n\r\n            if (statePattern.stateName && !statePattern.stateName.test(id)) {\r\n                return false;\r\n            }\r\n            if (statePattern.unit && statePattern.unit !== objects[id].common.unit) {\r\n                return false;\r\n            }\r\n\r\n            if (statePattern.ignoreRole && statePattern.ignoreRole.test(objects[id].common.role)) {\r\n                return;\r\n            }\r\n\r\n            if (statePattern.indicator === false && (objects[id].common.role || '').match(/^indicator(\\.[.\\w]+)?$/)) {\r\n                return;\r\n            }\r\n\r\n            if (statePattern.state && !statePattern.state.test(id.split('.').pop())) {\r\n                return;\r\n            }\r\n\r\n            if (statePattern.write !== undefined && statePattern.write !== (objects[id].common.write || false)) {\r\n                return;\r\n            }\r\n            if (statePattern.min === 'number' && typeof objects[id].common.min !== 'number') {\r\n                return;\r\n            }\r\n            if (statePattern.max === 'number' && typeof objects[id].common.max !== 'number') {\r\n                return;\r\n            }\r\n\r\n            if (statePattern.read !== undefined && statePattern.read !== (objects[id].common.read === undefined ? true : objects[id].common.read)) {\r\n                return;\r\n            }\r\n\r\n            if (statePattern.type) {\r\n                if (typeof statePattern.type === 'string') {\r\n                    if (statePattern.type !== objects[id].common.type) {\r\n                        return;\r\n                    }\r\n                } else {\r\n                    var noOneOk = true;\r\n                    for (var t = 0; t < statePattern.type.length; t++) {\r\n                        if (statePattern.type[t] === objects[id].common.type) {\r\n                            noOneOk = false;\r\n                            break;\r\n                        }\r\n                    }\r\n                    if (noOneOk) {\r\n                        return;\r\n                    }\r\n                }\r\n            }\r\n\r\n            if (statePattern.enums && typeof statePattern.enums === 'function') {\r\n                var enums = this._getEnumsForId(objects, id);\r\n                if (!statePattern.enums(objects[id], enums)) {\r\n                    return;\r\n                }\r\n            }\r\n\r\n            return true;\r\n        } else {\r\n            return false;\r\n        }\r\n    };\r\n\r\n    this._getEnumsForId = function (objects, id) {\r\n        this.enums = this.enums || getFunctionEnums(objects);\r\n        var result = [];\r\n        this.enums.forEach(function (e) {\r\n            if (objects[e].common.members.indexOf(id) !== -1) {\r\n                result.push(e);\r\n            }\r\n        });\r\n        if (!result.length && objects[id] && objects[id].type === 'state') {\r\n            var channel = getParentId(id);\r\n            if (objects[channel] && (objects[channel].type === 'channel' || objects[channel].type === 'device')) {\r\n                this.enums.forEach(function (e) {\r\n                    if (objects[e].common.members.indexOf(channel) !== -1) {\r\n                        result.push(e);\r\n                    }\r\n                });\r\n            }\r\n        }\r\n\r\n        return result.length ? result : null;\r\n    };\r\n\r\n    function copyState(oldState, newState) {\r\n        if (!newState) {\r\n            newState = JSON.parse(JSON.stringify(oldState));\r\n        }\r\n\r\n        if (newState instanceof Array) {\r\n            for (var t = 0; t < newState.length; t++) {\r\n                newState[t].original = oldState[t].original || oldState[t];\r\n                if (oldState[t].enums) {\r\n                    newState[t].enums = oldState[t].enums;\r\n                }\r\n                if (oldState[t].role) {\r\n                    newState[t].role = oldState[t].role;\r\n                }\r\n                if (oldState[t].channelRole) {\r\n                    newState[t].channelRole = oldState[t].channelRole;\r\n                }\r\n                if (oldState[t].icon) {\r\n                    newState[t].icon = oldState[t].icon;\r\n                }\r\n            }\r\n        } else {\r\n            newState.original = oldState.original || oldState;\r\n            if (oldState.enums) {\r\n                newState.enums = oldState.enums;\r\n            }\r\n            if (oldState.role) {\r\n                newState.role = oldState.role;\r\n            }\r\n            if (oldState.channelRole) {\r\n                newState.channelRole = oldState.channelRole;\r\n            }\r\n            if (oldState.icon) {\r\n                newState.icon = oldState.icon;\r\n            }\r\n        }\r\n\r\n        return newState;\r\n    }\r\n\r\n    this._testOneState = function (context) {\r\n        var objects             = context.objects;\r\n        var pattern             = context.pattern;\r\n        var state               = context.state;\r\n        var channelStates       = context.channelStates;\r\n        var usedIds             = context.usedIds;\r\n        var _usedIds            = context._usedIds;\r\n        var ignoreIndicators    = context.ignoreIndicators;\r\n        var result              = context.result;\r\n        var found               = false;\r\n\r\n        channelStates.forEach(function (_id) {\r\n            if ((state.indicator || (_usedIds.indexOf(_id) === -1 && (state.notSingle || usedIds.indexOf(_id) === -1))) &&\r\n                this._applyPattern(objects, _id, state)) {\r\n                if (state.indicator && ignoreIndicators) {\r\n                    var parts = _id.split('.');\r\n\r\n                    if (ignoreIndicators.indexOf(parts.pop()) !== -1) {\r\n                        console.log(_id + ' ignored');\r\n                        return;\r\n                    }\r\n                }\r\n\r\n                if (!state.indicator){\r\n                    _usedIds.push(_id);\r\n                }\r\n                if (!result) {\r\n                    context.result = result = JSON.parse(JSON.stringify(patterns[pattern]));\r\n                    result.states.forEach(function (state, j) {\r\n                        copyState(patterns[pattern].states[j], state);\r\n                    });\r\n                }\r\n                if (!result.type) {\r\n                    debugger;\r\n                }\r\n\r\n                if (!result.states.find(function (e) {return e.id === _id;})) {\r\n                    var _found = false;\r\n                    for (var u = 0; u < result.states.length; u++) {\r\n                        if (result.states[u] instanceof Array)  {\r\n                            for (var c = 0; c < result.states[u].length; c++) {\r\n                                if (result.states[u][c].name === state.name && result.states[u][c].role === state.role) {\r\n                                    result.states[u] = result.states[u][c];\r\n                                    result.states[u].id = _id;\r\n                                    _found = true;\r\n                                    break;\r\n                                }\r\n                            }\r\n                            if (_found) {\r\n                                break;\r\n                            }\r\n                        } else {\r\n                            if (result.states[u].name === state.name) {\r\n                                result.states[u].id = _id;\r\n                                _found = true;\r\n                                break;\r\n                            }\r\n                        }\r\n                    }\r\n                    if (!_found) {\r\n                        console.error('Cannot find state for ' + _id);\r\n                    }\r\n                }\r\n                found = true;\r\n                if (state.multiple && channelStates.length > 1) {\r\n                    // execute this rule for every state in this channel\r\n                    channelStates.forEach(function (cid) {\r\n                        if (cid === _id) return;\r\n                        if ((state.indicator || (_usedIds.indexOf(cid) === -1 && (state.notSingle || usedIds.indexOf(cid) === -1))) &&\r\n                            this._applyPattern(objects, cid, state)) {\r\n                            if (!state.indicator) {\r\n                                _usedIds.push(cid);\r\n                            }\r\n                            var newState = copyState(state);\r\n                            newState.id = cid;\r\n                            result.states.push(newState);\r\n                        }\r\n                    }.bind(this));\r\n                }\r\n                return false; // stop iteration\r\n            }\r\n        }.bind(this));\r\n        return found;\r\n    };\r\n\r\n    this._detectNext = function (options) {\r\n        var objects           = options.objects;\r\n        var id                = options.id;\r\n        var keys              = options._keysOptional;\r\n        var usedIds           = options._usedIdsOptional;\r\n        var ignoreIndicators  = options.ignoreIndicators;\r\n        var allowedTypes      = options.allowedTypes;\r\n        var excludedTypes     = options.excludedTypes;\r\n\r\n        if (!usedIds) {\r\n            usedIds = [];\r\n            options._usedIdsOptional = usedIds;\r\n        }\r\n\r\n        if (objects[id] && objects[id].common) {\r\n            var channelStates;\r\n\r\n            if (objects[id].type === 'state') {\r\n                channelStates = [id];\r\n            } else if (objects[id].type === 'device') {\r\n                channelStates = getAllStatesInDevice(keys, id);\r\n                // if no states, it may be device without channels\r\n                if (!channelStates.length) {\r\n                    channelStates = getAllStatesInChannel(keys, id);\r\n                }\r\n            } else { // channel\r\n                channelStates = getAllStatesInChannel(keys, id);\r\n            }\r\n\r\n            /*if (id.indexOf('yeelight-2.0.color-') !== -1) {\r\n                console.log('aaa');\r\n            }*/\r\n            var context = {\r\n                objects:            objects,\r\n                channelStates:      channelStates,\r\n                usedIds:            usedIds,\r\n                ignoreIndicators:   ignoreIndicators\r\n            };\r\n\r\n            for (var pattern in patterns) {\r\n                if (!patterns.hasOwnProperty(pattern) ||\r\n                    (allowedTypes && allowedTypes.indexOf(patterns[pattern].type) === -1) ||\r\n                    (excludedTypes && excludedTypes.indexOf(patterns[pattern].type) !== -1)\r\n                ) continue;\r\n                context.result = null;\r\n\r\n                /*if (pattern === 'hue' && id.indexOf('yeelight-2.0.color-') !== -1) {\r\n                    console.log(pattern);\r\n                }*/\r\n\r\n                var _usedIds = [];\r\n                context.pattern = pattern;\r\n                context._usedIds = _usedIds;\r\n                patterns[pattern].states.forEach(function (state) {\r\n                    var found = false;\r\n\r\n                    if (state.name === 'ON') {\r\n                        //console.log('ON');\r\n                    }\r\n\r\n                    // one of following\r\n                    if (state instanceof Array) {\r\n                        for (var s = 0; s < state.length; s++) {\r\n                            context.state = state[s];\r\n                            if (this._testOneState(context)) {\r\n                                found = true;\r\n                                break;\r\n                            }\r\n                        }\r\n                        if (!found) {\r\n                            context.result = null;\r\n                            return false;\r\n                        }\r\n                    } else {\r\n                        context.state = state;\r\n                        if (this._testOneState(context)) {\r\n                            found = true;\r\n                        }\r\n                        if (state.required && !found) {\r\n                            context.result = null;\r\n                            return false;\r\n                        }\r\n                    }\r\n                }.bind(this));\r\n\r\n                // if all required states found?\r\n                var allRequiredFound = true;\r\n                if (context.result) {\r\n                    for (var a = 0; a < context.result.states.length; a++) {\r\n                        if (context.result.states[a] instanceof Array) {\r\n                            // one of\r\n                            var oneOf = false;\r\n                            for (var b = 0; b < context.result.states[a].length; b++) {\r\n                                if (context.result.states[a][b].required && context.result.states[a].id) {\r\n                                    oneOf = true;\r\n                                    break;\r\n                                }\r\n                            }\r\n                            if (!oneOf) {\r\n                                allRequiredFound = false;\r\n                                break;\r\n                            }\r\n                        } else {\r\n                            if (context.result.states[a].required && !context.result.states[a].id) {\r\n                                allRequiredFound = false;\r\n                                break;\r\n                            }\r\n                        }\r\n                    }\r\n                } else {\r\n                    allRequiredFound = false;\r\n                }\r\n\r\n\r\n                if (allRequiredFound) {\r\n                    _usedIds.forEach(function (id) {usedIds.push(id);});\r\n                    // context.result.id = id;\r\n                    //this.cache[id] = context.result;\r\n                    var deviceStates;\r\n\r\n                    if (pattern === 'info') {\r\n                        //console.log('AA');\r\n                    }\r\n\r\n                    // looking for indicators and special states\r\n                    if (objects[id].type !== 'device') {\r\n                        // get device name\r\n                        var deviceId = getParentId(id);\r\n                        if (objects[deviceId] && (objects[deviceId].type === 'channel' || objects[deviceId].type === 'device')) {\r\n                            deviceStates = getAllStatesInDevice(keys, deviceId);\r\n                            if (deviceStates) {\r\n                                deviceStates.forEach(function (_id) {\r\n                                    context.result.states.forEach(function (state, i) {\r\n                                        if (!state.id && (state.indicator || state.searchInParent) && !state.noDeviceDetection) {\r\n                                            if (this._applyPattern(objects, _id, state.original)) {\r\n                                                context.result.states[i].id = _id;\r\n                                            }\r\n                                        }\r\n                                    }.bind(this));\r\n                                }.bind(this));\r\n                            }\r\n                        }\r\n                    }\r\n                    context.result.states.forEach(function (state) {\r\n                        if (state.name.indexOf('%d') !== -1 && state.role && state.id) {\r\n                            var m = state.role.exec(context.objects[state.id].common.role);\r\n                            if (m) {\r\n                                state.name = state.name.replace('%d', m[1]);\r\n                            }\r\n                        }\r\n                        if (state.role) {\r\n                            delete state.role;\r\n                        }\r\n                        if (state.enums) {\r\n                            delete state.enums;\r\n                        }\r\n                        if (state.original) {\r\n                            if (state.original.icon) {\r\n                                state.icon = state.original.icon;\r\n                            }\r\n                            delete state.original;\r\n                        }\r\n                    });\r\n\r\n                    return context.result;\r\n                }\r\n            }\r\n        }\r\n        return null;\r\n    };\r\n\r\n    /**\r\n     * detect\r\n     *\r\n     * Detect devices in some given path. Path can show to state, channel or device.\r\n     *\r\n     * @param options - parameters with following fields\r\n     *                  objects - Object, that has all objects in form {'id1': {obj1params...}, 'id2': {obj2params...}}\r\n     *                  id - Root ID from which the detection must start\r\n     *                  _keysOptional - Array with keys from options.objects for optimization\r\n     *                  _usedIdsOptional - Array with yet detected devices to do not similar device under different types\r\n     *                  ignoreIndicators - If simple indicators like \"low battery\", \"not reachable\" must be detected as device or only as a part of other device.\r\n     *                  allowedTypes - array with names of device types, that can be detected. Not listed device types will be ignored.\r\n     *                  excludedTypes - array with names of device types, that must be ignored. The listed device types will be ignored.\r\n     * @returns {*|boolean|\"DIR\"|\"FILE\"|ReadonlyArray<string>}\r\n     */\r\n    this.detect = function (options) {\r\n        var objects           = options.objects;\r\n        var id                = options.id;\r\n        var _keysOptional     = options._keysOptional;\r\n        var _usedIdsOptional  = options._usedIdsOptional;\r\n        // var ignoreIndicators  = options.ignoreIndicators;\r\n\r\n        if (this.cache[id] !== undefined) {\r\n            return this.cache[id];\r\n        }\r\n\r\n        if (!_keysOptional) {\r\n            _keysOptional = Object.keys(objects);\r\n            _keysOptional.sort();\r\n            options._keysOptional = _keysOptional;\r\n        }\r\n\r\n        var result  = [];\r\n        if (_usedIdsOptional) {\r\n            _usedIdsOptional = [];\r\n            options._usedIdsOptional = _usedIdsOptional;\r\n        }\r\n\r\n        var detected;\r\n\r\n        while((detected = this._detectNext(options))) {\r\n            result.push(detected);\r\n        }\r\n\r\n        this.cache[id] = result.length ? result : null;\r\n\r\n        return this.cache[id];\r\n    };\r\n\r\n    this.getPatterns = function () {\r\n        var copyPatterns = {};\r\n        Object.keys(patterns).forEach(function (type) {\r\n            var item = JSON.parse(JSON.stringify(patterns[type]));\r\n            item.states.forEach(function (state, i) {\r\n                if (patterns[type].states[i].role) {\r\n                    state.role = patterns[type].states[i].role.toString();\r\n                }\r\n\r\n                if (patterns[type].states[i].enum) {\r\n                    state.enum = true;\r\n                }\r\n            });\r\n            copyPatterns[type] = item;\r\n        });\r\n        return copyPatterns;\r\n    };\r\n\r\n    (function _constructor (that) {\r\n        that.enums = null;\r\n        that.cache = {};\r\n    })(this);\r\n\r\n    return this;\r\n}\r\n\r\n// Node.js\r\nif (typeof module !== 'undefined') {\r\n    module.exports = {\r\n        Types: Types,\r\n        ChannelDetector: ChannelDetector\r\n    };\r\n    module.exports.default = ChannelDetector;\r\n} else\r\n// ReactJS\r\nif (typeof exports !== 'undefined') {\r\n    exports = {\r\n        Types: Types,\r\n        ChannelDetector: ChannelDetector\r\n    };\r\n    exports.default = ChannelDetector;\r\n}","var map = {\n\t\"./Anteroom.svg\": 359,\n\t\"./Attic.svg\": 360,\n\t\"./Balcony.svg\": 361,\n\t\"./Barn.svg\": 362,\n\t\"./Basement.svg\": 363,\n\t\"./Bathroom.svg\": 364,\n\t\"./Bedroom.svg\": 365,\n\t\"./Boiler Room.svg\": 366,\n\t\"./Carport.svg\": 367,\n\t\"./Cellar.svg\": 368,\n\t\"./Chamber.svg\": 369,\n\t\"./Corridor.svg\": 370,\n\t\"./Dining Area.svg\": 371,\n\t\"./Dining Room.svg\": 372,\n\t\"./Dining.svg\": 373,\n\t\"./Dressing Room.svg\": 374,\n\t\"./Driveway.svg\": 375,\n\t\"./Entrance.svg\": 376,\n\t\"./Equipment Room.svg\": 377,\n\t\"./Front Yard.svg\": 378,\n\t\"./Gallery.svg\": 379,\n\t\"./Garage.svg\": 380,\n\t\"./Garden.svg\": 381,\n\t\"./Ground Floor.svg\": 382,\n\t\"./Guest Bathroom.svg\": 383,\n\t\"./Guest Room.svg\": 384,\n\t\"./Gym.svg\": 385,\n\t\"./Hall.svg\": 386,\n\t\"./Home Theater.svg\": 387,\n\t\"./Kitchen.svg\": 388,\n\t\"./Laundry Room.svg\": 389,\n\t\"./Living Area.svg\": 390,\n\t\"./Living Room.svg\": 391,\n\t\"./Locker Room.svg\": 392,\n\t\"./Nursery.svg\": 393,\n\t\"./Office.svg\": 394,\n\t\"./Outdoors.svg\": 395,\n\t\"./Playroom.svg\": 396,\n\t\"./Pool.svg\": 397,\n\t\"./Rear Wall.svg\": 398,\n\t\"./Second Floor.svg\": 399,\n\t\"./Shed.svg\": 400,\n\t\"./Sleeping Area.svg\": 401,\n\t\"./Stairway.svg\": 402,\n\t\"./Stairwell.svg\": 403,\n\t\"./Storeroom.svg\": 404,\n\t\"./Summer House.svg\": 405,\n\t\"./Swimming Pool.svg\": 406,\n\t\"./Terrace.svg\": 407,\n\t\"./Toilet.svg\": 408,\n\t\"./Upstairs.svg\": 409,\n\t\"./Wardrobe.svg\": 410,\n\t\"./Washroom.svg\": 411,\n\t\"./Wc.svg\": 412,\n\t\"./Windscreen.svg\": 413,\n\t\"./Workshop.svg\": 414,\n\t\"./Workspace.svg\": 415,\n\t\"./list\": 169,\n\t\"./list.json\": 169,\n\t\"./names.txt\": 416,\n\t\"./parseNames\": 225,\n\t\"./parseNames.d.ts\": 417,\n\t\"./parseNames.js\": 225\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 358;","var map = {\n\t\"./Alarm Systems.svg\": 419,\n\t\"./Amplifier.svg\": 420,\n\t\"./Awnings.svg\": 421,\n\t\"./Battery Status.svg\": 422,\n\t\"./Ceiling Spotlights.svg\": 423,\n\t\"./Chandelier.svg\": 424,\n\t\"./Climate.svg\": 425,\n\t\"./Coffee Makers.svg\": 426,\n\t\"./Cold Water.svg\": 427,\n\t\"./Computer.svg\": 428,\n\t\"./Consumption.svg\": 429,\n\t\"./Curtains.svg\": 430,\n\t\"./Dishwashers.svg\": 431,\n\t\"./Doors.svg\": 432,\n\t\"./Doorstep.svg\": 433,\n\t\"./Dryer.svg\": 434,\n\t\"./Fan.svg\": 435,\n\t\"./Floor Lamps.svg\": 436,\n\t\"./Garage Doors.svg\": 437,\n\t\"./Gates.svg\": 438,\n\t\"./Hairdryer.svg\": 439,\n\t\"./Handle.svg\": 440,\n\t\"./Hanging Lamps.svg\": 441,\n\t\"./Heater.svg\": 442,\n\t\"./Hoods.svg\": 443,\n\t\"./Hot Water.svg\": 444,\n\t\"./Humidity.svg\": 445,\n\t\"./Iron.svg\": 446,\n\t\"./Irrigation.svg\": 447,\n\t\"./Led Strip.svg\": 448,\n\t\"./Light.svg\": 449,\n\t\"./Lightings.svg\": 450,\n\t\"./Lock.svg\": 451,\n\t\"./Louvre.svg\": 452,\n\t\"./Mowing Machine.svg\": 453,\n\t\"./Music.svg\": 454,\n\t\"./Outdoor Blinds.svg\": 455,\n\t\"./People.svg\": 456,\n\t\"./Pool.svg\": 457,\n\t\"./Power Consumption.svg\": 458,\n\t\"./Printer.svg\": 459,\n\t\"./Pump.svg\": 460,\n\t\"./Receiver.svg\": 461,\n\t\"./Sconces.svg\": 462,\n\t\"./Security.svg\": 463,\n\t\"./Shading.svg\": 464,\n\t\"./Shutters.svg\": 465,\n\t\"./SmokeDetector.svg\": 466,\n\t\"./Sockets.svg\": 467,\n\t\"./Speaker.svg\": 468,\n\t\"./Stove.svg\": 469,\n\t\"./Table Lamps.svg\": 470,\n\t\"./Temperature Sensors.svg\": 471,\n\t\"./Tv.svg\": 472,\n\t\"./Vacuum Cleaner.svg\": 473,\n\t\"./Ventilation.svg\": 474,\n\t\"./Washing Machines.svg\": 475,\n\t\"./Water Consumption.svg\": 476,\n\t\"./Water Heater.svg\": 477,\n\t\"./Water.svg\": 478,\n\t\"./Weather.svg\": 479,\n\t\"./Window.svg\": 480,\n\t\"./list\": 168,\n\t\"./list.json\": 168,\n\t\"./names.txt\": 481,\n\t\"./parseNames\": 226,\n\t\"./parseNames.d.ts\": 482,\n\t\"./parseNames.js\": 226\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 418;","/**\r\n * Copyright 2019 bluefox <dogafox@gmail.com>\r\n *\r\n * MIT License\r\n *\r\n **/\r\n\r\n// import {TiCogOutline as IconWorking} from 'react-icons/ti';\r\n// import {MdPermScanWifi as IconUnreach} from 'react-icons/md';\r\n// import {MdPriorityHigh as IconMaintain} from 'react-icons/md';\r\n// import {MdBatteryAlert as IconLowbat} from 'react-icons/md';\r\n// import {MdError as IconError} from 'react-icons/md';\r\n//import ChannelDetector from 'iobroker.type-detector';\r\nimport ChannelDetector from '../Components/TypeDetector';\r\n\r\n// const COLORS = {\r\n//     working:   '#808080',\r\n//     unreach:   'orange',\r\n//     lowbat:    'red',\r\n//     maintain:  'orange',\r\n//     error:     'red',\r\n//     direction: 'green',\r\n//     connected: 'red'\r\n// };\r\n\r\n// const additionalParameters = {\r\n//     'WORKING':      {icon: IconWorking,    color: COLORS.working},\r\n//     'UNREACH':      {icon: IconUnreach,    color: COLORS.unreach},\r\n//     'LOWBAT':       {icon: IconLowbat,     color: COLORS.lowbat},\r\n//     'MAINTAIN':     {icon: IconMaintain,   color: COLORS.maintain},\r\n//     'ERROR':        {icon: IconError,      color: COLORS.error},\r\n//     'DIRECTION':    {                      color: COLORS.direction},\r\n//     'CONNECTED':    {icon: IconUnreach,    color: COLORS.connected},\r\n// };\r\n\r\nclass IOBChannelDetector {\r\n    constructor() {\r\n        this.detector = new ChannelDetector.ChannelDetector();\r\n    }\r\n\r\n    getPatterns() {\r\n        return this.detector.getPatterns();\r\n    }\r\n\r\n    detect(options) {\r\n        if (!options._keysOptional || options.forceRebuildKeys) {\r\n            if (JSON.stringify(this.objects) !== JSON.stringify(options.objects) || options.forceRebuildKeys) {\r\n                this.objects = options.objects;\r\n                this.keys = Object.keys(this.objects).sort();\r\n            }\r\n            options._keysOptional = this.keys;\r\n        }\r\n\r\n        const result = this.detector.detect(options);\r\n\r\n        // Apply additionalParameters\r\n        // result && result.forEach(one =>\r\n        //     one.states.forEach(state =>\r\n        //         state.id && additionalParameters[state.name] && Object.assign(state, additionalParameters[state.name])));\r\n\r\n        return result;\r\n    }\r\n}\r\n\r\nexport default IOBChannelDetector;\r\n","import React from \"react\";\n\nconst Jalousie = props => (\n  <svg viewBox=\"0 0 508.16 508.16\" {...props}>\n    <path\n      d=\"M504.18 13.67a3.924 3.924 0 0 0-.42.02H4a4 4 0 0 0-4 4v47.28a4 4 0 0 0 4 4h19.72l-13.44 42.04a4 4 0 0 0 3.8 5.24h9.64l-13.44 42.04a4 4 0 0 0 3.8 5.24h9.64l-13.44 42.04a4 4 0 0 0 3.8 5.24h9.64l-13.44 42.04a4 4 0 0 0 3.8 5.24h9.64l-13.44 42.08a4 4 0 0 0 .56 3.56 4 4 0 0 0 3.24 1.64h9.64l-13.44 42.08a4 4 0 0 0 .56 3.56 4 4 0 0 0 3.24 1.64h9.64l-13.44 42.08a4 4 0 0 0 .56 3.56 4 4 0 0 0 3.24 1.64h9.64l-13.44 42.16a4 4 0 0 0 .56 3.56 4 4 0 0 0 3.24 1.64h9.64l-13.44 42a4 4 0 0 0 .56 3.56 4 4 0 0 0 3.24 1.64h479.8a4 4 0 0 0 3.24-1.64 4 4 0 0 0 .56-3.56l-13.44-42.08h9.64a4 4 0 0 0 3.24-1.64 4 4 0 0 0 .56-3.56l-13.44-42.08h9.64a4 4 0 0 0 3.24-1.64 4 4 0 0 0 .56-3.56l-13.44-42.08h9.64a4 4 0 0 0 3.24-1.64 4 4 0 0 0 .56-3.56l-13.44-42.08h9.64a4 4 0 0 0 3.24-1.64 4 4 0 0 0 .56-3.56l-13.64-42.08h9.84a4 4 0 0 0 4-5.24l-13.44-42.04h9.44a4 4 0 0 0 4-5.24l-13.44-42.04h9.44a4 4 0 0 0 4-5.24l-13.44-42.04h9.44a4 4 0 0 0 4-5.24l-13.44-42.04h19.72a4 4 0 0 0 4-4V17.69a4 4 0 0 0-3.98-4.02zM99.08 486.49H19.56l12.56-39.28h66.96v39.28zm0-47.28H19.56l12.56-39.28h66.96v39.28zm0-47.28H19.56l12.56-39.28h66.96v39.28zm0-47.28H19.56l12.56-39.28h66.96v39.28zm0-47.28H19.56l12.56-39.28h66.96v39.28zm0-47.28H19.56l12.56-39.28h66.96v39.28zm0-47.28H19.56l12.56-39.28h66.96v39.28zm0-47.28H19.56l12.56-39.28h66.96v39.28zm0-47.28H19.56l12.56-39.28h66.96v39.28zm26.8 378.24h-18.8v-39.28h18.8v39.28zm0-47.28h-18.8v-39.28h18.8v39.28zm0-47.28h-18.8v-39.28h18.8v39.28zm0-47.28h-18.8v-39.28h18.8v39.28zm0-47.28h-18.8v-39.28h18.8v39.28zm0-47.28h-18.8v-39.28h18.8v39.28zm0-47.28h-18.8v-39.28h18.8v39.28zm0-47.28h-18.8v-39.28h18.8v39.28zm.16-47.28h-18.96V68.97h18.96v39.28zm247.84 378.24h-240v-39.28h240v39.28zm-240-47.28v-39.28h239.68v39.28H133.88zm240-47.28h-240v-39.28h240v39.28zm0-47.28h-240v-39.28h240v39.28zm0-47.28h-240v-39.28h240v39.28zm0-47.28h-240v-39.28h240v39.28zm0-47.28h-240v-39.28h240v39.28zm0-47.28h-240v-39.28h240v39.28zm-240-47.28V68.97h239.84v39.28H133.88zm266.64 378.24h-18.64l-.32-39.28h18.96v39.28zm0-47.28h-18.96v-39.28h18.96v39.28zm0-47.28h-18.96v-39.28h18.96v39.28zm0-47.28h-18.96v-39.28h18.96v39.28zm.32-47.28h-18.96v-39.28h18.96v39.28zm0-47.28h-18.96v-39.28h18.96v39.28zm0-47.28h-18.96v-39.28h18.96v39.28zm0-47.28h-18.96v-39.28h18.96v39.28zm-18.96-47.28V68.97h18.8v39.28h-18.8zm63.56 8v39.28h-36.92v-39.28h36.92zm-36.76-8V68.97h36.92v39.28h-36.92zm36.76 55.28v39.28h-36.92v-39.28h36.92zm0 47.28v39.28h-36.92v-39.28h36.92zm0 47.28v39.28h-36.92v-39.28h36.92zm0 47.28v39.28h-36.76l-.16-39.28h36.92zm42.68 181.12h-79.44v-39.28h66.96l12.48 39.28zm0-47.28h-79.44v-39.28h66.96l12.48 39.28zm0-47.28h-79.44v-39.28h36.92v17.44a4 4 0 0 0 8 0v-17.44h22.04l12.48 39.28zm0-47.28h-34.6v-39.28h22.04l12.56 39.28zm0-47.28h-34.6v-39.28h22.04l12.56 39.28zm0-47.28h-34.6v-39.28h22.04l12.56 39.28zm0-47.28h-34.6v-39.28h22.04l12.56 39.28zm0-47.28h-34.6v-39.28h22.04l12.56 39.28zm0-47.28h-34.6V68.97h22.04l12.56 39.28zm11.56-47.28H8V21.69h491.76l-.08 39.28z\"\n      fill=\"currentColor\"\n    />\n    <path\n      d=\"M454.32 37.33h-13.76a4 4 0 0 0 0 8h13.76a4 4 0 0 0 0-8zM414.84 37.33h-96a4 4 0 0 0 0 8h96a4 4 0 0 0 0-8z\"\n      fill=\"currentColor\"\n    />\n  </svg>\n);\n\nexport default Jalousie;\n","import React from \"react\";\n\nconst PushButton = props => (\n    <svg viewBox=\"0 0 285 285\" {...props}>\n        <g>\n            <path fill=\"currentColor\" d=\"M88.4,87.996c2.525-2.146,2.832-5.933,0.687-8.458C82.801,72.144,79.34,62.719,79.34,53c0-22.607,18.393-41,41-41\n              c22.607,0,41,18.393,41,41c0,9.729-3.467,19.161-9.761,26.557c-2.148,2.523-1.843,6.311,0.681,8.458\n              c1.129,0.961,2.511,1.431,3.886,1.431c1.698,0,3.386-0.717,4.572-2.111C168.858,77.77,173.34,65.576,173.34,53\n              c0-29.225-23.775-53-53-53c-29.225,0-53,23.775-53,53c0,12.563,4.476,24.748,12.602,34.31C82.089,89.835,85.873,90.141,88.4,87.996\n              z\"/>\n            <path fill=\"currentColor\" d=\"M120.186,41.201c13.228,0,23.812,8.105,27.313,19.879c0.761-2.562,1.176-5.271,1.176-8.08\n                  c0-15.649-12.685-28.335-28.335-28.335c-15.648,0-28.334,12.686-28.334,28.335c0,2.623,0.364,5.16,1.031,7.571\n                  C96.691,49.076,107.152,41.201,120.186,41.201z\"/>\n            <path fill=\"currentColor\" d=\"M234.21,169.856c-3.769-22.452-19.597-26.04-27.034-26.462c-2.342-0.133-4.516-1.32-5.801-3.282\n                  c-5.388-8.225-12.609-10.4-18.742-10.4c-4.405,0-8.249,1.122-10.449,1.932c-0.275,0.102-0.559,0.15-0.837,0.15\n                  c-0.87,0-1.701-0.47-2.163-1.262c-5.472-9.387-13.252-11.809-19.822-11.809c-3.824,0-7.237,0.82-9.548,1.564\n                  c-0.241,0.077-0.764,0.114-1.001,0.114c-1.256,0-2.637-1.03-2.637-2.376V69.753c0-11.035-8.224-16.552-16.5-16.552\n                  c-8.276,0-16.5,5.517-16.5,16.552v84.912c0,4.989-3.811,8.074-7.918,8.074c-2.495,0-4.899-1.138-6.552-3.678l-7.937-12.281\n                  c-3.508-5.788-8.576-8.188-13.625-8.189c-11.412-0.001-22.574,12.258-14.644,25.344l62.491,119.692\n                  c0.408,0.782,1.225,1.373,2.108,1.373h87.757c1.253,0,2.289-1.075,2.365-2.325l2.196-35.816c0.025-0.413,0.162-0.84,0.39-1.186\n                  C231.591,212.679,237.828,191.414,234.21,169.856z\"/>\n        </g>\n    </svg>);\n\nexport default PushButton;\n","import React from \"react\";\n\nconst DoorOpened = props => (\n  <svg viewBox=\"0 0 512 512\" {...props}>\n    <path fill=\"currentColor\" d=\"M298.667 298.667c17.643 0 32-14.357 32-32s-14.357-32-32-32-32 14.357-32 32c0 17.642 14.357 32 32 32zm0-42.667c5.867 0 10.667 4.779 10.667 10.667s-4.8 10.667-10.667 10.667S288 272.555 288 266.667 292.8 256 298.667 256z\" />\n    <path fill=\"currentColor\" d=\"M448 490.667h-32v-480C416 4.779 411.221 0 405.333 0H106.667c-.597 0-1.131.256-1.707.341-.555.085-1.088.149-1.621.32-.939.32-1.749.789-2.56 1.344-.32.213-.704.277-1.003.533-.107.085-.149.213-.256.32-.768.704-1.365 1.579-1.899 2.496-.213.341-.512.619-.661.981-.597 1.345-.96 2.774-.96 4.332v480H64c-5.888 0-10.667 4.779-10.667 10.667C53.333 507.221 58.112 512 64 512h42.667c.576 0 1.173-.043 1.749-.149l256-42.667a10.672 10.672 0 0 0 8.917-10.517V53.333c0-5.227-3.776-9.664-8.917-10.517L235.541 21.333h159.125v480c0 5.888 4.779 10.667 10.667 10.667H448c5.888 0 10.667-4.779 10.667-10.667s-4.779-10.666-10.667-10.666zm-96-428.31v387.264l-234.667 39.125V23.253L352 62.357z\" />\n  </svg>\n);\n\nexport default DoorOpened;\n","import React from \"react\";\n\nconst FireOn = props => (\n  <svg viewBox=\"0 0 512.006 512.006\" {...props}>\n    <path\n      d=\"M502.379 211.249c0 74.656-60.52 135.176-135.176 135.176-6.469.01-12.919-.473-19.311-1.448-66.487-9.598-115.837-66.555-115.866-133.728-.019-67.212 49.349-124.227 115.866-133.825a142.128 142.128 0 0 1 19.311-1.352c74.656 0 135.176 60.521 135.176 135.177z\"\n      fill=\"#c52828\"\n    />\n    <path\n      d=\"M463.757 211.249c-.029 67.173-49.378 124.131-115.865 133.728-66.487-9.598-115.837-66.555-115.866-133.728-.019-67.212 49.349-124.227 115.866-133.825 66.516 9.598 115.875 66.613 115.865 133.825z\"\n      fill=\"#f44335\"\n    />\n    <g fill=\"#fdd834\">\n      <path d=\"M380.527 230.56h-26.649a8.208 8.208 0 0 1-8.4-7.242l-7.242-90.472c-.212-4.47 3.235-8.275 7.705-8.497.232-.01.463-.01.695 0h41.036a8.105 8.105 0 0 1 8.4 7.802c.01.232.01.463 0 .695l-7.242 90.472c-.501 4.181-4.093 7.319-8.303 7.242zM362.085 269.181h10.235c7.84 0 14.194 6.353 14.194 14.194v10.235c0 7.84-6.353 14.194-14.194 14.194h-10.235c-7.84 0-14.194-6.353-14.194-14.194v-10.235c.001-7.84 6.354-14.194 14.194-14.194z\" />\n    </g>\n    <path\n      d=\"M308.015 332.714a132.057 132.057 0 0 1-24.332-15.256 138.367 138.367 0 0 1-25.587-26.456 134.123 134.123 0 0 1-26.07-79.754 136.453 136.453 0 0 1 3.09-28.966 129.801 129.801 0 0 1 9.655-28.966c-24.428-39.201-50.691-78.113-85.547-108.334-2.607-2.221-5.214-4.442-7.917-6.566a161.051 161.051 0 0 0-14.387-10.621 80.965 80.965 0 0 0-13.807-7.145c1.641 7.338 3.476 14.773 4.731 22.208a180.355 180.355 0 0 1 2.993 26.939v7.145a192.012 192.012 0 0 1-60.829 139.521 202.647 202.647 0 0 0-43.836 52.719 149.063 149.063 0 0 0-6.566 120.017 152.006 152.006 0 0 0 22.208 40.167 164.926 164.926 0 0 0 106.21 61.891 86.874 86.874 0 0 1-44.801-32.249 51.315 51.315 0 0 1-3.669-5.6 77.46 77.46 0 0 1-6.469-13.325 79.464 79.464 0 0 1 3.766-63.726 111.914 111.914 0 0 1 23.463-28.387 101.983 101.983 0 0 0 32.442-74.25v-3.862a97.875 97.875 0 0 0-4.731-27.132 112.539 112.539 0 0 1 10.911 6.566 108.053 108.053 0 0 1 30.222 30.801 100.963 100.963 0 0 1 15.835 46.443v8.4a100.92 100.92 0 0 1-18.249 57.933c22.98 13.035 38.622-8.593 44.994-28.966a60.067 60.067 0 0 0 2.51-12.842 88.458 88.458 0 0 1 28.966 61.312v5.214c-2.704 33.678-25.346 62.451-57.45 72.995 73.353-11.789 128.717-72.889 133.245-147.053a131.977 131.977 0 0 1-30.994-10.815z\"\n      fill=\"#f57c00\"\n    />\n    <path\n      d=\"M263.117 417.489v-5.214a88.462 88.462 0 0 0-28.966-61.312 60.129 60.129 0 0 1-2.51 12.842c-5.986 20.47-22.014 42.098-44.994 28.966a100.923 100.923 0 0 0 18.249-57.933v-.966-7.338a100.971 100.971 0 0 0-15.835-46.443 108.027 108.027 0 0 0-30.222-30.801 108.949 108.949 0 0 0-39.877-35.532 97.838 97.838 0 0 1 4.731 27.132v3.862a101.988 101.988 0 0 1-32.442 74.25 111.924 111.924 0 0 0-23.366 28.387 79.491 79.491 0 0 0-3.573 63.726 83.948 83.948 0 0 0 35.436 42.291 51.315 51.315 0 0 0 3.669 5.6 86.886 86.886 0 0 0 44.415 32.249 164.927 164.927 0 0 1-106.21-61.892 152.082 152.082 0 0 1-22.014-40.167 149.055 149.055 0 0 1 6.564-120.015 202.714 202.714 0 0 1 44.029-53.202A192.012 192.012 0 0 0 131.03 76.458v-7.145a180.486 180.486 0 0 0-2.993-26.939c-1.255-7.435-3.09-14.869-4.731-22.208a80.965 80.965 0 0 1 13.807 7.145 159.446 159.446 0 0 1 14.773 10.718c2.704 2.124 5.311 4.345 7.917 6.566 34.856 30.222 61.119 69.133 85.547 108.334a129.75 129.75 0 0 0-9.655 28.966 136.634 136.634 0 0 0-3.669 29.353 134.116 134.116 0 0 0 26.07 79.754 138.396 138.396 0 0 0 25.587 26.456 132.164 132.164 0 0 0 24.332 15.256 152.203 152.203 0 0 1-44.898 84.775z\"\n      fill=\"#ff9801\"\n    />\n    <path d=\"M147.831 500.912h-1.448c-61.756-8.7-113.963-50.15-136.432-108.334a158.725 158.725 0 0 1 7.338-127.355 212.528 212.528 0 0 1 45.96-55.809 181.787 181.787 0 0 0 57.933-132.473v-6.759a171.298 171.298 0 0 0-2.8-25.587c-.966-5.697-2.221-11.2-3.476-16.704l-1.159-5.117c-1.178-5.204 2.076-10.37 7.28-11.548a9.663 9.663 0 0 1 5.948.541 89.473 89.473 0 0 1 15.449 8.014 172.47 172.47 0 0 1 15.449 11.2c41.036 32.732 70.871 77.244 95.589 117.314a9.673 9.673 0 0 1 .483 9.655 121.056 121.056 0 0 0-9.655 26.842 128.158 128.158 0 0 0-2.607 26.456c.01 59.198 41.374 110.333 99.258 122.721a9.655 9.655 0 0 1 7.628 9.655c-3.186 77.244-61.216 141.742-141.163 156.129-5.253.927-10.254-2.588-11.181-7.84a9.65 9.65 0 0 1 6.353-10.795c29.99-9.8 50.517-37.492 51.174-69.037a67.618 67.618 0 0 0-14.387-40.746 56.78 56.78 0 0 1-24.139 31.091 33.122 33.122 0 0 1-33.408-1.448c-4.644-2.626-6.276-8.516-3.659-13.16.145-.261.299-.502.473-.743a91.187 91.187 0 0 0 16.511-52.429v-.772a90.743 90.743 0 0 0-14.58-48.277 98.107 98.107 0 0 0-19.311-21.532v9.945a111.13 111.13 0 0 1-35.436 81.299 103.445 103.445 0 0 0-21.532 25.78 69.873 69.873 0 0 0-3.09 56.002 76.304 76.304 0 0 0 49.533 44.512c5.33.801 9.009 5.774 8.207 11.104-.801 5.328-5.774 8.997-11.103 8.205zM137.113 39.478v1.738a188.136 188.136 0 0 1 3.09 28.194v7.435A200.926 200.926 0 0 1 76.38 223.318a192.998 192.998 0 0 0-42.098 50.498 139.414 139.414 0 0 0-6.469 111.907 148.682 148.682 0 0 0 65.561 76.568 89.522 89.522 0 0 1-15.159-49.726 91.25 91.25 0 0 1 9.655-40.167 119.46 119.46 0 0 1 25.394-31.091 92.026 92.026 0 0 0 29.449-67.588v-3.09a88.799 88.799 0 0 0-4.248-24.911 9.653 9.653 0 0 1 6.237-12.147 9.638 9.638 0 0 1 7.473.657 119.392 119.392 0 0 1 44.705 40.649 110.062 110.062 0 0 1 17.669 58.898v1.159a110.343 110.343 0 0 1-13.035 52.139 12.555 12.555 0 0 0 4.731-1.448c9.655-5.31 17.283-22.497 18.345-35.436.434-5.31 5.088-9.269 10.409-8.844a9.61 9.61 0 0 1 6.006 2.761 95.586 95.586 0 0 1 32.153 68.168 89.528 89.528 0 0 1-13.711 47.408 146.774 146.774 0 0 0 69.133-108.817c-62.77-17.37-106.22-74.492-106.21-139.618a146.655 146.655 0 0 1 3.283-30.994 139.876 139.876 0 0 1 8.497-26.263c-23.27-37.077-51.27-78.402-88.541-108.045a113.049 113.049 0 0 0-8.496-6.467z\" />\n    <path d=\"M367.203 356.081a144.841 144.841 0 0 1-89.506-30.994 143.882 143.882 0 0 1-55.326-113.838 146.655 146.655 0 0 1 3.283-30.994 140.652 140.652 0 0 1 10.814-31.091c23.965-50.498 74.839-82.699 130.735-82.747 79.986.019 144.813 64.875 144.803 144.861a144.848 144.848 0 0 1-55.297 113.809 143.543 143.543 0 0 1-89.506 30.994zm0-270.353c-48.47.019-92.586 27.943-113.355 71.74a121.83 121.83 0 0 0-9.655 26.939 127.805 127.805 0 0 0-2.51 26.842c.01 59.198 41.374 110.333 99.258 122.721a125.763 125.763 0 0 0 26.263 2.8c69.326 0 125.521-56.195 125.521-125.521S436.519 85.728 367.203 85.728z\" />\n    <path d=\"M380.527 240.215h-26.649c-9.279.097-17.109-6.894-18.056-16.125l-7.242-90.085a17.201 17.201 0 0 1 4.538-13.035 18.38 18.38 0 0 1 13.518-5.89h41.036a18.375 18.375 0 0 1 13.518 5.89 17.204 17.204 0 0 1 4.635 13.035l-7.242 90.472c-1.139 9.076-8.912 15.854-18.056 15.738zm-25.49-19.311h24.525l6.952-86.899h-38.622l7.145 86.899zM372.32 317.459h-10.235c-13.151-.048-23.801-10.698-23.849-23.849v-10.235c.048-13.151 10.698-23.801 23.849-23.849h10.138c13.189 0 23.888 10.66 23.946 23.849v10.138c0 13.18-10.669 23.888-23.849 23.946zm-10.138-38.622a4.635 4.635 0 0 0-4.538 4.538v10.138a4.635 4.635 0 0 0 4.538 4.538h10.138a4.635 4.635 0 0 0 4.538-4.538v-10.138a4.635 4.635 0 0 0-4.538-4.538h-10.138z\" />\n  </svg>\n);\n\nexport default FireOn;\n","import React from \"react\";\n\nconst FloodOn = props => (\n  <svg viewBox=\"0 0 512.002 512.002\" {...props}>\n    <path\n      d=\"M481.929 324.35c0 65.951-53.464 119.415-119.415 119.415a111.938 111.938 0 0 1-17.059-1.279c-58.735-8.478-102.33-58.795-102.356-118.135-.017-59.375 43.595-109.742 102.356-118.221a125.333 125.333 0 0 1 17.059-1.194c65.951-.001 119.415 53.462 119.415 119.414z\"\n      fill=\"#c52828\"\n    />\n    <path\n      d=\"M447.81 324.35c-.026 59.341-43.621 109.657-102.356 118.135-58.735-8.478-102.33-58.795-102.356-118.135-.017-59.375 43.595-109.742 102.356-118.221 58.77 8.487 102.373 58.846 102.356 118.221z\"\n      fill=\"#f44335\"\n    />\n    <g fill=\"#fdd834\">\n      <path d=\"M374.285 341.409h-23.542a7.251 7.251 0 0 1-7.421-6.397l-6.397-79.923a7.174 7.174 0 0 1 6.807-7.506c.205-.009.409-.009.614 0h36.251a7.16 7.16 0 0 1 7.421 6.892c.009.205.009.409 0 .614l-6.397 79.923a7.249 7.249 0 0 1-7.336 6.397zM357.993 375.527h9.041c6.926 0 12.539 5.612 12.539 12.539v9.041c0 6.926-5.612 12.539-12.539 12.539h-9.041c-6.926 0-12.539-5.612-12.539-12.539v-9.041c0-6.926 5.621-12.539 12.539-12.539z\" />\n    </g>\n    <path\n      d=\"M318.415 435.235a153.553 153.553 0 0 1-19.192 22.859 157.081 157.081 0 0 1-50.154 33.095 159.575 159.575 0 0 1-61.413 12.283 149.268 149.268 0 0 1-20.556-1.365 155.17 155.17 0 0 1-40.857-10.833 156.698 156.698 0 0 1-84.017-82.311 152.753 152.753 0 0 1-12.368-60.219 150.27 150.27 0 0 1 17.059-69.005 752.602 752.602 0 0 1 42.648-68.237c15.268-22.774 29.513-46.145 44.013-69.346l34.119-54.504 7.335-11.771c4.504-7.353 14.117-9.656 21.469-5.143a15.525 15.525 0 0 1 5.143 5.143l34.716 55.869c-2.644 4.18-5.032 8.53-7.335 12.709a96.424 96.424 0 0 0-11.515 44.439 98.026 98.026 0 0 0 8.018 38.725 100.313 100.313 0 0 0 21.921 31.56 106.83 106.83 0 0 0 9.98 8.53 115.344 115.344 0 0 0-11.6 31.048 120.546 120.546 0 0 0-2.729 25.589c.041 48.9 29.878 92.828 75.315 110.885z\"\n      fill=\"#0377bc\"\n    />\n    <path\n      d=\"M277.217 435.235a153.553 153.553 0 0 1-19.192 22.859 157.081 157.081 0 0 1-50.154 33.095 158.847 158.847 0 0 1-40.772 10.833 155.17 155.17 0 0 1-40.857-10.833 156.698 156.698 0 0 1-84.017-82.311 152.657 152.657 0 0 1-12.368-60.134 150.27 150.27 0 0 1 17.059-69.005 752.602 752.602 0 0 1 42.648-68.237c15.268-22.774 29.513-46.145 44.013-69.346l34.119-54.504c9.212 14.671 18.339 29.427 27.465 44.098-2.644 4.18-5.032 8.53-7.335 12.709a96.502 96.502 0 0 0-10.833 44.354 98.026 98.026 0 0 0 8.018 38.725 100.313 100.313 0 0 0 21.921 31.56 106.83 106.83 0 0 0 9.98 8.53 115.323 115.323 0 0 0-12.283 31.133 120.546 120.546 0 0 0-2.729 25.589c.043 48.9 29.88 92.828 75.317 110.885z\"\n      fill=\"#02a9f4\"\n    />\n    <path\n      d=\"M411.388 144.545a477.911 477.911 0 0 0-27.636-43.842c-9.894-14.586-19.192-29.598-28.489-44.525L328.395 13.53c-3.037-4.708-9.323-6.065-14.031-3.028a10.259 10.259 0 0 0-3.028 3.028l-12.794 20.215-14.074 22.433c-9.297 14.927-18.595 29.939-28.489 44.525-6.994 10.236-13.989 20.471-20.301 31.133-2.644 4.18-5.032 8.53-7.335 12.709a96.502 96.502 0 0 0-10.833 44.354 98.758 98.758 0 0 0 29.939 70.284 106.83 106.83 0 0 0 9.98 8.53 119.423 119.423 0 0 1 84.017-60.902 114.9 114.9 0 0 1 21.068-1.877c5.186.009 10.372.324 15.524.938a119.369 119.369 0 0 1 39.578 12.539 96.462 96.462 0 0 0-6.228-73.866z\"\n      fill=\"#0377bc\"\n    />\n    <path\n      d=\"M379.573 188.899a93.046 93.046 0 0 1-1.535 17.059 131.537 131.537 0 0 0-15.524-1.024 114.797 114.797 0 0 0-21.068 1.877 119.425 119.425 0 0 0-84.017 60.902 106.96 106.96 0 0 1-9.98-8.53c-31.099-29.743-38.878-76.417-19.106-114.638 2.303-4.35 4.691-8.53 7.335-12.709 6.312-10.662 13.306-20.898 20.301-31.133 9.894-14.586 19.192-29.598 28.489-44.525l14.074-22.433 14.074 22.433c9.297 14.927 18.595 29.939 28.489 44.525a477.911 477.911 0 0 1 27.636 43.842 96.401 96.401 0 0 1 10.832 44.354z\"\n      fill=\"#02a9f4\"\n    />\n    <path d=\"M187.656 512.002a167.398 167.398 0 0 1-64.655-12.88 165.226 165.226 0 0 1-88.623-86.746 160.466 160.466 0 0 1-13.05-63.631 158.81 158.81 0 0 1 17.656-72.928 698.388 698.388 0 0 1 39.663-63.887l3.412-5.032c12.027-17.998 23.627-36.677 34.886-54.76L167.1 71.531c6.986-11.353 21.861-14.893 33.214-7.898a24.1 24.1 0 0 1 7.898 7.898l17.059 27.38 17.827 28.404a8.521 8.521 0 0 1 0 9.383c-2.559 4.009-4.777 8.018-6.994 12.112a87.69 87.69 0 0 0-10.065 40.089 89.456 89.456 0 0 0 7.335 35.398 92.438 92.438 0 0 0 20.045 28.83 99.608 99.608 0 0 0 9.212 7.847 8.534 8.534 0 0 1 2.303 10.918 106.955 106.955 0 0 0-10.747 28.745 112.483 112.483 0 0 0-2.559 23.712c.009 45.429 27.721 86.26 69.943 103.038 4.393 1.706 6.559 6.653 4.853 11.046a8.584 8.584 0 0 1-.93 1.749 162.407 162.407 0 0 1-20.301 24.139 164.29 164.29 0 0 1-52.884 34.886 167.489 167.489 0 0 1-64.653 12.795zm0-435.012a6.99 6.99 0 0 0-6.056 3.412l-50.154 80.69c-11.344 18.168-23.03 37.019-35.227 55.187l-3.412 5.032a687.543 687.543 0 0 0-38.725 62.266 141.613 141.613 0 0 0-15.695 65.166 143.56 143.56 0 0 0 11.686 56.893 148.16 148.16 0 0 0 79.411 77.79 152.855 152.855 0 0 0 116.344 0 147.616 147.616 0 0 0 47.425-31.133 143.446 143.446 0 0 0 12.027-13.306c-43.322-21.802-70.668-66.139-70.711-114.638a129.576 129.576 0 0 1 2.9-27.38 124.357 124.357 0 0 1 9.212-26.954 136.293 136.293 0 0 1-5.203-4.691 109.87 109.87 0 0 1-23.798-34.119 106.411 106.411 0 0 1-8.53-42.136c0-16.803 4.035-33.359 11.771-48.278 1.621-3.071 3.241-5.971 4.862-8.53l-14.927-24.054-17.059-27.38a7.087 7.087 0 0 0-6.141-3.837z\" />\n    <path d=\"M99.971 442.4A8.521 8.521 0 0 1 94 439.926a129.631 129.631 0 0 1-28.318-41.113 126.28 126.28 0 0 1-10.236-50.069 124.503 124.503 0 0 1 13.818-57.234c1.868-4.325 6.883-6.32 11.208-4.452s6.32 6.883 4.452 11.208c-.162.375-.35.742-.563 1.092a107.494 107.494 0 0 0-11.856 49.387 109.211 109.211 0 0 0 8.53 43.331 112.626 112.626 0 0 0 24.565 35.739c3.344 3.318 3.369 8.717.051 12.061a8.549 8.549 0 0 1-6.022 2.525l.342-.001zM257.428 276.242a8.526 8.526 0 0 1-5.118-1.706 115.222 115.222 0 0 1-10.747-9.212 109.87 109.87 0 0 1-23.798-34.119 106.411 106.411 0 0 1-8.53-42.136c0-16.803 4.035-33.359 11.771-48.278 2.559-4.862 5.118-9.212 7.677-13.306 6.312-10.662 13.392-21.068 20.386-31.218 9.041-13.903 17.912-27.807 26.442-41.881L304 8.753c5.485-8.734 17.017-11.379 25.751-5.894a18.698 18.698 0 0 1 5.894 5.894l28.574 45.634c8.53 13.733 17.059 27.977 26.612 41.539l1.706 2.474a457.473 457.473 0 0 1 26.442 42.136 104.968 104.968 0 0 1 6.824 80.434c-1.433 4.487-6.235 6.969-10.722 5.536a8.282 8.282 0 0 1-1.39-.589 112.612 112.612 0 0 0-106.535 2.388 110.28 110.28 0 0 0-42.136 43.416 8.52 8.52 0 0 1-5.715 4.265l-1.877.256zm62.437-258.959a1.541 1.541 0 0 0-1.365.768l-28.489 45.378c-8.53 13.903-17.571 28.233-26.954 42.051-6.909 10.065-13.903 20.301-20.045 30.707-2.644 4.18-4.947 8.53-7.165 12.368a87.722 87.722 0 0 0-9.809 40.345 89.456 89.456 0 0 0 7.335 35.398 92.438 92.438 0 0 0 20.045 28.83l1.791 1.706a127.216 127.216 0 0 1 43.331-41.369 129.73 129.73 0 0 1 113.359-7.25 87.904 87.904 0 0 0-8.53-57.831 444.102 444.102 0 0 0-25.589-40.516l-1.706-2.474c-9.383-13.818-18.339-28.148-26.954-42.051L321.23 18.05a1.532 1.532 0 0 0-1.365-.767z\" />\n    <path d=\"M271.246 243.233a8.519 8.519 0 0 1-5.971-2.388 75.502 75.502 0 0 1-16.292-23.456 71.923 71.923 0 0 1-5.885-28.489 70.537 70.537 0 0 1 7.933-32.498c1.877-3.582 4.009-7.25 6.227-10.833l.512-.768a8.538 8.538 0 0 1 11.609-3.284 8.538 8.538 0 0 1 3.284 11.609 6.997 6.997 0 0 1-.392.631l-.512.853c-2.132 3.327-3.924 6.568-5.63 9.724a53.307 53.307 0 0 0-5.971 24.565 54.816 54.816 0 0 0 4.435 21.665 58.198 58.198 0 0 0 12.624 18.083c3.395 3.267 3.489 8.666.222 12.061a8.518 8.518 0 0 1-6.193 2.61v-.085z\" />\n    <path d=\"M362.514 452.294c-70.66 0-127.945-57.285-127.945-127.945a129.576 129.576 0 0 1 2.9-27.38 123.98 123.98 0 0 1 12.453-33.351 127.15 127.15 0 0 1 48.619-50.154c37.94-21.495 84.136-22.518 122.997-2.729 62.744 32.489 87.275 109.7 54.777 172.452-22.005 42.512-65.916 69.184-113.801 69.107zm0-238.83c-40.763.009-78.234 22.382-97.579 58.257a107.238 107.238 0 0 0-10.747 28.83 112.818 112.818 0 0 0-2.559 23.798c0 61.243 49.643 110.885 110.885 110.885s110.885-49.642 110.885-110.885-49.643-110.885-110.885-110.885z\" />\n    <path d=\"M374.285 349.939h-23.542c-8.231.085-15.157-6.141-15.95-14.33l-6.397-79.496a15.26 15.26 0 0 1 4.009-11.515 16.312 16.312 0 0 1 11.942-5.203h36.251a16.31 16.31 0 0 1 11.941 5.203 15.27 15.27 0 0 1 4.094 11.515l-6.397 79.923c-.999 8.026-7.865 14.013-15.951 13.903zm-22.519-17.06h21.665l6.141-76.767h-34.119l6.313 76.767zM367.034 418.176h-9.041c-11.617-.043-21.026-9.451-21.068-21.068v-9.041c.043-11.617 9.451-21.026 21.068-21.068h8.956c11.651 0 21.102 9.417 21.153 21.068v8.956c.001 11.651-9.416 21.11-21.068 21.153zm-8.956-34.119a4.095 4.095 0 0 0-4.009 4.009v8.956a4.095 4.095 0 0 0 4.009 4.009h8.956a4.095 4.095 0 0 0 4.009-4.009v-8.956a4.095 4.095 0 0 0-4.009-4.009h-8.956z\" />\n  </svg>\n);\n\nexport default FloodOn;\n","import React from \"react\";\r\n\r\nconst Gate = props => (\r\n    <svg viewBox=\"0 0 512 512\" {...props}>\r\n    <path fill=\"currentColor\" d=\"M462,226c-5.52,0-10,4.48-10,10s4.48,10,10,10c5.52,0,10-4.48,10-10S467.52,226,462,226z\"/>\r\n    <path fill=\"currentColor\" d=\"M50,226c-5.52,0-10,4.48-10,10s4.48,10,10,10s10-4.48,10-10S55.52,226,50,226z\"/>\r\n\t<path fill=\"currentColor\" d=\"M502,126h-0.027C508.265,117.637,512,107.248,512,96c0-27.57-22.43-50-50-50s-50,22.43-50,50\r\n\t\tc0,11.248,3.735,21.637,10.027,30H422c-5.522,0-10,4.478-10,10v50.03c-7.399,0.025-17.158,0.065-23,0.113V166.63\r\n\t\tc0-5.522-4.478-10-10-10c-5.522,0-10,4.478-10,10v12.435c-0.931-0.964-1.899-2.045-2.923-3.258\r\n\t\tc-10.745-12.754-24.515-23.761-40.077-32.106V121.83c0-5.522-4.478-10-10-10c-5.522,0-10,4.478-10,10v12.983\r\n\t\tc-12.92-4.643-26.438-7.5-40-8.448V96c0-5.522-4.478-10-10-10c-5.522,0-10,4.478-10,10v30.365\r\n\t\tc-13.565,0.948-27.084,3.807-40,8.452V120.17c0-5.522-4.477-10-10-10s-10,4.478-10,10v23.542\r\n\t\tc-15.764,8.457-29.695,19.652-40.55,32.652c-0.758,0.908-1.587,1.755-2.45,2.566v-12.3c0-5.522-4.477-10-10-10s-10,4.478-10,10\r\n\t\tv20.385c-4.189,0.067-14.913,0.05-23,0.024V136c0-5.522-4.477-10-10-10h-0.027C96.265,117.637,100,107.248,100,96\r\n\t\tc0-27.57-22.43-50-50-50S0,68.43,0,96c0,11.248,3.735,21.637,10.027,30H10c-5.523,0-10,4.478-10,10v320c0,5.522,4.477,10,10,10h80\r\n\t\tc5.523,0,10-4.478,10-10v-11h312v11c0,5.522,4.478,10,10,10h80c5.522,0,10-4.478,10-10V136C512,130.478,507.522,126,502,126z\r\n\t\t M80,446H20V146h20v50c0,5.522,4.477,10,10,10s10-4.478,10-10v-50h20V446z M50,126c-16.542,0-30-13.458-30-30s13.458-30,30-30\r\n\t\ts30,13.458,30,30S66.542,126,50,126z M123,425h-23v-19h23V425z M123,386h-23V247h23V386z M123,227h-23v-19.959\r\n\t\tc3.808,0.011,8.197,0.022,12.244,0.022c4.378,0,8.351-0.012,10.756-0.046V227z M186,425h-43v-19h43V425z M186,276v40v70h-43\r\n\t\tV244.817c16.149-3.513,31.29-11.046,43-21.321V276z M186,194.605c-2.373,2.327-4.659,4.785-6.815,7.365\r\n\t\tc-8.521,10.2-21.771,18.214-36.185,22.224v-21.525c6.846-3.098,13.007-7.736,17.806-13.49c7.006-8.391,15.56-15.917,25.194-22.232\r\n\t\tV194.605z M206,156.285c12.757-5.415,26.344-8.765,40-9.871v20.099c-14.162,1.416-27.777,5.83-40,12.895V156.285z M206,203.562\r\n\t\tc11.538-9.26,25.37-15.088,40-16.922V266h-40V203.562z M246,425h-40v-19h40V425z M246,386h-40v-60h40V386z M306,425h-40v-19h40\r\n\t\tV425z M306,386h-40v-60h40V386z M306,306H206v-20h100V306z M306,266h-40v-79.359c14.617,1.835,28.449,7.664,40,16.924V266z\r\n\t\t M306,179.418c-12.232-7.071-25.847-11.487-40-12.904v-20.1c13.651,1.106,27.238,4.454,40,9.865V179.418z M369,425h-43v-19h43V425\r\n\t\tz M369,386h-43v-70v-40v-52.635c11.722,10.137,26.674,17.329,43,20.634V386z M369,223.458\r\n\t\tc-14.663-3.788-27.83-11.575-36.517-21.887c-2.039-2.417-4.216-4.742-6.483-6.965v-27.672c9.465,6.201,17.88,13.567,24.789,21.767\r\n\t\tc4.64,5.496,10.324,11.234,18.211,14.57V223.458z M412,425h-23v-19h23V425z M412,386h-23V246h23V386z M412,226h-23v-19.856\r\n\t\tc5.683-0.048,15.526-0.088,23-0.113V226z M492,446h-60V146h20v50c0,5.522,4.478,10,10,10c5.522,0,10-4.478,10-10v-50h20V446z\r\n\t\t M462,126c-16.542,0-30-13.458-30-30s13.458-30,30-30s30,13.458,30,30S478.542,126,462,126z\"/>\r\n</svg>\r\n);\r\n\r\nexport default Gate;","import React from \"react\";\n\nconst Humidity = props => (\n  <svg viewBox=\"0 0 511.448 511.448\" {...props}>\n    <path\n      d=\"M344.556 112.216C318.38 78.84 291.34 44.344 269.516 7.32c-5.76-9.76-21.824-9.76-27.552 0-21.856 37.024-48.896 71.52-75.072 104.896-53.056 67.68-103.168 131.616-103.168 207.232 0 105.888 86.112 192 192 192s192-86.112 192-192c0-75.616-50.112-139.552-103.168-207.232z\"\n      fill=\"#2196f3\"\n    />\n    <g fill=\"#fafafa\">\n      <path d=\"M207.724 287.448c-26.464 0-48-21.536-48-48s21.536-48 48-48 48 21.536 48 48-21.536 48-48 48zm0-64c-8.832 0-16 7.168-16 16s7.168 16 16 16 16-7.168 16-16-7.168-16-16-16zM303.724 447.448c-26.464 0-48-21.536-48-48s21.536-48 48-48 48 21.536 48 48-21.536 48-48 48zm0-64c-8.8 0-16 7.2-16 16s7.2 16 16 16 16-7.2 16-16-7.2-16-16-16zM175.724 415.448a16.07 16.07 0 0 1-11.328-4.672c-6.24-6.24-6.24-16.384 0-22.624l160-160c6.24-6.24 16.384-6.24 22.624 0s6.24 16.384 0 22.624l-160 160a15.943 15.943 0 0 1-11.296 4.672z\" />\n    </g>\n  </svg>\n);\n\nexport default Humidity;\n","import React from \"react\";\n\nconst MotionOn = props => (\n  <svg viewBox=\"0 0 63.907 63.907\" fill=\"currentColor\" {...props}>\n    <circle fill=\"currentColor\" cx={30.515} cy={6.136} r={6.136} />\n    <path fill=\"currentColor\" d=\"M47.399 27.455C42.346 24.53 38.2 20.579 34.71 15.931c-2.193-3.084-7.991-2.923-10.347-.097-3.584 3.487-6.625 7.081-9.037 10.677a3.209 3.209 0 0 0 5.329 3.573 54.205 54.205 0 0 1 3.59-4.734c-.051 3.333.116 9.347.2 12.05.028.9-.177 1.78-.595 2.579-3.308 6.317-5.424 12.294-7.572 19.606a3.37 3.37 0 1 0 6.465 1.901c1.982-6.742 3.897-12.201 6.884-17.981.152.006.304.006.458-.001 1.907 5.69 3.815 11.383 5.725 17.073 1.387 4.147 7.822 1.993 6.431-2.155-2.087-6.221-4.171-12.439-6.251-18.659-.121-.357-.414-1.755-.455-2.211-.344-3.832-.469-7.652-.432-11.477a51.027 51.027 0 0 0 9.782 7.328c3.597 2.088 6.063-3.891 2.514-5.948z\" />\n  </svg>\n);\n\nexport default MotionOn;\n","import React from \"react\";\n\nconst RGB = props => (\n    <svg viewBox=\"1 -10 511.99999 511\" {...props}>\n      <g fill=\"currentColor\" >\n        <path d=\"M 405.5 150 C 405.5 232.566406 338.566406 299.5 256 299.5 C 173.433594 299.5 106.5 232.566406 106.5 150 C 106.5 67.433594 173.433594 0.5 256 0.5 C 338.566406 0.5 405.5 67.433594 405.5 150 Z M 405.5 150 \" style={{stroke: 'none', fillRule: 'nonzero', fill: 'rgb(25.882353%,75.294118%,88.627451%)', fillOpacity: 1}} />\n        <path d=\"M 512 342.921875 C 512 425.488281 445.066406 492.421875 362.5 492.421875 C 279.933594 492.421875 213 425.488281 213 342.921875 C 213 260.355469 279.933594 193.421875 362.5 193.421875 C 445.066406 193.421875 512 260.355469 512 342.921875 Z M 512 342.921875 \" style={{stroke: 'none', fillRule: 'nonzero', fill: 'rgb(100%,81.568627%,38.039216%)', fillOpacity: 1}} />\n        <path d=\"M 220.746094 295.308594 C 232.050781 298.039062 243.855469 299.5 256 299.5 C 321.917969 299.5 377.871094 256.835938 397.753906 197.613281 C 386.449219 194.878906 374.644531 193.421875 362.5 193.421875 C 296.582031 193.421875 240.628906 236.085938 220.746094 295.308594 Z M 220.746094 295.308594 \" style={{stroke: 'none', fillRule: 'nonzero', fill: 'rgb(28.627451%,74.117647%,56.470588%)', fillOpacity: 1}} />\n        <path d=\"M 299 342.921875 C 299 425.488281 232.066406 492.421875 149.5 492.421875 C 66.933594 492.421875 0 425.488281 0 342.921875 C 0 260.355469 66.933594 193.421875 149.5 193.421875 C 232.066406 193.421875 299 260.355469 299 342.921875 Z M 299 342.921875 \" style={{stroke: 'none', fillRule: 'nonzero', fill: 'rgb(98.039216%,43.921569%,69.803922%)', fillOpacity: 1}} />\n        <path d=\"M 114.246094 197.613281 C 134.128906 256.835938 190.082031 299.5 256 299.5 C 268.144531 299.5 279.949219 298.039062 291.253906 295.308594 C 271.371094 236.085938 215.417969 193.421875 149.5 193.421875 C 137.355469 193.421875 125.550781 194.878906 114.246094 197.613281 Z M 114.246094 197.613281 \" style={{stroke: 'none', fillRule: 'nonzero', fill: 'rgb(68.627451%,48.235294%,77.647059%)', fillOpacity: 1}} />\n        <path d=\"M 213 342.921875 C 213 383.800781 229.414062 420.839844 256 447.828125 C 282.585938 420.839844 299 383.800781 299 342.921875 C 299 302.042969 282.585938 265.003906 256 238.015625 C 229.414062 265.003906 213 302.042969 213 342.921875 Z M 213 342.921875 \" style={{stroke: 'none', fillRule: 'nonzero', fill: 'rgb(93.72549%,38.039216%,13.333333%)', fillOpacity: 1}} />\n        <path d=\"M 291.253906 295.320312 C 279.949219 298.046875 268.140625 299.5 256 299.5 C 243.859375 299.5 232.050781 298.046875 220.746094 295.320312 C 228.058594 273.542969 240.242188 254.015625 256 238.015625 C 271.757812 254.015625 283.941406 273.542969 291.253906 295.320312 Z M 291.253906 295.320312 \" style={{stroke: 'none', fillRule: 'nonzero', fill: 'rgb(100%,100%,100%)', fillOpacity: 1}} />\n      </g>\n    </svg>\n);\n\nexport default RGB;\n","import React from \"react\";\n\nconst Socket = props => (\n  <svg\n    width={32}\n    height={32}\n    viewBox=\"0 0 365.445 365.445\"\n    {...props}\n  >\n    <g fill=\"currentColor\">\n      <path d=\"M146.7 162.775h-26.8a6.655 6.655 0 0 0-6.647 6.647v26.602a6.653 6.653 0 0 0 6.647 6.646h26.8a6.654 6.654 0 0 0 6.647-6.646v-26.602a6.655 6.655 0 0 0-6.647-6.647zM245.547 162.775h-26.801a6.653 6.653 0 0 0-6.646 6.647v26.602a6.652 6.652 0 0 0 6.646 6.646h26.801a6.654 6.654 0 0 0 6.646-6.646v-26.602a6.655 6.655 0 0 0-6.646-6.647z\" />\n    </g>\n    <path\n      d=\"M345.445 1.204H20c-11.046 0-20 8.954-20 20v323.037c0 11.045 8.954 20 20 20h325.445c11.045 0 20-8.955 20-20V21.204c0-11.045-8.953-20-20-20zM182.723 287.66c-57.955 0-104.937-46.981-104.937-104.937 0-57.957 46.982-104.938 104.937-104.938S287.66 124.767 287.66 182.723 240.678 287.66 182.723 287.66z\"\n      fill=\"currentColor\"\n    />\n  </svg>\n);\n\nexport default Socket;\n","import React from \"react\";\n\nconst Thermometer = props => (\n  <svg width={32} height={32} viewBox=\"0 0 45.659 45.659\" {...props}>\n    <path fill=\"currentColor\" d=\"M30.619 27.309V7.781C30.619 3.49 27.124 0 22.833 0c-4.29 0-7.785 3.491-7.785 7.78v19.528a10.722 10.722 0 0 0-3.05 7.522c0 5.972 4.857 10.828 10.829 10.828 5.97 0 10.834-4.856 10.834-10.828 0-2.918-1.141-5.572-3.042-7.521zM22.825 42.66c-4.316 0-7.824-3.512-7.824-7.828 0-2.527 1.174-4.779 3.077-6.211V16.237h3.372c.552 0 1-.47 1-1.022 0-.553-.448-1.021-1-1.021h-3.372v-2.466h3.372c.552 0 1-.434 1-.986a.989.989 0 0 0-1-.986h-3.372V7.78c0-2.636 2.119-4.78 4.754-4.78 2.637 0 4.756 2.144 4.756 4.781v20.871c1.903 1.434 3.047 3.671 3.047 6.18 0 4.316-3.494 7.828-7.81 7.828z\" />\n    <path fill=\"currentColor\" d=\"M25.334 30.463V18.632h-5.002v11.831a4.973 4.973 0 0 0-2.537 4.369 5.038 5.038 0 0 0 5.038 5.046 5.034 5.034 0 0 0 5.034-5.046c0-1.866-.982-3.495-2.533-4.369z\" />\n  </svg>\n);\n\nexport default Thermometer;\n","import React from \"react\";\r\n\r\nconst Thermostat = props => (\r\n    <svg viewBox=\"0 0 297 297\" {...props}>\r\n        <g>\r\n            <path fill=\"currentColor\" d=\"m243.404,138.042c-5.775,0-10.458,4.683-10.458,10.458 0,46.564-37.883,84.446-84.446,84.446s-84.446-37.882-84.446-84.446 37.883-84.446 84.446-84.446c5.775,0 10.458-4.683 10.458-10.458s-4.683-10.457-10.458-10.457c-58.097,0-105.361,47.265-105.361,105.361s47.264,105.361 105.361,105.361 105.361-47.264 105.361-105.361c0-5.775-4.681-10.458-10.457-10.458z\"/>\r\n            <path fill=\"currentColor\" d=\"m142.963,121.344l-20.272-30.41c-3.203-4.807-9.695-6.104-14.502-2.9-4.805,3.202-6.104,9.695-2.9,14.502l20.279,30.422c-3.015,4.436-4.78,9.787-4.78,15.543 0,15.281 12.432,27.713 27.713,27.713 15.281,0 27.713-12.432 27.713-27.713 0-15.281-12.432-27.713-27.713-27.713-1.897-0.001-3.749,0.191-5.538,0.556zm12.335,27.156c0,3.748-3.05,6.798-6.798,6.798s-6.798-3.05-6.798-6.798 3.05-6.798 6.798-6.798 6.798,3.05 6.798,6.798z\"/>\r\n            <path fill=\"currentColor\" d=\"M148.5,0C66.617,0,0,66.617,0,148.5S66.617,297,148.5,297S297,230.383,297,148.5S230.383,0,148.5,0z M158.958,275.653   v-6.366c0-5.775-4.683-10.458-10.458-10.458c-5.775,0-10.458,4.683-10.458,10.458v6.366   c-62.027-5.056-111.64-54.668-116.695-116.695h6.366c5.775,0,10.458-4.683,10.458-10.458s-4.683-10.458-10.458-10.458h-6.366   c5.056-62.027,54.668-111.64,116.695-116.695v6.366c0,5.775,4.683,10.458,10.458,10.458c5.775,0,10.458-4.683,10.458-10.458v-6.366   c62.027,5.056,111.64,54.668,116.695,116.695h-6.366c-5.775,0-10.458,4.683-10.458,10.458s4.683,10.458,10.458,10.458h6.366   C270.598,220.985,220.985,270.598,158.958,275.653z\"/>\r\n        </g>\r\n    </svg>\r\n);\r\n\r\nexport default Thermostat;\r\n","import React from \"react\";\r\n\r\nconst HeatValve = props => (\r\n    <svg viewBox=\"0 0 512 512\" {...props}>\r\n        <path fill=\"currentColor\" d=\"M391,362h77.417L440.989,58.467C438.075,26.229,409.37,0,377,0H135c-32.37,0-61.075,26.229-63.989,58.467L43.583,362H121v30  H91v120h330V392h-30V362z M135,30h242c16.963,0,32.584,14.273,34.11,31.167L416.427,120H95.573l5.316-58.833  C102.416,44.273,118.037,30,135,30z M92.862,150h326.275l16.446,182H76.416L92.862,150z M151,362h210v30H151V362z M241,422v60h-45  v-60H241z M271,422h45v60h-45V422z M121,422h45v60h-45V422z M391,482h-45v-60h45V482z\"/>\r\n    </svg>\r\n);\r\n\r\nexport default HeatValve;\r\n","import React from \"react\";\n\nconst WindowOpened = props => (\n  <svg width={32} height={32} viewBox=\"0 0 361 361\" {...props}>\n    <path\n      d=\"M267.826 263.303c0 3.91-3.156 7.082-7.05 7.082l-157.885.021c-3.894 0-7.05-3.171-7.05-7.083v-157.5c0-3.911 3.156-7.083 7.05-7.083l157.885-.021c3.894 0 7.05 3.172 7.05 7.083v157.501z\"\n      fill=\"none\"\n      stroke=\"currentColor\"\n      strokeWidth={10}\n      strokeMiterlimit={10}\n    />\n    <path\n      d=\"M228.5 205.584h6.639c2.726 0 5-2.274 5-5s-2.274-5-5-5H228.5c-2.726 0-5 2.274-5 5s2.274 5 5 5z\"\n      fill=\"currentColor\"\n    />\n    <path\n      d=\"M267.826 103.208c0 2.485-2.711 4.5-6.053 4.5l-159.88.021c-3.342 0-6.052-2.015-6.052-4.5v-9c0-2.485 2.71-4.5 6.052-4.5l159.88-.021c3.342 0 6.053 2.015 6.053 4.5v9z\"\n      fill=\"none\"\n      stroke=\"currentColor\"\n      strokeWidth={10}\n      strokeMiterlimit={10}\n    />\n    <path\n      d=\"M232.826 280.905c-.339 3.356-18.813-.782-20.919-1.06l-45.073-5.94-45.074-5.94-14.507-1.912c-1.456-.192-6.201-.055-6.412-2.147-.621-6.157 0-12.699 0-18.878v-43.5-82.076-5.13c0-2.551 5.184-1.015 6.412-.853l35.438 4.67 83.723 11.035c1.457.192 6.201.055 6.412 2.147.169 1.673 0 3.451 0 5.13v144.454c0 6.448 10 6.448 10 0V136.451v-5.13c0-7.619-6.137-10.793-12.673-11.655l-28.531-3.76-88.411-11.652-9.897-1.304c-6.555-.864-12.473 4.9-12.473 11.38v144.832c0 2.023-.071 4.04.132 6.053.717 7.111 6.606 9.563 12.759 10.374l76.827 10.125 39.896 5.259 9.697 1.278c7.063.931 12.011-4.778 12.673-11.346.648-6.415-9.358-6.352-9.999 0z\"\n      fill=\"currentColor\"\n    />\n  </svg>\n);\n\nexport default WindowOpened;\n","import React from \"react\";\n\nconst WindowTilted = props => (\n  <svg width={32} height={32} viewBox=\"0 0 361 361\" {...props}>\n    <path\n      d=\"M267.826 263.303c0 3.91-3.156 7.082-7.05 7.082l-157.885.021c-3.894 0-7.05-3.171-7.05-7.083v-157.5c0-3.911 3.156-7.083 7.05-7.083l157.885-.021c3.894 0 7.05 3.172 7.05 7.083v157.501z\"\n      fill=\"none\"\n      stroke=\"currentColor\"\n      strokeWidth={10}\n      strokeMiterlimit={10}\n    />\n    <path\n      d=\"M267.826 103.208c0 2.485-2.711 4.5-6.053 4.5l-159.88.021c-3.342 0-6.052-2.015-6.052-4.5v-9c0-2.485 2.71-4.5 6.052-4.5l159.88-.021c3.342 0 6.053 2.015 6.053 4.5v9zM265.732 265.178c.584 2.887-1.629 5.228-4.942 5.228H103.457c-3.313 0-6.474-2.341-7.058-5.228L75.24 130.633c-.584-2.887 1.628-5.228 4.942-5.228h157.333c3.313 0 6.474 2.34 7.058 5.228l21.159 134.545z\"\n      fill=\"none\"\n      stroke=\"currentColor\"\n      strokeWidth={10}\n      strokeMiterlimit={10}\n    />\n    <path\n      d=\"M247.194 199.667h6.639c2.726 0 5-2.274 5-5s-2.274-5-5-5h-6.639c-2.726 0-5 2.274-5 5s2.275 5 5 5z\"\n      fill=\"currentColor\"\n    />\n  </svg>\n);\n\nexport default WindowTilted;\n","import React from \"react\";\r\n\r\nconst Cleaner = props => (\r\n    <svg viewBox=\"0 0 512 512\" {...props}>\r\n        <g fill=\"currentColor\">\r\n            <path d=\"M296,320H216a24,24,0,0,0,0,48h80a24,24,0,0,0,0-48Zm0,32H216a8,8,0,0,1,0-16h80a8,8,0,0,1,0,16Z\"/>\r\n            <path d=\"M68.071,123.492c22.578-13.918,52.2-25.229,85.674-32.71l-3.49-15.615c-35.688,7.977-66.163,19.653-90.58,34.705-17.914,11.043-32.041,23.643-41.99,37.451l12.98,9.354C39.376,144.588,51.961,133.423,68.071,123.492Z\"/>\r\n            <path d=\"M435.533,137.112C409.439,121.027,374,108.967,332.845,102.144,322.474,87,288.213,80,256,80s-66.474,7-76.845,22.144C138,108.967,102.561,121.027,76.467,137.112,47.376,155.045,32,176.792,32,200v96c0,29,24.155,55.7,68.016,75.193C141.813,389.77,197.209,400,256,400s114.187-10.23,155.984-28.807C455.845,351.7,480,325,480,296V200C480,176.792,464.624,155.045,435.533,137.112ZM177.64,151.23C185.676,168.192,221.98,176,256,176s70.324-7.808,78.36-24.77c21.862,4.212,41.832,10.19,58.13,17.44C422.343,181.941,432,195.509,432,200s-9.657,18.059-39.51,31.33C357.224,247.008,307.475,256,256,256s-101.224-8.992-136.49-24.67C89.657,218.059,80,204.491,80,200s9.657-18.059,39.512-31.331C135.808,161.42,155.778,155.442,177.64,151.23Zm14.36-19c15.6,8,40.35,11.773,64,11.773s48.4-3.775,64-11.773V144c0,.687-2.715,5.08-15.618,9.381C291.577,157.649,274.4,160,256,160s-35.577-2.351-48.382-6.619C194.715,149.08,192,144.687,192,144Zm15.618-29.608C220.423,98.351,237.605,96,256,96s35.577,2.351,48.382,6.619C317.285,106.92,320,111.313,320,112s-2.715,5.08-15.618,9.381C291.577,125.649,274.4,128,256,128s-35.577-2.351-48.382-6.619C194.715,117.08,192,112.687,192,112S194.715,106.92,207.618,102.619ZM176,118.937v16.319c-23.589,4.453-45.254,10.9-62.99,18.794C82.779,167.489,64,185.1,64,200s18.779,32.511,49.01,45.95C150.249,262.505,202.367,272,256,272s105.751-9.5,142.99-26.05C429.221,232.511,448,214.9,448,200s-18.779-32.511-49.008-45.95c-17.738-7.89-39.4-14.341-62.992-18.794V118.937C411.852,132.7,464,165.41,464,200c0,21.967-21.328,44.044-58.516,60.572C365.688,278.259,312.6,288,256,288s-109.688-9.741-149.484-27.428C69.328,244.044,48,221.967,48,200,48,165.41,100.148,132.7,176,118.937ZM464,296c0,21.967-21.327,44.044-58.514,60.572C365.689,374.259,312.6,384,256,384s-109.689-9.741-149.486-27.428C69.327,340.044,48,317.967,48,296V239.371c11.522,13.444,29.066,25.621,52.018,35.822C141.814,293.77,197.211,304,256,304s114.186-10.23,155.982-28.807c22.952-10.2,40.5-22.378,52.018-35.822Z\"/>\r\n            <path d=\"M418.482,385.814C374.684,405.28,316.979,416,256,416a488.01,488.01,0,0,1-78.705-6.23l-2.59,15.789A504.064,504.064,0,0,0,256,432c63.169,0,123.181-11.21,168.981-31.565q1.3-.576,2.572-1.16l-6.655-14.55Q419.7,385.274,418.482,385.814Z\"/>\r\n            <path d=\"M436.123,377.062l7.754,14c5.883-3.259,11.492-6.728,16.674-10.31l-9.1-13.161C446.7,370.871,441.546,374.059,436.123,377.062Z\"/>\r\n            <rect x=\"248\" y=\"192\" width=\"16\" height=\"16\"/>\r\n            <rect x=\"280\" y=\"192\" width=\"16\" height=\"16\"/>\r\n            <rect x=\"216\" y=\"192\" width=\"16\" height=\"16\"/>\r\n        </g>\r\n    </svg>\r\n);\r\n\r\nexport default Cleaner;\r\n","import React, {Component} from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nimport {Types} from 'iobroker.type-detector';\r\n\r\nimport TypeIconBlinds from '../icons/Jalousie';\r\nimport TypeIconButton from '../icons/PushButton';\r\nimport {GoDeviceCameraVideo as TypeIconCamera} from 'react-icons/go';\r\nimport {FaExternalLinkSquareAlt as TypeIconURL} from 'react-icons/fa';\r\nimport {FaImage as TypeIconImage} from 'react-icons/fa';\r\nimport {FaRegLightbulb as TypeIconDimmer} from 'react-icons/fa';\r\nimport TypeIconDoor from '../icons/DoorOpened';\r\nimport TypeIconFireAlarm from '../icons/FireOn';\r\nimport TypeIconFloodAlarm from '../icons/FloodOn';\r\nimport TypeIconGate from '../icons/Gate';\r\nimport TypeIconHumidity from '../icons/Humidity';\r\nimport {FaInfoCircle as TypeIconInfo} from 'react-icons/fa';\r\nimport {FaLightbulb as TypeIconLight} from 'react-icons/fa';\r\nimport {FaLock as TypeIconLock} from 'react-icons/fa';\r\nimport {FaStreetView as TypeIconLocation} from 'react-icons/fa';\r\nimport {FaStepForward as TypeIconMedia} from 'react-icons/fa';\r\nimport TypeIconMotion from '../icons/MotionOn';\r\nimport TypeIconRGB from '../icons/RGB';\r\nimport {MdFormatColorFill as TypeIconCT} from 'react-icons/md';\r\nimport TypeIconRGBSingle from '../icons/RGB';\r\nimport {MdFormatColorFill as TypeIconHUE} from 'react-icons/md';\r\nimport {FaSlidersH as TypeIconSlider} from 'react-icons/fa';\r\nimport TypeIconSocket from '../icons/Socket';\r\nimport TypeIconTemperature from '../icons/Thermometer';\r\nimport TypeIconThermostat from '../icons/Thermostat';\r\nimport TypeIconValve from '../icons/HeatValve';\r\nimport {FaVolumeDown as TypeIconVolume} from 'react-icons/fa';\r\nimport {FaVolumeUp as TypeIconVolumeGroup} from 'react-icons/fa';\r\nimport TypeIconWindow from '../icons/WindowOpened';\r\nimport TypeIconWindowTilt from '../icons/WindowTilted';\r\nimport {WiCloudy as TypeIconWeather} from 'react-icons/wi';\r\nimport {MdWarning as TypeIconWarning} from 'react-icons/md';\r\nimport {FaFan as TypeIconAC} from 'react-icons/fa';\r\nimport {IoIosRadioButtonOn as TypeIconButtonSensor} from 'react-icons/io';\r\nimport TypeIconVacuumCleaner from './icons/Cleaner';\r\nimport IconAdapter from '@iobroker/adapter-react/Components/Icon';\r\n\r\nconst TYPE_ICONS = {\r\n    [Types.airCondition]: TypeIconAC,\r\n    [Types.blind]: TypeIconBlinds,\r\n    [Types.button]: TypeIconButton,\r\n    [Types.buttonSensor]: TypeIconButtonSensor,\r\n    [Types.camera]: TypeIconCamera,\r\n    [Types.url]: TypeIconURL,\r\n    [Types.image]: TypeIconImage,\r\n    [Types.dimmer]: TypeIconDimmer,\r\n    [Types.door]: TypeIconDoor,\r\n    [Types.fireAlarm]: TypeIconFireAlarm,\r\n    [Types.floodAlarm]: TypeIconFloodAlarm,\r\n    [Types.gate]: TypeIconGate,\r\n    [Types.humidity]: TypeIconHumidity,\r\n    [Types.info]: TypeIconInfo,\r\n    [Types.light]: TypeIconLight,\r\n    [Types.lock]: TypeIconLock,\r\n    [Types.location]: TypeIconLocation,\r\n    [Types.media]: TypeIconMedia,\r\n    [Types.motion]: TypeIconMotion,\r\n    [Types.rgb]: TypeIconRGB,\r\n    [Types.ct]: TypeIconCT,\r\n    [Types.rgbSingle]: TypeIconRGBSingle,\r\n    [Types.hue]: TypeIconHUE,\r\n    [Types.slider]: TypeIconSlider,\r\n    [Types.socket]: TypeIconSocket,\r\n    [Types.temperature]: TypeIconTemperature,\r\n    [Types.thermostat]: TypeIconThermostat,\r\n    [Types.valve]: TypeIconValve,\r\n    [Types.vacuumCleaner]: TypeIconVacuumCleaner,\r\n    [Types.volume]: TypeIconVolume,\r\n    [Types.volumeGroup]: TypeIconVolumeGroup,\r\n    [Types.window]: TypeIconWindow,\r\n    [Types.windowTilt]: TypeIconWindowTilt,\r\n    [Types.weatherCurrent]: TypeIconWeather,\r\n    [Types.weatherForecast]: TypeIconWeather,\r\n    [Types.warning]: TypeIconWarning,\r\n};\r\n\r\nconst defaultStyle = {\r\n    marginTop: 4,\r\n    marginLeft: 4,\r\n    width: 32,\r\n    height: 32,\r\n};\r\n\r\nclass TypeIcon extends Component {\r\n    render() {\r\n        if (!!this.props.src) {\r\n            return <IconAdapter src={this.props.src} style={Object.assign({}, !this.props.className && defaultStyle, this.props.style || {})} className={this.props.className || ''} alt=\"\"/>;\r\n        } else {\r\n            const Icon = this.props.type && TYPE_ICONS[this.props.type];\r\n            return Icon ? <Icon style={Object.assign({}, !this.props.className && defaultStyle, this.props.style || {})} className={this.props.className || ''}/> : null;\r\n        }\r\n    }\r\n}\r\n\r\nTypeIcon.propTypes = {\r\n    type: PropTypes.string,\r\n    style: PropTypes.object,\r\n    src: PropTypes.string,\r\n    className: PropTypes.string,\r\n};\r\n\r\nexport default TypeIcon;","import React from \"react\";\n\nconst WindowTilted = props => (\n  <svg width={361} height={361} viewBox=\"0 0 361 361\" {...props}>\n    <path\n      d=\"M267.826 263.303c0 3.91-3.156 7.082-7.05 7.082l-157.885.021c-3.894 0-7.05-3.171-7.05-7.083v-157.5c0-3.911 3.156-7.083 7.05-7.083l157.885-.021c3.894 0 7.05 3.172 7.05 7.083v157.501z\"\n      fill=\"none\"\n      stroke=\"currentColor\"\n      strokeWidth={10}\n      strokeMiterlimit={10}\n    />\n    <path\n      d=\"M267.826 103.208c0 2.485-2.711 4.5-6.053 4.5l-159.88.021c-3.342 0-6.052-2.015-6.052-4.5v-9c0-2.485 2.71-4.5 6.052-4.5l159.88-.021c3.342 0 6.053 2.015 6.053 4.5v9zM265.732 265.178c.584 2.887-1.629 5.228-4.942 5.228H103.457c-3.313 0-6.474-2.341-7.058-5.228L75.24 130.633c-.584-2.887 1.628-5.228 4.942-5.228h157.333c3.313 0 6.474 2.34 7.058 5.228l21.159 134.545z\"\n      fill=\"none\"\n      stroke=\"currentColor\"\n      strokeWidth={10}\n      strokeMiterlimit={10}\n    />\n    <path\n      d=\"M247.194 199.667h6.639c2.726 0 5-2.274 5-5s-2.274-5-5-5h-6.639c-2.726 0-5 2.274-5 5s2.275 5 5 5z\"\n      fill=\"currentColor\"\n    />\n  </svg>\n);\n\nexport default WindowTilted;\n","import React from 'react';\n\nconst Material = props => (\n  <svg viewBox=\"0 0 230 230\" {...props}>\n      <ellipse fill=\"#2979ff\" stroke=\"#2979ff\" strokeWidth=\"1.5\" cx=\"112.9\" cy=\"114\" rx=\"112\" ry=\"112\"/>\n      <ellipse fill=\"#40c4ff\" strokeWidth=\"1.5\" cx=\"112.900006\" cy=\"113.999995\" rx=\"73.684216\" ry=\"73.684216\"\n               stroke=\"#40c4ff\"/>\n      <ellipse fill=\"#ffffff\" strokeWidth=\"1.5\" cx=\"112.900003\" cy=\"114\" rx=\"33.578948\" ry=\"33.578948\"\n               stroke=\"#ffffff\"/>\n  </svg>\n);\n\nexport default Material;\n","import { Types } from 'iobroker.type-detector';\r\n\r\nimport { FcGoogle } from 'react-icons/fc';\r\nimport { SiAmazonalexa } from 'react-icons/si';\r\nimport { TiCogOutline as IconWorking } from 'react-icons/ti';\r\nimport { MdPermScanWifi as IconUnreach } from 'react-icons/md';\r\nimport { MdPriorityHigh as IconMaintain } from 'react-icons/md';\r\nimport { MdBatteryAlert as IconLowbat } from 'react-icons/md';\r\nimport { MdError as IconError } from 'react-icons/md';\r\nimport { MdDirections } from 'react-icons/md';\r\nimport { AiOutlineAppstoreAdd } from 'react-icons/ai';\r\nimport { BiLastPage } from 'react-icons/bi';\r\nimport {FaCompressArrowsAlt, FaRunning} from 'react-icons/fa';\r\nimport { FaCompress } from 'react-icons/fa';\r\nimport { FaVolumeMute } from 'react-icons/fa';\r\nimport { GiLaserPrecision } from 'react-icons/gi';\r\nimport { AiOutlineRadiusBottomleft } from 'react-icons/ai';\r\nimport { AiOutlineColumnHeight } from 'react-icons/ai';\r\nimport { AiOutlineColumnWidth } from 'react-icons/ai';\r\nimport { AiOutlineSwap } from 'react-icons/ai';\r\nimport { FaToggleOn } from 'react-icons/fa';\r\nimport { FaDoorOpen } from 'react-icons/fa';\r\nimport { MdGpsFixed } from 'react-icons/md';\r\nimport { GiStopSign } from 'react-icons/gi';\r\nimport { IoIosWater } from 'react-icons/io';\r\nimport { GiNuclearWaste } from 'react-icons/gi';\r\nimport { AiFillPauseCircle } from 'react-icons/ai';\r\nimport { GiMatterStates } from 'react-icons/gi';\r\nimport { MdWork } from 'react-icons/md';\r\nimport { MdDeveloperMode } from 'react-icons/md';\r\nimport { AiOutlinePoweroff } from 'react-icons/ai';\r\nimport { SiBoost } from 'react-icons/si';\r\nimport {WiDaySunny, WiFire, WiHumidity, WiSmoke, WiThermometer} from 'react-icons/wi';\r\nimport { GiTreeSwing } from 'react-icons/gi';\r\nimport { GiSpeedometer } from 'react-icons/gi';\r\nimport WindowTilted from './icons/WindowTilted';\r\nimport MaterialIcon from './icons/Material';\r\n\r\nconst TYPE_OPTIONS = {\r\n    [Types.airCondition]:    { alexa: false, alisa: true,  google: false, material: false },\r\n    [Types.blindButtons]:    { alexa: false, alisa: false, google: false, material: false },\r\n    [Types.blind]:           { alexa: false, alisa: true,  google: true,  material: true  },\r\n    [Types.buttonSensor]:    { alexa: false, alisa: false, google: false, material: false },\r\n    [Types.button]:          { alexa: false, alisa: false, google: true,  material: true  },\r\n    [Types.camera]:          { alexa: false, alisa: false, google: false, material: false },\r\n    [Types.ct]:              { alexa: true,  alisa: true,  google: true,  material: false },\r\n    [Types.dimmer]:          { alexa: true,  alisa: true,  google: true,  material: true  },\r\n    [Types.door]:            { alexa: false, alisa: true,  google: true,  material: false },\r\n    [Types.fireAlarm]:       { alexa: false, alisa: false, google: false, material: false },\r\n    [Types.floodAlarm]:      { alexa: false, alisa: false, google: false, material: false },\r\n    [Types.gate]:            { alexa: false, alisa: false, google: false, material: false },\r\n    [Types.hue]:             { alexa: true,  alisa: false, google: true,  material: true  },\r\n    [Types.humidity]:        { alexa: false, alisa: true,  google: false, material: true  },\r\n    [Types.image]:           { alexa: false, alisa: false, google: false, material: false },\r\n    [Types.info]:            { alexa: false, alisa: false, google: true,  material: false },\r\n    [Types.light]:           { alexa: true,  alisa: true,  google: true,  material: false },\r\n    [Types.location]:        { alexa: false, alisa: false, google: false, material: false },\r\n    [Types.lock]:            { alexa: true,  alisa: true,  google: false, material: true  },\r\n    [Types.media]:           { alexa: false, alisa: false, google: true,  material: true  },\r\n    [Types.motion]:          { alexa: false, alisa: true,  google: false, material: false },\r\n    [Types.rgbSingle]:       { alexa: false, alisa: true,  google: true,  material: false },\r\n    [Types.rgb]:             { alexa: false, alisa: false, google: true,  material: true  },\r\n    [Types.slider]:          { alexa: false, alisa: false, google: true,  material: false },\r\n    [Types.socket]:          { alexa: true,  alisa: true,  google: true,  material: false },\r\n    [Types.temperature]:     { alexa: false, alisa: true,  google: true,  material: true  },\r\n    [Types.thermostat]:      { alexa: true,  alisa: true,  google: true,  material: true  },\r\n    [Types.url]:             { alexa: false, alisa: false, google: false, material: false },\r\n    [Types.vacuumCleaner]:   { alexa: false, alisa: true,  google: false, material: false },\r\n    [Types.valve]:           { alexa: false, alisa: false, google: false, material: false },\r\n    [Types.volumeGroup]:     { alexa: false, alisa: false, google: false, material: true  },\r\n    [Types.volume]:          { alexa: false, alisa: false, google: false, material: true  },\r\n    [Types.warning]:         { alexa: false, alisa: false, google: false, material: true  },\r\n    [Types.weatherCurrent]:  { alexa: false, alisa: false, google: false, material: false },\r\n    [Types.weatherForecast]: { alexa: false, alisa: false, google: false, material: true  },\r\n    [Types.windowTilt]:      { alexa: false, alisa: false, google: true,  material: true  },\r\n    [Types.window]:          { alexa: false, alisa: true,  google: true,  material: true  },\r\n};\r\n\r\nexport const ICONS_TYPE = {\r\n    alexa: <SiAmazonalexa style={{margin: '0 3px', width: 16, height: 16}} />,\r\n    alisa: <img style={{margin: '0 3px', width: 16, height: 16}} src=\"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iMzcwcHgiIGhlaWdodD0iMzcwcHgiIHZpZXdCb3g9IjAgMCAzNzAgMzcwIiB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPgogICAgPCEtLSBHZW5lcmF0b3I6IFNrZXRjaCA0Ni4yICg0NDQ5NikgLSBodHRwOi8vd3d3LmJvaGVtaWFuY29kaW5nLmNvbS9za2V0Y2ggLS0+CiAgICA8dGl0bGU+R3JvdXA8L3RpdGxlPgogICAgPGRlc2M+Q3JlYXRlZCB3aXRoIFNrZXRjaC48L2Rlc2M+CiAgICA8ZGVmcz4KICAgICAgICA8bGluZWFyR3JhZGllbnQgeDE9IjAlIiB5MT0iMTAwJSIgeDI9IjEwMCUiIHkyPSIwJSIgaWQ9ImxpbmVhckdyYWRpZW50LTEiPgogICAgICAgICAgICA8c3RvcCBzdG9wLWNvbG9yPSIjQzkyNkZGIiBvZmZzZXQ9IjAlIj48L3N0b3A+CiAgICAgICAgICAgIDxzdG9wIHN0b3AtY29sb3I9IiM0QTI2RkYiIG9mZnNldD0iMTAwJSI+PC9zdG9wPgogICAgICAgIDwvbGluZWFyR3JhZGllbnQ+CiAgICA8L2RlZnM+CiAgICA8ZyBpZD0iUGFnZS0xIiBzdHJva2U9Im5vbmUiIHN0cm9rZS13aWR0aD0iMSIgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj4KICAgICAgICA8ZyBpZD0iR3JvdXAiPgogICAgICAgICAgICA8cmVjdCBpZD0iUmVjdGFuZ2xlIiBmaWxsPSIjRkZGRkZGIiB4PSI3NyIgeT0iNzIiIHdpZHRoPSIyMTUiIGhlaWdodD0iMTk5Ij48L3JlY3Q+CiAgICAgICAgICAgIDxnIGlkPSJhbGljZV9sb2dvIiBmaWxsLXJ1bGU9Im5vbnplcm8iIGZpbGw9InVybCgjbGluZWFyR3JhZGllbnQtMSkiPgogICAgICAgICAgICAgICAgPHBhdGggZD0iTTE4NSwzNzAgQzgyLjgyNzMyMDksMzcwIDAsMjg3LjE3MjY3OCAwLDE4NSBDMCw4Mi44MjczMjA5IDgyLjgyNzMyMDksMCAxODUsMCBDMjg3LjE3MjY3OCwwIDM3MCw4Mi44MjczMjA5IDM3MCwxODUgQzM3MCwyODcuMTcyNjc4IDI4Ny4xNzI2NzgsMzcwIDE4NSwzNzAgWiBNMTAwLjI4Nzk1MiwyNDQuNzA4MjQ0IEMxMTMuNTY4OTA4LDI1Ny45MjM4NzUgMTQ4Ljk0NTcxNiwyNjUuODU5NTc3IDE4NSwyNjUuOTk4Njc3IEMyMjEuMDUzMTgzLDI2NS44NTk1NzcgMjU2LjQzMTA5MiwyNTcuOTIzODc1IDI2OS43MTIwNDgsMjQ0LjcwODI0NCBDMzAyLjcwODYwOCwyMTEuODczOTg0IDIyMi41MDAwNDQsODYuMDgwMTUgMTg1LjA0MTI3Niw4NS44OTcyMzgzIEMxNDcuNDk5OTU2LDg2LjA4MDE1IDY3LjI5MTM5MTIsMjExLjg3Mzk4NCAxMDAuMjg3OTUyLDI0NC43MDgyNDQgWiIgaWQ9ImFsaXNhLXN5bWJvbCI+PC9wYXRoPgogICAgICAgICAgICA8L2c+CiAgICAgICAgPC9nPgogICAgPC9nPgo8L3N2Zz4=\" alt=\"alisa\"/>,\r\n    google: <FcGoogle style={{margin: '0 3px', width: 16, height: 16}} />,\r\n    material: <MaterialIcon style={{margin: '0 3px', width: 16, height: 16}} />,\r\n}\r\n\r\nexport const STATES_NAME_ICONS = {\r\n    'SET': AiOutlineAppstoreAdd,\r\n    'WORKING': MdWork,\r\n    'UNREACH': IconUnreach,\r\n    'LOWBAT': IconLowbat,\r\n    'MAINTAIN': IconMaintain,\r\n    'ERROR': IconError,\r\n    'DIRECTION': MdDirections,\r\n    'CONNECTED': IconUnreach,\r\n    'ACTUAL': IconWorking,\r\n    'SECOND': BiLastPage,\r\n    'PRESS_LONG': FaCompressArrowsAlt,\r\n    'PRESS': FaCompress,\r\n    'MUTE': FaVolumeMute,\r\n    'ACCURACY': GiLaserPrecision,\r\n    'RADIUS': AiOutlineRadiusBottomleft,\r\n    'ELEVATION': AiOutlineColumnHeight,\r\n    'LATITUDE': AiOutlineColumnWidth,\r\n    'LONGITUDE': AiOutlineSwap,\r\n    'GPS': MdGpsFixed,\r\n    'ON_ACTUAL': FaToggleOn,\r\n    'ON_SET': FaToggleOn,\r\n    'OPEN': FaDoorOpen,\r\n    'STOP': GiStopSign,\r\n    'WATER_ALARM': IoIosWater,  // water\r\n    'WASTE_ALARM': GiNuclearWaste,\r\n    'PAUSE': AiFillPauseCircle,\r\n    'STATE': GiMatterStates,\r\n    'BATTERY': IconLowbat,\r\n    'WASTE': GiNuclearWaste,\r\n    'WATER': IoIosWater,\r\n    'WORK_MODE': MdWork,\r\n    'MODE': MdDeveloperMode,\r\n    'POWER': AiOutlinePoweroff,\r\n    'BOOST': SiBoost,\r\n    'HUMIDITY': WiHumidity,\r\n    'TEMPERATURE': WiThermometer,\r\n    'BRIGHTNESS': WiDaySunny,\r\n    'MOTION': FaRunning,\r\n    'FIRE': WiFire,\r\n    'WINDOW': WindowTilted,\r\n    'SMOKE': WiSmoke,\r\n    'SWING': GiTreeSwing,\r\n    'SPEED': GiSpeedometer,\r\n}\r\n\r\nexport default TYPE_OPTIONS;","import { Component, createRef } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { withStyles } from '@material-ui/core/styles';\r\n\r\nimport { Cropper } from 'react-cropper';\r\nimport 'cropperjs/dist/cropper.css';\r\n\r\nimport { Menu, MenuItem, Tooltip } from '@material-ui/core';\r\nimport IconButton from '@material-ui/core/IconButton';\r\n\r\nimport CropIcon from '@material-ui/icons/Crop';\r\n\r\nimport IconPicker from '@iobroker/adapter-react/Components/IconPicker';\r\n\r\nconst styles = theme => ({\r\n    image: {\r\n        objectFit: 'contain',\r\n        margin: 'auto',\r\n        display: 'flex',\r\n        width: '100%',\r\n        height: '100%',\r\n    },\r\n\r\n    buttonCropWrapper: {\r\n        position: 'absolute',\r\n        zIndex: 222,\r\n        right: 0,\r\n        top: 50\r\n    },\r\n    buttonIconsWrapper: {\r\n        position: 'absolute',\r\n        zIndex: 222,\r\n        right: 0,\r\n        top: 100\r\n    },\r\n    error: {\r\n        border: '2px solid red'\r\n    },\r\n    iconPickerLabel: {\r\n        fontSize: 20,\r\n        fontWeight: 'bold',\r\n    }\r\n});\r\n\r\nclass UploadImage extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            anchorEl: null,\r\n            cropHandler: false,\r\n        };\r\n        this.cropperRef = createRef();\r\n    }\r\n\r\n    render() {\r\n        const { disabled, classes, icon, t, crop, onChange, className } = this.props;\r\n        const { anchorEl, cropHandler } = this.state;\r\n        return <div className={className} style={{position: 'relative'}}>\r\n            {icon && crop && <div className={classes.buttonCropWrapper}>\r\n                <Tooltip title={t('Crop')}>\r\n                    <IconButton onClick={e => {\r\n                        if (!cropHandler) {\r\n                            this.setState({ cropHandler: true });\r\n                        } else {\r\n                            this.setState({ anchorEl: e.currentTarget });\r\n                        }\r\n                        e.stopPropagation();\r\n                    }}><CropIcon color={cropHandler ? 'primary' : 'inherit'} />\r\n                    </IconButton>\r\n                </Tooltip>\r\n                <Menu\r\n                    anchorEl={anchorEl}\r\n                    keepMounted\r\n                    open={!!anchorEl}\r\n                    onClose={() => this.setState({ anchorEl: null })}\r\n                >\r\n                    <MenuItem onClick={() => this.setState({ anchorEl: null, cropHandler: false }, () => {\r\n                        const imageElement = this.cropperRef?.current?.cropper;\r\n                        onChange(imageElement.getCroppedCanvas().toDataURL());\r\n                    })}>{t('Save')}</MenuItem>\r\n                    <MenuItem onClick={() => this.setState({ anchorEl: null, cropHandler: false })}>{t('Close')}</MenuItem>\r\n                </Menu>\r\n            </div>}\r\n\r\n            <IconPicker\r\n                label={this.props.t('Icon')}\r\n                disabled={disabled}\r\n                customClasses={{label: classes.iconPickerLabel}}\r\n                onChange={base64 => onChange(base64)}\r\n                value={icon}/>\r\n\r\n            {icon && crop && cropHandler ? <Cropper\r\n                ref={this.cropperRef}\r\n                className={classes.image}\r\n                src={icon}\r\n                initialAspectRatio={1}\r\n                viewMode={1}\r\n                guides={false}\r\n                minCropBoxHeight={10}\r\n                minCropBoxWidth={10}\r\n                background={false}\r\n                checkOrientation={false}\r\n            /> : null}\r\n        </div>;\r\n    }\r\n}\r\n\r\nUploadImage.defaultProps = {\r\n    disabled: false,\r\n    maxSize: 10 * 1024,\r\n    icon: null,\r\n    removeIconFunc: null,\r\n    accept: 'image/*',\r\n    error: false,\r\n    onChange: base64 => console.log(base64),\r\n    t: el => el,\r\n    crop: false\r\n}\r\n\r\nUploadImage.propTypes = {\r\n    classes: PropTypes.object,\r\n    maxSize: PropTypes.number,\r\n    disabled: PropTypes.bool,\r\n    crop: PropTypes.bool,\r\n    error: PropTypes.bool,\r\n    onChange: PropTypes.func,\r\n    accept: PropTypes.string,\r\n    t: PropTypes.func,\r\n};\r\n\r\nexport default withStyles(styles)(UploadImage);\r\n","/**\r\n * Copyright 2019-2021 bluefox <dogafox@gmail.com>\r\n *\r\n * MIT License\r\n *\r\n **/\r\nimport React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport clsx from 'clsx';\r\nimport { withStyles } from '@material-ui/core/styles';\r\n\r\nimport TextField from '@material-ui/core/TextField';\r\nimport Select from '@material-ui/core/Select';\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\nimport Switch from '@material-ui/core/Switch';\r\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\r\n\r\nimport I18n from '@iobroker/adapter-react/i18n';\r\nimport Utils from '@iobroker/adapter-react/Components/Utils';\r\nimport Icon from '@iobroker/adapter-react/Components/Icon';\r\n\r\nimport UploadImage from '../Components/UploadImage';\r\n\r\nconst styles = theme => ({\r\n    divOidField: {\r\n        width: '100%',\r\n        display: 'block',\r\n        paddingTop: 7,\r\n        paddingBottom: 7,\r\n    },\r\n    oidName: {\r\n        fontSize: 14,\r\n        fontWeight: 'bold'\r\n    },\r\n    oidField: {\r\n        display: 'inline-block',\r\n        marginTop: 0,\r\n        marginBottom: 0,\r\n    },\r\n    colorButton: {\r\n        marginLeft: 5,\r\n        '&>div': {\r\n            width: '100%'\r\n        }\r\n    },\r\n    divOids: {\r\n        display: 'inline-block',\r\n        width: '100%',\r\n        verticalAlign: 'top',\r\n    },\r\n    divDevice: {\r\n        color: theme.palette.type === 'light' ? 'black' : 'white',\r\n        display: 'inline-block',\r\n        width: 100,\r\n        verticalAlign: 'top',\r\n    },\r\n    divIndicators: {\r\n        display: 'inline-block',\r\n        width: 'calc(50% - 55px)',\r\n        verticalAlign: 'top',\r\n    },\r\n    divDialogContent: {\r\n        fontSize: '1rem',\r\n        fontFamily: '\"Roboto\", \"Helvetica\", \"Arial\", sans-serif'\r\n    },\r\n    buttonPen: {\r\n        color: '#ffffff',\r\n    },\r\n    headerButtons: {\r\n        textAlign: 'right'\r\n    },\r\n    enumIcon: {\r\n        width: 24,\r\n        height: 24,\r\n        marginRight: 10\r\n    },\r\n    renderValueWrapper: {\r\n        display: 'flex'\r\n    },\r\n    renderValueCurrent: {\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n        marginRight: 10\r\n    },\r\n    funcDivEdit: {\r\n        width: '100%'\r\n    },\r\n    funcEditName: {\r\n        display: 'inline-block',\r\n        width: 85\r\n    },\r\n    funcEdit: {\r\n        display: 'inline-block',\r\n        marginTop: 0,\r\n        marginBottom: 0,\r\n        width: 'calc(100% - 85px)',\r\n    },\r\n    tableIconImg: {\r\n        marginTop: 4,\r\n        marginLeft: 4,\r\n        width: 32,\r\n        height: 32,\r\n        color: '#888'\r\n    },\r\n    disableSwitch: {\r\n        '& .Mui-checked .MuiSwitch-thumb': {\r\n            background: '#ffb3ce'\r\n        }\r\n    },\r\n    disableSwitchLabel: {\r\n        '& .MuiFormControlLabel-label': {\r\n            fontSize: '0.75rem',\r\n            opacity: 0.6,\r\n        }\r\n    },\r\n    dropZone: {\r\n        textAlign: 'left',\r\n        marginTop: theme.spacing(2),\r\n    }\r\n});\r\n\r\nclass DialogEditProperties extends React.PureComponent {\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        let name = '';\r\n        const channelObj = this.props.objects[this.props.channelId];\r\n\r\n        if (channelObj && channelObj.common) {\r\n            name = Utils.getObjectNameFromObj(channelObj, null, { language: I18n.getLanguage() }) === 'undefined' ? channelObj.common.name[Object.keys(channelObj.common.name)[0]] : Utils.getObjectNameFromObj(channelObj, null, { language: I18n.getLanguage() });\r\n        }\r\n\r\n        const functions = this.props.enumIDs.filter(id => {\r\n            if (!id.startsWith('enum.functions.')) {\r\n                return false;\r\n            }\r\n            const obj = this.props.objects[id];\r\n            return obj && obj.common && obj.common.members && obj.common.members.includes(this.props.channelId);\r\n        });\r\n\r\n        const rooms = this.props.enumIDs.filter(id => {\r\n            if (!id.startsWith('enum.rooms.')) {\r\n                return false;\r\n            }\r\n            const obj = this.props.objects[id];\r\n            return obj && obj.common && obj.common.members && obj.common.members.includes(this.props.channelId);\r\n        });\r\n\r\n        // ;common.custom[adapter.namespace].smartName\r\n        let smartName = this.getSmartName(channelObj);\r\n\r\n        this.state = Object.keys(this.props.changeProperties).length ? this.props.changeProperties : {\r\n            color: channelObj && channelObj.common && channelObj.common.color,\r\n            icon: channelObj && channelObj.common && channelObj.common.icon,\r\n            functions,\r\n            rooms,\r\n            name,\r\n            initName: name,\r\n            smartName,\r\n        };\r\n    }\r\n\r\n    componentDidMount() {\r\n        if (!Object.keys(this.props.changeProperties).length) {\r\n            this.props.onChange(this.state, this.state);\r\n        }\r\n    }\r\n\r\n    componentDidUpdate(prevProps, prevState) {\r\n        if (JSON.stringify(prevState) !== JSON.stringify(this.state)) {\r\n            this.props.onChange(this.state, false, this.checkedName());\r\n        }\r\n    }\r\n\r\n    handleClose() {\r\n        this.props.onClose && this.props.onClose();\r\n    }\r\n\r\n    handleOk() {\r\n        this.props.onClose && this.props.onClose({\r\n            rooms: this.state.rooms,\r\n            functions: this.state.functions,\r\n            name: this.state.name,\r\n            icon: this.state.icon,\r\n            color: this.state.color,\r\n            smartName: this.state.smartName,\r\n        });\r\n    }\r\n\r\n    findRealDevice() {\r\n        let realParent = Object.keys(this.state.ids).find(id => this.state.ids[id]);\r\n        if (realParent) {\r\n            realParent = this.state.ids[realParent];\r\n            const parts = realParent.split('.');\r\n            parts.pop();\r\n            realParent = parts.join('.');\r\n        }\r\n        return realParent || '';\r\n    }\r\n\r\n    renderSelectEnum(name) {\r\n        const enums = this.props.enumIDs.filter(id => id.startsWith('enum.' + name + '.'));\r\n        const language = I18n.getLanguage();\r\n        const objs = enums.map(id => {\r\n            return {\r\n                name: Utils.getObjectName(this.props.objects, id, { language }),\r\n                icon: Utils.getObjectIcon(id, this.props.objects[id]),\r\n                id: id\r\n            }\r\n        });\r\n\r\n        return <Select\r\n            className={this.props.classes.oidField}\r\n            value={this.state[name]}\r\n            fullWidth\r\n            multiple\r\n            disabled={this.props.disabled}\r\n            renderValue={arrId => {\r\n                const newArr = arrId.map(id => {\r\n                    return {\r\n                        name: Utils.getObjectName(this.props.objects, id, { language }),\r\n                        icon: Utils.getObjectIcon(id, this.props.objects[id]),\r\n                        id: id\r\n                    }\r\n                });\r\n\r\n                return <div className={this.props.classes.renderValueWrapper}>\r\n                    {newArr.map(obj => <div className={this.props.classes.renderValueCurrent} key={`${obj.id}-render`}>\r\n                        {obj.icon ? <Icon className={this.props.classes.enumIcon} src={obj.icon} alt={obj.id} /> : <div className={this.props.classes.enumIcon} />}\r\n                        {obj.name}\r\n                    </div>)}\r\n                </div>\r\n            }}\r\n            onChange={e => {\r\n                this.setState({ [name]: e.target.value })\r\n            }}\r\n        >\r\n            {objs.map(obj => <MenuItem key={obj.id} icon={obj.icon} value={obj.id}>\r\n                {obj.icon ? <Icon className={this.props.classes.enumIcon} src={obj.icon} alt={obj.id} /> : <div className={this.props.classes.enumIcon} />}\r\n                {obj.name}\r\n            </MenuItem>)}\r\n        </Select>;\r\n    }\r\n\r\n    getSmartName(obj, language) {\r\n        language = language || I18n.getLanguage();\r\n        let smartName;\r\n        if (obj &&\r\n            obj.common &&\r\n            obj.common.custom) {\r\n            if (this.props.iotNoCommon) {\r\n                const iot = this.props.iot || 'iot.0';\r\n                if (obj.common.custom[iot] && obj.common.custom[iot].smartName) {\r\n                    smartName = obj.common.custom[iot].smartName;\r\n                }\r\n            } else {\r\n                smartName = obj.common.smartName;\r\n            }\r\n        }else {\r\n            smartName = obj?.common?.smartName;\r\n        }\r\n\r\n        if (smartName === false) {\r\n            return false;\r\n        } else\r\n        if (smartName && typeof smartName === 'object') {\r\n            if (smartName[language] === false || smartName.en === false) {\r\n                return false;\r\n            }\r\n            smartName = smartName[language] || smartName.en || '';\r\n        }\r\n        return smartName || '';\r\n    }\r\n\r\n    handleIcon(file) {\r\n        const newValue = typeof file === 'object' ? file.data : file;\r\n\r\n        //newValue.changed = this.isChanged(name, newValue.values[name]);\r\n        this.setState({ icon: newValue });\r\n    }\r\n\r\n    checkedName = () => {\r\n        if (!this.state.name) {\r\n            return true;\r\n        } else if (this.state.name === this.state.initName) {\r\n            return false;\r\n        }\r\n        let parts = this.props.channelId.split('.');\r\n        parts.pop();\r\n        parts = parts.join('.');\r\n        parts = `${parts}.${this.state.name.replace(Utils.FORBIDDEN_CHARS, '_').replace(/\\s/g, '_').replace(/\\./g, '_')}`\r\n        return this.props.objects[parts];\r\n    }\r\n\r\n    renderProperties() {\r\n        const { classes, disabled } = this.props;\r\n        return <div className={classes.divOids}>\r\n            <div className={classes.divOidField}>\r\n                <div className={classes.oidName} >{I18n.t('Name')}</div>\r\n                <TextField\r\n                    key=\"_name\"\r\n                    fullWidth\r\n                    disabled={disabled}\r\n                    value={this.state.name}\r\n                    error={this.checkedName()}\r\n                    className={classes.oidField}\r\n                    onChange={e => this.setState({ name: e.target.value })}\r\n                    margin=\"normal\"\r\n                />\r\n            </div>\r\n            <div className={classes.divOidField}>\r\n                <div className={classes.oidName} >{I18n.t('Disable smart')}</div>\r\n                <FormControlLabel\r\n                    className={classes.disableSwitchLabel}\r\n                    control={\r\n                        <Switch\r\n                            className={classes.disableSwitch}\r\n                            disabled={disabled}\r\n                            checked={this.state.smartName === false}\r\n                            color=\"secondary\"\r\n                            onChange={e => this.setState({ smartName: e.target.checked ? false : null })}\r\n                        />\r\n                    }\r\n                    label={I18n.t('Hide this name from smart assistance')}\r\n                />\r\n            </div>\r\n            {this.state.smartName !== false ? <div className={classes.divOidField}>\r\n                <div className={classes.oidName} >{I18n.t('Smart name')}</div>\r\n                <TextField\r\n                    key=\"_smartName\"\r\n                    fullWidth\r\n                    disabled={disabled}\r\n                    placeholder={this.state.name.replace(/[-^#_%&{}!?()§\"'`+*~/\\\\]/g, ' ')}\r\n                    value={this.state.smartName}\r\n                    className={classes.oidField}\r\n                    helperText={I18n.t('This name will use be in smart assistance. (optional)')}\r\n                    onChange={e => this.setState({ smartName: e.target.value.replace(/[-^#_%&{}!?()§\"'`+*~/\\\\]/g, ' ') })}\r\n                    margin=\"normal\"\r\n                />\r\n            </div> : null}\r\n            <div className={classes.divOidField}>\r\n                <div className={classes.oidName} >{I18n.t('Function')}</div>\r\n                {this.renderSelectEnum('functions')}\r\n            </div>\r\n            <div className={classes.divOidField}>\r\n                <div className={classes.oidName} >{I18n.t('Room')}</div>\r\n                {this.renderSelectEnum('rooms')}\r\n            </div>\r\n            <div className={classes.divOidField}>\r\n                <div className={classes.oidName} >{I18n.t('Color')}</div>\r\n                <TextField\r\n                    key=\"_color\"\r\n                    fullWidth\r\n                    disabled={disabled}\r\n                    value={this.state.color}\r\n                    style={{ width: 'calc(100% - 185px)' }}\r\n                    onChange={e => this.setState({ color: e.target.value })}\r\n                />\r\n                <TextField\r\n                    key=\"_color1\"\r\n                    type=\"color\"\r\n                    style={{ width: 40 }}\r\n                    disabled={disabled}\r\n                    value={this.state.color}\r\n                    className={clsx(classes.oidField, classes.colorButton)}\r\n                    onChange={e => this.setState({ color: e.target.value })}\r\n                    margin=\"normal\"\r\n                />\r\n            </div>\r\n            <UploadImage\r\n                crop={false}\r\n                disabled={disabled}\r\n                className={classes.dropZone}\r\n                maxSize={256 * 1024}\r\n                icon={this.state.icon}\r\n                onChange={base64 => this.setState({ icon: base64 })}\r\n                t={I18n.t}\r\n            />\r\n        </div>;\r\n    }\r\n\r\n    render() {\r\n        return <div className={this.props.classes.divDialogContent}>\r\n            {this.renderProperties()}\r\n        </div>;\r\n    }\r\n}\r\n\r\nDialogEditProperties.propTypes = {\r\n    onClose: PropTypes.func,\r\n    type: PropTypes.string,\r\n    iot: PropTypes.string,\r\n    iotNoCommon: PropTypes.bool,\r\n    channelId: PropTypes.string,\r\n    objects: PropTypes.object,\r\n    enumIDs: PropTypes.array,\r\n    socket: PropTypes.object,\r\n    disabled: PropTypes.bool\r\n};\r\n\r\nexport default withStyles(styles)(DialogEditProperties);\r\n","import React, { useEffect, useState } from 'react';\r\nimport ReactDOM from 'react-dom';\r\n\r\nimport Button from '@material-ui/core/Button';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogActions from '@material-ui/core/DialogActions';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport { Checkbox, DialogTitle, FormControl, FormControlLabel, InputLabel, makeStyles, MenuItem, Paper, Select, TextField, ThemeProvider } from '@material-ui/core';\r\nimport Autocomplete from '@material-ui/lab/Autocomplete';\r\n\r\nimport IconClose from '@material-ui/icons/Close';\r\nimport IconCheck from '@material-ui/icons/Check';\r\n\r\nimport I18n from '@iobroker/adapter-react/i18n';\r\nimport theme from '@iobroker/adapter-react/Theme';\r\nimport Utils from '@iobroker/adapter-react/Components/Utils';\r\n\r\nlet node = null;\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    root: {\r\n        backgroundColor: theme.palette.background.paper,\r\n        width: '100%',\r\n        height: 'auto',\r\n        display: 'flex'\r\n    },\r\n    paper: {\r\n        maxWidth: 960,\r\n        width: 'calc(100% - 64px)'\r\n    },\r\n    overflowHidden: {\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        border: 'none'\r\n        // overflow: 'hidden'\r\n    },\r\n    pre: {\r\n        overflow: 'auto',\r\n        whiteSpace: 'pre-wrap',\r\n        margin: 0\r\n    },\r\n    showDialog: {\r\n        marginTop: 10\r\n    },\r\n    nameField: {\r\n        marginTop: 10\r\n    },\r\n    roleField: {\r\n        marginTop: 10\r\n\r\n    },\r\n    typeField: {\r\n        marginTop: 10\r\n\r\n    },\r\n    unitField: {\r\n        // marginTop: 10\r\n\r\n    },\r\n    minField: {\r\n        marginTop: 10,\r\n        marginRight: 10\r\n\r\n    },\r\n    maxField: {\r\n        marginTop: 10\r\n\r\n    },\r\n    minMax: {\r\n        display: 'flex'\r\n    }\r\n}));\r\n\r\nconst typeArray = [\r\n    'string',\r\n    'boolean',\r\n    'number',\r\n    'file',\r\n];\r\n\r\nconst AddState = ({ cb, objects, socket, channelId, arrayStateDefault }) => {\r\n    const classes = useStyles();\r\n    const [open, setOpen] = useState(true);\r\n    const [role, setRole] = useState(null);\r\n    const [roleInput, setRoleInput] = useState(null);\r\n    const [roles, setRoles] = useState([]);\r\n    const [name, setName] = useState('NEW_STATE');\r\n    const [unit, setUnit] = useState('');\r\n    const [type, setType] = useState('string');\r\n    const [checkedRead, setCheckedRead] = useState(true);\r\n    const [checkedWrite, setCheckedWrite] = useState(true);\r\n    const [min, setMin] = useState(0);\r\n    const [max, setMax] = useState(100);\r\n\r\n    useEffect(() => {\r\n        let rolesArr = [];\r\n        Object.keys(objects).forEach(key => {\r\n            const obj = objects[key];\r\n            if (obj) {\r\n                const common = obj.common;\r\n                const role = common && common.role;\r\n                if (role && !rolesArr.includes(role)) {\r\n                    rolesArr.push(role);\r\n                }\r\n            }\r\n        });\r\n        setRoles(rolesArr.sort());\r\n    }, [objects])\r\n\r\n    const onClose = () => {\r\n        setOpen(false);\r\n        if (node) {\r\n            document.body.removeChild(node);\r\n            node = null;\r\n        }\r\n    };\r\n\r\n    return <ThemeProvider theme={theme(Utils.getThemeName())}>\r\n        <Dialog\r\n            onClose={onClose}\r\n            open={open}\r\n            classes={{ paper: classes.paper }}\r\n        >\r\n            <DialogTitle>{I18n.t('Add state %s', `${channelId}.${name}`)}</DialogTitle>\r\n            <DialogContent className={classes.overflowHidden} dividers>\r\n                <Paper className={classes.showDialog} style={{ padding: `10px 20px` }} p={3}>\r\n                    <TextField\r\n                        fullWidth\r\n                        value={name}\r\n                        error={!name || objects[`${channelId}.${name}`] || arrayStateDefault.find(item => item.name === name)}\r\n                        className={classes.nameField}\r\n                        label={I18n.t('Name')}\r\n                        onChange={e => setName(e.target.value?.toUpperCase())}\r\n                    />\r\n                    <Autocomplete\r\n                        freeSolo\r\n                        options={roles}\r\n                        className={classes.roleField}\r\n                        style={{ width: '100%' }}\r\n                        value={role}\r\n                        onChange={(event, role) => {\r\n                            setRole(role);\r\n                            setRoleInput(role);\r\n                        }}\r\n                        onInputChange={(event, role) => setRoleInput(role)}\r\n                        renderInput={params => <TextField\r\n                            {...params}\r\n                            label={I18n.t('Role')}\r\n                        // variant=\"outlined\"\r\n                        />}\r\n                    />\r\n                    <FormControl fullWidth\r\n                        className={classes.typeField}>\r\n                        <InputLabel>{I18n.t('Type')}</InputLabel>\r\n                        <Select\r\n                            fullWidth\r\n                            value={type}\r\n                            onChange={e => setType(e.target.value)}\r\n                        >\r\n                            {typeArray.map(key => <MenuItem key={key} value={key}>{I18n.t(key)}</MenuItem>)}\r\n                        </Select>\r\n                    </FormControl>\r\n                    {type !== 'file' &&\r\n                        <>\r\n                            <FormControlLabel\r\n                                control={<Checkbox checked={checkedRead} onChange={e => setCheckedRead(e.target.checked)} />}\r\n                                label={I18n.t('Readable')}\r\n                            />\r\n                            <FormControlLabel\r\n                                control={<Checkbox checked={checkedWrite} onChange={e => setCheckedWrite(e.target.checked)} />}\r\n                                label={I18n.t('Writable')}\r\n                            />\r\n                        </>\r\n                    }\r\n                    {type === 'number' && <TextField\r\n                        fullWidth\r\n                        value={unit}\r\n                        className={classes.unitField}\r\n                        label={I18n.t('Unit')}\r\n                        onChange={e => setUnit(e.target.value)}\r\n                    />}\r\n                    {type === 'number' && <div className={classes.minMax}>\r\n                        <TextField\r\n                            fullWidth\r\n                            value={min}\r\n                            type=\"number\"\r\n                            className={classes.minField}\r\n                            label={I18n.t('Min')}\r\n                            onChange={e => setMin(e.target.value)}\r\n                        />\r\n                        <TextField\r\n                            fullWidth\r\n                            value={max}\r\n                            type=\"number\"\r\n                            className={classes.maxField}\r\n                            label={I18n.t('Max')}\r\n                            onChange={e => setMax(e.target.value)}\r\n                        />\r\n                    </div>}\r\n                </Paper>\r\n            </DialogContent>\r\n            <DialogActions>\r\n                <Button\r\n                    variant=\"contained\"\r\n                    autoFocus\r\n                    disabled={!name || objects[`${channelId}.${name}`] || arrayStateDefault.find(item => item.name === name)}\r\n                    onClick={async () => {\r\n                        onClose();\r\n                        let obj = {\r\n                            _id: `${channelId}.${name}`,\r\n                            common: {\r\n                                name,\r\n                                role: roleInput,\r\n                                type,\r\n                            },\r\n                            type: 'state'\r\n                        };\r\n                        if (type === 'number') {\r\n                            obj.common.min = min;\r\n                            obj.common.max = max;\r\n                            obj.common.unit = unit;\r\n\r\n                        }\r\n                        if (type !== 'file') {\r\n                            obj.common.read = checkedRead;\r\n                            obj.common.write = checkedWrite;\r\n                        }\r\n                        await socket.setObject(`${channelId}.${name}`, obj);\r\n                        cb(obj);\r\n                    }}\r\n                    startIcon={<IconCheck />}\r\n                    color=\"primary\">\r\n                    {I18n.t('Add')}\r\n                </Button>\r\n                <Button\r\n                    variant=\"contained\"\r\n                    onClick={() => onClose()}\r\n                    startIcon={<IconClose />}\r\n                    color=\"default\">\r\n                    {I18n.t('Cancel')}\r\n                </Button>\r\n            </DialogActions>\r\n        </Dialog>\r\n    </ThemeProvider>;\r\n}\r\n\r\nexport const addStateCallBack = (cb, objects, socket, channelId, arrayStateDefault) => {\r\n    if (!node) {\r\n        node = document.createElement('div');\r\n        node.id = 'renderModal';\r\n        document.body.appendChild(node);\r\n    }\r\n\r\n    return ReactDOM.render(\r\n        <AddState\r\n            arrayStateDefault={arrayStateDefault}\r\n            channelId={channelId}\r\n            socket={socket}\r\n            objects={objects}\r\n            cb={cb}\r\n        />, node);\r\n}","/**\r\n * Copyright 2019 bluefox <dogafox@gmail.com>\r\n *\r\n * MIT License\r\n *\r\n **/\r\nimport React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport clsx from 'clsx';\r\n\r\nimport Button from '@material-ui/core/Button';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogActions from '@material-ui/core/DialogActions';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport Select from '@material-ui/core/Select';\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\nimport { AppBar, IconButton, LinearProgress, Paper, Tab, Tabs, Tooltip, Typography } from '@material-ui/core';\r\n\r\nimport { MdEdit as IconEdit } from 'react-icons/md';\r\nimport { MdFunctions as IconFunction } from 'react-icons/md';\r\nimport { MdOpenInNew as IconExtended } from 'react-icons/md';\r\nimport { MdHelpOutline } from 'react-icons/md';\r\nimport IconClose from '@material-ui/icons/Close';\r\nimport IconCheck from '@material-ui/icons/Check';\r\nimport { MdDelete as IconDelete } from 'react-icons/md';\r\nimport { MdAdd as IconAdd } from 'react-icons/md';\r\nimport ImportExportIcon from '@material-ui/icons/ImportExport';\r\n\r\nimport DialogSelectID from '@iobroker/adapter-react/Dialogs/SelectID';\r\nimport I18n from '@iobroker/adapter-react/i18n';\r\nimport Utils from '@iobroker/adapter-react/Components/Utils';\r\n\r\nimport TypeIcon from '../Components/TypeIcon';\r\nimport { STATES_NAME_ICONS } from '../Components/TypeOptions';\r\nimport DialogEditProperties from './DialogEditProperties';\r\nimport { addStateCallBack } from './AddState';\r\nimport { getChannelItems } from '../Components/helpers/search';\r\n\r\nconst styles = theme => {\r\n    return ({\r\n        header: {\r\n            width: '100%',\r\n            fontSize: 16,\r\n            textTransform: 'capitalize',\r\n            textAlign: 'center',\r\n            paddingBottom: 20,\r\n            color: '#000',\r\n        },\r\n        divOidField: {\r\n            width: '100%',\r\n            display: 'flex',\r\n            paddingTop: 5,\r\n            paddingBottom: 5,\r\n            height: 69,\r\n        },\r\n        oidName: {\r\n            minWidth: 100,\r\n            display: 'flex',\r\n            flexDirection: 'column',\r\n            marginTop: 17,\r\n            whiteSpace: 'nowrap',\r\n            overflow: 'hidden',\r\n            textOverflow: 'ellipsis',\r\n            marginRight: 8,\r\n        },\r\n        oidField: {\r\n            display: 'inline-block',\r\n            marginTop: 0,\r\n            marginBottom: 0,\r\n            width: 'calc(100% - 185px)',\r\n        },\r\n        colorButton: {\r\n            '&>div': {\r\n                width: '100%'\r\n            }\r\n        },\r\n        divOids: {\r\n            display: 'inline-block',\r\n            verticalAlign: 'top',\r\n            width: '100%',\r\n        },\r\n        divDevice: {\r\n            color: theme.palette.type === 'light' ? 'black' : 'white',\r\n            display: 'inline-block',\r\n            width: 100,\r\n            verticalAlign: 'top',\r\n            fontWeight: 'bold',\r\n            whiteSpace: 'nowrap',\r\n            lineHeight: '32px',\r\n        },\r\n        divIndicators: {\r\n            display: 'inline-block',\r\n            verticalAlign: 'top',\r\n        },\r\n        menuWrapperIcons: {\r\n            display: 'flex'\r\n        },\r\n        divExtended: {\r\n            width: 'calc(50% - 55px)',\r\n        },\r\n        divDialogContent: {\r\n            fontSize: '1rem',\r\n            fontFamily: '\"Roboto\", \"Helvetica\", \"Arial\", sans-serif'\r\n        },\r\n        buttonPen: {\r\n            color: '#ffffff',\r\n        },\r\n        headerButtons: {\r\n            textAlign: 'right'\r\n        },\r\n        headerButton: {\r\n            float: 'right',\r\n            marginLeft: 3,\r\n        },\r\n        enumIcon: {\r\n            width: 24,\r\n            height: 24\r\n        },\r\n        funcDivEdit: {\r\n            width: '100%'\r\n        },\r\n        funcEditName: {\r\n            display: 'inline-block',\r\n            width: 85\r\n        },\r\n        funcEdit: {\r\n            display: 'inline-block',\r\n            marginTop: 0,\r\n            marginBottom: 0,\r\n            width: 'calc(100% - 85px)',\r\n        },\r\n        idEditName: {\r\n            display: 'inline-block',\r\n            width: 200\r\n        },\r\n        idEdit: {\r\n            width: 'calc(100% - 200px)',\r\n            display: 'inline-block',\r\n            marginTop: 0,\r\n            marginBottom: 0,\r\n        },\r\n        icon: {\r\n            color: theme.palette.type === 'light' ? 'black' : 'white',\r\n            display: 'inline-block',\r\n            verticalAlign: 'middle'\r\n        },\r\n        deviceText: {\r\n            verticalAlign: 'middle'\r\n        },\r\n        wrapperIconHead: {\r\n            display: 'flex',\r\n            alignItems: 'center',\r\n            justifyContent: 'center',\r\n            fontSize: 18,\r\n            fontWeight: 900,\r\n            marginTop: 5\r\n        },\r\n        iconStyle: {\r\n            marginRight: 7\r\n        },\r\n        content: {\r\n            paddingTop: 0\r\n        },\r\n        wrapperItemButtons: {\r\n            display: 'flex',\r\n            margin: 'auto 0'\r\n        },\r\n        emptyButton: {\r\n            width: 48,\r\n            height: 48\r\n        },\r\n        tab: {\r\n            '& .Mui-selected': {\r\n                color: theme.name === 'colored' && 'black'\r\n            }\r\n        },\r\n        indicator: {\r\n            backgroundColor: theme.name === 'colored' && 'black'\r\n        },\r\n        divOidFieldObj: {\r\n            height: 140\r\n        },\r\n        displayFlex: {\r\n            display: 'flex',\r\n            flexDirection: 'column',\r\n            width: '100%'\r\n        },\r\n        displayFlexRow: {\r\n            display: 'flex',\r\n\r\n        },\r\n        width100: {\r\n            width: '100%'\r\n        },\r\n        stateSubCategory: {\r\n            fontSize: 12,\r\n            opacity: .6\r\n        },\r\n        wrapperHeaderIndicators: {\r\n            display: 'flex',\r\n            padding: 30\r\n        },\r\n        headerIndicatorsLine: {\r\n            flexGrow: 1,\r\n            borderTop: '1px solid #4dabf5',\r\n            margin: '0 10px',\r\n            marginTop: 11,\r\n            opacity: 0.8\r\n        },\r\n        headerIndicatorsName: {\r\n            color: '#4dabf5',\r\n            fontSize: 18\r\n        },\r\n        wrapperOidName: {\r\n            display: 'flex',\r\n        },\r\n        oidNameIcon: {\r\n            marginTop: 16,\r\n            marginRight: 3,\r\n            width: 24,\r\n            height: 24,\r\n        },\r\n        addedName: {\r\n            color: '#e67e229e'\r\n        },\r\n        helperText: {\r\n            opacity: 0.2\r\n        }\r\n    })\r\n};\r\n\r\n// const FORBIDDEN_CHARS = /[\\][*,;'\"`<>\\\\?]/g;\r\n\r\nfunction TabPanel(props) {\r\n    const { children, value, index, ...other } = props;\r\n\r\n    return <div\r\n        role=\"tabpanel\"\r\n        hidden={value !== index}\r\n        id={`scrollable-auto-tabpanel-${index}`}\r\n        aria-labelledby={`scrollable-auto-tab-${index}`}\r\n        {...other}\r\n    >\r\n        {value === index && (\r\n            <Paper style={{ padding: `10px 20px` }} p={3}>\r\n                <Typography component=\"div\">{children}</Typography>\r\n            </Paper>\r\n        )}\r\n    </div>;\r\n}\r\n\r\nclass DialogEditDevice extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        const ids = {};\r\n        this.fx = {};\r\n\r\n        this.props.channelInfo.states.forEach(state => {\r\n            if (state.id) {\r\n                const obj = this.props.objects[state.id];\r\n                if (obj && obj.common && obj.common.alias) {\r\n                    ids[state.name] = obj.common.alias.id || '';\r\n                    this.fx[state.name] = {\r\n                        read: obj.common.alias.read || '',\r\n                        write: obj.common.alias.write || '',\r\n                    };\r\n                } else {\r\n                    this.fx[state.name] = { read: '', write: '' };\r\n                }\r\n                if (obj && obj.common && obj.common.custom) {\r\n                    const attr = Object.keys(obj.common.custom).filter(id => id.startsWith('linkeddevices.'));\r\n                    if (attr && attr.length && obj.common.custom[attr] && obj.common.custom[attr].parentId) {\r\n                        ids[state.name] = obj.common.custom[attr].parentId;\r\n                    }\r\n                }\r\n\r\n                if (state.defaultRole && state.defaultRole.startsWith('button')) {\r\n                    delete this.fx[state.name].read;\r\n                }\r\n                if (!state.write ||\r\n                    (state.defaultRole && (state.defaultRole.startsWith('indicator') || state.defaultRole.startsWith('value')))\r\n                ) {\r\n                    delete this.fx[state.name].write;\r\n                }\r\n            } else {\r\n                this.fx[state.name] = { read: '', write: '' };\r\n            }\r\n        });\r\n\r\n        const {addedStates} = this.updateFx(this.getAddedChannelStates(), ids);\r\n\r\n        this.channelId = this.props.channelInfo.channelId;\r\n        let name = '';\r\n        const channelObj = this.props.objects[this.channelId];\r\n\r\n        if (channelObj && channelObj.common) {\r\n            name = Utils.getObjectNameFromObj(channelObj, null, { language: I18n.getLanguage() });\r\n        }\r\n\r\n        const extendedAvailable = !!(this.props.channelInfo.states.filter(item => item.indicator).length) && (this.channelId.startsWith('alias.') || this.channelId.startsWith('linkeddevices.'));\r\n\r\n        this.state = {\r\n            ids: ids,\r\n            idsInit: JSON.parse(JSON.stringify(ids)),\r\n            name,\r\n            addedStates,\r\n            extended: extendedAvailable && window.localStorage.getItem('Devices.editExtended') === 'true',\r\n            expertMode: true,\r\n            selectIdFor: '',\r\n            newState: false,\r\n            selectIdPrefix: '',\r\n            editFxFor: '',\r\n            newChannelId: '',\r\n            newChannelError: false,\r\n            startTheProcess: false,\r\n            //showCopyDialog: false,\r\n            disabledButton: false,\r\n            extendedAvailable,\r\n            tab: localStorage.getItem('EditDevice.tab') ? JSON.parse(localStorage.getItem('EditDevice.tab')) || 0 : 0,\r\n            initChangeProperties: {},\r\n            changeProperties: {}\r\n        };\r\n\r\n        this.pattern = this.props.patterns[Object.keys(this.props.patterns)\r\n            .find(type => this.props.patterns[type].type === this.props.channelInfo.type)];\r\n    }\r\n\r\n    getAddedChannelStates() {\r\n        const channelIds = getChannelItems(this.props.objects, this.props.channelInfo.channelId);\r\n\r\n        // Add states, that could not be detected by type-detector\r\n        return channelIds\r\n            .filter(key => !this.props.channelInfo.states.find(item => item.id === key) && this.props.objects[key].type === 'state')\r\n            .map(key => {\r\n                const objOriginal = this.props.objects[key];\r\n                return {\r\n                    defaultRole: objOriginal?.common?.role,\r\n                    id: objOriginal?._id,\r\n                    noType: true,\r\n                    name: objOriginal?.common?.name,\r\n                    type: objOriginal?.common?.type,\r\n                    write: objOriginal?.common?.write,\r\n                    indicator: false,\r\n                    required: false\r\n                };\r\n            })\r\n            .filter(item => !this.props.channelInfo.states.filter(item => item.indicator && item.defaultRole).find(el => el.name === item.name));\r\n    }\r\n\r\n    updateFx(addedStates, ids) {\r\n        const newIds = ids || JSON.parse(JSON.stringify(this.state.ids));\r\n\r\n        addedStates.forEach(state => {\r\n            if (state.id) {\r\n                const obj = this.props.objects[state.id];\r\n                if (obj && obj.common && obj.common.alias) {\r\n                    newIds[state.name] = obj.common.alias.id || '';\r\n                    this.fx[state.name] = this.fx[state.name] || {\r\n                        read: obj.common.alias.read || '',\r\n                        write: obj.common.alias.write || '',\r\n                    };\r\n                } else {\r\n                    this.fx[state.name] = this.fx[state.name] || { read: '', write: '' };\r\n                }\r\n                if (obj && obj.common && obj.common.custom) {\r\n                    const attr = Object.keys(obj.common.custom).filter(id => id.startsWith('linkeddevices.'));\r\n                    if (attr && attr.length && obj.common.custom[attr] && obj.common.custom[attr].parentId) {\r\n                        newIds[state.name] = newIds[state.name] || obj.common.custom[attr].parentId;\r\n                    }\r\n                }\r\n\r\n                if (state.defaultRole && state.defaultRole.startsWith('button')) {\r\n                    delete this.fx[state.name].read;\r\n                }\r\n                if (!state.write ||\r\n                    (state.defaultRole && (state.defaultRole.startsWith('indicator') || state.defaultRole.startsWith('value')))\r\n                ) {\r\n                    delete this.fx[state.name].write;\r\n                }\r\n            } else {\r\n                this.fx[state.name] = this.fx[state.name] || { read: '', write: '' };\r\n            }\r\n        });\r\n\r\n        return {addedStates, newIds};\r\n    }\r\n\r\n    UNSAFE_componentWillReceiveProps(nextProps) {\r\n        const addedStates = this.getAddedChannelStates();\r\n\r\n        if (JSON.stringify(addedStates) !== JSON.stringify(this.state.addedStates)) {\r\n            const {addedStates, newIds} = this.updateFx(this.getAddedChannelStates());\r\n\r\n            this.setState({ addedStates, ids: newIds });\r\n        }\r\n    }\r\n\r\n    renderSelectDialog() {\r\n        if (!this.state.selectIdFor && !this.state.newState) {\r\n            return null;\r\n        }\r\n        const selected = this.state.selectIdPrefix ? this.state.ids[this.state.selectIdFor][this.state.selectIdPrefix] : this.state.ids[this.state.selectIdFor];\r\n        return <DialogSelectID\r\n            key=\"selectDialog\"\r\n            imagePrefix=\"../..\"\r\n            socket={this.props.socket}\r\n            dialogName=\"devicesEdit\"\r\n            title={this.state.newState ? I18n.t('Importer state') : I18n.t('Select for ') + this.state.selectIdFor}\r\n            selected={selected || this.findRealDevice(this.state.selectIdPrefix)}\r\n            statesOnly={true}\r\n            onOk={async id => {\r\n                const ids = JSON.parse(JSON.stringify(this.state.ids));\r\n                if (!this.state.newState) {\r\n                    if (this.state.selectIdPrefix) {\r\n                        ids[this.state.selectIdFor][this.state.selectIdPrefix] = id;\r\n                    } else {\r\n                        ids[this.state.selectIdFor] = id;\r\n                    }\r\n                } else {\r\n                    const isAlias = id.startsWith('alias.') || id.startsWith('linkeddevices.');\r\n                    const obj = JSON.parse(JSON.stringify(this.props.objects[id]));\r\n                    let parts = id.split('.');\r\n                    parts = parts.pop();\r\n                    obj._id = `${this.channelId}.${parts}`;\r\n                    obj.native = {};\r\n                    obj.common.name = parts;\r\n                    if (!isAlias) {\r\n                        obj.common.alias = { id };\r\n                    }\r\n                    await this.props.socket.setObject(`${this.channelId}.${parts}`, obj);\r\n                    //const newObject = await this.props.socket.getObject(`${this.channelId}.${parts}`);\r\n                    //this.props.objects[`${this.channelId}.${parts}`] = newObject;\r\n                    //if (newObject.common) {\r\n                    //    ids[newObject.common.name] = newObject?.common?.alias?.id;\r\n                    //}\r\n                }\r\n                this.setState({ selectIdPrefix: '', selectIdFor: '', ids });\r\n            }}\r\n            onClose={() => this.setState({ selectIdFor: '', selectIdPrefix: '', newState: false })}\r\n        />;\r\n    }\r\n\r\n    handleClose = () => {\r\n        this.props.onClose && this.props.onClose(null);\r\n    }\r\n\r\n    updateNewState = async () => {\r\n        const array = this.state.addedStates.filter(item => Object.keys(this.state.ids).includes(item.name));\r\n        for (let i = 0; i < array.length; i++) {\r\n            const item = array[i];\r\n            const stateObj = this.props.objects[item.id];\r\n            stateObj.common = stateObj.common || {};\r\n            stateObj.common.alias = stateObj.common.alias || {};\r\n            stateObj.common.alias.id = this.state.ids[item.name];\r\n            if (!this.fx[item.name].read) {\r\n                delete stateObj.common.alias.read;\r\n            } else {\r\n                stateObj.common.alias.read = this.fx[item.name].read;\r\n            }\r\n            if (!this.fx[item.name].write) {\r\n                delete stateObj.common.alias.write;\r\n            } else {\r\n                stateObj.common.alias.write = this.fx[item.name].write;\r\n            }\r\n            await this.props.socket.setObject(stateObj._id, stateObj);\r\n        }\r\n    }\r\n\r\n    handleOk = async () => {\r\n        this.setState({ startTheProcess: true });\r\n        if (JSON.stringify(this.state.initChangeProperties) !== JSON.stringify(this.state.changeProperties)) {\r\n            this.props.onSaveProperties && (await this.props.onSaveProperties(this.state.changeProperties));\r\n        }\r\n        await this.props.onClose({\r\n            ids: this.state.ids,\r\n            fx: this.fx,\r\n        });\r\n        await this.updateNewState();\r\n\r\n        if (this.state.changeProperties.name &&\r\n            this.state.initChangeProperties.name &&\r\n            this.state.initChangeProperties.name !== this.state.changeProperties.name\r\n        ) {\r\n            let parts = this.channelId.split('.');\r\n            parts.pop();\r\n            parts = parts.join('.');\r\n            parts = `${parts}.${this.state.changeProperties.name.replace(Utils.FORBIDDEN_CHARS, '_').replace(/\\s/g, '_').replace(/\\./g, '_')}`;\r\n            await this.props.onCopyDevice(this.channelId, parts);\r\n        }\r\n        this.setState({ startTheProcess: false });\r\n    };\r\n\r\n    showDeviceIcon() {\r\n        return <div className={this.props.classes.icon}>\r\n            <TypeIcon type={this.props.channelInfo.type} style={{ color: this.props.themeType === 'dark' ? '#FFFFFF' : '#000' }} />\r\n        </div>;\r\n    }\r\n\r\n    renderHeader() {\r\n        const classes = this.props.classes;\r\n\r\n        return <div className={classes.header}>\r\n            <div className={clsx(classes.divOids, classes.headerButtons, classes.divExtended)} />\r\n            <div className={classes.menuWrapperIcons}>\r\n                {this.state.extendedAvailable && !this.state.startTheProcess && <Tooltip title={I18n.t('Show hide indicators')}>\r\n                    <IconButton\r\n                        style={this.state.extended ? { color: '#4dabf5' } : null}\r\n                        onClick={() => {\r\n                            window.localStorage.setItem('Devices.editExtended', this.state.extended ? 'false' : 'true');\r\n                            this.setState({ extended: !this.state.extended });\r\n                        }}>\r\n                        <IconExtended style={{ transform: !this.state.extended ? 'rotate(180deg)' : '' }} />\r\n                    </IconButton>\r\n                </Tooltip>}\r\n                {this.state.extendedAvailable && !this.state.startTheProcess &&\r\n                    <Tooltip title={I18n.t('Add state')}>\r\n                        <IconButton\r\n                            onClick={() => addStateCallBack(\r\n                                async obj => {\r\n                                    if (obj) {\r\n                                        //this.props.objects[obj._id] = await this.props.socket.getObject(obj._id);\r\n                                    }\r\n                                },\r\n                                this.props.objects,\r\n                                this.props.socket,\r\n                                this.channelId,\r\n                                this.props.channelInfo.states.filter(item => item.indicator && item.defaultRole)\r\n                            )}>\r\n                            <IconAdd />\r\n                        </IconButton>\r\n                    </Tooltip>}\r\n                {this.state.extendedAvailable && !this.state.startTheProcess &&\r\n                    <Tooltip title={I18n.t('Import state')}>\r\n                        <IconButton\r\n                            style={{ color: '#e67e229e' }}\r\n                            onClick={() => this.setState({ newState: true })}\r\n                        >\r\n                            <IconAdd />\r\n                        </IconButton>\r\n                    </Tooltip>}\r\n            </div>\r\n        </div>;\r\n    }\r\n\r\n    onDelete = async (id) => {\r\n        await this.props.socket.delObject(id);\r\n    }\r\n\r\n    findRealDevice(prefix) {\r\n        if (prefix) {\r\n            return\r\n        }\r\n        let realParent = Object.keys(this.state.ids).find(id => this.state.ids[id]);\r\n        if (realParent) {\r\n            realParent = this.state.ids[realParent];\r\n            if (typeof realParent === 'string') {\r\n                const parts = realParent.split('.');\r\n                parts.pop();\r\n                realParent = parts.join('.');\r\n            } else if (typeof realParent === 'object') {\r\n                realParent = Object.keys(realParent)[0];\r\n                const parts = realParent.split('.');\r\n                parts.pop();\r\n                realParent = parts.join('.');\r\n            }\r\n        }\r\n        return realParent || '';\r\n    }\r\n\r\n    renderSelectEnum(name) {\r\n        const enums = this.props.enumIDs.filter(id => id.startsWith('enum.' + name + '.'));\r\n        const language = I18n.getLanguage();\r\n        const objs = enums.map(id => {\r\n            return {\r\n                name: Utils.getObjectName(this.props.objects, id, { language }),\r\n                icon: Utils.getObjectIcon(id, this.props.objects[id]),\r\n                id: id\r\n            }\r\n        });\r\n\r\n        return <Select\r\n            className={this.props.classes.oidField}\r\n            value={this.state[name]}\r\n            multiple={true}\r\n            onChange={e => this.setState({ [name]: e.target.value })}\r\n        >\r\n            {objs.map(obj => <MenuItem key={obj.id} icon={obj.icon} value={obj.id}>\r\n                {obj.name}\r\n            </MenuItem>)}\r\n        </Select>;\r\n    }\r\n\r\n    renderEditFxDialog() {\r\n        if (!this.state.editFxFor) {\r\n            return null;\r\n        }\r\n        const fx = this.fx[this.state.editFxFor];\r\n\r\n        this.fxRead = fx.read;\r\n        this.fxWrite = fx.write;\r\n\r\n        return <Dialog\r\n            open={true}\r\n            key=\"editFxDialog\"\r\n            maxWidth=\"sm\"\r\n            onClose={() => this.setState({ editFxFor: '' })}\r\n            aria-labelledby=\"alert-dialog-title\"\r\n            aria-describedby=\"alert-dialog-description\"\r\n        >\r\n            <DialogTitle className={this.props.classes.titleBackground}\r\n                classes={{ root: this.props.classes.titleColor }}\r\n                id=\"edit-device-dialog-title\">{I18n.t('Edit read/write functions')} <b>{this.state.editFxFor}</b></DialogTitle>\r\n            <DialogContent>\r\n                <div className={this.props.classes.divDialogContent}>\r\n                    {fx.read !== undefined ? <div className={this.props.classes.funcDivEdit}>\r\n                        <div className={this.props.classes.funcEditName} style={{ fontWeight: 'bold' }}>\r\n                            {I18n.t('Read function')}\r\n                        </div>\r\n                        <TextField\r\n                            fullWidth\r\n                            defaultValue={this.fxRead}\r\n                            className={this.props.classes.funcEdit}\r\n                            onChange={e => this.fxRead = e.target.value}\r\n                            helperText={I18n.t('JS function like') + ' \"val / 5 + 21\"'}\r\n                            margin=\"normal\"\r\n                        />\r\n                    </div> : null}\r\n                    {fx.write !== undefined ? <div className={this.props.classes.funcDivEdit}>\r\n                        <div className={this.props.classes.funcEditName} style={{ fontWeight: 'bold' }}>\r\n                            {I18n.t('Write function')}\r\n                        </div>\r\n                        <TextField\r\n                            fullWidth\r\n                            defaultValue={this.fxWrite}\r\n                            helperText={I18n.t('JS function like') + ' \"(val - 21) * 5\"'}\r\n                            className={this.props.classes.funcEdit}\r\n                            onChange={e => this.fxWrite = e.target.value}\r\n                            margin=\"normal\"\r\n                        />\r\n                    </div> : null}\r\n                </div>\r\n            </DialogContent>\r\n            <DialogActions>\r\n                <Button variant=\"contained\" onClick={() => {\r\n                    this.setState({ editFxFor: '' });\r\n                    if (this.fx[this.state.editFxFor].read !== undefined) {\r\n                        this.fx[this.state.editFxFor].read = this.fxRead;\r\n                    }\r\n                    if (this.fx[this.state.editFxFor].write !== undefined) {\r\n                        this.fx[this.state.editFxFor].write = this.fxWrite;\r\n                    }\r\n                }} color=\"primary\" autoFocus>{I18n.t('Ok')}</Button>\r\n                <Button variant=\"contained\" onClick={() => this.setState({ editFxFor: '' })}>{I18n.t('Cancel')}</Button>\r\n            </DialogActions>\r\n        </Dialog>;\r\n    }\r\n\r\n    onToggleTypeStates = (name) => {\r\n        let stateDevice = this.state.ids[name];\r\n        if (typeof stateDevice === 'object') {\r\n            stateDevice = stateDevice.read;\r\n        } else {\r\n            stateDevice = {\r\n                read: stateDevice,\r\n                write: ''\r\n            }\r\n        }\r\n        const newIds = JSON.parse(JSON.stringify(this.state.ids));\r\n        newIds[name] = stateDevice;\r\n        this.setState({ ids: newIds });\r\n    }\r\n\r\n    static getStateIcon(name, role) {\r\n\r\n        // Get icon by role\r\n        if (role.includes('humidity')) {\r\n            return STATES_NAME_ICONS.HUMIDITY;\r\n        } else if (role.includes('temperature')) {\r\n            return STATES_NAME_ICONS.TEMPERATURE;\r\n        } else if (role.includes('water')) {\r\n            return STATES_NAME_ICONS.WATER;\r\n        } else if (role.includes('fire')) {\r\n            return STATES_NAME_ICONS.FIRE;\r\n        } else if (role.includes('smoke')) {\r\n            return STATES_NAME_ICONS.SMOKE;\r\n        } else if (role.includes('speed')) {\r\n            return STATES_NAME_ICONS.SPEED;\r\n        } else if (role.includes('brightness')) {\r\n            return STATES_NAME_ICONS.BRIGHTNESS;\r\n        } else if (role.includes('motion')) {\r\n            return STATES_NAME_ICONS.MOTION;\r\n        }  else if (role.includes('window')) {\r\n            return STATES_NAME_ICONS.WINDOW;\r\n        } else {\r\n            return STATES_NAME_ICONS[name] || MdHelpOutline;\r\n        }\r\n    }\r\n\r\n    renderVariable(item, isAdded, index) {\r\n        if (!item.id && !this.channelId.startsWith('alias.') && !this.channelId.startsWith('linkeddevices.')) {\r\n            return null;\r\n        }\r\n        let props = [item.type || 'any'];\r\n        const dName = item.name.replace(/\\d+$/, '%d');\r\n        let pattern = this.pattern.states.find(state => state.name === item.name || state.name === dName);\r\n        if (item.write) props.push('write');\r\n        if (item.read) props.push('read');\r\n        if (pattern?.defaultRole) {\r\n            props.push('role=' + pattern.defaultRole);\r\n        } else if (item.defaultRole) {\r\n            props.push('role=' + item.defaultRole);\r\n        } else {\r\n            pattern?.role && props.push('role=' + pattern.role.toString());\r\n        }\r\n\r\n        if (pattern?.enums) {\r\n            const type = this.props.channelInfo.type;\r\n            if (type === 'dimmer' || type === 'light') {\r\n                props.push('enum light');\r\n            } else if (type === 'blinds' || type === 'window' || type === 'windowTilt') {\r\n                props.push('enum window');\r\n            } else if (type === 'door') {\r\n                props.push('enum door');\r\n            } else {\r\n                props.push('enum ' + this.props.channelInfo.type);\r\n            }\r\n        }\r\n\r\n        if (item.required) {\r\n            props.push('required');\r\n        }\r\n\r\n        const role = pattern?.defaultRole || (pattern?.role && pattern?.role.toString()) || item?.defaultRole || '';\r\n        const titleTooltip = <div>\r\n            {item.required && <div>{`${I18n.t('Required')}: true`}</div>}\r\n            <div>{`${I18n.t('Type')}: ${item.type || 'any'}`}</div>\r\n            <div>{`${I18n.t('Writable')}: ${!!item.write}`}</div>\r\n            {role && <div>{`${I18n.t('Role')}: ${pattern?.defaultRole || (pattern?.role && pattern?.role.toString()) || item?.defaultRole || ''}`}</div>}\r\n        </div>\r\n\r\n        ////////////// ImportExportIcon\r\n        const alias = this.channelId.startsWith('alias.');\r\n        const linkedDevices = this.channelId.startsWith('linkeddevices.');\r\n        const name = item.name;\r\n\r\n        // Get icon by role\r\n        const IconsState = DialogEditDevice.getStateIcon(name, role);\r\n\r\n        if (typeof this.state.ids[name] === 'object') {\r\n            return <div key={name + '_' + index}>\r\n                <div\r\n                    className={clsx(this.props.classes.divOidField, this.props.classes.divOidFieldObj)}\r\n                    style={!item.id && !this.state.ids[name] ? { opacity: 0.6 } : {}}\r\n                >\r\n                    <div className={this.props.classes.displayFlex}>\r\n                        <div className={this.props.classes.displayFlexRow}>\r\n                            <Tooltip title={titleTooltip}>\r\n                                <div className={this.props.classes.wrapperOidName}>\r\n                                    <IconsState className={clsx(this.props.classes.oidNameIcon, isAdded && this.props.classes.addedName)} />\r\n                                    <div className={clsx(this.props.classes.oidName, isAdded && this.props.classes.addedName)} style={{ fontWeight: item.required ? 'bold' : null }}>\r\n                                        {(item.required ? '*' : '') + name}\r\n                                        <div className={this.props.classes.stateSubCategory}>{I18n.t('alias_read')}</div>\r\n                                    </div>\r\n                                </div>\r\n                            </Tooltip>\r\n                            <TextField\r\n                                key={name}\r\n                                fullWidth\r\n                                disabled={(!alias && !linkedDevices) || this.state.startTheProcess}\r\n                                value={this.state.ids[name].read}\r\n                                className={clsx(this.props.classes.oidField, this.props.classes.width100)}\r\n                                style={{ paddingTop: 8 }}\r\n                                onChange={e => {\r\n                                    const ids = JSON.parse(JSON.stringify(this.state.ids));\r\n                                    ids[name].read = e.target.value;\r\n                                    this.setState({ ids });\r\n                                }}\r\n                                FormHelperTextProps={{className: this.props.classes.helperText}}\r\n                                helperText={`${props.join(', ')}`}\r\n                                margin=\"normal\"\r\n                            />\r\n                            <div className={this.props.classes.wrapperItemButtons}>\r\n                                {(alias || linkedDevices) && !this.state.startTheProcess && <Tooltip title={I18n.t('Select ID')}>\r\n                                    <IconButton onClick={() => this.setState({ selectIdFor: name, selectIdPrefix: 'read' })}>\r\n                                        <IconEdit />\r\n                                    </IconButton>\r\n                                </Tooltip>}\r\n                            </div>\r\n                        </div>\r\n                        <div className={this.props.classes.displayFlexRow}>\r\n                            <Tooltip title={titleTooltip}>\r\n                                <div className={this.props.classes.wrapperOidName}>\r\n                                    <IconsState className={clsx(this.props.classes.oidNameIcon, isAdded && this.props.classes.addedName)} />\r\n                                    <div className={clsx(this.props.classes.oidName, isAdded && this.props.classes.addedName)} style={{ fontWeight: item.required ? 'bold' : null }}>\r\n                                        {(item.required ? '*' : '') + name}\r\n                                        <div className={this.props.classes.stateSubCategory}>{I18n.t('alias_write')}</div>\r\n                                    </div>\r\n                                </div>\r\n                            </Tooltip>\r\n                            <TextField\r\n                                key={name}\r\n                                fullWidth\r\n                                disabled={(!alias && !linkedDevices) || this.state.startTheProcess}\r\n                                value={this.state.ids[name].write}\r\n                                className={clsx(this.props.classes.oidField, this.props.classes.width100)}\r\n                                style={{ paddingTop: 8 }}\r\n                                onChange={e => {\r\n                                    const ids = JSON.parse(JSON.stringify(this.state.ids));\r\n                                    ids[name].write = e.target.value;\r\n                                    this.setState({ ids });\r\n                                }}\r\n                                FormHelperTextProps={{className: this.props.classes.helperText}}\r\n                                helperText={`${props.join(', ')}`}\r\n                                margin=\"normal\"\r\n                            /> <div className={this.props.classes.wrapperItemButtons}>\r\n                                {(alias || linkedDevices) && !this.state.startTheProcess && <Tooltip title={I18n.t('Select ID')}>\r\n                                    <IconButton onClick={() => this.setState({ selectIdFor: name, selectIdPrefix: 'write' })}>\r\n                                        <IconEdit />\r\n                                    </IconButton>\r\n                                </Tooltip>}\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    <div className={this.props.classes.wrapperItemButtons}>\r\n                        {(alias || linkedDevices) && !this.state.startTheProcess && <Tooltip title={I18n.t('Use one state for read and write')}>\r\n                            <IconButton color=\"primary\" onClick={() => this.onToggleTypeStates(name)}>\r\n                                <ImportExportIcon />\r\n                            </IconButton>\r\n                        </Tooltip>}\r\n                        {(this.state.ids[name].read || this.state.ids[name].write) && alias && this.state.ids[name] && !this.state.startTheProcess ? <Tooltip title={I18n.t('Edit convert functions')}>\r\n                            <IconButton onClick={() => this.setState({ editFxFor: name })}>\r\n                                <IconFunction />\r\n                            </IconButton>\r\n                        </Tooltip> : item.noType ? '' : <div className={this.props.classes.emptyButton} />}\r\n                        {item.noType && !this.state.startTheProcess && <Tooltip title={I18n.t('Delete state')}>\r\n                            <IconButton onClick={() => this.onDelete(item.id)}>\r\n                                <IconDelete />\r\n                            </IconButton>\r\n                        </Tooltip>}\r\n                    </div>\r\n                </div>\r\n            </div>;\r\n        } else {\r\n            return <div key={name + '_' + index} className={clsx(this.props.classes.divOidField)} style={!item.id && !this.state.ids[name] ? { opacity: 0.6 } : {}}>\r\n                <Tooltip title={titleTooltip}>\r\n                    <div className={this.props.classes.wrapperOidName}>\r\n                        <IconsState className={clsx(this.props.classes.oidNameIcon, isAdded && this.props.classes.addedName)} />\r\n                        <div className={clsx(this.props.classes.oidName, isAdded && this.props.classes.addedName)} style={{ fontWeight: item.required ? 'bold' : null }}>\r\n                            {(item.required ? '*' : '') + name}\r\n                        </div>\r\n                    </div>\r\n                </Tooltip>\r\n                <TextField\r\n                    fullWidth\r\n                    disabled={(!alias && !linkedDevices) || this.state.startTheProcess}\r\n                    value={alias || linkedDevices ? this.state.ids[name] || '' : item.id || ''}\r\n                    className={this.props.classes.oidField}\r\n                    style={{ paddingTop: 8 }}\r\n                    onChange={e => {\r\n                        const ids = JSON.parse(JSON.stringify(this.state.ids));\r\n                        ids[name] = e.target.value;\r\n                        this.setState({ ids });\r\n                    }}\r\n                    FormHelperTextProps={{\r\n                        className: this.props.classes.helperText\r\n                    }}\r\n                    helperText={props.join(', ')}\r\n                    margin=\"normal\"\r\n                />\r\n                <div className={this.props.classes.wrapperItemButtons}>\r\n                    {(alias || linkedDevices) && !this.state.startTheProcess && <Tooltip title={I18n.t('Select ID')}>\r\n                        <IconButton onClick={() => this.setState({ selectIdFor: name })}>\r\n                            <IconEdit />\r\n                        </IconButton>\r\n                    </Tooltip>}\r\n                    {(alias || linkedDevices) && !this.state.startTheProcess && <Tooltip title={I18n.t('Use differnet states for read and write')}>\r\n                        <IconButton onClick={() => this.onToggleTypeStates(name)}>\r\n                            <ImportExportIcon />\r\n                        </IconButton>\r\n                    </Tooltip>}\r\n                    {alias && this.state.ids[name] && !this.state.startTheProcess ? <Tooltip title={I18n.t('Edit convert functions')}>\r\n                        <IconButton onClick={() => this.setState({ editFxFor: name })}>\r\n                            <IconFunction />\r\n                        </IconButton>\r\n                    </Tooltip> : item.noType ? '' : <div className={this.props.classes.emptyButton} />}\r\n                    {item.noType && !this.state.startTheProcess && <Tooltip title={I18n.t('Delete state')}>\r\n                        <IconButton onClick={() => this.onDelete(item.id)}>\r\n                            <IconDelete />\r\n                        </IconButton>\r\n                    </Tooltip>}\r\n                </div>\r\n            </div>;\r\n        }\r\n    }\r\n\r\n    renderVariables() {\r\n        return <div key=\"vars\" className={clsx(this.props.classes.divOids, this.props.classes.divCollapsed)}>\r\n            {this.props.channelInfo.states.filter((item, i) => !item.indicator && item.defaultRole).map((item, i) => this.renderVariable(item, false, i))}\r\n            {this.state.extendedAvailable && this.state.addedStates.map((item, i) => this.renderVariable(item, true, i))}\r\n            {this.state.extended && this.state.extendedAvailable &&\r\n                <div className={this.props.classes.wrapperHeaderIndicators}>\r\n                    <div className={this.props.classes.headerIndicatorsLine} />\r\n                    <div className={this.props.classes.headerIndicatorsName}>{I18n.t('Indicators')}</div>\r\n                    <div className={this.props.classes.headerIndicatorsLine} />\r\n                </div>}\r\n            {this.state.extended && this.state.extendedAvailable && this.props.channelInfo.states.filter(item => item.indicator && item.defaultRole).map(item => this.renderVariable(item, '#4dabf5'))}\r\n        </div>;\r\n    }\r\n\r\n    a11yProps(index) {\r\n        return {\r\n            id: `scrollable-auto-tab-${index}`,\r\n            'aria-controls': `scrollable-auto-tabpanel-${index}`,\r\n        };\r\n    }\r\n\r\n    render() {\r\n        return <Dialog\r\n            key=\"editDialog\"\r\n            open={true}\r\n            maxWidth=\"md\"\r\n            fullWidth={true}\r\n            aria-labelledby=\"alert-dialog-title\"\r\n            aria-describedby=\"alert-dialog-description\"\r\n        >\r\n            {this.renderSelectDialog()}\r\n            {this.renderEditFxDialog()}\r\n            <DialogTitle className={this.props.classes.titleBackground}\r\n                classes={{ root: this.props.classes.titleColor }}\r\n                id=\"edit-device-dialog-title\">{I18n.t('Edit device')} <b>{this.channelId}</b></DialogTitle>\r\n            <DialogContent className={this.props.classes.content}>\r\n                <AppBar style={{ top: 0 }} position=\"sticky\" color=\"default\">\r\n                    {this.state.startTheProcess && <LinearProgress />}\r\n                    <div className={this.props.classes.wrapperIconHead}>\r\n                        <div className={this.props.classes.iconStyle}>{this.showDeviceIcon()}</div>\r\n                        <span className={this.props.classes.deviceText}>{I18n.t('type-' + this.props.channelInfo.type)}</span>\r\n                    </div>\r\n                    <Tabs\r\n                        value={this.state.tab}\r\n                        className={this.props.classes.tab}\r\n                        classes={{\r\n                            indicator: this.props.classes.indicator\r\n                        }}\r\n                        onChange={(_, newTab) => this.setState({ tab: newTab }, () => {\r\n                            localStorage.setItem('EditDevice.tab', newTab);\r\n                        })}\r\n                        indicatorColor=\"primary\"\r\n                        textColor=\"primary\"\r\n                        variant=\"scrollable\"\r\n                        scrollButtons=\"auto\"\r\n                        aria-label=\"scrollable auto tabs example\"\r\n                    >\r\n                        <Tab disabled={this.state.startTheProcess} label={I18n.t('General')} {...this.a11yProps(0)} />\r\n                        <Tab disabled={this.state.startTheProcess} label={I18n.t('States')} {...this.a11yProps(1)} />\r\n                    </Tabs>\r\n                </AppBar>\r\n                <TabPanel value={this.state.tab} index={1}>\r\n                    <div className={this.props.classes.divDialogContent}>\r\n                        {this.renderHeader()}\r\n                        {this.renderVariables()}\r\n                    </div>\r\n                </TabPanel>\r\n                <TabPanel value={this.state.tab} index={0}>\r\n                    <DialogEditProperties\r\n                        channelId={this.props.channelId}\r\n                        disabled={this.state.startTheProcess}\r\n                        type={this.props.type}\r\n                        iot={this.props.iot}\r\n                        iotNoCommon={this.props.iotNoCommon}\r\n                        objects={this.props.objects}\r\n                        patterns={this.props.patterns}\r\n                        enumIDs={this.props.enumIDs}\r\n                        socket={this.props.socket}\r\n                        changeProperties={this.state.changeProperties}\r\n                        onChange={(state, initState, disabledButton) => {\r\n                            if (initState) {\r\n                                // TODO unclear! why immediately after setstate the settings are reset\r\n                                return this.setState({ initChangeProperties: initState, changeProperties: initState, disabledButton: false }, () =>\r\n                                    this.setState({ changeProperties: state, disabledButton }));\r\n                            } else {\r\n                                this.setState({ changeProperties: state, disabledButton });\r\n                            }\r\n                        }}\r\n                    />\r\n                </TabPanel>\r\n            </DialogContent>\r\n            <DialogActions>\r\n                <Button\r\n                    variant=\"contained\"\r\n                    disabled={(JSON.stringify(this.state.initChangeProperties) === JSON.stringify(this.state.changeProperties) && JSON.stringify(this.state.ids) === JSON.stringify(this.state.idsInit)) || this.state.disabledButton || this.state.startTheProcess}\r\n                    onClick={async () => await this.handleOk()}\r\n                    startIcon={<IconCheck />}\r\n                    color=\"primary\">{I18n.t('Save')}</Button>\r\n                <Button\r\n                    variant=\"contained\"\r\n                    disabled={this.state.startTheProcess}\r\n                    onClick={this.handleClose}\r\n                    startIcon={<IconClose />}\r\n                >{I18n.t('Cancel')}</Button>\r\n            </DialogActions>\r\n        </Dialog>;\r\n    }\r\n}\r\n\r\nDialogEditDevice.propTypes = {\r\n    channelId: PropTypes.string,\r\n    onClose: PropTypes.func,\r\n    patterns: PropTypes.object,\r\n    channelInfo: PropTypes.object,\r\n    objects: PropTypes.object,\r\n    enumIDs: PropTypes.array,\r\n    states: PropTypes.object,\r\n    socket: PropTypes.object,\r\n    themeType: PropTypes.string,\r\n    onCopyDevice: PropTypes.func,\r\n    onSaveProperties: PropTypes.func,\r\n};\r\n\r\nexport default withStyles(styles)(DialogEditDevice);\r\n","function binarySearch(array, sValue, argStart, argLen) {\r\n    // Range of [start, start+len): only start is inclusive. It works\r\n    // similarly to \"...\".substr(start, len).indexOf(sValue)\r\n    // `void 0` is shorthand for `undefined`\r\n    const start = (argStart === void 0 ? 0 : argStart) | 0;\r\n    let len = (argLen === void 0 ? (array.length|0) - start : argLen) | 0;\r\n    len = len - 1 | 0;\r\n\r\n    if (len & 0x80000000) {\r\n        const nCB = len & 0x80000000;\r\n        len ^= (len ^ (nCB - 1)) & ((array[start + nCB|0] <= sValue |0) - 1 >>> 0);\r\n    }\r\n    if (len & 0x40000000) {\r\n        const nCB = len & 0xc0000000;\r\n        len ^= (len ^ (nCB - 1)) & ((array[start + nCB|0] <= sValue |0) - 1 >>> 0);\r\n    }\r\n    if (len & 0x20000000) {\r\n        const nCB = len & 0xe0000000;\r\n        len ^= (len ^ (nCB - 1)) & ((array[start + nCB|0] <= sValue |0) - 1 >>> 0);\r\n    }\r\n    if (len & 0x10000000) {\r\n        const nCB = len & 0xf0000000;\r\n        len ^= (len ^ (nCB - 1)) & ((array[start + nCB|0] <= sValue |0) - 1 >>> 0);\r\n    }\r\n    if (len & 0x8000000) {\r\n        const nCB = len & 0xf8000000;\r\n        len ^= (len ^ (nCB - 1)) & ((array[start + nCB|0] <= sValue |0) - 1 >>> 0);\r\n    }\r\n    if (len & 0x4000000) {\r\n        const nCB = len & 0xfc000000;\r\n        len ^= (len ^ (nCB - 1)) & ((array[start + nCB|0] <= sValue |0) - 1 >>> 0);\r\n    }\r\n    if (len & 0x2000000) {\r\n        const nCB = len & 0xfe000000;\r\n        len ^= (len ^ (nCB - 1)) & ((array[start + nCB|0] <= sValue |0) - 1 >>> 0);\r\n    }\r\n    if (len & 0x1000000) {\r\n        const nCB = len & 0xff000000;\r\n        len ^= (len ^ (nCB - 1)) & ((array[start + nCB|0] <= sValue |0) - 1 >>> 0);\r\n    }\r\n    if (len & 0x800000) {\r\n        const nCB = len & 0xff800000;\r\n        len ^= (len ^ (nCB - 1)) & ((array[start + nCB|0] <= sValue |0) - 1 >>> 0);\r\n    }\r\n    if (len & 0x400000) {\r\n        const nCB = len & 0xffc00000;\r\n        len ^= (len ^ (nCB - 1)) & ((array[start + nCB|0] <= sValue |0) - 1 >>> 0);\r\n    }\r\n    if (len & 0x200000) {\r\n        const nCB = len & 0xffe00000;\r\n        len ^= (len ^ (nCB - 1)) & ((array[start + nCB|0] <= sValue |0) - 1 >>> 0);\r\n    }\r\n    if (len & 0x100000) {\r\n        const nCB = len & 0xfff00000;\r\n        len ^= (len ^ (nCB - 1)) & ((array[start + nCB|0] <= sValue |0) - 1 >>> 0);\r\n    }\r\n    if (len & 0x80000) {\r\n        const nCB = len & 0xfff80000;\r\n        len ^= (len ^ (nCB - 1)) & ((array[start + nCB|0] <= sValue |0) - 1 >>> 0);\r\n    }\r\n    if (len & 0x40000) {\r\n        const nCB = len & 0xfffc0000;\r\n        len ^= (len ^ (nCB - 1)) & ((array[start + nCB|0] <= sValue |0) - 1 >>> 0);\r\n    }\r\n    if (len & 0x20000) {\r\n        const nCB = len & 0xfffe0000;\r\n        len ^= (len ^ (nCB - 1)) & ((array[start + nCB|0] <= sValue |0) - 1 >>> 0);\r\n    }\r\n    if (len & 0x10000) {\r\n        const nCB = len & 0xffff0000;\r\n        len ^= (len ^ (nCB - 1)) & ((array[start + nCB|0] <= sValue |0) - 1 >>> 0);\r\n    }\r\n    if (len & 0x8000) {\r\n        const nCB = len & 0xffff8000;\r\n        len ^= (len ^ (nCB - 1)) & ((array[start + nCB|0] <= sValue |0) - 1 >>> 0);\r\n    }\r\n    if (len & 0x4000) {\r\n        const nCB = len & 0xffffc000;\r\n        len ^= (len ^ (nCB - 1)) & ((array[start + nCB|0] <= sValue |0) - 1 >>> 0);\r\n    }\r\n    if (len & 0x2000) {\r\n        const nCB = len & 0xffffe000;\r\n        len ^= (len ^ (nCB - 1)) & ((array[start + nCB|0] <= sValue |0) - 1 >>> 0);\r\n    }\r\n    if (len & 0x1000) {\r\n        const nCB = len & 0xfffff000;\r\n        len ^= (len ^ (nCB - 1)) & ((array[start + nCB|0] <= sValue |0) - 1 >>> 0);\r\n    }\r\n    if (len & 0x800) {\r\n        const nCB = len & 0xfffff800;\r\n        len ^= (len ^ (nCB - 1)) & ((array[start + nCB|0] <= sValue |0) - 1 >>> 0);\r\n    }\r\n    if (len & 0x400) {\r\n        const nCB = len & 0xfffffc00;\r\n        len ^= (len ^ (nCB - 1)) & ((array[start + nCB|0] <= sValue |0) - 1 >>> 0);\r\n    }\r\n    if (len & 0x200) {\r\n        const nCB = len & 0xfffffe00;\r\n        len ^= (len ^ (nCB - 1)) & ((array[start + nCB|0] <= sValue |0) - 1 >>> 0);\r\n    }\r\n    if (len & 0x100) {\r\n        const nCB = len & 0xffffff00;\r\n        len ^= (len ^ (nCB - 1)) & ((array[start + nCB|0] <= sValue |0) - 1 >>> 0);\r\n    }\r\n    if (len & 0x80) {\r\n        const nCB = len & 0xffffff80;\r\n        len ^= (len ^ (nCB - 1)) & ((array[start + nCB|0] <= sValue |0) - 1 >>> 0);\r\n    }\r\n    if (len & 0x40) {\r\n        const nCB = len & 0xffffffc0;\r\n        len ^= (len ^ (nCB - 1)) & ((array[start + nCB|0] <= sValue |0) - 1 >>> 0);\r\n    }\r\n    if (len & 0x20) {\r\n        const nCB = len & 0xffffffe0;\r\n        len ^= (len ^ (nCB - 1)) & ((array[start + nCB|0] <= sValue |0) - 1 >>> 0);\r\n    }\r\n    if (len & 0x10) {\r\n        const nCB = len & 0xfffffff0;\r\n        len ^= (len ^ (nCB - 1)) & ((array[start + nCB|0] <= sValue |0) - 1 >>> 0);\r\n    }\r\n    if (len & 0x8) {\r\n        const nCB = len & 0xfffffff8;\r\n        len ^= (len ^ (nCB - 1)) & ((array[start + nCB|0] <= sValue |0) - 1 >>> 0);\r\n    }\r\n    if (len & 0x4) {\r\n        const nCB = len & 0xfffffffc;\r\n        len ^= (len ^ (nCB - 1)) & ((array[start + nCB|0] <= sValue |0) - 1 >>> 0);\r\n    }\r\n    if (len & 0x2) {\r\n        const nCB = len & 0xfffffffe;\r\n        len ^= (len ^ (nCB - 1)) & ((array[start + nCB|0] <= sValue |0) - 1 >>> 0);\r\n    }\r\n    if (len & 0x1) {\r\n        const nCB = len & 0xffffffff;\r\n        len ^= (len ^ (nCB - 1)) & ((array[start + nCB|0] <= sValue |0) - 1 >>> 0);\r\n    }\r\n    if (array[start+len|0] !== sValue) {\r\n        // remove this if-statement to return the next closest\r\n        // element going downwards from the searched-for value\r\n        // OR 0 if the value is less than all values in the\r\n        // array. https://stackoverflow.com/a/44981570/5601591\r\n        return -1 - start - len | 0;\r\n    }\r\n    return start + len | 0;\r\n}\r\n\r\nfunction getChannelItems(objects, channelId, _sortedKeys) {\r\n    _sortedKeys = _sortedKeys || Object.keys(objects).sort();\r\n    const channelPrefix = channelId + '.';\r\n    const channelPrefixEnd = channelId + '.\\u9999';\r\n    const result = [];\r\n    for (let i = 0; i < _sortedKeys.length; i++) {\r\n        const id = _sortedKeys[i];\r\n        if (id < channelPrefix) {\r\n\r\n        } else if (id > channelPrefixEnd) {\r\n            break;\r\n        } else if (id.startsWith(channelPrefix)) {\r\n            result.push(id);\r\n        }\r\n    }\r\n\r\n    return result;\r\n}\r\n\r\nexport { binarySearch, getChannelItems };","/**\r\n * Copyright 2019-2020 bluefox <dogafox@gmail.com>\r\n *\r\n * MIT License\r\n *\r\n **/\r\nimport React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport List from '@material-ui/core/List';\r\nimport ListItem from '@material-ui/core/ListItem';\r\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport ListItemSecondaryAction from '@material-ui/core/ListItemSecondaryAction';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogActions from '@material-ui/core/DialogActions';\r\nimport Button from '@material-ui/core/Button';\r\n\r\nimport { FaFolderOpen as IconFolderOpened } from 'react-icons/fa';\r\nimport { FaFolder as IconFolder } from 'react-icons/fa';\r\nimport { TiLightbulb as IconTypeLight } from 'react-icons/ti'\r\nimport { TiLightbulb as IconTypeDimmer } from 'react-icons/ti'\r\nimport { TiLightbulb as IconTypeSwitch } from 'react-icons/ti'\r\nimport { FaQuestion as IconTypeGeneric } from 'react-icons/fa'\r\nimport { MdExpandMore as IconCollapse } from 'react-icons/md';\r\nimport { MdKeyboardArrowRight as IconExpand } from 'react-icons/md';\r\nimport { MdCheck as IconOK } from 'react-icons/md';\r\nimport { MdCancel as IconCancel } from 'react-icons/md';\r\nimport CreateNewFolderIcon from '@material-ui/icons/CreateNewFolder';\r\n\r\nimport I18n from '@iobroker/adapter-react/i18n';\r\nimport Utils from '@iobroker/adapter-react/Components/Utils';\r\nimport { Paper, Tooltip } from '@material-ui/core';\r\nimport clsx from 'clsx';\r\nimport Icon from '@iobroker/adapter-react/Components/Icon';\r\n\r\nconst LEVEL_OFFSET = 14;\r\n\r\nconst styles = theme => ({\r\n    expandButton: {\r\n        width: 37,\r\n        height: 37\r\n    },\r\n    addButton: {\r\n        marginBottom: 5,\r\n    },\r\n    list: {\r\n        maxHeight: 400,\r\n        overflowY: 'auto',\r\n        //background: theme.palette.type === 'dark' ? '#6a6a6a' : '#e2e2e2',\r\n    },\r\n    selected: {\r\n        //color: theme.palette.action.selected\r\n    },\r\n    folder: {\r\n        //background: theme.palette.type === 'dark' ? '#6a6a6a' : '#e2e2e2',\r\n        cursor: 'pointer',\r\n        paddingTop: 0,\r\n        paddingBottom: 0,\r\n        paddingLeft: 1,\r\n        paddingRight: 0,\r\n        userSelect: 'none'\r\n    },\r\n    element: {\r\n        cursor: 'pointer',\r\n        padding: 0,\r\n        userSelect: 'none'\r\n    },\r\n    itemIcon: {\r\n        width: 18,\r\n        height: 18,\r\n        borderRadius: 2\r\n    },\r\n    dialogNewForm: {\r\n        width: 'calc(100% - 30px)',\r\n        padding: 10\r\n    },\r\n    dialogNewInput: {\r\n        width: '100%',\r\n    },\r\n    dialogNew: {\r\n        minWidth: 200,\r\n    },\r\n    childrenCount: {\r\n        fontSize: 'smaller',\r\n        opacity: 0.8,\r\n    },\r\n    wrapperFoldersBlock: {\r\n        padding: 10,\r\n        height: 'calc(100% - 20px)'\r\n    },\r\n    iconStyle: {\r\n        minWidth: 25\r\n    },\r\n    buttonWrapper: {\r\n        display: 'flex',\r\n        top: 0,\r\n        background: theme.palette.type === 'light' ? '#0000000d' : '#ffffff12',\r\n        marginBottom: 5\r\n    },\r\n    iconCommon: {\r\n        marginRight: 5,\r\n        width: 15,\r\n        height: 15\r\n    },\r\n    fontStyle: {\r\n        fontSize: 14,\r\n        fontFamily: '\"Roboto\", \"Helvetica\", \"Arial\", sans-serif',\r\n        lineHeight: 1.5,\r\n        fontWeight: 600,\r\n        overflow: 'hidden',\r\n        textOverflow: 'ellipsis',\r\n        paddingRight: '30px !important'\r\n    },\r\n    addNewFolderTitle: {\r\n        whiteSpace: 'nowrap',\r\n        overflow: 'hidden',\r\n        textOverflow: 'ellipsis',\r\n        '& h2': {\r\n            whiteSpace: 'nowrap',\r\n            overflow: 'hidden',\r\n            textOverflow: 'ellipsis',\r\n        }\r\n    },\r\n    displayFlex: {\r\n        display: 'flex',\r\n        flexDirection: 'column'\r\n    }\r\n});\r\n\r\nconst prepareList = (data, root) => {\r\n    const result = [];\r\n    const ids = Object.keys(data);\r\n    root = root || '';\r\n\r\n    // place common and global scripts at the end\r\n    ids.sort((a, b) => {\r\n        if ((a === 'script.js.common' || a === 'script.js.global') && (b === 'script.js.common' || b === 'script.js.global')) {\r\n            return a > b ? 1 : -1;\r\n        } else if (a === 'script.js.common' || a === 'script.js.global' || b === 'script.js.common' || b === 'script.js.global') {\r\n            return 1;\r\n        } else {\r\n            return a > b ? 1 : -1;\r\n        }\r\n    });\r\n\r\n    for (let i = 0; i < ids.length; i++) {\r\n        const obj = data[ids[i]];\r\n        const parts = ids[i].split('.');\r\n        parts.pop();\r\n        result.push({\r\n            id: ids[i],\r\n            title: Utils.getObjectName(data, ids[i], { language: I18n.getLanguage() }),\r\n            icon: obj.common.icon || null,\r\n            color: obj.common.color || null,\r\n            depth: parts.length - 1,\r\n            type: obj.type,\r\n            parent: parts.length > 2 ? parts.join('.') : null,\r\n            instance: obj.common.engine ? parseInt(obj.common.engine.split('.').pop(), 10) || 0 : null\r\n        });\r\n    }\r\n\r\n    // Place all folder-less items at start\r\n    result.sort((a, b) => {\r\n        // without folders => always at start\r\n        if (!a.parent && a.type !== 'folder' && !b.parent && b.type !== 'folder') {\r\n            if (a.id === b.id) return 0;\r\n            return a.id > b.id ? 1 : -1;\r\n        } else if (!a.parent && a.type !== 'folder') {\r\n            return -1;\r\n        } else if (!b.parent && b.type !== 'folder') {\r\n            return 1;\r\n        } else {\r\n            // common and global are always at the end\r\n            if ((a.id.startsWith('script.js.common') || a.id.startsWith('script.js.global')) &&\r\n                (b.id.startsWith('script.js.common') || b.id.startsWith('script.js.global'))) {\r\n                if (a.id === b.id) return 0;\r\n                return a.id > b.id ? 1 : -1;\r\n            } else if (a.id.startsWith('script.js.common') || a.id.startsWith('script.js.global')) {\r\n                return 1;\r\n            } else if (b.id.startsWith('script.js.common') || b.id.startsWith('script.js.global')) {\r\n                return -1;\r\n            } else {\r\n                if (a.id === b.id) return 0;\r\n                return a.id > b.id ? 1 : -1;\r\n            }\r\n        }\r\n    });\r\n\r\n    // Fill all index\r\n    result.forEach((item, i) => item.index = i);\r\n\r\n    let modified;\r\n    const regEx = new RegExp('^' + root.replace(/\\./g, '\\\\.'));\r\n    do {\r\n        modified = false;\r\n        // check if all parents exists\r\n\r\n        // eslint-disable-next-line no-loop-func\r\n        result.forEach(item => {\r\n            if (item.parent) {\r\n                const parent = result.find(it => it.id === item.parent);\r\n                if (!parent) {\r\n                    const parts = item.parent.split('.');\r\n                    parts.pop();\r\n                    result.push({\r\n                        id: item.parent,\r\n                        title: root ? item.parent.replace(regEx, '') : item.parent,\r\n                        depth: parts.length - 1,\r\n                        type: 'folder',\r\n                        parent: parts.length >= 2 ? parts.join('.') : null\r\n                    });\r\n                    modified = true;\r\n                }\r\n            }\r\n        });\r\n    } while (modified);\r\n\r\n    // Fill all parentIndex\r\n    result.forEach(item => {\r\n        if (item.parent) {\r\n            const parent = result.find(it => it.id === item.parent);\r\n            if (parent) {\r\n                item.parentIndex = parent.index;\r\n            }\r\n        }\r\n    });\r\n\r\n    return result;\r\n};\r\n\r\nconst images = {\r\n    'dimmer': IconTypeDimmer,\r\n    'light': IconTypeLight,\r\n    'socket': IconTypeSwitch,\r\n    def: IconTypeGeneric,\r\n};\r\n\r\nclass TreeView extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        let expanded = window.localStorage ? window.localStorage.getItem('TreeView.expanded') : '';\r\n        try {\r\n            expanded = expanded ? JSON.parse(expanded) || null : null;\r\n        } catch (e) {\r\n            expanded = null;\r\n        }\r\n        const listItems = prepareList(props.objects || {});\r\n\r\n        if (expanded === null) {\r\n            expanded = [];\r\n            listItems.forEach(item =>\r\n                expanded.includes(item.parent) && expanded.push(item.parent));\r\n        }\r\n\r\n        this.state = {\r\n            listItems,\r\n            expanded,\r\n            theme: this.props.theme,\r\n            selected: this.props.selected || (listItems[0] && listItems[0].id) || '',\r\n            renaming: null,\r\n            deleting: null,\r\n            errorText: '',\r\n            width: this.props.width || 300,\r\n            filterMenuOpened: false,\r\n            addNew: false,\r\n            addNewName: '',\r\n            typeFilter: window.localStorage ? window.localStorage.getItem('TreeView.typeFilter') || '' : '', // lamp, window, ...\r\n            searchText: window.localStorage ? window.localStorage.getItem('TreeView.searchText') || '' : '',\r\n        };\r\n\r\n        this.theme = this.props.theme || 'light';\r\n\r\n        const newExp = this.ensureSelectedIsVisible();\r\n        if (newExp) {\r\n            this.state.expanded = newExp;\r\n        }\r\n        // debounce search process\r\n        this.filterTimer = null;\r\n        // setTimeout(() => this.props.onSelect && this.props.onSelect(this.state.selected), 200);\r\n    }\r\n\r\n    handleOk() {\r\n        this.props.onClose && this.props.onClose();\r\n    };\r\n\r\n    static getDerivedStateFromProps(props, state) {\r\n        let changed = false;\r\n        const newState = {};\r\n        if (props.objects) {\r\n            const listItems = prepareList(props.objects || {});\r\n            if (JSON.stringify(listItems) !== JSON.stringify(state.listItems)) {\r\n                state.listItems = listItems;\r\n                changed = true;\r\n            }\r\n        }\r\n\r\n        return changed ? newState : null;\r\n    }\r\n\r\n    componentDidUpdate(prevProps) {\r\n        if (prevProps.selected !== this.props.selected) {\r\n            this.setState({ selected: this.props.selected });\r\n        }\r\n    }\r\n\r\n    generateId = () => {\r\n        if (!this.state.addNewName) {\r\n            return true;\r\n        }\r\n        let parts = `${this.state.selected}.${this.state.addNewName.replace(Utils.FORBIDDEN_CHARS, '_').replace(/\\s/g, '_').replace(/\\./g, '_')}`;\r\n        return parts;\r\n\r\n    }\r\n\r\n    renderNewItemDialog() {\r\n        // const id = this.state.addNew ? `${this.state.addNew.id}.${this.state.addNewName.replace(FORBIDDEN_CHARS, '_').replace(/\\s/g, '_').replace(/\\./g, '_')}` : null;\r\n        const error = this.generateId() === true ? true : this.props.objects[this.generateId()];\r\n        return (\r\n            <Dialog\r\n                key=\"newDialog\" onClose={() => this.setState({ addNew: null })} open={!!this.state.addNew} className={this.props.classes.dialogNew}>\r\n                <DialogTitle className={this.props.classes.addNewFolderTitle} >{I18n.t('Add new folder to \"%s\"', this.state.addNew && this.state.addNew.title)}</DialogTitle>\r\n                <form className={this.props.classes.dialogNewForm} noValidate autoComplete=\"off\">\r\n                    <TextField\r\n                        onKeyPress={async ev => {\r\n                            if (ev.key === 'Enter') {\r\n                                ev.preventDefault();\r\n                                ev.stopPropagation();\r\n\r\n                                if (this.state.addNewName) {\r\n                                    const id = this.state.selected;\r\n                                    await this.props.onAddNew(this.state.addNewName, this.state.addNew.id);\r\n                                    this.toggleExpanded(id, true);\r\n                                    this.setState({ addNew: null, addNewName: '' });\r\n                                } else {\r\n                                    this.setState({ addNew: null, addNewName: '' });\r\n                                }\r\n                            }\r\n                        }}\r\n                        error={!!error}\r\n                        className={this.props.classes.dialogNewInput} autoFocus\r\n                        label={I18n.t('Folder name')}\r\n                        value={this.state.addNewName}\r\n                        onChange={e => this.setState({ addNewName: e.target.value })} />\r\n                </form>\r\n                <DialogActions>\r\n                    <Button\r\n                        variant=\"contained\"\r\n                        disabled={!!error}\r\n                        onClick={async () => {\r\n                            const id = this.state.selected;\r\n                            await this.props.onAddNew(this.state.addNewName, this.state.addNew.id);\r\n                            this.toggleExpanded(id, true);\r\n                            this.setState({ addNew: null, addNewName: '' });\r\n                        }}\r\n                        startIcon={<IconOK />}\r\n                        color=\"primary\"\r\n                    >{I18n.t('Add')}</Button>\r\n                    <Button\r\n                        variant=\"contained\"\r\n                        onClick={() => this.setState({ addNew: null, addNewName: '' })}\r\n                        startIcon={<IconCancel />}\r\n                    >{I18n.t('Cancel')}</Button>\r\n                </DialogActions>\r\n            </Dialog>);\r\n    }\r\n\r\n    ensureSelectedIsVisible(selected, expanded) {\r\n        expanded = JSON.parse(JSON.stringify(expanded || this.state.expanded));\r\n        selected = selected || this.state.selected;\r\n        let changed = false;\r\n        // ensure that the item is visible\r\n        let el = typeof selected === 'object' ? selected : this.state.listItems.find(it => it.id === selected);\r\n        do {\r\n            // eslint-disable-next-line\r\n            el = el && el.parent && this.state.listItems.find(it => it.id === el.parent);\r\n            if (el) {\r\n                if (!expanded.includes(el.id)) {\r\n                    expanded.push(el.id);\r\n                    changed = true;\r\n                }\r\n            }\r\n        } while (el);\r\n        return changed && expanded;\r\n    }\r\n\r\n    onCollapseAll() {\r\n        this.setState({ expanded: [] });\r\n        this.saveExpanded([]);\r\n    }\r\n\r\n    onExpandAll() {\r\n        const expanded = [];\r\n        this.state.listItems.forEach(item => {\r\n            if (this.state.listItems.find(it => it.parent === item.id)) {\r\n                expanded.push(item.id);\r\n            }\r\n        });\r\n        this.setState({ expanded });\r\n        this.saveExpanded(expanded);\r\n    }\r\n\r\n    saveExpanded(expanded) {\r\n        window.localStorage.setItem('TreeView.expanded', JSON.stringify(expanded || this.state.expanded));\r\n    }\r\n\r\n    toggleExpanded(id, onlyOpen) {\r\n        if(this.props.disabled){\r\n            return;\r\n        }\r\n        const expanded = this.state.expanded.slice();\r\n        const pos = expanded.indexOf(id);\r\n        if (pos === -1) {\r\n            expanded.push(id);\r\n            expanded.sort();\r\n        } else {\r\n            if (!onlyOpen) {\r\n                expanded.splice(pos, 1);\r\n            }\r\n        }\r\n\r\n        this.setState({ expanded });\r\n        this.saveExpanded(expanded);\r\n    }\r\n\r\n    isFilteredOut(item) {\r\n        return false;\r\n    }\r\n\r\n    getTextStyle(item) {\r\n        if (item.type !== 'folder') {\r\n            return {\r\n                //width: 130,\r\n                width: `calc(100% - ${this.state.width > 350 ? 210 : 165}px)`,\r\n                overflow: 'hidden',\r\n                whiteSpace: 'nowrap',\r\n                flex: 'none',\r\n                padding: '0 16px 0 0'\r\n            };\r\n        } else {\r\n            const style = {\r\n                whiteSpace: 'nowrap',\r\n                padding: '0 16px 0 0'\r\n            };\r\n\r\n            if (item.id === this.state.selected) {\r\n                style.fontWeight = 'bold'\r\n            }\r\n\r\n            return style;\r\n        }\r\n    }\r\n\r\n    renderFolderButtons(item, children, isExpanded) {\r\n        if (children && children.length) {\r\n            return <IconButton\r\n                className={this.props.classes.expandButton}\r\n                onClick={isExpanded ? e => this.onCollapse(item.id, e) : e => this.onExpand(item.id, e)}>\r\n                {isExpanded ? <IconCollapse fontSize=\"small\" /> : <IconExpand fontSize=\"small\" />}\r\n            </IconButton>;\r\n        } else {\r\n            return <div className={this.props.classes.expandButton} />;\r\n        }\r\n    }\r\n\r\n    onClick(item, e) {\r\n        if (this.props.disabled) {\r\n            return\r\n        }\r\n        // window.localStorage.setItem('TreeView.selected', item.id);\r\n        this.setState({ selected: item.id });\r\n        this.props.onSelect && this.props.onSelect(item.id);\r\n    }\r\n\r\n    renderOneItem(items, item) {\r\n        let childrenFiltered = (this.state.searchText || this.state.typeFilter) && items.filter(i => i.parent === item.id ? !this.isFilteredOut(i) : false);\r\n        let children = items.filter(i => i.parent === item.id);\r\n\r\n        if (this.isFilteredOut(item)) {\r\n            return;\r\n        }\r\n\r\n        if (item.type === 'folder' && (this.state.searchText || this.state.typeFilter) && !childrenFiltered.length) {\r\n            return;\r\n        }\r\n\r\n        const depthPx = item.depth * LEVEL_OFFSET + 10;\r\n\r\n        let title = item.title;\r\n\r\n        if (this.state.searchText) {\r\n            const pos = title.toLowerCase().indexOf(this.state.searchText.toLowerCase());\r\n            if (pos !== -1) {\r\n                title = [\r\n                    <span key=\"first\">{title.substring(0, pos)}</span>,\r\n                    <span key=\"second\" style={{ color: 'orange' }}>{title.substring(pos, pos + this.state.searchText.length)}</span>,\r\n                    <span key=\"third\">{title.substring(pos + this.state.searchText.length)}</span>,\r\n                ];\r\n            }\r\n        }\r\n\r\n        const style = Object.assign({\r\n            paddingLeft: depthPx,\r\n            borderRadius: 3,\r\n            cursor: item.type === 'folder' && this.state.reorder ? 'default' : 'pointer',\r\n            opacity: item.filteredPartly ? 0.5 : 1,\r\n        }, item.id === this.state.selected ? { background: this.props.theme.palette.secondary.dark, color: '#FFF' } : {});\r\n\r\n        let isExpanded = false;\r\n        if (children && children.length) {\r\n            isExpanded = this.state.expanded.includes(item.id);\r\n        }\r\n\r\n        let iconStyle = {};\r\n        let countSpan = (childrenFiltered && childrenFiltered.length) || children.length ?\r\n            <span className={this.props.classes.childrenCount}>{childrenFiltered && childrenFiltered.length !== children.length ?\r\n                `${childrenFiltered.length}(${children.length})` :\r\n                children.length}</span>\r\n            : null;\r\n\r\n        if (!countSpan) {\r\n            iconStyle.opacity = 0.5;\r\n        }\r\n        if (item.id === this.state.selected) {\r\n            iconStyle.opacity = 1;\r\n        }\r\n        iconStyle.color = \"#448dde\";\r\n\r\n        if (item.color) {\r\n            iconStyle.color = item.color;\r\n        }\r\n\r\n        const inner = <ListItem\r\n            key={item.id}\r\n            style={style}\r\n            onDoubleClick={() => this.toggleExpanded(item.id)}\r\n            className={Utils.clsx(item.type === 'folder' ? this.props.classes.folder : this.props.classes.element, this.state.reorder && this.props.classes.reorder)}\r\n            onClick={e => this.onClick(item, e)}\r\n        >\r\n            <ListItemIcon className={this.props.classes.iconStyle}>{item.type === 'folder' ?\r\n                (isExpanded ?\r\n                    <IconFolderOpened onClick={() => this.toggleExpanded(item.id)} style={iconStyle} /> :\r\n                    <IconFolder onClick={() => this.toggleExpanded(item.id)} style={iconStyle} />)\r\n                :\r\n                <Icon className={this.props.classes.itemIcon} alt={item.type} src={images[item.type] || images.def} />\r\n            }</ListItemIcon>\r\n            {item.icon && <Icon className={this.props.classes.iconCommon} alt={item.type} src={item.icon} />}\r\n            <div\r\n                style={this.getTextStyle(item)}\r\n                className={clsx(item.id === this.state.selected && this.props.classes.selected, this.props.classes.fontStyle)}\r\n\r\n            >{title}</div>\r\n            <ListItemSecondaryAction style={{ color: item.id === this.state.selected ? 'white' : 'inherit' }}>{countSpan}</ListItemSecondaryAction>\r\n        </ListItem>;\r\n\r\n        const result = [inner];\r\n\r\n        if (isExpanded) {\r\n            children.forEach(it => result.push(this.renderOneItem(items, it)));\r\n        }\r\n        return result;\r\n    }\r\n\r\n    renderAllItems(items, dragging) {\r\n        const result = [];\r\n        items.forEach(item => !item.parent && result.push(this.renderOneItem(items, item, dragging)));\r\n\r\n        return <List key=\"list\" dense={true} disablePadding={true} className={this.props.classes.list}>{result}</List>;\r\n    }\r\n\r\n    renderAddButton() {\r\n\r\n        return <Paper className={this.props.classes.buttonWrapper} position=\"sticky\" color=\"default\">\r\n            {this.props.onAddNew && <Tooltip title={I18n.t('Create new folder')}>\r\n                <div>\r\n                    <IconButton\r\n                        color=\"primary\"\r\n                        disabled={this.props.disabled}\r\n                        onClick={() => this.setState({ addNew: this.state.listItems.find(it => it.id === this.state.selected) })}>\r\n                        <CreateNewFolderIcon />\r\n                    </IconButton>\r\n                </div>\r\n            </Tooltip>}\r\n            <Tooltip title={I18n.t('Expand all nodes')}>\r\n                <div>\r\n                    <IconButton\r\n                        color=\"primary\"\r\n                        disabled={this.props.disabled}\r\n                        onClick={() => this.onExpandAll()}>\r\n                        <IconFolderOpened />\r\n                    </IconButton>\r\n                </div>\r\n            </Tooltip>\r\n            <Tooltip title={I18n.t('Collapse all nodes')}>\r\n                <div>\r\n                    <IconButton\r\n                        color=\"primary\"\r\n                        disabled={this.props.disabled}\r\n                        onClick={() => this.onCollapseAll()}>\r\n                        <IconFolder />\r\n                    </IconButton>\r\n                </div>\r\n            </Tooltip>\r\n        </Paper>;\r\n    }\r\n\r\n    renderTree() {\r\n        return this.renderAllItems(this.state.listItems);\r\n    }\r\n\r\n    render() {\r\n        return <Paper className={clsx(this.props.classes.wrapperFoldersBlock, this.props.displayFlex && this.props.classes.displayFlex)}>\r\n            {this.renderAddButton()}\r\n            {this.renderTree()}\r\n            {this.renderNewItemDialog()}\r\n        </Paper>;\r\n    }\r\n}\r\n\r\nTreeView.propTypes = {\r\n    objects: PropTypes.object,\r\n    onSelect: PropTypes.func,\r\n    selected: PropTypes.string,\r\n    theme: PropTypes.object,\r\n    themeType: PropTypes.string,\r\n    root: PropTypes.string,\r\n    onAddNew: PropTypes.func,\r\n    disabled: PropTypes.bool\r\n};\r\n\r\nexport default withStyles(styles)(TreeView);\r\n","/**\r\n * Copyright 2019-2020 bluefox <dogafox@gmail.com>\r\n *\r\n * MIT License\r\n *\r\n **/\r\nimport React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { withStyles } from '@material-ui/core/styles';\r\n\r\nimport Button from '@material-ui/core/Button';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogActions from '@material-ui/core/DialogActions';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport FormControl from '@material-ui/core/FormControl';\r\nimport Select from '@material-ui/core/Select';\r\nimport InputLabel from '@material-ui/core/InputLabel';\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\nimport IconClose from '@material-ui/icons/Close';\r\nimport IconCheck from '@material-ui/icons/Check';\r\n\r\nimport { Types } from 'iobroker.type-detector';\r\nimport I18n from '@iobroker/adapter-react/i18n';\r\nimport Utils, { FORBIDDEN_CHARS } from '@iobroker/adapter-react/Components/Utils';\r\nimport TreeView from '../Components/TreeView';\r\nimport TypeIcon from '../Components/TypeIcon';\r\nimport Icon from '@iobroker/adapter-react/Components/Icon';\r\nimport TYPE_OPTIONS, { ICONS_TYPE } from '../Components/TypeOptions';\r\n\r\nconst styles = theme => ({\r\n    header: {\r\n        width: '100%',\r\n        fontSize: 16,\r\n        textTransform: 'capitalize',\r\n        textAlign: 'center',\r\n        paddingBottom: 20,\r\n        color: '#000',\r\n    },\r\n    nameDiv: {\r\n        width: '50%',\r\n        display: 'inline-block',\r\n        verticalAlign: 'top',\r\n    },\r\n    viewDiv: {\r\n        width: '50%',\r\n        display: 'inline-block',\r\n    },\r\n    type: {\r\n        marginTop: 10\r\n    },\r\n    input: {\r\n        width: 200\r\n    },\r\n    icon: {\r\n        display: 'inline-block',\r\n    },\r\n    selectIcon: {\r\n        paddingRight: theme.spacing(1),\r\n        verticalAlign: 'middle',\r\n        width: 20,\r\n        height: 20\r\n    },\r\n    selectText: {\r\n        verticalAlign: 'middle',\r\n    },\r\n    enumIcon: {\r\n        width: 24,\r\n        height: 24,\r\n        marginRight: 10\r\n    },\r\n    renderValueWrapper: {\r\n        display: 'flex'\r\n    },\r\n    renderValueCurrent: {\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n        marginRight: 10\r\n    },\r\n    blockFields: {\r\n        display: 'flex',\r\n        flex: 1,\r\n        width: '100%',\r\n        flexDirection: 'column',\r\n        margin: 5\r\n    },\r\n    container: {\r\n        display: 'flex',\r\n        overflowX: 'hidden',\r\n        flexFlow: 'wrap'\r\n    },\r\n    treeDiv: {\r\n        width: '100%',\r\n        flex: 1,\r\n        margin: 5,\r\n        overflow: 'hidden'\r\n    },\r\n    titleColor: {\r\n        '& h2': {\r\n            overflow: 'hidden',\r\n            direction: 'rtl',\r\n            textOverflow: 'ellipsis',\r\n            textAlign: 'end'\r\n        },\r\n    },\r\n    iconStyle: {\r\n        width: 16,\r\n        height: 16,\r\n        margin: '0 3px'\r\n    },\r\n    emptyIcon: {\r\n        width: 16,\r\n        height: 16,\r\n        margin: '0 3px'\r\n    },\r\n    itemChildrenWrapper: {\r\n        display: 'flex',\r\n        width: '100%',\r\n        justifyContent: 'space-between'\r\n    },\r\n    iconWrapper: {\r\n        display: 'flex',\r\n        alignItems: 'center'\r\n    }\r\n});\r\n\r\nconst UNSUPPORTED_TYPES = [\r\n    Types.unknown\r\n];\r\n\r\nfunction getParentId(id) {\r\n    const pos = id.lastIndexOf('.');\r\n    if (pos !== -1) {\r\n        return id.substring(0, pos);\r\n    } else {\r\n        return '';\r\n    }\r\n}\r\n\r\nfunction getLastPart(id) {\r\n    const pos = id.lastIndexOf('.');\r\n    if (pos !== -1) {\r\n        return id.substring(pos + 1);\r\n    } else {\r\n        return id;\r\n    }\r\n}\r\n\r\nclass DialogNewDevice extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        let i = 1;\r\n\r\n        this.prefix = this.props.prefix || 'alias.0';\r\n\r\n        while (this.props.objects[`${this.prefix}.${I18n.t('Device')}_${i}`]) {\r\n            i++;\r\n        }\r\n\r\n        const prefix = this.prefix.startsWith('alias.') ? this.prefix.replace(/\\d+$/, '') : this.prefix; // alias.0 => alias.\r\n\r\n        // filter aliases\r\n        const ids = [];\r\n\r\n        Object.keys(this.props.objects).forEach(id => {\r\n            if (id.startsWith(prefix) &&\r\n                this.props.objects[id] &&\r\n                this.props.objects[id].common &&\r\n                (this.props.objects[id].type === 'channel' || this.props.objects[id].type === 'device' || this.props.objects[id].type === 'folder')) {\r\n                let parentId;\r\n                // getParentId\r\n                if (this.props.objects[id].type === 'folder') {\r\n                    parentId = id;\r\n                } else {\r\n                    parentId = getParentId(id);\r\n                }\r\n\r\n                if (parentId && !ids.includes(parentId)) {\r\n                    ids.push(parentId);\r\n                }\r\n            }\r\n        });\r\n\r\n        this.typesWords = {};\r\n        Object.keys(Types)\r\n            .filter(id => id !== 'instance' && !UNSUPPORTED_TYPES.includes(id))\r\n            .forEach(typeId => this.typesWords[typeId] = I18n.t('type-' + Types[typeId]));\r\n\r\n        // sort types by ABC in the current language\r\n        this.types = Object.keys(this.typesWords).sort((a, b) => {\r\n            if (this.typesWords[a] === this.typesWords[b]) {\r\n                return 0;\r\n            } else\r\n                if (this.typesWords[a] > this.typesWords[b]) {\r\n                    return 1;\r\n                } else {\r\n                    return -1;\r\n                }\r\n        });\r\n\r\n        const stateIds = {};\r\n        const language = I18n.getLanguage();\r\n        ids.forEach(id => stateIds[id] = {\r\n            common: {\r\n                name: this.props.objects[id] && this.props.objects[id].type === 'folder' ? Utils.getObjectName(this.props.objects, id, { language }) : getLastPart(id),\r\n                nondeletable: true,\r\n                color: this.props.objects[id]?.common && this.props.objects[id].common.color ? this.props.objects[id].common.color : null,\r\n                icon: this.props.objects[id]?.common && this.props.objects[id].common.icon ? this.props.objects[id].common.icon : null\r\n            },\r\n            type: 'folder'\r\n        });\r\n\r\n        stateIds[this.prefix] = {\r\n            common: {\r\n                name: I18n.t('Root'),\r\n                nondeletable: true\r\n            },\r\n            type: 'folder'\r\n        };\r\n        const functionStorage = JSON.parse(window.localStorage.getItem('Devices.new.functions'));\r\n        const roomsStorage = JSON.parse(window.localStorage.getItem('Devices.new.rooms'));\r\n        let root =  window.localStorage.getItem('NewDeviceRoot');\r\n        if (root && this.props.prefix.includes('alias') === root.includes('alias') && !!this.props.objects[root]) {\r\n\r\n        } else {\r\n            root = null;\r\n        }\r\n\r\n        this.state = {\r\n            root: root || this.prefix,\r\n            name: this.props.copyDevice ? `${this.props.copyDevice.name}-copy` : I18n.t('Device') + ' ' + i,\r\n            notUnique: false,\r\n            functions: !!roomsStorage && typeof functionStorage !== 'string' ? functionStorage : [],\r\n            rooms: !!roomsStorage && typeof roomsStorage !== 'string' ? roomsStorage : [],\r\n            type: window.localStorage.getItem('Devices.newType') || 'light',\r\n            ids: stateIds\r\n        };\r\n    }\r\n\r\n    setStateAsync(newState) {\r\n        return new Promise(resolve => this.setState(newState, () => resolve()));\r\n    }\r\n\r\n    renderSelectEnum(name, title) {\r\n        const enums = this.props.enumIDs.filter(id => id.startsWith('enum.' + name + '.'));\r\n        const language = I18n.getLanguage();\r\n        const objs = enums.map(id => {\r\n            return {\r\n                name: Utils.getObjectName(this.props.objects, id, { language }),\r\n                icon: Utils.getObjectIcon(id, this.props.objects[id]),\r\n                id: id\r\n            }\r\n        });\r\n\r\n        return <FormControl className={this.props.classes.type}>\r\n            <InputLabel>{title}</InputLabel>\r\n            <Select\r\n                className={this.props.classes.oidField}\r\n                fullWidth\r\n                multiple\r\n                renderValue={(arrId) => {\r\n                    const newArr = arrId.length && typeof arrId !== 'string' ? arrId.map(id => {\r\n                        return {\r\n                            name: Utils.getObjectName(this.props.objects, id, { language }),\r\n                            icon: Utils.getObjectIcon(id, this.props.objects[id]),\r\n                            id: id\r\n                        }\r\n                    }) : []\r\n                    return <div className={this.props.classes.renderValueWrapper}>\r\n                        {newArr.map(obj => <div className={this.props.classes.renderValueCurrent} key={`${obj.id}-render`}>\r\n                            {obj.icon ? <Icon className={this.props.classes.enumIcon} src={obj.icon} alt={obj.id} /> : <div className={this.props.classes.enumIcon} />}\r\n                            {obj.name}\r\n                        </div>)}\r\n                    </div>\r\n                }}\r\n                value={this.state[name] || []}\r\n                onChange={e => {\r\n                    localStorage.setItem('Devices.new.' + name, JSON.stringify(e.target.value));\r\n                    this.setState({ [name]: e.target.value });\r\n                }}\r\n            >\r\n                {objs.map(obj => <MenuItem key={obj.id} icon={obj.icon} value={obj.id}>\r\n                    {obj.icon ? <Icon className={this.props.classes.enumIcon} src={obj.icon} alt={obj.id} /> : <div className={this.props.classes.enumIcon} />}\r\n                    {obj.name}\r\n                </MenuItem>)}\r\n            </Select>\r\n        </FormControl>;\r\n    }\r\n\r\n    generateId() {\r\n        return `${this.state.root}.${this.state.name.replace(FORBIDDEN_CHARS, '_').replace(/\\s/g, '_')}`;\r\n    }\r\n\r\n    async onCopyDevice(newChannelId) {\r\n        // if this is device not from linkeddevice or from alias\r\n        this.channelId = this.props.copyDevice.channelId;\r\n        const isAlias = this.channelId.startsWith('alias.') || this.channelId.startsWith('linkeddevices.');\r\n\r\n        const channelObj = this.props.objects[this.channelId];\r\n        const { functions, rooms, icon, states, color, type } = this.props.copyDevice;\r\n        const tasks = [];\r\n\r\n        tasks.push({\r\n            id: newChannelId,\r\n            obj: {\r\n                common: {\r\n                    name: channelObj.common.name,\r\n                    color: color,\r\n                    desc: channelObj.common.desc,\r\n                    role: type,\r\n                    icon: icon && icon.startsWith('adapter/') ? `../../${icon}` : icon,\r\n                },\r\n                type: 'channel',\r\n                native: channelObj.native || {}\r\n            },\r\n            enums: rooms.concat(functions)\r\n        });\r\n\r\n        states.forEach(state => {\r\n            if (!state.id) {\r\n                return;\r\n            }\r\n            const obj = JSON.parse(JSON.stringify(this.props.objects[state.id]));\r\n            obj._id = newChannelId + '.' + state.name;\r\n\r\n            if (!obj.native) {\r\n                obj.native = {};\r\n            }\r\n            if (!isAlias) {\r\n                obj.common.alias = { id: state.id };\r\n            }\r\n            tasks.push({ id: obj._id, obj });\r\n        });\r\n\r\n        await this.props.processTasks(tasks);\r\n    }\r\n\r\n    handleOk = async () => {\r\n        // check if name is unique\r\n        if (this.props.copyDevice) {\r\n            await this.onCopyDevice(this.generateId());\r\n            // await this.props.onChange();\r\n            this.props.onClose();\r\n        } else {\r\n            this.props.onClose({\r\n                id: this.generateId(),\r\n                type: this.state.type,\r\n                name: this.state.name,\r\n                functions: this.state.functions,\r\n                icon: '',\r\n                states: [],\r\n                color: null,\r\n                rooms: this.state.rooms,\r\n                prefix: this.prefix\r\n            });\r\n        }\r\n    }\r\n\r\n    handleCancel = () => {\r\n        // check if name is unique\r\n        this.props.onClose && this.props.onClose(null);\r\n    }\r\n\r\n    showEnumIcon(name) {\r\n        const obj = this.props.objects[this.state[name]];\r\n        if (obj && obj.common && obj.common.icon) {\r\n            return <Icon className={this.props.classes.icon} src={obj.icon} alt=\"\" />;\r\n        } else {\r\n            return null;\r\n        }\r\n    }\r\n\r\n    async addNewFolder(name, parentId) {\r\n        const id = `${parentId}.${name.replace(FORBIDDEN_CHARS, '_').replace(/\\s/g, '_').replace(/\\./g, '_')}`;\r\n        const obj = {\r\n            _id: id,\r\n            common: {name: { [I18n.getLanguage()]: name }},\r\n            native: {},\r\n            type: 'folder'\r\n        };\r\n\r\n        await this.props.processTasks([{id, obj}]);\r\n\r\n        // create folder\r\n        const ids = JSON.parse(JSON.stringify(this.state.ids));\r\n        ids[id] = {\r\n            common: { name },\r\n            type: 'folder'\r\n        };\r\n        this.prefix = id;\r\n        await this.setStateAsync({ ids, root: id });\r\n    }\r\n\r\n    render() {\r\n        const classes = this.props.classes;\r\n\r\n        return <Dialog\r\n            open={true}\r\n            maxWidth=\"md\"\r\n            fullWidth={true}\r\n            onClose={() => this.handleCancel()}\r\n            aria-labelledby=\"alert-dialog-title\"\r\n            aria-describedby=\"alert-dialog-description\"\r\n        >\r\n            <DialogTitle className={classes.titleBackground}\r\n                classes={{ root: classes.titleColor }}\r\n                id=\"edit-device-dialog-title\">{I18n.t('Create new device')}: <b>{this.generateId()}</b>\r\n            </DialogTitle>\r\n            <DialogContent className={classes.container}>\r\n                <div className={classes.treeDiv}>\r\n                    <TreeView\r\n                        themeType={this.props.themeType}\r\n                        theme={this.props.theme}\r\n                        objects={this.state.ids}\r\n                        onAddNew={async (name, parentId) => await this.addNewFolder(name, parentId)}\r\n                        onSelect={id => this.setState({ root: id },()=>{\r\n                            window.localStorage.setItem('NewDeviceRoot',id);\r\n                        })}\r\n                        selected={this.state.root}\r\n                    />\r\n                </div>\r\n                <div className={classes.blockFields}>\r\n                    <TextField\r\n                        fullWidth\r\n                        autoFocus={!!this.props.copyDevice}\r\n                        onKeyPress={(ev) => {\r\n                            if (this.props.copyDevice) {\r\n                                if (ev.key === 'Enter') {\r\n                                    if (this.state.name && !this.props.objects[this.generateId()]) {\r\n                                        this.handleOk();\r\n                                    } else {\r\n                                        this.handleCancel();\r\n                                    }\r\n                                    ev.preventDefault();\r\n                                }\r\n                            }\r\n                        }}\r\n                        label={I18n.t('Device name')}\r\n                        error={!!this.props.objects[this.generateId()]}\r\n                        className={classes.name}\r\n                        value={this.state.name}\r\n                        onChange={e => this.setState({ name: e.target.value })}\r\n                        margin=\"normal\"\r\n                    />\r\n                    {!this.props.copyDevice && <FormControl className={classes.type}>\r\n                        <InputLabel htmlFor=\"age-helper\">{I18n.t('Device type')}</InputLabel>\r\n                        <Select\r\n                            value={this.state.type}\r\n                            onChange={e => {\r\n                                localStorage.setItem('Devices.newType', e.target.value);\r\n                                this.setState({ type: e.target.value });\r\n                            }}\r\n                        >\r\n                            {this.types\r\n                                .filter(id => !UNSUPPORTED_TYPES.includes(id))\r\n                                .map(typeId => <MenuItem key={Types[typeId]} value={Types[typeId]}>\r\n                                    <div className={classes.itemChildrenWrapper}>\r\n                                        <div>\r\n                                            <TypeIcon className={this.props.classes.selectIcon} type={Types[typeId]} style={{ color: this.props.themeType === 'dark' ? '#FFFFFF' : '#000' }} />\r\n                                            <span className={this.props.classes.selectText}>{this.typesWords[typeId]}</span>\r\n                                        </div>\r\n                                        <div className={classes.iconWrapper}>{Object.keys(TYPE_OPTIONS[typeId]).map(key => TYPE_OPTIONS[typeId][key] ? <Icon className={classes.iconStyle} src={ICONS_TYPE[key]} /> : <div key={key} className={classes.emptyIcon} />)}</div>\r\n                                    </div>\r\n                                </MenuItem>)}\r\n                        </Select>\r\n                    </FormControl>}\r\n                    {!this.props.copyDevice && this.renderSelectEnum('functions', I18n.t('Function'))}\r\n                    {!this.props.copyDevice && this.renderSelectEnum('rooms', I18n.t('Room'))}\r\n                </div>\r\n            </DialogContent>\r\n            <DialogActions>\r\n                <Button\r\n                    variant=\"contained\"\r\n                    disabled={!!this.props.objects[this.generateId()]}\r\n                    onClick={this.handleOk}\r\n                    startIcon={<IconCheck />}\r\n                    color=\"primary\">{I18n.t('Create')}</Button>\r\n                <Button\r\n                    variant=\"contained\"\r\n                    onClick={this.handleCancel}\r\n                    startIcon={<IconClose />}\r\n                >{I18n.t('Cancel')}</Button>\r\n            </DialogActions>\r\n        </Dialog>;\r\n    }\r\n}\r\n\r\nDialogNewDevice.propTypes = {\r\n    onClose: PropTypes.func,\r\n    objects: PropTypes.object,\r\n    theme: PropTypes.object,\r\n    themeType: PropTypes.string,\r\n    enumIDs: PropTypes.array,\r\n    socket: PropTypes.object,\r\n};\r\n\r\nexport default withStyles(styles)(DialogNewDevice);\r\n","/**\n * Copyright 2018-2019 bluefox <dogafox@gmail.com>\n *\n * MIT License\n *\n **/\nimport React, {Component} from 'react';\nimport PropTypes from 'prop-types';\nimport Utils from '@iobroker/adapter-react/Components/Utils';\nimport I18n from '@iobroker/adapter-react/i18n';\nimport Theme from '@iobroker/adapter-react/Theme';\n\nimport {MdVisibility as IconCheck} from 'react-icons/md';\nimport {MdRemove as IconRemoved} from 'react-icons/md';\nimport {MdEdit as IconEdit} from 'react-icons/md';\nimport {MdArrowUpward as IconDirectionUp} from 'react-icons/md';\nimport {MdArrowDownward as IconDirectionDown} from 'react-icons/md';\nimport {MdSwapVert as IconDirection} from 'react-icons/md';\n\nconst styles = {\n    type: {\n        position: 'absolute',\n        top: 1,\n        left: 16,\n        fontSize: 10,\n        color: '#000',\n        fontStyle:' italic',\n    },\n};\n\nclass SmartGeneric extends Component {\n    constructor(props, noSubscribe) {\n        super(props);\n        this.channelInfo = this.props.channelInfo;\n        this.subscribes = null;\n        this.subscribed = false;\n        this.defaultIcon = null;\n\n        this.width = Theme.tile.width;\n        this.height = Theme.tile.height;\n        this.doubleState = false; // has on/off or only info\n        this.theme = this.props.theme || 'light';\n\n        this.showCorner = false; // set it to true to show the corner\n        this.stateRx = {\n            executing: false,\n            settings: {},\n            showSettings: false,\n            editMode: null,\n            ignoreIndicators: this.props.ignoreIndicators || []\n        };\n        this.defaultEnabling = true; // overload this property to hide element by default\n\n        this.editMode = this.props.editMode;\n\n        this.lastEnabledChange = 0;\n\n        if (typeof noSubscribe !== 'boolean' || !noSubscribe) {\n            if (this.channelInfo.states) {\n                let ids = [];\n                this.channelInfo.states.forEach(state => {\n                    if (!state.id) return;\n\n                    if (state.id.startsWith('system.adapter.')) {\n                        ids.push(state.id);\n                    } else\n                    if (!state.noSubscribe &&\n                        this.props.objects[state.id] &&\n                        this.props.objects[state.id].type === 'state' &&\n                        !ids.includes(state.id))\n                    {\n                        const pos = state.id.lastIndexOf('.');\n                        if (pos !== -1 && this.stateRx.ignoreIndicators.indexOf(state.id.substring(pos + 1)) !== -1) {\n                            return;\n                        }\n\n                        ids.push(state.id);\n                    }\n                });\n\n                if (ids.length) {\n                    this.subscribes = ids;\n\n                    // do not want to mutate via setState, because it is constructor\n                    ids.forEach(id => this.stateRx[id] = this.props.states[id] ? this.props.states[id].val : null);\n                }\n            }\n        }\n\n        if (this.channelInfo && this.channelInfo.states) {\n            this.indicators = {};\n            let state = this.channelInfo.states.find(state => state.id && state.name === 'WORKING');\n            this.indicators.workingId = state && state.id;\n\n            state = this.channelInfo.states.find(state => state.id && state.name === 'UNREACH');\n            this.indicators.unreachId = state && state.id;\n\n            state = this.channelInfo.states.find(state => state.id && state.name === 'LOWBAT');\n            this.indicators.lowbatId = state && state.id;\n\n            state = this.channelInfo.states.find(state => state.id && state.name === 'MAINTAIN');\n            this.indicators.maintainId = state && state.id;\n\n            state = this.channelInfo.states.find(state => state.id && state.name === 'ERROR');\n            this.indicators.errorId = state && state.id;\n\n            state = this.channelInfo.states.find(state => state.id && state.name === 'DIRECTION');\n            this.indicators.directionId = state && state.id;\n\n            if (this.indicators.directionId) {\n                this.direction = {\n                    undef: true,\n                    up: 'unused',\n                    down: 'unused'\n                };\n                const obj = this.props.objects[this.indicators.directionId];\n                if (obj && obj.common) {\n                    if (obj.common.type === 'number') {\n                        if (obj.common.states) {\n                            for (const index in obj.common.states) {\n                                if (!obj.common.states.hasOwnProperty(index)) continue;\n                                if (obj.common.states[index].match(/up/i)) {\n                                    this.direction.up = index.toString();\n                                } else if (obj.common.states[index].match(/down/i)) {\n                                    this.direction.down = index.toString();\n                                } else if (obj.common.states[index].match(/undef/i)) {\n                                    this.direction.undef = index.toString();\n                                }\n                            }\n                        } else {\n                            this.direction.undef = 1;\n                        }\n                    }\n                }\n            }\n\n            if (this.indicators.errorId) {\n                this.errorText = '';\n            }\n        }\n\n        if (this.constructor.name === 'SmartGeneric') {\n            let state = this.channelInfo.states.find(state => state.id && state.required);\n            this.id = state ? state.id : '';\n            this.componentReady();\n        }\n\n        // will be done in componentReady\n        // this.state = stateRx;\n    }\n\n    componentReady () {\n        if (this.id && this.props.objects[this.id]) {\n            this.settingsId = this.id;\n        } else\n        if (this.instanceId !== undefined) {\n            this.settingsId = this.instanceId;\n        }\n\n        if (this.stateRx.showDialog !== undefined) {\n            this.showCorner = true;\n            this.onMouseUpBind = this.onMouseUp.bind(this);\n            this.props.tile.registerHandler('onMouseDown', this.onTileMouseDown.bind(this));\n        }\n\n        if (this.settingsId) {\n            if (this.stateRx.settings.background) {\n                this.props.tile.setBackgroundImage(this.stateRx.settings.background || '', true);\n            }\n        }\n\n        this.stateRx.nameStyle = {fontSize: SmartGeneric.getNameFontSize(this.stateRx.settings.name)};\n\n        if (this.stateRx.settings.enabled === undefined) {\n            this.stateRx.settings.enabled = true;\n        }\n\n        this.props.tile.setVisibility(this.stateRx.settings.enabled);\n\n        this.props.tile.setColorOn(this.stateRx.settings.colorOn   || Theme.tile.tileOn.background);\n        this.props.tile.setColorOff(this.stateRx.settings.colorOff || Theme.tile.tileOff.background);\n\n        if (this.stateRx.settings && this.stateRx.settings.doubleSize) {\n            this.width = 2;\n        }\n\n        if (this.width > 1) {\n            this.props.tile.setSize(this.width);\n        }\n\n        //    ↓ ignore error here\n        // eslint-disable-next-line react/no-direct-mutation-state\n        this.state = this.stateRx;\n        delete this.stateRx;\n    }\n\n    componentDidMount () {\n        if (this.state.settings.enabled && this.subscribes && !this.subscribed) {\n            this.subscribed = true;\n            this.props.onCollectIds(this, this.subscribes, true);\n        }\n    }\n\n    static getObjectName(objects, id, label, channelName, enumNames) {\n        let name;\n        if (label) {\n            name = label;\n        } else\n        if (!id) {\n            name = 'No elements';\n        } else {\n            //if (objects[enumName]) {\n            //    enumName = SmartGeneric.getObjectName(objects, enumName);\n            //}\n\n            let item = objects[id];\n            if (item && item.common && item.common.name) {\n                name = Utils.getObjectName(objects, id, null, {language: I18n.getLanguage()});\n\n                if (enumNames) {\n                    if (typeof enumNames === 'object') {\n                        enumNames.forEach(e => {\n                            let reg = new RegExp('\\\\b' + e + '\\\\b');\n                            const newName = name.replace(reg, ' ').replace(/\\s\\s/g, '').trim();\n                            if (newName) {\n                                name = newName;\n                            }\n                        });\n                    } else {\n                        let reg = new RegExp('\\\\b' + enumNames + '\\\\b');\n                        const newName = name.replace(reg, ' ').replace(/\\s\\s/g, '').trim();\n                        if (newName) {\n                            name = newName;\n                        }\n                    }\n                }\n                if (channelName) {\n                    let reg = new RegExp(channelName + '[.: ]?');\n                    const newName = name.replace(reg, ' ').trim();\n                    if (newName) {\n                        name = newName;\n                    }\n                }\n\n                if (name && name === name.toUpperCase()) {\n                    name = name[0] + name.substring(1).toLowerCase();\n                }\n            } else {\n                let pos = id.lastIndexOf('.');\n                name = id.substring(pos + 1).replace(/_/g, ' ');\n                name = Utils.CapitalWords(name);\n\n                if (enumNames) {\n                    if (typeof enumNames === 'object') {\n                        enumNames.forEach(e => {\n                            let reg = new RegExp('\\\\b' + e + '\\\\b');\n                            name = name.replace(reg, ' ').replace(/\\s\\s/g, '').trim();\n                        });\n                    } else {\n                        let reg = new RegExp('\\\\b' + enumNames + '\\\\b');\n                        name = name.replace(reg, ' ').replace(/\\s\\s/g, '').trim();\n                    }\n                }\n\n                if (channelName) {\n                    let reg = new RegExp(channelName + '[.: ]?');\n                    name = I18n.t(name.replace(reg, ' ').trim());\n                }\n            }\n        }\n        return name.trim();\n    }\n\n    static getParentId(id) {\n        const pos = id.lastIndexOf('.');\n        if (pos !== -1) {\n            return id.substring(0, pos);\n        } else {\n            return id;\n        }\n    }\n\n    getObjectNameCh() {\n        const channelId = SmartGeneric.getParentId(this.id);\n        if (this.props.objects[channelId] && (this.props.objects[channelId].type === 'channel' || this.props.objects[channelId].type === 'device')) {\n            return SmartGeneric.getObjectName(this.props.objects, channelId, null, null, this.props.enumNames) || '&nbsp;';\n        } else {\n            return SmartGeneric.getObjectName(this.props.objects, this.id, null, null, this.props.enumNames) || '&nbsp;';\n        }\n    }\n\n    // default handler\n    updateState(id, state) {\n        // update indicators\n        let val;\n        if (this.indicators && id === this.indicators.directionId) {\n            val = (state.val !== null && state.val !== undefined) ? state.val.toString() : '';\n        } else if (this.indicators && id === this.indicators.errorId) {\n            if (typeof state.val === 'string' ) {\n                let i = parseInt(state.val.trim(), 10);\n                if (i.toString() === state.val.trim()) {\n                    val = i;\n                } else {\n                    val = state.val === 'true' || state.val === 'on' || state.val === 'ON';\n                }\n            } else {\n                val = typeof state.val === 'number' ? state.val : state.val === true || state.val === 'true' || state.val === 'on' || state.val === 'ON';\n            }\n            const obj = this.props.objects[id];\n            if (obj && obj.common) {\n                if (obj.common.min !== undefined && obj.common.min === val) {\n                    val = false;\n                    this.errorText = '';\n                } else if (obj.common.states && obj.common.states[val] !== undefined)  {\n                    this.errorText = I18n.t(obj.common.states[val]);\n                    val = true;\n                }\n            }\n        } else {\n            val = typeof state.val === 'number' ? !!state.val : state.val === true || state.val === 'true' || state.val === '1' || state.val === 'on' || state.val === 'ON';\n        }\n        const newState = {};\n        newState[id] = val;\n        this.setState(newState);\n    }\n\n    // default handler\n    onControl(id, val) {\n\n    }\n\n    // default handler\n    onLongClick(e) {\n        if (e) {\n            e.preventDefault();\n            e.stopPropagation();\n        }\n        if (this.timer) {\n            clearTimeout(this.timer);\n            this.timer = null;\n        }\n        this.setState({showDialog: true});\n    }\n\n    onDialogClose() {\n        this.setState({showDialog: false});\n    }\n\n    onMouseUp() {\n        document.removeEventListener('mouseup',     this.onMouseUpBind,     {passive: false, capture: true});\n        document.removeEventListener('touchend',    this.onMouseUpBind,     {passive: false, capture: true});\n\n        if (this.timer) {\n            clearTimeout(this.timer);\n            this.timer = null;\n            this.onToggleValue && this.onToggleValue();\n        }\n    }\n\n    onTileMouseDown(e) {\n        if (this.state.showDialog) return;\n        //e.preventDefault();\n        e.stopPropagation();\n\n        this.timer = setTimeout(this.onLongClick.bind(this), 500);\n\n        document.addEventListener('mouseup',    this.onMouseUpBind,     {passive: false, capture: true});\n        document.addEventListener('touchend',   this.onMouseUpBind,     {passive: false, capture: true});\n    }\n\n    componentWillUnmount() {\n        if (this.props.onCollectIds && this.subscribed) {\n            this.props.onCollectIds(this, this.subscribes, false);\n            this.subscribed = null;\n        }\n    }\n\n    saveSettings(newSettings, cb) {\n        const settings = newSettings || this.state.settings;\n        if (this.props.onSaveSettings && this.settingsId) {\n            this.props.onSaveSettings(this.settingsId, settings, {enabled: this.defaultEnabling}, () => {\n                // subscribe if enabled and was not subscribed\n                if (this.subscribes && settings.enabled && !this.subscribed) {\n                    this.subscribed = true;\n                    this.props.onCollectIds(this, this.subscribes, true);\n                } else\n                // unsubscribe if disabled and was subscribed\n                if (!settings.enabled && this.subscribed) {\n                    this.subscribed = false;\n                    this.props.onCollectIds(this, this.subscribes, false);\n                }\n\n                this.props.tile.setColorOn(settings.colorOn   || Theme.tile.tileOn);\n                this.props.tile.setColorOff(settings.colorOff || Theme.tile.tileOff);\n                this.props.tile.setVisibility(settings.enabled);\n                this.width = settings.doubleSize ? 2 : 1;\n                this.props.tile.setSize(this.width);\n                cb && cb(settings);\n            });\n        } else if (this.customSettings) {\n            // custom URL\n            const enumSettings = Utils.getSettings(this.props.objects[this.customSettings.settingsId], {user: this.props.user});\n            let pos = -1;\n\n            if (enumSettings) {\n                enumSettings.URLs.forEach((e, i) => {\n                    if (e.id === this.id) {\n                        pos = i;\n                        return false;\n                    }\n                });\n            }\n\n            if (pos !== -1) {\n                if (newSettings) {\n                    newSettings = Object.assign({}, this.customSettings, newSettings);\n                    enumSettings.URLs[pos] = newSettings;\n                } else {\n                    enumSettings.URLs.splice(pos, 1);\n                }\n                const enumId = (newSettings && newSettings.settingsId) || this.customSettings.settingsId;\n                this.props.onSaveSettings && this.props.onSaveSettings(enumId, enumSettings, function () {\n                    if (!newSettings) {\n                        this.props.tile.setDelete(enumId);\n                    } else {\n\n                    }\n                    cb && cb(newSettings);\n                }.bind(this));\n            }\n        }\n    }\n\n    toggleEnabled() {\n        let settings = JSON.parse(JSON.stringify(this.state.settings));\n        settings.enabled = !settings.enabled;\n\n        this.saveSettings(settings, () => this.setState({settings}));\n    }\n\n    componentWillReceiveProps(nextProps) {\n        if (nextProps.editMode !== this.state.editMode) {\n            this.setState({editMode: nextProps.editMode});\n            //this.props.tile.setVisibility(nextProps.editMode || this.state.settings.enabled);\n        }\n        if (JSON.stringify(nextProps.ignoreIndicators || []) !== JSON.stringify(this.state.ignoreIndicators)) {\n            this.setState({ignoreIndicators: nextProps.ignoreIndicators || []});\n        }\n    }\n\n    roundValue(value, decimals) {\n        if (decimals !== undefined || typeof this.state.settings.decimals !== 'undefined') {\n            return value.toFixed(decimals !== undefined ? decimals : this.state.settings.decimals);\n        } else {\n            return value;\n        }\n    }\n\n    // following indicators are supported\n    // indicator.working\n    // indicator.lowbat\n    // indicator.maintenance.lowbat\n    // indicator.maintenance.unreach\n    // indicator.maintenance\n    // indicator.error\n    getIndicators() {\n        let result = [];\n        const that = this;\n        let titles = [];\n        this.channelInfo.states.forEach(state =>  {\n            if (state.indicator && state.id) {\n                const pos = state.id.lastIndexOf('.');\n                if (pos !== -1 && this.state.ignoreIndicators.includes(state.id.substring(pos + 1))) {\n                    return;\n                }\n                let Icon = state.icon;\n                if (state.id === that.indicators.directionId) {\n                    const strVal = that.state[state.id];\n                    if (strVal === that.direction.up) {\n                        Icon = IconDirectionUp;\n                    } else if (strVal === that.direction.down) {\n                        Icon = IconDirectionDown;\n                    } else if (strVal === that.direction.undef) {\n                        Icon = IconDirection;\n                    } else {\n                        return;\n                    }\n                } else if ((!that.state[state.id] && !state.inverted) || (that.state[state.id] && state.inverted)) {\n                    return;\n                }\n\n                titles.push(I18n.t(state.id.split('.').pop()));\n\n                result.push(<Icon\n                    key={that.key + 'indicator-' + state.name.toLowerCase()}\n                    className={'indicator-' + state.name.toLowerCase()}\n                    style={Object.assign({}, Theme.tile.tileIndicator, {color: state.color})}\n                />);\n            }\n        });\n\n        if (result.length) {\n            if (this.errorText) {\n                titles.push(this.errorText)\n            }\n            return <div key={this.key + 'indicators'} style={Theme.tile.tileIndicators} title={titles.join(', ')}>{result}</div>;\n        } else {\n            return null;\n        }\n    }\n\n    getDefaultIcon() {\n        if (this.defaultIcon !== null) {\n            return this.defaultIcon;\n        }\n        if (this.id) {\n            let icon = Utils.getObjectIcon(this.id, this.props.objects[this.id]);\n            if (!icon) {\n                let parentId = SmartGeneric.getParentId(this.id);\n                if (this.props.objects[parentId] && this.props.objects[parentId].type === 'channel') {\n                    icon = Utils.getObjectIcon(parentId, this.props.objects[parentId]);\n                    if (!icon) {\n                        parentId = SmartGeneric.getParentId(parentId);\n                        if (this.props.objects[parentId] && this.props.objects[parentId].type === 'device') {\n                            icon = Utils.getObjectIcon(parentId, this.props.objects[parentId]);\n                        }\n                    }\n                }\n            }\n            if (icon) {\n                this.defaultIcon = icon;\n            } else {\n                this.defaultIcon = '';\n            }\n        } else {\n            this.defaultIcon = '';\n        }\n        return this.defaultIcon;\n    }\n\n    getDialogSettings(settings) {\n        settings = settings || [];\n\n        settings.unshift({\n            name: 'background',\n            value: this.state.settings.background || '',\n            aspect: this.state.settings.doubleSize ? 2 : 1,\n            type: 'image'\n        });\n\n        if (this.doubleState) {\n            settings.unshift({\n                name: 'iconOff',\n                value: this.state.settings.iconOff || '',\n                type: 'icon'\n            });\n        }\n        settings.unshift({\n            name: 'icon',\n            value: this.state.settings.icon || '',\n            type: 'icon'\n        });\n        // If colors for on and for off\n        if (this.doubleState) {\n            settings.unshift({\n                name: 'colorOff',\n                value: this.state.settings.colorOff || '',\n                type: 'color'\n            });\n        }\n\n        settings.unshift({\n            name: 'doubleSize',\n            value: this.state.settings.doubleSize || '',\n            type: 'boolean'\n        });\n\n        settings.unshift({\n            name: 'colorOn',\n            value: this.state.settings.colorOn || '',\n            type: 'color'\n        });\n        settings.unshift({\n            name: 'name',\n            value: this.state.settings.name || '',\n            type: 'string'\n        });\n        if (this.id) {\n            /*settings.unshift({\n                name: 'useCommon',getObjectIcon\n                value: this.state.settings.useCommon || false,\n                type: 'boolean'\n            });*/\n            let icon = this.getDefaultIcon();\n            if (icon) {\n                settings.unshift({\n                    name: 'useDefaultIcon',\n                    value: this.state.settings.useDefaultIcon || '',\n                    type: 'boolean',\n                    icon\n                });\n            }\n        }\n\n        return settings;\n    }\n\n    saveDialogSettings(settings, cb) {\n        if (settings) {\n            settings.enabled = this.state.settings.enabled;\n            if (settings.background && typeof settings.background === 'object') {\n                settings.background.name = this.settingsId.replace(/[\\s*?./\\\\]/g, '_') + '.' + settings.background.name.toLowerCase().split('.').pop();\n            }\n        }\n\n        this.saveSettings(settings, newSettings => {\n            if (settings.background) {\n                this.props.tile.setBackgroundImage(settings.background + '?ts=' + Date.now(), true);\n            } else {\n                this.props.tile.setBackgroundImage('', false);\n            }\n            cb && cb(newSettings);\n        });\n    }\n\n    showSettings() {\n        this.setState({showSettings: true});\n    }\n\n    onSettingsClose() {\n        this.setState({showSettings: false});\n    }\n\n    getAdditionalName() {\n        return null;\n    }\n\n    // following function used\n    //  getStateText\n    //  getIcon\n    //  getFirstName\n    //  getAdditionalName\n    //\n    getStandardContent(stateId, noPointerEvents) {\n        let styleState;\n        let styleName;\n        let styleText;\n        if (this.width === 2) {\n            styleText = Object.assign({}, Theme.tile.tileText2);\n            styleName = Object.assign({}, Theme.tile.tileName2, this.state.nameStyle || {});\n            styleState = this.getStateText ? Object.assign(\n                {},\n                Theme.tile.tileState2,\n                stateId ? (this.state[stateId] ? Theme.tile.tileStateOn : Theme.tile.tileStateOff) : {}\n            ) : null;\n        } else {\n            styleText = Object.assign({}, Theme.tile.tileText);\n            styleName = Object.assign({}, Theme.tile.tileName, this.state.nameStyle || {});\n            styleState = this.getStateText ? Object.assign(\n                {},\n                Theme.tile.tileState,\n                stateId ? (this.state[stateId] ? Theme.tile.tileStateOn : Theme.tile.tileStateOff) : {}\n            ) : null;\n            if (this.state.settings.background) {\n                styleName.marginTop = 4;\n            }\n        }\n\n        if (this.state.settings.background) {\n            styleText.color = 'black';\n            styleText.background = 'rgba(255,255,255,0.7)';\n        }\n\n        return [\n            this.getIcon ? <div key={this.key + 'tile-icon'} style={noPointerEvents ? {pointerEvents: 'none'} : {}}>{this.getIcon()}</div> : null,\n            <div key={this.key + 'tile-text'} style={styleText}>\n                <div style={styleName}>{this.getFirstName ? this.getFirstName() : this.state.settings.name}{this.getAdditionalName()}</div>\n                {this.getStateText ? <div style={styleState}>{this.getStateText()}</div> : null}\n            </div>\n        ];\n    }\n\n    wrapContent(content) {\n        if (this.state.editMode) {\n            return [\n                <div key={this.key + 'type'} style={styles.type}>{I18n.t('type-' + this.channelInfo.type)}</div>,\n                <div key={this.key + 'wrapper'}>\n                    {this.state.settings.enabled ?\n                        [<div onClick={this.toggleEnabled.bind(this)} key={this.key + 'icon-check'} style={Theme.tile.editMode.checkIcon} className=\"edit-buttons\">\n                            <IconCheck size={'50%'} style={Theme.tile.editMode.buttonIcon}/>\n                        </div>,\n                        <div onClick={this.showSettings.bind(this)} key={this.key + 'icon-edit'} style={Theme.tile.editMode.editIcon} className=\"edit-buttons\">\n                            <IconEdit size={'50%'} style={Object.assign({}, Theme.tile.editMode.buttonIcon, {width: '80%', marginLeft: '20%'})}/>\n                            </div>\n                        ]\n                        :\n                        <div onClick={this.toggleEnabled.bind(this)} key={this.key + '.icon-check'} style={Theme.tile.editMode.removeIcon}>\n                            <IconRemoved size={'100%'} style={Theme.tile.editMode.buttonIconRemoved}/>\n                        </div>\n                    }\n                    {content}\n                </div>,\n                /*this.state.showSettings ? (\n                    <Dialog key={this.key + 'settings'}\n                         windowWidth={this.props.windowWidth}\n                         name={this.state.settings.name}\n                         dialogKey={this.key + 'settings'}\n                         settings={this.getDialogSettings()}\n                         objects={this.props.objects}\n                         settingsId={this.settingsId}\n                         onSave={this.saveDialogSettings.bind(this)}\n                         onClose={this.onSettingsClose.bind(this)}\n\n                />): null*/];\n        } else if (this.state.settings.enabled) {\n            return [\n                <div key={this.key + 'type'} style={styles.type}>{I18n.t('type-' + this.channelInfo.type)}</div>,\n                <div key={this.key + 'wrapper'} >\n                    {this.showCorner ? <div key={this.key + 'corner'} onMouseDown={this.onLongClick.bind(this)} className=\"corner\" style={Theme.tile.tileCorner}/> : null}\n                    {this.getIndicators()}\n                    {content}\n                </div>\n            ];\n        } else {\n            return null;\n        }\n    }\n\n    static getNameFontSize(name) {\n        return name && name.length >= 15 ? 12 : (name && name.length > 10 ? 14 : 16);\n    }\n\n    render() {\n        if (!this.state.editMode && !this.state.settings.enabled) {\n            return null;\n        } else {\n            return this.wrapContent(this.state.settings.name || this.getObjectNameCh());\n        }\n    }\n}\n\nSmartGeneric.propTypes = {\n    objects:            PropTypes.object.isRequired,\n    states:             PropTypes.object.isRequired,\n    tile:               PropTypes.object.isRequired,\n    channelInfo:        PropTypes.object.isRequired,\n    editMode:           PropTypes.bool,\n    theme:              PropTypes.string,\n    ignoreIndicators:   PropTypes.array,\n    enumNames:          PropTypes.array,\n    windowWidth:        PropTypes.number,\n    user:               PropTypes.string,\n    onCollectIds:       PropTypes.func.isRequired,\n};\n\nexport default SmartGeneric;\n","/**\r\n * Copyright 2020 bluefox <dogafox@gmail.com>\r\n *\r\n * MIT License\r\n *\r\n **/\r\nimport React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport {withStyles} from '@material-ui/core/styles';\r\nimport Button from '@material-ui/core/Button';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogActions from '@material-ui/core/DialogActions';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\nimport List from '@material-ui/core/List';\r\nimport ListItem from '@material-ui/core/ListItem';\r\nimport ListItemSecondaryAction from '@material-ui/core/ListItemSecondaryAction';\r\nimport ListItemText from '@material-ui/core/ListItemText';\r\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\r\nimport Checkbox from '@material-ui/core/Checkbox';\r\n\r\nimport I18n from '@iobroker/adapter-react/i18n';\r\nimport Utils from '@iobroker/adapter-react/Components/Utils';\r\nimport Icon from '@iobroker/adapter-react/Components/Icon';\r\n\r\nconst styles = theme => ({\r\n    header: {\r\n        width: '100%',\r\n        fontSize: 16,\r\n        textTransform: 'capitalize',\r\n        textAlign: 'center',\r\n        paddingBottom: 20,\r\n        color: '#000',\r\n    },\r\n    divDialogContent: {\r\n        fontSize: '1rem',\r\n        fontFamily: '\"Roboto\", \"Helvetica\", \"Arial\", sans-serif'\r\n    },\r\n    enumIcon: {\r\n        width: 24,\r\n        height: 24\r\n    },\r\n});\r\n\r\n\r\nclass DialogEditEnums extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            values: this.props.values ? this.props.values.slice() : [] // copy array\r\n        }\r\n    }\r\n\r\n    handleClose() {\r\n        this.props.onClose && this.props.onClose(null);\r\n    }\r\n\r\n    handleOk(isRefresh) {\r\n        this.props.onClose && this.props.onClose(this.state.values);\r\n    };\r\n\r\n    renderHeader() {\r\n        return null;\r\n    }\r\n\r\n    onToggle(id) {\r\n        const values = this.state.values.slice();\r\n        const pos = values.indexOf(id);\r\n        if (pos === -1) {\r\n            values.push(id)\r\n        } else {\r\n            values.splice(pos, 1);\r\n        }\r\n        this.setState({values});\r\n    }\r\n\r\n    renderSelectEnum() {\r\n        const enums = this.props.enumIDs;\r\n        const language = I18n.getLanguage();\r\n        const objs = enums.map(id => ({\r\n                name: Utils.getObjectName(this.props.objects, id, {language}),\r\n                icon: Utils.getObjectIcon(id, this.props.objects[id]),\r\n                id\r\n            }));\r\n\r\n        return <List className={this.props.classes.list}>\r\n            {objs.map(obj => <ListItem key={obj.id} button onClick={() => this.onToggle(obj.id)}>\r\n                <ListItemIcon>\r\n                    {obj.icon ? <Icon className={this.props.classes.enumIcon} src={obj.icon} alt={obj.id}/> : <div className={this.props.classes.enumIcon}/>}\r\n                </ListItemIcon>\r\n                <ListItemText primary={obj.name} />\r\n                <ListItemSecondaryAction>\r\n                    <Checkbox\r\n                        edge=\"end\"\r\n                        onChange={() => this.onToggle(obj.id)}\r\n                        checked={this.state.values.includes(obj.id)}\r\n                    />\r\n                </ListItemSecondaryAction>\r\n            </ListItem>)}\r\n        </List>;\r\n    }\r\n\r\n    render() {\r\n        return <Dialog\r\n            key=\"enumDialog\"\r\n            open={true}\r\n            maxWidth={'sm'}\r\n            onClose={() => this.handleOk()}\r\n            aria-labelledby=\"alert-dialog-title\"\r\n            aria-describedby=\"alert-dialog-description\"\r\n        >\r\n            <DialogTitle className={this.props.classes.titleBackground}\r\n                         classes={{root: this.props.classes.titleColor}}\r\n                         id=\"edit-device-dialog-title\">{I18n.t('Edit enums')} <b>{this.props.deviceName}</b></DialogTitle>\r\n            <DialogContent>\r\n                <div className={this.props.classes.divDialogContent}>\r\n                    {this.renderHeader()}\r\n                    {this.renderSelectEnum()}\r\n                </div>\r\n            </DialogContent>\r\n            <DialogActions>\r\n                <Button variant=\"contained\" onClick={() => this.handleOk()} color=\"primary\" autoFocus>{I18n.t('Ok')}</Button>\r\n                <Button variant=\"contained\" onClick={() => this.handleClose()}>{I18n.t('Cancel')}</Button>\r\n            </DialogActions>\r\n        </Dialog>;\r\n    }\r\n}\r\n\r\nDialogEditEnums.propTypes = {\r\n    onClose: PropTypes.func,\r\n    deviceName: PropTypes.string,\r\n    objects: PropTypes.object,\r\n    enumIDs: PropTypes.array,\r\n    values: PropTypes.array,\r\n};\r\n\r\nexport default withStyles(styles)(DialogEditEnums);\r\n","import React, { useState } from 'react';\r\nimport ReactDOM from 'react-dom';\r\n\r\nimport Button from '@material-ui/core/Button';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogActions from '@material-ui/core/DialogActions';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport { Checkbox, DialogTitle, FormControlLabel, makeStyles, ThemeProvider } from '@material-ui/core';\r\n\r\nimport IconClose from '@material-ui/icons/Close';\r\nimport IconCheck from '@material-ui/icons/Check';\r\n\r\nimport I18n from '@iobroker/adapter-react/i18n';\r\nimport theme from '@iobroker/adapter-react/Theme';\r\nimport Utils from '@iobroker/adapter-react/Components/Utils';\r\n\r\nlet node = null;\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    root: {\r\n        backgroundColor: theme.palette.background.paper,\r\n        width: '100%',\r\n        height: 'auto',\r\n        display: 'flex'\r\n    },\r\n    paper: {\r\n        maxWidth: 960,\r\n        width: 'calc(100% - 64px)'\r\n    },\r\n    overflowHidden: {\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        border: 'none'\r\n        // overflow: 'hidden'\r\n    },\r\n    pre: {\r\n        overflow: 'auto',\r\n        whiteSpace: 'pre-wrap',\r\n        margin: 0\r\n    },\r\n    showDialog: {\r\n        marginTop: 10\r\n    }\r\n}));\r\n\r\nconst DeleteFolder = ({ cb, device }) => {\r\n    const classes = useStyles();\r\n    const [open, setOpen] = useState(true);\r\n    const [checked, setChecked] = useState(false);\r\n\r\n    const onClose = () => {\r\n        setOpen(false);\r\n        if (node) {\r\n            document.body.removeChild(node);\r\n            node = null;\r\n        }\r\n    };\r\n\r\n    return <ThemeProvider theme={theme(Utils.getThemeName())}>\r\n        <Dialog\r\n            onClose={onClose}\r\n            open={open}\r\n            classes={{ paper: classes.paper }}\r\n        >\r\n            <DialogTitle>{I18n.t('Please confirm...')}</DialogTitle>\r\n            <DialogContent className={classes.overflowHidden} dividers>\r\n                {I18n.t(device ? 'Device and all states will be deleted. Are you sure?' : 'Folder will be deleted. Are you sure?')}\r\n                <div className={classes.showDialog}>\r\n                    <FormControlLabel\r\n                        control={<Checkbox checked={checked} onChange={e => setChecked(e.target.checked)} />}\r\n                        label={I18n.t('Do not show dialog for 5 minutes')}\r\n                    />\r\n                </div>\r\n            </DialogContent>\r\n            <DialogActions>\r\n                <Button\r\n                    variant=\"contained\"\r\n                    autoFocus\r\n                    onClick={() => {\r\n                        onClose();\r\n                        if (checked) {\r\n                            window.localStorage.setItem(device ? 'DeleteDeviceTime' : 'DeleteFolderTime', new Date().getTime());\r\n                        }\r\n                        cb(true);\r\n                    }}\r\n                    startIcon={<IconCheck />}\r\n                    color=\"primary\">\r\n                    {I18n.t('Delete')}\r\n                </Button>\r\n                <Button\r\n                    variant=\"contained\"\r\n                    onClick={() => {\r\n                        onClose();\r\n                        cb(false);\r\n                    }}\r\n                    startIcon={<IconClose />}\r\n                    color=\"default\">\r\n                    {I18n.t('Cancel')}\r\n                </Button>\r\n            </DialogActions>\r\n        </Dialog>\r\n    </ThemeProvider>;\r\n}\r\n\r\nexport const deleteFolderAndDeviceCallBack = (cb, device = false) => {\r\n    const time = window.localStorage.getItem(device ? 'DeleteDeviceTime' : 'DeleteFolderTime');\r\n    const fiveMin = 1000 * 60 * 5;\r\n    if (time && new Date().getTime() - time < fiveMin) {\r\n        return cb(true);\r\n    }\r\n    if (!node) {\r\n        node = document.createElement('div');\r\n        node.id = 'renderModal';\r\n        document.body.appendChild(node);\r\n    }\r\n    return ReactDOM.render(<DeleteFolder cb={cb} device={device} />, node);\r\n}","import React, { useEffect, useState } from 'react';\r\n// import ReactDOM from 'react-dom';\r\n\r\nimport Button from '@material-ui/core/Button';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogActions from '@material-ui/core/DialogActions';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport { DialogTitle, makeStyles, TextField, ThemeProvider } from '@material-ui/core';\r\n\r\nimport IconClose from '@material-ui/icons/Close';\r\nimport IconCheck from '@material-ui/icons/Check';\r\n\r\nimport I18n from '@iobroker/adapter-react/i18n';\r\nimport theme from '@iobroker/adapter-react/Theme';\r\nimport Utils from '@iobroker/adapter-react/Components/Utils';\r\nimport UploadImage from '../Components/UploadImage';\r\n\r\n// let node = null;\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    root: {\r\n        backgroundColor: theme.palette.background.paper,\r\n        width: '100%',\r\n        height: 'auto',\r\n        display: 'flex'\r\n    },\r\n    paper: {\r\n        maxWidth: 600,\r\n        width: '100%'\r\n    },\r\n    overflowHidden: {\r\n        display: 'flex',\r\n        // overflow: 'hidden'\r\n    },\r\n    pre: {\r\n        overflow: 'auto',\r\n        whiteSpace: 'pre-wrap',\r\n        margin: 0\r\n    },\r\n    divOids: {\r\n        display: 'inline-block',\r\n        width: '100%',\r\n        verticalAlign: 'top',\r\n    },\r\n    divOidField: {\r\n        width: '100%',\r\n        display: 'block',\r\n        paddingTop: 7,\r\n        paddingBottom: 7,\r\n    },\r\n\r\n    oidName: {\r\n        fontSize: 14,\r\n        fontWeight: 'bold'\r\n    },\r\n}));\r\n\r\nconst DialogEditFolder = ({ onClose, data, socket, devices, objects, deleteDevice, processTasks }) => {\r\n    const classes = useStyles();\r\n    // const [open, setOpen] = useState(true);\r\n    const [dataEdit, setDataEdit] = useState(JSON.parse(JSON.stringify(data)));\r\n    const [arrayObjects, setArrayObjects] = useState([]);\r\n    const [name, setName] = useState(Utils.getObjectNameFromObj(dataEdit, I18n.getLanguage()) === 'undefined' ? dataEdit.common.name[Object.keys(dataEdit.common.name)[0]] : Utils.getObjectNameFromObj(dataEdit, I18n.getLanguage()))\r\n    const [newId, setId] = useState(data._id);\r\n    const [startTheProcess, setStartTheProcess] = useState(false);\r\n\r\n    useEffect(() => {\r\n        const idsObject = Object.keys(objects).filter(el => el === data._id || el.startsWith(data._id + '.'))\r\n            .filter(id => objects[id].type === 'folder' || objects[id].type === 'channel' || objects[id].type === 'device')\r\n            .map(id => objects[id]);\r\n\r\n        setArrayObjects(idsObject);\r\n    }, [data._id, objects]);\r\n\r\n    function getNonEmptyName(obj) {\r\n        const lang = I18n.getLanguage();\r\n        const name = Utils.getObjectNameFromObj(obj, lang);\r\n        return name === 'undefined' ? obj.common.name[Object.keys(obj.common.name)[0]] : name\r\n    }\r\n\r\n    const onCloseLocal = async changed => {\r\n        if (!startTheProcess && changed) {\r\n            setStartTheProcess(true);\r\n\r\n            // If name and ID were changed\r\n            if (getNonEmptyName(dataEdit) !== getNonEmptyName(data)) {\r\n                await onChangeCopy();\r\n            } else if (JSON.stringify(dataEdit) !== JSON.stringify(data)) {\r\n                await socket.setObject(dataEdit._id, dataEdit);\r\n            }\r\n        }\r\n\r\n        onClose();\r\n    };\r\n\r\n    const addNewFolder = async (dataFolder, id) => {\r\n        const obj = {\r\n            _id: id,\r\n            common: {\r\n                name: typeof dataFolder.name === 'string' ? { [I18n.getLanguage()]: dataFolder.name } : dataFolder.name,\r\n                color: dataFolder.color,\r\n                icon: dataFolder.icon\r\n            },\r\n            native: {},\r\n            type: 'folder'\r\n        };\r\n        await socket.setObject(id, obj);\r\n    }\r\n\r\n    const onCopyDevice = async (copyDevice, newChannelId, obj) => {\r\n        if (!copyDevice && !copyDevice?.channelId) {\r\n            return null;\r\n        }\r\n        // if this is device not from linkeddevice or from alias\r\n        const channelId = copyDevice.channelId;\r\n        const isAlias = channelId.startsWith('alias.') || channelId.startsWith('linkeddevices.');\r\n        let channelObj = objects[channelId];\r\n        if (!channelObj?.common) {\r\n            if (obj) {\r\n                channelObj = obj\r\n            } else {\r\n                return null;\r\n            }\r\n        }\r\n        const { functions, rooms, icon, states, color, type } = copyDevice;\r\n        const tasks = [];\r\n\r\n        tasks.push({\r\n            id: newChannelId,\r\n            obj: {\r\n                common: {\r\n                    name: channelObj.common.name,\r\n                    color: color,\r\n                    desc: channelObj.common.desc,\r\n                    role: type,\r\n                    icon: icon && icon.startsWith('adapter/') ? `../../${icon}` : icon,\r\n                },\r\n                type: 'channel',\r\n                native: channelObj.native || {}\r\n            },\r\n            enums: rooms.concat(functions)\r\n        });\r\n\r\n        states.forEach(state => {\r\n            if (!state.id) {\r\n                return;\r\n            }\r\n            const obj = JSON.parse(JSON.stringify(objects[state.id]));\r\n            obj._id = newChannelId + '.' + state.name;\r\n\r\n            if (!obj.native) {\r\n                obj.native = {};\r\n            }\r\n            if (!isAlias) {\r\n                obj.common.alias = { id: state.id };\r\n            }\r\n            tasks.push({ id: obj._id, obj });\r\n        });\r\n\r\n        await processTasks(tasks);\r\n    }\r\n\r\n    const generateId = () => {\r\n        if (typeof dataEdit.common.name !== 'string') {\r\n            return false;\r\n        } else if (!dataEdit.common.name) {\r\n            return data._id;\r\n        }\r\n        let parts = data._id.split('.');\r\n        parts.pop();\r\n        parts = parts.join('.');\r\n        parts = `${parts}.${dataEdit.common.name.replace(Utils.FORBIDDEN_CHARS, '_').replace(/\\s/g, '_').replace(/\\./g, '_')}`\r\n        return parts;\r\n\r\n    }\r\n\r\n    const onChangeCopy = async () => {\r\n        let newDevices = JSON.parse(JSON.stringify(devices));\r\n\r\n        let parts = data._id.split('.');\r\n        parts.pop();\r\n        parts = parts.join('.');\r\n        parts = `${parts}.${dataEdit.common.name.replace(Utils.FORBIDDEN_CHARS, '_').replace(/\\s/g, '_').replace(/\\./g, '_')}`;\r\n\r\n        let deleteFolderID = '';\r\n        for (let i = 0; i < arrayObjects.length; i++) {\r\n            const el = arrayObjects[i];\r\n            const newId = el._id.replace(data._id, parts);\r\n            if (el.type === 'folder') {\r\n                await addNewFolder(data._id === el._id ? dataEdit.common : el.common, newId);\r\n                deleteFolderID = el._id;\r\n            } else {\r\n                const device = newDevices.find(device => el._id === device.channelId);\r\n                await onCopyDevice(device, newId, el);\r\n                newDevices = await deleteDevice(newDevices.indexOf(device));\r\n            }\r\n        }\r\n\r\n        // Delete folder and all object\r\n        deleteFolderID && (await socket.delObjects(deleteFolderID, true));\r\n    }\r\n\r\n    return <ThemeProvider theme={theme(Utils.getThemeName())}>\r\n        <Dialog\r\n            onClose={() => onCloseLocal()}\r\n            open={true}\r\n            classes={{ paper: classes.paper }}\r\n        >\r\n            <DialogTitle>{I18n.t('Edit folder %s', newId)}</DialogTitle>\r\n            <DialogContent className={classes.overflowHidden} dividers>\r\n                <div className={classes.divOids}>\r\n                    <div className={classes.divOidField}>\r\n                        <div className={classes.oidName} >{I18n.t('Name')}</div>\r\n                        <TextField\r\n                            key=\"_name\"\r\n                            fullWidth\r\n                            autoFocus\r\n                            onKeyPress={(ev) => {\r\n                                if (ev.key === 'Enter') {\r\n                                    // if (dataEdit.common.name && JSON.stringify(dataEdit) !== JSON.stringify(data)) {\r\n                                    //     cb(dataEdit);\r\n                                    // } else {\r\n                                    //     cb(false);\r\n                                    // }\r\n                                    onCloseLocal(true);\r\n                                    ev.preventDefault();\r\n                                }\r\n                            }}\r\n                            value={name}\r\n                            className={classes.oidField}\r\n                            error={!!objects[generateId()]}\r\n                            disabled={startTheProcess}\r\n                            onChange={e => {\r\n                                const newDataEdit = JSON.parse(JSON.stringify(dataEdit));\r\n                                newDataEdit.common.name = e.target.value;\r\n                                setDataEdit(newDataEdit);\r\n\r\n                                let parts = data._id.split('.');\r\n                                parts.pop();\r\n                                parts = parts.join('.');\r\n                                parts = `${parts}.${e.target.value.replace(Utils.FORBIDDEN_CHARS, '_').replace(/\\s/g, '_').replace(/\\./g, '_')}`\r\n                                setName(e.target.value);\r\n                                setId(parts);\r\n                            }}\r\n                            margin=\"normal\"\r\n                        />\r\n                    </div>\r\n                    <div className={classes.divOidField}>\r\n                        <div className={classes.oidName} >{I18n.t('Color')}</div>\r\n                        <TextField\r\n                            key=\"_color\"\r\n                            disabled={startTheProcess}\r\n                            // fullWidth\r\n                            value={dataEdit.common.color}\r\n                            style={{ width: 'calc(100% - 40px)' }}\r\n                            onChange={e => {\r\n                                const newDataEdit = JSON.parse(JSON.stringify(dataEdit));\r\n                                newDataEdit.common.color = e.target.value;\r\n                                setDataEdit(newDataEdit);\r\n                            }}\r\n                        />\r\n                        <TextField\r\n                            key=\"_color1\"\r\n                            type=\"color\"\r\n                            style={{ width: 40 }}\r\n                            disabled={startTheProcess}\r\n                            value={dataEdit.common.color}\r\n                            className={classes.oidField + ' ' + classes.colorButton}\r\n                            onChange={e => {\r\n                                const newDataEdit = JSON.parse(JSON.stringify(dataEdit));\r\n                                newDataEdit.common.color = e.target.value;\r\n                                setDataEdit(newDataEdit);\r\n                            }}\r\n                        // margin=\"normal\"\r\n                        />\r\n                    </div>\r\n                    <UploadImage\r\n                        crop={false}\r\n                        icons\r\n                        className={classes.sizeDropZone}\r\n                        disabled={startTheProcess}\r\n                        maxSize={256 * 1024}\r\n                        icon={dataEdit.common.icon}\r\n                        removeIconFunc={e => {\r\n                            const newDataEdit = JSON.parse(JSON.stringify(dataEdit));\r\n                            newDataEdit.common.icon = '';\r\n                            setDataEdit(newDataEdit);\r\n                        }}\r\n                        onChange={base64 => {\r\n                            const newDataEdit = JSON.parse(JSON.stringify(dataEdit));\r\n                            newDataEdit.common.icon = base64;\r\n                            setDataEdit(newDataEdit);\r\n                        }}\r\n                        t={I18n.t}\r\n                    />\r\n                </div>\r\n            </DialogContent>\r\n            <DialogActions>\r\n                <Button\r\n                    variant=\"contained\"\r\n                    autoFocus\r\n                    disabled={JSON.stringify(dataEdit) === JSON.stringify(data) || !dataEdit.common.name || !!objects[generateId()] || startTheProcess}\r\n                    onClick={() => onCloseLocal(true)}\r\n                    startIcon={<IconCheck />}\r\n                    color=\"primary\">\r\n                    {I18n.t('Save')}\r\n                </Button>\r\n                <Button\r\n                    variant=\"contained\"\r\n                    disabled={startTheProcess}\r\n                    onClick={() => onCloseLocal(false)}\r\n                    startIcon={<IconClose />}\r\n                    color=\"default\">\r\n                    {I18n.t('Close')}\r\n                </Button>\r\n            </DialogActions>\r\n        </Dialog>\r\n    </ThemeProvider>;\r\n}\r\n\r\nexport default DialogEditFolder;","import Utils from '@iobroker/adapter-react/Components/Utils';\r\nimport I18n from '@iobroker/adapter-react/i18n';\r\nimport { TableRow } from '@material-ui/core';\r\nimport React, { useRef, useState } from 'react';\r\nimport { useDrag, useDrop } from 'react-dnd';\r\n\r\nconst DragWrapper = ({ openFolder, backgroundRow, objects, onCopyDevice, deleteDevice, deviceIdx, id, children, style, className, key }) => {\r\n    const ref = useRef(null);\r\n    const language = I18n.getLanguage();\r\n    const [{ isDragging }, dragRef] = useDrag({\r\n        type: 'box',\r\n        item: { id, deviceIdx },\r\n        canDrag:()=>{\r\n            if(id?.includes('linked_devices') || id?.includes('linkeddevices.0')){\r\n                return false;\r\n            }\r\n            return true;\r\n        },\r\n        end: async (item, monitor) => {\r\n            let parts;\r\n            if (objects[item.id]?.common?.name) {\r\n                parts = Utils.getObjectName(objects, item.id, { language }).replace(Utils.FORBIDDEN_CHARS, '_').replace(/\\s/g, '_').replace(/\\./g, '_');\r\n            } else {\r\n                parts = item.id.split('.');\r\n                parts = parts.pop();\r\n            }\r\n            const result = monitor.getDropResult();\r\n            const targetId = monitor.getTargetIds();\r\n            const didDrop = monitor.didDrop();\r\n            if (id !== `alias.0.${parts}` && !result && !targetId.length && !didDrop) {\r\n                await onCopyDevice(id, `alias.0.${parts}`);\r\n                openFolder()\r\n                if (id.includes('alias.0')) {\r\n                    await deleteDevice(item.deviceIdx);\r\n                }\r\n            }\r\n        },\r\n        collect: monitor => ({ isDragging: monitor.isDragging() }),\r\n    });\r\n    const [error, setError] = useState(false);\r\n    const [{ isOver, canDrop }, dropRef] = useDrop({\r\n        accept: 'box',\r\n        canDrop: (item) => {\r\n            let parts;\r\n            if (objects[item.id]?.common?.name) {\r\n                parts = Utils.getObjectName(objects, item.id, { language }).replace(Utils.FORBIDDEN_CHARS, '_').replace(/\\s/g, '_').replace(/\\./g, '_');\r\n            } else {\r\n                parts = item.id.split('.');\r\n                parts = parts.pop();\r\n            }\r\n            let partsId = id.split('.');\r\n            partsId.pop();\r\n            partsId = partsId.join('.');\r\n            if (!id?.includes('alias.0') || id?.includes('automatically_detected') || id?.includes('linked_devices') || objects[`${partsId}.${parts}`]) {\r\n                return false;\r\n            }\r\n            return true;\r\n        },\r\n        collect: (monitor) => ({\r\n            handlerId: monitor.getHandlerId(),\r\n            isOver: monitor.isOver(),\r\n            canDrop: monitor.canDrop()\r\n        }),\r\n        drop: async (item) => {\r\n            let parts;\r\n            if (objects[item.id]?.common?.name) {\r\n                parts = Utils.getObjectName(objects, item.id, { language }).replace(Utils.FORBIDDEN_CHARS, '_').replace(/\\s/g, '_').replace(/\\./g, '_');\r\n            } else {\r\n                parts = item.id.split('.');\r\n                parts = parts.pop();\r\n            }\r\n            let partsId = id.split('.');\r\n            partsId.pop();\r\n            partsId = partsId.join('.');\r\n            setError(false);\r\n            await onCopyDevice(item.id, `${partsId}.${parts}`);\r\n            openFolder()\r\n            if (item.id.includes('alias.0')) {\r\n                await deleteDevice(item.deviceIdx);\r\n            }\r\n        },\r\n        hover(item, monitor) {\r\n            let parts;\r\n            if (objects[item.id]?.common?.name) {\r\n                parts = Utils.getObjectName(objects, item.id, { language }).replace(Utils.FORBIDDEN_CHARS, '_').replace(/\\s/g, '_').replace(/\\./g, '_');\r\n            } else {\r\n                parts = item.id.split('.');\r\n                parts = parts.pop();\r\n            }\r\n            let partsId = id.split('.');\r\n            partsId.pop();\r\n            partsId = partsId.join('.');\r\n            if (!id?.includes('alias.0') || id?.includes('automatically_detected') || id?.includes('linked_devices') || objects[`${partsId}.${parts}`]) {\r\n                setError(true);\r\n            } else {\r\n                setError(false);\r\n\r\n            }\r\n        }\r\n    });\r\n    const isActive = isOver && canDrop;\r\n    let background = backgroundRow;\r\n    if (isOver && error) {\r\n        background = '#e73c3c75';\r\n    } else if (isActive) {\r\n        background = '#00640057';\r\n    }\r\n\r\n    const opacity = isDragging ? 0.5 : 1;\r\n    dragRef(dropRef(ref));\r\n\r\n    return <TableRow\r\n        className={className}\r\n        key={key}\r\n        padding=\"default\"\r\n        ref={ref}\r\n        style={{ ...style, opacity, background }}>\r\n        {children}\r\n    </TableRow>;\r\n}\r\n\r\nexport default DragWrapper;","import Utils from '@iobroker/adapter-react/Components/Utils';\r\nimport I18n from '@iobroker/adapter-react/i18n';\r\nimport { TableRow } from '@material-ui/core';\r\nimport React, { useState } from 'react';\r\nimport { useDrop } from 'react-dnd';\r\n\r\nconst DropWrapper = ({ openFolder, objects, deleteDevice, onCopyDevice, id, children, className, key, backgroundRow }) => {\r\n    const [error, setError] = useState(false);\r\n    const language = I18n.getLanguage();\r\n    const [{ isOver, canDrop }, drop] = useDrop({\r\n        accept: 'box',\r\n        canDrop: (item) => {\r\n            let parts;\r\n            if (objects[item.id]?.common?.name) {\r\n                parts = Utils.getObjectName(objects, item.id, { language }).replace(Utils.FORBIDDEN_CHARS, '_').replace(/\\s/g, '_').replace(/\\./g, '_');\r\n                parts = item.id.split('.');\r\n                parts = parts.pop();\r\n            }\r\n            return !(!id?.includes('alias.0') ||\r\n                id?.includes('automatically_detected') ||\r\n                id?.includes('linked_devices') ||\r\n                objects[`${id}.${parts}`]);\r\n        },\r\n        collect: (monitor) => ({\r\n            handlerId: monitor.getHandlerId(),\r\n            isOver: monitor.isOver(),\r\n            canDrop: monitor.canDrop()\r\n        }),\r\n        drop: async (item) => {\r\n            let parts;\r\n            if (objects[item.id]?.common?.name) {\r\n                parts = Utils.getObjectName(objects, item.id, { language }).replace(Utils.FORBIDDEN_CHARS, '_').replace(/\\s/g, '_').replace(/\\./g, '_');\r\n            } else {\r\n                parts = item.id.split('.');\r\n                parts = parts.pop();\r\n            }\r\n            setError(false);\r\n            await onCopyDevice(item.id, `${id}.${parts}`);\r\n            openFolder();\r\n            if (item.id.includes('alias.0')) {\r\n                await deleteDevice(item.deviceIdx);\r\n            }\r\n        },\r\n        hover(item, monitor) {\r\n            let parts;\r\n            if (objects[item.id]?.common?.name) {\r\n                parts = Utils.getObjectName(objects, item.id, { language }).replace(Utils.FORBIDDEN_CHARS, '_').replace(/\\s/g, '_').replace(/\\./g, '_');\r\n            } else {\r\n                parts = item.id.split('.');\r\n                parts = parts.pop();\r\n            }\r\n            if (!id?.includes('alias.0') || id?.includes('automatically_detected') || id?.includes('linked_devices') || objects[`${id}.${parts}`]) {\r\n                setError(true);\r\n            } else {\r\n                setError(false);\r\n            }\r\n        }\r\n    });\r\n\r\n    const isActive = isOver && canDrop;\r\n    let background = backgroundRow;\r\n    if (isOver && error) {\r\n        background = '#e73c3c75';\r\n    } else if (isActive) {\r\n        background = '#00640057';\r\n    }\r\n\r\n    return <TableRow\r\n        className={className}\r\n        padding=\"default\"\r\n        ref={drop}\r\n        style={{ background, transition: 'background .3s' }}>\r\n        {children}\r\n    </TableRow>;\r\n}\r\n\r\nexport default DropWrapper;","import React, { useEffect, useState } from 'react';\r\n// import ReactDOM from 'react-dom';\r\n\r\nimport Button from '@material-ui/core/Button';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogActions from '@material-ui/core/DialogActions';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport {\r\n    Checkbox,\r\n    DialogTitle, FormControl, FormControlLabel, IconButton, InputLabel, LinearProgress, makeStyles,\r\n    MenuItem,\r\n    Select,\r\n    TextField,\r\n    // TextField,\r\n    ThemeProvider,\r\n    Tooltip\r\n} from '@material-ui/core';\r\n\r\nimport IconClose from '@material-ui/icons/Close';\r\nimport IconCheck from '@material-ui/icons/Check';\r\n\r\nimport I18n from '@iobroker/adapter-react/i18n';\r\nimport theme from '@iobroker/adapter-react/Theme';\r\nimport Utils from '@iobroker/adapter-react/Components/Utils';\r\nimport TypeIcon from '../Components/TypeIcon';\r\nimport { MdModeEdit as IconEdit } from 'react-icons/md';\r\nimport clsx from 'clsx';\r\nimport TreeView from '../Components/TreeView';\r\n// import UploadImage from '../Components/UploadImage';\r\nimport Icon from '@iobroker/adapter-react/Components/Icon';\r\nimport { useStateLocal } from '../Components/helpers/hooks/useStateLocal';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    root: {\r\n        backgroundColor: theme.palette.background.paper,\r\n        width: '100%',\r\n        height: 'auto',\r\n        display: 'flex'\r\n    },\r\n    paper: {\r\n        maxWidth: 960,\r\n        maxHeight: 'calc(100% - 64px)',\r\n        width: '100%'\r\n    },\r\n    overflowHidden: {\r\n        display: 'flex',\r\n        overflow: 'hidden'\r\n    },\r\n    pre: {\r\n        overflow: 'auto',\r\n        whiteSpace: 'pre-wrap',\r\n        margin: 0\r\n    },\r\n    divOids: {\r\n        display: 'flex',\r\n        width: '100%',\r\n    },\r\n    divOidField: {\r\n        width: '100%',\r\n        display: 'block',\r\n        paddingTop: 7,\r\n        paddingBottom: 7,\r\n    },\r\n\r\n    oidName: {\r\n        fontSize: 14,\r\n        fontWeight: 'bold'\r\n    },\r\n    flex: {\r\n        flex: 1,\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        overflow: 'hidden'\r\n    },\r\n    type: {\r\n        width: '100%',\r\n    },\r\n    deviceWrapper: {\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        padding: 4,\r\n        margin: '2px 10px',\r\n        '&:hover': {\r\n            background: '#6969694f',\r\n            borderRadius: 4\r\n        }\r\n    },\r\n    fontStyle: {\r\n        padding: '0px 8px',\r\n        overflow: 'hidden',\r\n        fontWeight: 'bold',\r\n        whiteSpace: 'nowrap',\r\n        textOverflow: 'ellipsis'\r\n    },\r\n    fontStyleId: {\r\n        padding: '0px 8px',\r\n        overflow: 'hidden',\r\n        fontWeight: 'bold',\r\n        whiteSpace: 'nowrap',\r\n        textOverflow: 'ellipsis',\r\n        opacity: 0.6,\r\n        fontSize: 9,\r\n        fontStyle: 'italic'\r\n    },\r\n    wrapperTitleAndId: {\r\n        alignSelf: 'center',\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        width: '100%',\r\n        overflow: 'hidden'\r\n    },\r\n    tableIcon: {\r\n        margin: 'auto 0'\r\n    },\r\n    tableIconImg: {\r\n        width: 20,\r\n        height: 20\r\n    },\r\n    header: {\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        background: '#00000057',\r\n        margin: 10,\r\n        padding: 4,\r\n        borderRadius: 4,\r\n        marginBottom: 10\r\n    },\r\n    wrapperDevices: {\r\n        margin: '0 10px'\r\n    },\r\n    wrapperItems: {\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        overflow: 'auto'\r\n    },\r\n    wrapperCloning: {\r\n        backgroundColor: '#FFFFFF10',\r\n        borderRadius: 3,\r\n        flex: 2\r\n    },\r\n    wrapperNameAndId: {\r\n        display: 'flex',\r\n        justifyContent: 'space-between',\r\n        width: '100%'\r\n    },\r\n    wrapperCheckbox: {\r\n        display: 'flex',\r\n        width: '100%'\r\n    },\r\n    enumsWrapper: {\r\n        display: 'flex',\r\n        paddingLeft: 60,\r\n        overflow: 'hidden'\r\n    },\r\n    wrapperIconEnumCell: {\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n        margin: '0 4px'\r\n    },\r\n    enumIcon: {\r\n        width: 20,\r\n        height: 20\r\n    },\r\n    nameEnumCell: {\r\n        fontSize: 10,\r\n        opacity: 0.7,\r\n        marginLeft: 4\r\n    },\r\n    backgroundRed: {\r\n        background: '#ff000029',\r\n        borderRadius: 4\r\n    },\r\n    dialogNewForm: {\r\n        margin: 10\r\n    },\r\n    emptyList: {\r\n        display: 'flex',\r\n        margin: 10,\r\n        padding: '0 10px',\r\n        opacity: 0.7,\r\n        fontWeight: 'bold'\r\n    },\r\n    enumsStyle: {\r\n        color: '#448dde',\r\n        opacity: 1\r\n    },\r\n    formControlLabel: {\r\n        marginLeft: 0,\r\n        opacity: 0.6\r\n    },\r\n    headerWrapElement: {\r\n        display: 'flex'\r\n    },\r\n    backgroundSilver: {\r\n        opacity: 0.5\r\n    },\r\n    startTheProcess: {\r\n        opacity: 0.5\r\n    }\r\n}));\r\n\r\nconst RenderNewItemDialog = ({ classes, object, onClose, open, checkDeviceInObjects }) => {\r\n    const [name, setName] = useState(object.title);\r\n    const error = !name || (object && checkDeviceInObjects(name, object.id));\r\n\r\n    useEffect(() => {\r\n        if (object && name !== object.title) {\r\n            setName(object.title)\r\n        }\r\n        // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, [object]);\r\n\r\n    return <Dialog\r\n        key=\"newDialog\"\r\n        onClose={() => onClose()}\r\n        open={open}>\r\n        <DialogTitle className={classes.addNewFolderTitle} >{I18n.t('Edit name \"%s\"', name)}</DialogTitle>\r\n        <form className={classes.dialogNewForm} autoComplete=\"off\">\r\n            <TextField\r\n                onKeyPress={(ev) => {\r\n                    if (ev.key === 'Enter') {\r\n                        ev.preventDefault();\r\n\r\n                        if (name && !error) {\r\n                            onClose(name);\r\n                        } else {\r\n                            onClose();\r\n                        }\r\n                    }\r\n                }}\r\n                error={!!error}\r\n                className={classes.dialogNewInput}\r\n                autoFocus\r\n                fullWidth\r\n                label={I18n.t('Name')}\r\n                value={name}\r\n                onChange={e => setName(e.target.value)} />\r\n        </form>\r\n        <DialogActions>\r\n            <Button\r\n                variant=\"contained\"\r\n                disabled={!!error || object.title === name}\r\n                onClick={() => onClose(name)}\r\n                startIcon={<IconCheck />}\r\n                color=\"primary\">{I18n.t('Apply')}</Button>\r\n            <Button\r\n                variant=\"contained\"\r\n                onClick={() => onClose()}\r\n                startIcon={<IconClose />}\r\n            >{I18n.t('Cancel')}</Button>\r\n        </DialogActions>\r\n    </Dialog>;\r\n}\r\n\r\nconst DialogImporter = ({\r\n    onClose,\r\n    item,\r\n    socket,\r\n    devices,\r\n    objects,\r\n    listItems,\r\n    onCopyDevice\r\n}) => {\r\n    const classes = useStyles();\r\n    const [arrayDevice, setArrayDevice] = useState([]);\r\n    const [cloningMethod, setCloningMethod] = useStateLocal('flat', 'importer.cloningMethod');\r\n    const [idsFolder, setSdsFolder] = useState([]);\r\n    const [selectFolder, setSelectFolder] = useState('alias.0');\r\n    const [checkedSelect, setCheckedSelect] = useState([]);\r\n    const [openEdit, setOpenEdit] = useState(false);\r\n    const [skipElement, setSkipElement] = useState(true);\r\n    const [startTheProcess, setStartTheProcess] = useState(false);\r\n\r\n    useEffect(() => {\r\n        const ids = [];\r\n        const getParentId = (id) => {\r\n            const pos = id.lastIndexOf('.');\r\n            if (pos !== -1) {\r\n                return id.substring(0, pos);\r\n            } else {\r\n                return '';\r\n            }\r\n        };\r\n\r\n        const getLastPart = (id) => {\r\n            const pos = id.lastIndexOf('.');\r\n            if (pos !== -1) {\r\n                return id.substring(pos + 1);\r\n            } else {\r\n                return id;\r\n            }\r\n        };\r\n\r\n        const prefix = 'alias.0';\r\n        Object.keys(objects).forEach(id => {\r\n            if (id.startsWith(prefix) &&\r\n                objects[id] &&\r\n                objects[id].common &&\r\n                (objects[id].type === 'channel' || objects[id].type === 'device' || objects[id].type === 'folder')) {\r\n                let parentId;\r\n                // getParentId\r\n                if (objects[id].type === 'folder') {\r\n                    parentId = id;\r\n                } else {\r\n                    parentId = getParentId(id);\r\n                }\r\n\r\n                if (parentId && !ids.includes(parentId)) {\r\n                    ids.push(parentId);\r\n                }\r\n            }\r\n        });\r\n\r\n        const stateIds = {};\r\n        const language = I18n.getLanguage();\r\n        ids.forEach(id => stateIds[id] = {\r\n            common: {\r\n                name: objects[id] && objects[id].type === 'folder' ? Utils.getObjectName(objects, id, { language }) : getLastPart(id),\r\n                nondeletable: true,\r\n                color: objects[id]?.common && objects[id].common.color ? objects[id].common.color : null,\r\n                icon: objects[id]?.common && objects[id].common.icon ? objects[id].common.icon : null\r\n            },\r\n            type: 'folder'\r\n        });\r\n\r\n        stateIds[prefix] = {\r\n            common: {\r\n                name: I18n.t('Root'),\r\n                nondeletable: true\r\n            },\r\n            type: 'folder'\r\n        };\r\n\r\n        setSdsFolder(stateIds);\r\n    }, [objects, listItems]);\r\n\r\n    useEffect(() => {\r\n        const originalIds = listItems.filter(el => el?.obj?.native?.originalId).map(el => el.obj.native.originalId)\r\n\r\n        const newArray = listItems.filter(device => device.parent === item.id && !originalIds.includes(device.id));\r\n        setArrayDevice(newArray);\r\n        const selectId = newArray.map(device => device.id);\r\n        setCheckedSelect(selectId);\r\n    }, [item.id, item.parent, listItems]);\r\n\r\n    // const onCopyDevice = async (copyDevice, newChannelId, originalId) => {\r\n    //     if (!copyDevice) {\r\n    //         return null;\r\n    //     }\r\n\r\n    //     // if this is device not from linkeddevice or from alias\r\n    //     const channelId = copyDevice.channelId;\r\n    //     const isAlias = channelId.startsWith('alias.') || channelId.startsWith('linkeddevices.');\r\n\r\n    //     const channelObj = objects[channelId];\r\n    //     const { functions, rooms, icon, states, color, type } = copyDevice;\r\n    //     const tasks = [];\r\n\r\n    //     tasks.push({\r\n    //         id: newChannelId,\r\n    //         obj: {\r\n    //             common: {\r\n    //                 name: channelObj.common.name,\r\n    //                 color: color,\r\n    //                 desc: channelObj.common.desc,\r\n    //                 role: type,\r\n    //                 icon: icon && icon.startsWith('adapter/') ? `../../${icon}` : icon,\r\n    //             },\r\n    //             native: {\r\n    //                 originalId\r\n    //             },\r\n    //             type: 'channel'\r\n    //         },\r\n    //         enums: rooms.concat(functions)\r\n    //     });\r\n\r\n    //     states.forEach(state => {\r\n    //         if (!state.id) {\r\n    //             return;\r\n    //         }\r\n    //         const obj = JSON.parse(JSON.stringify(objects[state.id]));\r\n    //         obj._id = newChannelId + '.' + state.name;\r\n\r\n    //         obj.native = {};\r\n    //         if (!isAlias) {\r\n    //             obj.common.alias = { id: state.id };\r\n    //         }\r\n    //         tasks.push({ id: obj._id, obj });\r\n    //     });\r\n\r\n    //     await processTasks(tasks);\r\n    // };\r\n\r\n    const addNewFolder = async (dataFolder, id) => {\r\n        const obj = {\r\n            _id: id,\r\n            common: {\r\n                name: dataFolder.objName ? dataFolder.objName : { [I18n.getLanguage()]: dataFolder.name },\r\n                color: dataFolder.color,\r\n                icon: dataFolder.icon\r\n            },\r\n            native: {},\r\n            type: 'folder'\r\n        };\r\n\r\n        await socket.setObject(id, obj);\r\n    };\r\n\r\n    const addDevice = async (id, el) => {\r\n        const newId = `${id}.${el.title.replace(Utils.FORBIDDEN_CHARS, '_').replace(/\\s/g, '_').replace(/\\./g, '_')}`\r\n        await onCopyDevice(el.id, newId);\r\n    };\r\n\r\n    const arrayDeviceFunction = async () => {\r\n        for (let s = 0; s < arrayDevice.length; s++) {\r\n            const el = arrayDevice[s];\r\n            if (checkedSelect.indexOf(el.id) === -1 ||\r\n                checkDeviceInObjects(el.title, el.id) ||\r\n                checkEnumsScip(el.id)\r\n            ) {\r\n                continue;\r\n            }\r\n            let newId = `${selectFolder}`;\r\n            const device = devices.find(device => el.id === device.channelId);\r\n\r\n            if (cloningMethod === 'rooms') {\r\n                if (device.rooms.length) {\r\n                    newId = `${newId}.${device.rooms[0].replace('enum.rooms.', '')}`;\r\n                    if (!objects[newId]) {\r\n                        const newObjFolder = objects[device.rooms[0]];\r\n                        await addNewFolder({\r\n                            objName: newObjFolder.common.name,\r\n                            color: newObjFolder.common.color,\r\n                            icon: newObjFolder.common.icon\r\n                        }, newId);\r\n                        await addDevice(newId, el);\r\n                        continue;\r\n                    }\r\n                }\r\n            } else if (cloningMethod === 'functions') {\r\n                if (device.functions.length) {\r\n                    newId = `${newId}.${device.functions[0].replace('enum.functions.', '')}`;\r\n                    if (!objects[newId]) {\r\n                        const newObjFolder = objects[device.functions[0]];\r\n                        await addNewFolder({\r\n                            objName: newObjFolder.common.name,\r\n                            color: newObjFolder.common.color,\r\n                            icon: newObjFolder.common.icon\r\n                        }, newId);\r\n                        await addDevice(newId, el);\r\n                        continue;\r\n                    }\r\n                }\r\n            }\r\n            await addDevice(newId, el);\r\n        }\r\n    };\r\n\r\n    const onChangeCopy = async () => {\r\n        if (!objects[selectFolder] && selectFolder !== 'alias.0') {\r\n            let parts = selectFolder.split('.');\r\n            parts = parts.pop();\r\n            await addNewFolder({\r\n                name: parts.replace(Utils.FORBIDDEN_CHARS, '_').replace(/\\s/g, '_').replace(/\\./g, '_'),\r\n                color: null,\r\n                icon: null\r\n            }, selectFolder);\r\n        }\r\n        await arrayDeviceFunction();\r\n    };\r\n\r\n    const generateFolders = () => {\r\n        switch (cloningMethod) {\r\n            case 'flat':\r\n                return '';\r\n            case 'rooms':\r\n                return `.{${I18n.t('rooms')}}`;\r\n            case 'functions':\r\n                return `.{${I18n.t('functions')}}`;\r\n            default:\r\n                return '';\r\n        }\r\n    };\r\n\r\n    const renderEnumCell = (id, name) => {\r\n        const device = devices.find(device => id === device.channelId);\r\n        if (!device || (device && !device[name])) {\r\n            return null;\r\n        }\r\n        return device[name].map(id => ({\r\n            icon: Utils.getObjectIcon(id, objects[id]),\r\n            name: Utils.getObjectName(objects, id, { language: I18n.getLanguage() }),\r\n            id\r\n        })).map(obj => <div className={clsx(classes.wrapperIconEnumCell, name === 'rooms' && classes.enumsStyle)} key={obj.id}>\r\n            {obj.icon && <Icon className={classes.enumIcon} src={obj.icon} alt={obj.id} />}\r\n            <div className={classes.nameEnumCell}>{obj.name}</div>\r\n        </div>);\r\n    };\r\n\r\n    const checkDeviceInObjects = (name, id) => {\r\n        const device = devices.find(device => id === device.channelId);\r\n        let newId = `${selectFolder}.${name.replace(Utils.FORBIDDEN_CHARS, '_').replace(/\\s/g, '_').replace(/\\./g, '_')}`;\r\n        if (cloningMethod === 'rooms') {\r\n            if (device.rooms.length) {\r\n                newId = `${selectFolder}.${device.rooms[0].replace('enum.rooms.', '')}.${name.replace(Utils.FORBIDDEN_CHARS, '_').replace(/\\s/g, '_').replace(/\\./g, '_')}`;\r\n            }\r\n        } else if (cloningMethod === 'functions') {\r\n            if (device.functions.length) {\r\n                newId = `${selectFolder}.${device.functions[0].replace('enum.functions.', '')}.${name.replace(Utils.FORBIDDEN_CHARS, '_').replace(/\\s/g, '_').replace(/\\./g, '_')}`;\r\n            }\r\n        }\r\n        return !!objects[newId];\r\n    };\r\n\r\n    const checkEnumsScip = (id) => {\r\n        const device = devices.find(device => id === device.channelId);\r\n\r\n        if (cloningMethod === 'rooms' && skipElement) {\r\n            return !device.rooms.length;\r\n        } else if (cloningMethod === 'functions' && skipElement) {\r\n            return !device.functions.length;\r\n        } else {\r\n            return false;\r\n        }\r\n    };\r\n\r\n    return <ThemeProvider theme={theme(Utils.getThemeName())}>\r\n        <Dialog\r\n            onClose={() => onClose()}\r\n            open={true}\r\n            classes={{ paper: classes.paper }}\r\n        >\r\n            <DialogTitle>{I18n.t('Importer')} {item.title} → {selectFolder}{generateFolders()}</DialogTitle>\r\n            <DialogContent className={classes.overflowHidden} dividers>\r\n                <RenderNewItemDialog\r\n                    classes={classes}\r\n                    object={openEdit}\r\n                    checkDeviceInObjects={checkDeviceInObjects}\r\n                    onClose={name => {\r\n                        if (name) {\r\n                            const indexDevice = arrayDevice.indexOf(openEdit);\r\n                            if (indexDevice !== -1) {\r\n                                const newDevice = JSON.parse(JSON.stringify(openEdit));\r\n                                const newArrayDevice = JSON.parse(JSON.stringify(arrayDevice));\r\n                                newDevice.title = name;\r\n                                newArrayDevice[indexDevice] = newDevice;\r\n                                setArrayDevice(newArrayDevice);\r\n                            }\r\n                        }\r\n                        setOpenEdit(false);\r\n                    }}\r\n                    open={openEdit}\r\n                />\r\n                <div className={classes.divOids}>\r\n                    <div className={clsx(classes.flex, classes.wrapperDevices, startTheProcess && classes.startTheProcess)}>\r\n                        <TreeView\r\n                            themeType={Utils.getThemeType()}\r\n                            theme={theme(Utils.getThemeName())}\r\n                            objects={idsFolder}\r\n                            onAddNew={async (name, parentId) => await addNewFolder({ name, icon: null, color: null }, `${parentId}.${name.replace(Utils.FORBIDDEN_CHARS, '_').replace(/\\s/g, '_').replace(/\\./g, '_')}`)}\r\n                            onSelect={id => setSelectFolder(id)}\r\n                            selected={selectFolder}\r\n                            displayFlex\r\n                            disabled={startTheProcess}\r\n                        />\r\n                    </div>\r\n                    <div className={clsx(classes.flex, classes.wrapperCloning)}>\r\n                        {startTheProcess && <LinearProgress />}\r\n                        <div className={classes.header}>\r\n                            <div className={clsx(classes.headerWrapElement, startTheProcess && classes.startTheProcess)}>\r\n                                <Checkbox\r\n                                    disabled={!arrayDevice.length || startTheProcess}\r\n                                    checked={arrayDevice.length === checkedSelect.length || ((arrayDevice.length !== checkedSelect.length) && checkedSelect.length !== 0)}\r\n                                    indeterminate={(arrayDevice.length !== checkedSelect.length) && checkedSelect.length !== 0}\r\n                                    onChange={() => {\r\n                                        if (arrayDevice.length === checkedSelect.length) {\r\n                                            setCheckedSelect([]);\r\n                                        } else {\r\n                                            const selectId = arrayDevice.map(device => device.id);\r\n                                            setCheckedSelect(selectId);\r\n                                        }\r\n                                    }}\r\n                                />\r\n                                <FormControl className={classes.type}>\r\n                                    <InputLabel>{I18n.t('cloning method')}</InputLabel>\r\n                                    <Select\r\n                                        className={classes.oidField}\r\n                                        fullWidth\r\n                                        disabled={!arrayDevice.length || startTheProcess}\r\n                                        value={cloningMethod}\r\n                                        onChange={e => {\r\n                                            setCloningMethod(e.target.value);\r\n                                        }}\r\n                                    >\r\n                                        <MenuItem value={'flat'}>\r\n                                            {I18n.t('flat')}\r\n                                        </MenuItem>\r\n                                        <MenuItem value={'rooms'}>\r\n                                            {I18n.t('rooms')}\r\n                                        </MenuItem>\r\n                                        <MenuItem value={'functions'}>\r\n                                            {I18n.t('functions')}\r\n                                        </MenuItem>\r\n                                    </Select>\r\n                                </FormControl>\r\n                            </div>\r\n                            {cloningMethod !== 'flat' &&\r\n                                <FormControlLabel\r\n                                    className={classes.formControlLabel}\r\n                                    control={<Checkbox\r\n                                        checked={skipElement}\r\n                                        onChange={() => setSkipElement(!skipElement)}\r\n                                    />}\r\n                                    label={I18n.t('do not export devices without category')}\r\n                                />}\r\n                        </div>\r\n                        <div className={clsx(classes.wrapperItems, startTheProcess && classes.startTheProcess)}>\r\n                            {!arrayDevice.length && <div className={classes.emptyList}>\r\n                                {I18n.t('The list of devices to copy is empty')}\r\n                            </div>}\r\n                            {arrayDevice.map(device => <div className={clsx(classes.deviceWrapper, checkDeviceInObjects(device.title, device.id) && classes.backgroundRed, checkEnumsScip(device.id) && classes.backgroundSilver)} key={device.id}>\r\n                                <div className={classes.wrapperNameAndId}>\r\n                                    <div className={classes.wrapperCheckbox}>\r\n                                        <Checkbox\r\n                                            disabled={checkDeviceInObjects(device.title, device.id) || checkEnumsScip(device.id) || startTheProcess}\r\n                                            checked={checkedSelect.indexOf(device.id) !== -1}\r\n                                            onChange={() => {\r\n                                                const newArray = JSON.parse(JSON.stringify(checkedSelect));\r\n                                                const indexCurrent = checkedSelect.indexOf(device.id);\r\n                                                if (indexCurrent !== -1) {\r\n                                                    newArray.splice(indexCurrent, 1);\r\n                                                    setCheckedSelect(newArray);\r\n                                                } else {\r\n                                                    newArray.push(device.id);\r\n                                                    setCheckedSelect(newArray);\r\n                                                }\r\n                                            }}\r\n                                        />\r\n                                        <div className={classes.tableIcon}>\r\n                                            <TypeIcon src={device.icon} className={classes.tableIconImg} type={device.role} />\r\n                                        </div>\r\n                                        <div className={classes.wrapperTitleAndId}>\r\n                                            <div className={classes.fontStyle}>\r\n                                                {device.title}\r\n                                            </div>\r\n                                            <div className={classes.fontStyleId}>\r\n                                                {device.id}\r\n                                            </div>\r\n                                        </div>\r\n                                        <Tooltip title={I18n.t('Edit')}>\r\n                                            <div>\r\n                                                <IconButton\r\n                                                    onClick={() => setOpenEdit(device)}\r\n                                                    disabled={startTheProcess}\r\n                                                >\r\n                                                    <IconEdit />\r\n                                                </IconButton>\r\n                                            </div>\r\n                                        </Tooltip>\r\n                                    </div>\r\n                                </div>\r\n                                <div className={classes.enumsWrapper}>\r\n                                    {renderEnumCell(device.id, 'functions')}\r\n                                    {renderEnumCell(device.id, 'rooms')}\r\n                                    {/* {checkDeviceInObjects(device.title, device.id)} */}\r\n                                </div>\r\n                            </div>)}\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </DialogContent>\r\n            <DialogActions>\r\n                <Button\r\n                    variant=\"contained\"\r\n                    autoFocus\r\n                    disabled={!checkedSelect.length || startTheProcess}\r\n                    onClick={async () => {\r\n                        setStartTheProcess(true);\r\n                        await onChangeCopy();\r\n                        onClose();\r\n                    }}\r\n                    startIcon={<IconCheck />}\r\n                    color=\"primary\">\r\n                    {I18n.t('Import')}\r\n                </Button>\r\n                <Button\r\n                    variant=\"contained\"\r\n                    disabled={startTheProcess}\r\n                    onClick={() =>\r\n                        onClose()}\r\n                    startIcon={<IconClose />}\r\n                    color=\"default\">\r\n                    {I18n.t('Close')}\r\n                </Button>\r\n            </DialogActions>\r\n        </Dialog>\r\n    </ThemeProvider>;\r\n}\r\n\r\nexport default DialogImporter;","import * as React from 'react';\r\n\r\nexport function useStateLocal(defaultValue, key) {\r\n    const [state, setState] = React.useState(\r\n        window.localStorage.getItem(key) ?\r\n            JSON.parse(window.localStorage.getItem(key))\r\n            :\r\n            defaultValue\r\n    );\r\n\r\n    const eventsToInstall = newValue => {\r\n        window.localStorage.setItem(key, JSON.stringify(newValue));\r\n        setState(newValue);\r\n    };\r\n\r\n    return [state, eventsToInstall, !!window.localStorage.getItem(key)];\r\n}","/**\r\n * Copyright 2019-2021 bluefox <dogafox@gmail.com>\r\n *\r\n * MIT License\r\n *\r\n **/\r\nimport React, { Component, createRef } from 'react';\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport PropTypes from 'prop-types';\r\nimport clsx from 'clsx';\r\nimport { DndProvider } from 'react-dnd';\r\nimport { HTML5Backend } from 'react-dnd-html5-backend';\r\nimport { TouchBackend } from 'react-dnd-touch-backend';\r\n\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport CircularProgress from '@material-ui/core/CircularProgress';\r\nimport Table from '@material-ui/core/Table';\r\nimport TableBody from '@material-ui/core/TableBody';\r\nimport TableCell from '@material-ui/core/TableCell';\r\nimport TableHead from '@material-ui/core/TableHead';\r\nimport TableRow from '@material-ui/core/TableRow';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport ButtonBase from '@material-ui/core/ButtonBase';\r\nimport {Card, InputAdornment, ListItemIcon, TextField, Tooltip, withWidth} from '@material-ui/core';\r\n\r\nimport { MdAdd as IconAdd } from 'react-icons/md';\r\nimport { MdRefresh as IconRefresh } from 'react-icons/md';\r\nimport { MdClear as IconClear } from 'react-icons/md';\r\nimport { FaInfoCircle as IconInfo } from 'react-icons/fa';\r\nimport { MdDelete as IconDelete } from 'react-icons/md';\r\nimport { MdModeEdit as IconEdit } from 'react-icons/md';\r\nimport { FaPowerOff as IconOn } from 'react-icons/fa';\r\nimport { FaThermometerHalf as IconTemperature } from 'react-icons/fa';\r\nimport { FaLongArrowAltUp as IconUp } from 'react-icons/fa';\r\nimport { FaLongArrowAltDown as IconDown } from 'react-icons/fa';\r\nimport { FaPercentage as IconPercentage } from 'react-icons/fa';\r\nimport { FaPalette as IconColor } from 'react-icons/fa';\r\nimport { FaLightbulb as IconBulb } from 'react-icons/fa';\r\nimport { FaLockOpen as IconLock } from 'react-icons/fa';\r\nimport { FaThermometer as IconThermometer } from 'react-icons/fa';\r\nimport { HiLink } from 'react-icons/hi';\r\nimport { FaFolderOpen as IconFolderOpened } from 'react-icons/fa';\r\nimport { FaFolder as IconFolder } from 'react-icons/fa';\r\nimport DvrIcon from '@material-ui/icons/Dvr';\r\nimport FileCopyIcon from '@material-ui/icons/FileCopy';\r\n\r\nimport { Types } from 'iobroker.type-detector';\r\nimport I18n from '@iobroker/adapter-react/i18n';\r\nimport MessageDialog from '@iobroker/adapter-react/Dialogs/Message';\r\nimport Router from '@iobroker/adapter-react/Components/Router';\r\nimport Utils from '@iobroker/adapter-react/Components/Utils';\r\nimport Icon from '@iobroker/adapter-react/Components/Icon';\r\n\r\nimport SmartDetector from '../Devices/SmartDetector';\r\nimport DialogEdit from '../Dialogs/DialogEditDevice';\r\nimport DialogNew from '../Dialogs/DialogNewDevice';\r\nimport SmartGeneric from '../Devices/SmartGeneric';\r\nimport DialogEditEnums from '../Dialogs/DialogEditEnums';\r\nimport TypeIcon from '../Components/TypeIcon';\r\nimport { deleteFolderAndDeviceCallBack } from '../Dialogs/DeleteFolder';\r\nimport DialogEditFolder from '../Dialogs/DialogEditFolder';\r\nimport TYPE_OPTIONS, { ICONS_TYPE } from '../Components/TypeOptions';\r\nimport DragWrapper from '../Components/DragWrapper';\r\nimport DropWrapper from '../Components/DropWrapper';\r\nimport DialogImporter from '../Dialogs/DialogImporter';\r\n\r\nconst colorOn = '#aba613';\r\nconst colorOff = '#444';\r\nconst colorSet = '#00c6ff';\r\nconst colorRead = '#00bc00';\r\n\r\nconst actionsMapping = {\r\n    turnOn: { color: colorOn, icon: IconOn, desc: 'Turn on' },\r\n    turnOff: { color: colorOff, icon: IconOn, desc: 'Turn off' },\r\n\r\n    setTargetTemperature: { color: colorSet, icon: IconTemperature, desc: 'Set target temperature' },\r\n    incrementTargetTemperature: { color: colorOn, icon: IconUp, desc: 'Increment target temperature' },\r\n    decrementTargetTemperature: { color: colorOff, icon: IconDown, desc: 'Decrement target temperature' },\r\n\r\n    setPercentage: { color: colorSet, icon: IconPercentage, desc: 'Set percentage' },\r\n    incrementPercentage: { color: colorOn, icon: IconUp, desc: 'Increment percentage' },\r\n    decrementPercentage: { color: colorOff, icon: IconDown, desc: 'Decrement percentage' },\r\n\r\n    setColor: { color: colorSet, icon: IconColor, desc: 'Set color' },\r\n\r\n    setColorTemperature: { color: colorSet, icon: IconBulb, desc: 'Set color temperature' },\r\n    incrementColorTemperature: { color: colorOn, icon: IconUp, desc: 'Increment color temperature' },\r\n    decrementColorTemperature: { color: colorOff, icon: IconDown, desc: 'Decrement color temperature' },\r\n\r\n    getTargetTemperature: { color: colorRead, icon: IconThermometer, desc: 'Get target temperature' },\r\n    getTemperatureReading: { color: colorRead, icon: IconThermometer, desc: 'Get actual temperature' },\r\n\r\n    setLockState: { color: colorSet, icon: IconLock, desc: 'Set lock state' },\r\n    getLockState: { color: colorRead, icon: IconLock, desc: 'Read lock state' },\r\n};\r\n\r\nconst TYPES_MAPPING = {\r\n    button: 'boolean',\r\n    value: 'number',\r\n    level: 'number',\r\n    indicator: 'boolean',\r\n    action: 'boolean'\r\n};\r\n\r\nconst UNSUPPORTED_TYPES = [\r\n    Types.unknown\r\n];\r\n\r\nfunction getParentId(id) {\r\n    const pos = id.lastIndexOf('.');\r\n    if (pos !== -1) {\r\n        return id.substring(0, pos);\r\n    } else {\r\n        return '';\r\n    }\r\n}\r\n\r\nfunction getLastPart(id) {\r\n    const pos = id.lastIndexOf('.');\r\n    if (pos !== -1) {\r\n        return id.substring(pos + 1);\r\n    } else {\r\n        return id;\r\n    }\r\n}\r\n\r\nconst prepareList = (data, root, objects, keys) => {\r\n    const result = [];\r\n    const ids = Object.keys(data);\r\n    root = root || '';\r\n\r\n    // place common and global scripts at the end\r\n    ids.sort((a, b) => {\r\n        if ((a === 'script.js.common' || a === 'script.js.global') && (b === 'script.js.common' || b === 'script.js.global')) {\r\n            return a > b ? 1 : -1;\r\n        } else if (a === 'script.js.common' || a === 'script.js.global' || b === 'script.js.common' || b === 'script.js.global') {\r\n            return 1;\r\n        } else {\r\n            return a > b ? 1 : -1;\r\n        }\r\n    });\r\n\r\n    for (let i = 0; i < ids.length; i++) {\r\n        const obj = data[ids[i]];\r\n        const parts = ids[i].split('.');\r\n        parts.pop();\r\n        result.push({\r\n            id: obj.obj?._id || ids[i],\r\n            title: Utils.getObjectName(data, ids[i], { language: I18n.getLanguage() }),\r\n            icon: obj.common?.icon || null,\r\n            color: obj.common?.color || null,\r\n            depth: parts.length - 1,\r\n            type: obj.type,\r\n            role: obj.role,\r\n            obj: obj.obj,\r\n            noEdit: !!obj?.noEdit,\r\n            showId: !!obj?.showId,\r\n            importer: !!obj?.importer,\r\n            originalId: obj?.native?.originalId || null,\r\n            parent: parts.length > 2 ? parts.join('.') : null,\r\n            instance: obj.common?.engine ? parseInt(obj.common.engine.split('.').pop(), 10) || 0 : null\r\n        });\r\n    }\r\n\r\n    // Place all folder-less items at start\r\n    result\r\n        .sort((a, b) => {\r\n            if (a.title === b.title) {\r\n                return 0;\r\n            } else {\r\n                return a.title > b.title ? 1 : -1;\r\n            }\r\n        })\r\n        .sort((a, b) => {\r\n            if (a.id === 'alias.0.automatically_detected' && b.type === 'folder') return 1;\r\n            if (b.id === 'alias.0.automatically_detected' && a.type !== 'folder') return -1;\r\n            if (b.id === 'alias.0.automatically_detected' && a.type === 'folder') return -1;\r\n            if (a.id === 'alias.0.linked_devices' && b.type === 'folder') return 1;\r\n            if (b.id === 'alias.0.linked_devices' && a.type !== 'folder') return -1;\r\n            if (b.id === 'alias.0.linked_devices' && a.type === 'folder') return -1;\r\n\r\n            if (!a.parent && a.type !== 'folder' && !b.parent && b.type !== 'folder') {\r\n                if (a.title === b.title) {\r\n                    return 0;\r\n                } else {\r\n                    return a.title > b.title ? 1 : -1;\r\n                }\r\n            }\r\n            else if (!a.parent && a.type !== 'folder') {\r\n                return 1;\r\n            } else if (!b.parent && b.type !== 'folder') {\r\n                return -1;\r\n            }\r\n            return 0;\r\n        });\r\n\r\n    // Fill all index\r\n    result.forEach((item, i) => item.index = i);\r\n\r\n    let modified;\r\n    const regEx = new RegExp('^' + root.replace(/\\./g, '\\\\.'));\r\n    do {\r\n        modified = false;\r\n        // check if all parents exists\r\n\r\n        // eslint-disable-next-line no-loop-func\r\n        result.forEach(item => {\r\n            if (item.parent) {\r\n                const parent = result.find(it => it.id === item.parent);\r\n                if (!parent) {\r\n                    let obj = {};\r\n                    if (item.id.startsWith('linkeddevices.0.')) {\r\n                        const partsLinkedDevices = item.id.split('.');\r\n                        partsLinkedDevices.pop();\r\n                        obj = objects[partsLinkedDevices.join('.')];\r\n                    }\r\n                    const parts = item.parent.split('.');\r\n                    parts.pop();\r\n                    result.push({\r\n                        id: item.parent,\r\n                        title: root ? item.parent.replace(regEx, '') : item.parent.split('.').pop(),\r\n                        depth: parts.length - 1,\r\n                        type: 'folder',\r\n                        obj: obj,\r\n                        noEdit: !!obj?.noEdit,\r\n                        showId: !!obj?.showId,\r\n                        originalId: obj?.native?.originalId || null,\r\n                        importer: !!obj?.importer,\r\n                        parent: parts.length >= 2 ? parts.join('.') : null\r\n                    });\r\n                    modified = true;\r\n                }\r\n            }\r\n        });\r\n    } while (modified);\r\n\r\n    // Fill all parentIndex\r\n    result.forEach(item => {\r\n        if (item.parent) {\r\n            const parent = result.find(it => it.id === item.parent);\r\n            if (parent) {\r\n                item.parentIndex = parent.index;\r\n            }\r\n        }\r\n    });\r\n\r\n    return result;\r\n};\r\n\r\nconst WIDTHS = [\r\n    1100,\r\n    920,\r\n    800,\r\n    710,\r\n    600,\r\n    500\r\n];\r\n\r\nconst ALIAS = 'alias.';\r\nconst LINKEDDEVICES = 'linkeddevices.';\r\nconst IS_CHROME = /Chrome/.test(navigator.userAgent) && /Google Inc/.test(navigator.vendor);\r\n\r\nconst styles = theme => ({\r\n    tab: {\r\n        width: '100%',\r\n        height: '100%'\r\n    },\r\n    column: {\r\n        display: 'inline-block',\r\n        verticalAlign: 'top',\r\n        marginRight: 20,\r\n        height: '100%',\r\n        overflow: 'hidden'\r\n    },\r\n    columnDiv: {\r\n        height: 'calc(100% - 40px)',\r\n        overflow: 'auto',\r\n        minWidth: 300\r\n    },\r\n    filter: {\r\n        margin: 0,\r\n    },\r\n    button: {\r\n        marginRight: 20\r\n    },\r\n    buttonLinkedDevices: {\r\n        background: '#17faff'\r\n    },\r\n    devLineExpand: {\r\n        marginRight: 10,\r\n    },\r\n    devLineEnabled: {\r\n        position: 'absolute',\r\n        right: 0,\r\n        top: 0,\r\n    },\r\n    devLineEdit: {\r\n        position: 'absolute',\r\n        top: 5,\r\n        right: 50\r\n    },\r\n    devLineDelete: {\r\n        position: 'absolute',\r\n        top: 5,\r\n        right: 0\r\n    },\r\n    devLineName: {\r\n\r\n    },\r\n    devLineNumber: {\r\n        display: 'inline-block',\r\n        verticalAlign: 'middle',\r\n        width: 15,\r\n    },\r\n    editedId: {\r\n        fontStyle: 'italic'\r\n    },\r\n    enumLineSubName: {\r\n        fontStyle: 'italic',\r\n    },\r\n    devLine: {\r\n        height: 48,\r\n        width: '100%',\r\n        position: 'relative'\r\n    },\r\n    devLineDescription: {\r\n        display: 'block',\r\n        fontStyle: 'italic',\r\n        fontSize: 12\r\n    },\r\n    devLineActions: {\r\n        fontStyle: 'italic',\r\n        fontSize: 12,\r\n        paddingLeft: 50,\r\n        display: 'inline-block',\r\n    },\r\n    devLineProgress: {\r\n        position: 'absolute',\r\n        top: 0,\r\n        left: 0,\r\n    },\r\n    channelLineActions: {\r\n        width: 80\r\n    },\r\n    devLineNameBlock: {\r\n        display: 'inline-block',\r\n        width: 'calc(100% - 350px)'\r\n    },\r\n    columnHeader: {\r\n        background: theme.palette.primary.light,\r\n        padding: 10,\r\n        color: theme.palette.primary.contrastText\r\n    },\r\n    devModified: {\r\n        fontStyle: 'italic'\r\n    },\r\n    actionIcon: {\r\n        width: 16\r\n    },\r\n\r\n    devSubLine: {\r\n        position: 'relative',\r\n        height: 48\r\n    },\r\n    devSubLineName: {\r\n        marginLeft: 5,\r\n        marginTop: 14,\r\n        display: 'inline-block',\r\n        fontSize: 13,\r\n        width: 'calc(100% - 400px)'\r\n    },\r\n    devSubSubLineName: {\r\n        fontSize: 8,\r\n        fontStyle: 'italic',\r\n        display: 'block'\r\n    },\r\n    devSubLineByOn: {\r\n        marginLeft: 5\r\n    },\r\n    devSubLineDelete: {\r\n        position: 'absolute',\r\n        top: 12,\r\n        right: 12,\r\n        padding: 0\r\n    },\r\n    devSubLineEdit: {\r\n        position: 'absolute',\r\n        top: 12,\r\n        right: 62,\r\n        padding: 0\r\n    },\r\n    devSubLineTypeTitle: {\r\n        marginTop: 0\r\n    },\r\n    orderSelector: {\r\n        marginRight: 10,\r\n    },\r\n    paperTable: {\r\n        width: '100%',\r\n        height: 'calc(100% - 57px)',\r\n        overflowX: 'hidden',\r\n        overflowY: 'auto',\r\n        marginTop: 5,\r\n    },\r\n    tableLine: {\r\n        height: 50,\r\n        '&:hover': {\r\n            background: `#3399cccc !important`,\r\n            '& *': {\r\n                color: '#ffffff !important'\r\n            }\r\n        }\r\n    },\r\n    tableIconImg: {\r\n        width: 20,\r\n        height: 20,\r\n        color: theme.palette.type === 'dark' ? '#FFF' : '#000',\r\n    },\r\n    tableIcon: {\r\n        width: 32,\r\n        height: 32,\r\n        display: 'flex',\r\n        padding: 2,\r\n        background: theme.palette.type === 'dark' ? '#3b3b3b' : '#e0e0e0',\r\n        borderRadius: 3,\r\n        alignItems: 'center',\r\n        justifyContent: 'center'\r\n    },\r\n    tableNameCell: {\r\n        whiteSpace: 'nowrap',\r\n        width: IS_CHROME ? undefined : 150,\r\n        textOverflow: 'ellipsis',\r\n    },\r\n    tableSmartName: {\r\n        fontSize: 10,\r\n        opacity: 0.8,\r\n    },\r\n    tableIdCell: {\r\n        whiteSpace: 'nowrap',\r\n        textOverflow: 'ellipsis',\r\n        maxWidth: 150,\r\n        overflow: 'hidden',\r\n        direction: 'rtl',\r\n        textAlign: 'left'\r\n    },\r\n    headerCell: {\r\n        fontWeight: 'bold'\r\n    },\r\n    tableExpandIconCell: {\r\n        padding: 0,\r\n        width: 40,\r\n    },\r\n    tableIconCell: {\r\n        padding: 0,\r\n        width: 40\r\n    },\r\n    tableEditButtonCell: {\r\n        padding: 0,\r\n        width: 40,\r\n    },\r\n    buttonsCellHeader: {\r\n        width: 90,\r\n    },\r\n    buttonsCell: {\r\n        width: IS_CHROME ? undefined : 90,\r\n        padding: '0 !important',\r\n    },\r\n    tableGroup: {\r\n        background: theme.palette.secondary.main,\r\n        borderTop: '5px solid ' + theme.palette.background.paper,\r\n    },\r\n    tableGroupCell: {\r\n        fontWeight: 'bold',\r\n        fontSize: 18,\r\n        color: '#FFF',\r\n        cursor: 'pointer',\r\n        textTransform: 'uppercase'\r\n    },\r\n    tableExpandIcon: {\r\n        marginRight: 5,\r\n        marginLeft: 10,\r\n        marginTop: 6,\r\n        color: '#FFF',\r\n        width: 20,\r\n        height: 20,\r\n        cursor: 'pointer',\r\n    },\r\n    tableGroupIcon: {\r\n        height: 20,\r\n        marginRight: 5,\r\n        color: '#ffffff'\r\n    },\r\n\r\n    enumsEdit: {\r\n        minHeight: 20,\r\n        minWidth: 100,\r\n        textAlign: 'left',\r\n        justifyContent: 'left',\r\n        padding: 3,\r\n        '&:hover, &$focusVisible': {\r\n            zIndex: 1,\r\n            opacity: 0.7,\r\n            borderRadius: 3,\r\n            background: 'gray'\r\n        },\r\n    },\r\n    enumsEditFocusVisible: {},\r\n    wrapperIcon: {\r\n        margin: '5px 0',\r\n        display: 'flex'\r\n    },\r\n    emptyClear: {\r\n        width: 32\r\n    },\r\n    icons: {\r\n        display: 'flex',\r\n        width: '100%'\r\n    },\r\n    wrapperButton: {\r\n        marginRight: 10,\r\n        display: 'flex',\r\n        justifyContent: 'flex-end'\r\n    },\r\n    emptyBlock: {\r\n        width: 48\r\n    },\r\n    displayFlex: {\r\n        display: 'flex',\r\n        alignItems: 'center'\r\n    },\r\n    iconCommon: {\r\n        width: 20,\r\n        height: 20,\r\n        position: 'absolute',\r\n        top: 10,\r\n        left: 8,\r\n        opacity: 0.8\r\n    },\r\n    iconStyle: {\r\n        position: 'relative',\r\n        minWidth: 36\r\n    },\r\n    fontStyle: {\r\n        // maxWidth: 160,\r\n        whiteSpace: 'nowrap',\r\n        overflow: 'hidden',\r\n        textOverflow: 'ellipsis',\r\n        fontWeight: 'bold'\r\n    },\r\n    wrapperTitleAndId: {\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        overflow: 'hidden'\r\n    },\r\n    fontStyleId: {\r\n        whiteSpace: 'nowrap',\r\n        overflow: 'hidden',\r\n        textOverflow: 'ellipsis',\r\n        fontWeight: 'bold',\r\n        fontSize: 9,\r\n        opacity: 0.6,\r\n        fontStyle: 'italic'\r\n    },\r\n    wrapperIconEnumCell: {\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n        marginLeft: 3,\r\n        marginRight: 3\r\n    },\r\n    enumIcon: {\r\n        width: 16,\r\n        height: 16,\r\n    },\r\n    nameEnumCell: {\r\n        marginLeft: 3\r\n    },\r\n    emptyBlockFlex: {\r\n        flexGrow: 1\r\n    },\r\n    wrapperName: {\r\n        fontWeight: 800,\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n        marginRight: 10\r\n    },\r\n    table: {\r\n        '& th': {\r\n            background: theme.name === 'dark' ? '#202020' : theme.name === 'blue' ? '#22292d' : 'white'\r\n        }\r\n    },\r\n    spaceBetween: {\r\n        justifyContent: 'space-between'\r\n\r\n    },\r\n    iconWrapper: {\r\n        display: 'flex',\r\n        alignItems: 'center'\r\n    },\r\n    iconStyleType: {\r\n        width: 16,\r\n        height: 16,\r\n        margin: '0 3px'\r\n    },\r\n    emptyIcon: {\r\n        width: 16,\r\n        height: 16,\r\n        margin: '0 3px'\r\n    },\r\n    typeCellNameAndIcon: {\r\n        display: 'flex',\r\n        alignItems: 'center'\r\n    },\r\n    iconOpen: {\r\n        transform: 'skew(147deg, 183deg) scale(0.5) translate(-43px, 11px)'\r\n    },\r\n    hoverRow: {\r\n        '&:hover:after': {\r\n            width: '100%',\r\n        },\r\n        position: 'relative',\r\n        transform: 'scale(1)',\r\n        '&:after': {\r\n            content: '\"\"',\r\n            position: 'absolute',\r\n            top: 0,\r\n            left: 0,\r\n            height: '100%',\r\n            background: '#ffffff36',\r\n            pointerEvents: 'none'\r\n        }\r\n    }\r\n});\r\n\r\nclass ListDevices extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        if (!actionsMapping.translated) {\r\n            Object.keys(actionsMapping).forEach(a => actionsMapping[a].desc = I18n.t(actionsMapping[a].desc));\r\n            actionsMapping.translated = true;\r\n        }\r\n        const location = Router.getLocation();\r\n\r\n        let expanded = window.localStorage.getItem('Devices.expanded') || '[]';\r\n        try {\r\n            expanded = JSON.parse(expanded);\r\n        } catch (e) {\r\n            expanded = [];\r\n        }\r\n\r\n        let expandedIDs = window.localStorage ? window.localStorage.getItem('IDs.expanded') : '';\r\n        try {\r\n            expandedIDs = expandedIDs ? JSON.parse(expandedIDs) || null : null;\r\n        } catch (e) {\r\n            expandedIDs = null;\r\n        }\r\n\r\n        // if (expanded === null) {\r\n        //     expanded = [];\r\n        //     listItems.forEach(item =>\r\n        //         expanded.includes(item.parent) && expanded.push(item.parent));\r\n        // }\r\n\r\n        this.state = {\r\n            editId: location.dialog === 'edit' ? location.id : null,\r\n            copyId: null,\r\n            // deleteIndex: null,\r\n            deleteId: '',\r\n            editEnum: null,\r\n            listItems: [],\r\n            expandedIDs,\r\n\r\n            windowWidth: window.innerWidth,\r\n            showAddDialog: '',\r\n            showConfirmation: '',\r\n            changed: [],\r\n            devices: [],\r\n            message: '',\r\n            loading: true,\r\n            browse: false,\r\n            expanded,\r\n            orderBy: window.localStorage.getItem('Devices.orderBy') || 'IDs',\r\n            lastChanged: '',\r\n            linkeddevices: '',\r\n            iot: '',\r\n            iotNoCommon: false,\r\n            showImporterDialog: null,\r\n            showEditFolder: null,\r\n            // onlyAliases: window.localStorage.getItem('Devices.onlyAliases') ? JSON.parse(window.localStorage.getItem('Devices.onlyAliases')) : true,\r\n            onlyAliases: false,\r\n            hideInfo: window.localStorage.getItem('Devices.hideInfo') ? JSON.parse(window.localStorage.getItem('Devices.hideInfo')) : true,\r\n            updating: [],\r\n        };\r\n\r\n        this.inputRef = createRef();\r\n\r\n        this.filter = window.localStorage.getItem('Devices.filter') || '';\r\n\r\n        this.timerChanged = null;\r\n\r\n        this.waitForUpdateID = null;\r\n\r\n        this.objects = {};\r\n        this.states = {};\r\n        this.instances = [];\r\n        this.enumObj = {};\r\n\r\n        this.subscribes = {};\r\n        this.onUpdateBound = this.onUpdate.bind(this);\r\n\r\n        this.detector = new SmartDetector();\r\n        this.patterns = this.detector.getPatterns();\r\n\r\n        // read if linkeddevices installed\r\n        this.props.socket.getAdapterInstances('linkeddevices')\r\n            .catch(e => [])\r\n            .then(linkedDevices => {\r\n                // read if iot installed\r\n                this.props.socket.getAdapterInstances('iot')\r\n                    .catch(e => [])\r\n                    .then(iot => {\r\n                        const newState = {};\r\n                        let changed = false;\r\n                        // always take the first one\r\n                        if (linkedDevices && linkedDevices.length && linkedDevices[0] && linkedDevices[0]._id) {\r\n                            newState.linkeddevices = linkedDevices[0]._id.replace('system.adapter.', '') || '';\r\n                            changed = true;\r\n                        }\r\n                        if (iot && iot.length && iot[0] && iot[0]._id) {\r\n                            newState.iotNoCommon = iot[0].native && iot[0].native.noCommon;\r\n                            newState.iot = iot[0]._id.replace('system.adapter.', '') || '';\r\n                            changed = true;\r\n                        }\r\n                        changed && this.setState(newState);\r\n                    });\r\n\r\n                this.detectDevices();\r\n            });\r\n    }\r\n\r\n    setStateAsync(newState) {\r\n        return new Promise(resolve => this.setState(newState, () => resolve()));\r\n    }\r\n\r\n    componentDidMount() {\r\n        window.addEventListener('resize', this.onResize, false);\r\n        this.props.socket.subscribeObject('*', this.onObjectChanged);\r\n        window.addEventListener('hashchange', this.onHashChange, false);\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        window.removeEventListener('resize', this.onResize, false);\r\n        window.removeEventListener('hashchange', this.onHashChange, false);\r\n        this.props.socket.unsubscribeObject('*', this.onObjectChanged);\r\n        this.updateTimeout && clearTimeout(this.updateTimeout);\r\n        this.updateTimeout = null;\r\n        this.resizeTimer && clearTimeout(this.resizeTimer);\r\n        this.resizeTimer = null;\r\n    }\r\n\r\n    onHashChange = () => {\r\n        const location = Router.getLocation();\r\n        if (location.dialog === 'edit' && location.id && location.id !== this.state.editId) {\r\n            this.setState({ editId: location.id });\r\n        }\r\n    }\r\n\r\n    onObjectChanged = (id, obj) => {\r\n        if (this.state.loading) {\r\n            return;\r\n        }\r\n\r\n        if (!obj) {\r\n            if (this.objects[id]) {\r\n                delete this.objects[id];\r\n            }\r\n        } else {\r\n            this.objects[id] = obj;\r\n        }\r\n\r\n        this.updateTimeout && clearTimeout(this.updateTimeout);\r\n        this.updateTimeout = setTimeout(async () => {\r\n            this.updateTimeout = null;\r\n            await this.updateListItems();\r\n        }, 300);\r\n    };\r\n\r\n    onResize = () => {\r\n        this.resizeTimer && clearTimeout(this.resizeTimer);\r\n        this.resizeTimer = setTimeout(() => {\r\n            this.resizeTimer = null;\r\n            this.setState({ windowWidth: window.innerWidth });\r\n        }, 300);\r\n    }\r\n\r\n    updateListItems = async () => {\r\n        const idsInEnums = [];\r\n\r\n        this.enumIDs.forEach(en => {\r\n            const e = this.enumObj[en];\r\n            e?.common?.members && e.common.members.forEach(id =>\r\n                !idsInEnums.includes(id) && idsInEnums.push(id));\r\n        });\r\n\r\n        // List all devices in aliases\r\n        const keys = Object.keys(this.objects).sort();\r\n\r\n        for (let i = 0; i < keys.length; i++) {\r\n            if (keys[i] < ALIAS) {\r\n                // go to the next\r\n            } else\r\n            if (keys[i] > LINKEDDEVICES + '\\u9999') {\r\n                break;\r\n            } else\r\n            if ((keys[i].startsWith(ALIAS) || keys[i].startsWith(LINKEDDEVICES)) && this.objects[keys[i]] && !idsInEnums.includes(keys[i])) {\r\n                if (this.objects[keys[i]].type === 'device') {\r\n                    idsInEnums.push(keys[i]);\r\n                } else if (this.objects[keys[i]].type === 'channel') {\r\n                    const parts = keys[i].split('.');\r\n                    parts.pop();\r\n\r\n                    const parentId = parts.join('.');\r\n                    // if parent was not yet included\r\n                    if (!this.objects[parentId] || !idsInEnums.includes(parentId)) {\r\n                        idsInEnums.push(keys[i]);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        idsInEnums.sort();\r\n\r\n        const _usedIdsOptional = [];\r\n        const devices = [];\r\n        idsInEnums.forEach(id => {\r\n            const result = this.detector.detect({ id, objects: this.objects, _usedIdsOptional, _keysOptional: keys });\r\n            result && result.forEach(device => devices.push(device));\r\n        });\r\n\r\n        const funcEnums = this.enumIDs.filter(id => id.startsWith('enum.functions.'));\r\n        const roomsEnums = this.enumIDs.filter(id => id.startsWith('enum.rooms.'));\r\n\r\n        // find channelID for every device\r\n        devices.map(device =>\r\n            this.updateEnumsForOneDevice(device, funcEnums, roomsEnums));\r\n\r\n        const listItems = this.onObjectsGenerate(this.objects || {}, JSON.parse(JSON.stringify(devices)));\r\n\r\n        let expandedIDs = this.state.expandedIDs;\r\n        if (expandedIDs === null) {\r\n            expandedIDs = [];\r\n            listItems.forEach(item =>\r\n                expandedIDs.includes(item.parent) && expandedIDs.push(item.parent));\r\n        }\r\n\r\n        await this.setStateAsync({ devices, expandedIDs, listItems, loading: false, browse: false });\r\n\r\n        if (this.editCreatedId && this.objects[this.editCreatedId]) {\r\n            const id = this.editCreatedId;\r\n            this.editCreatedId = null;\r\n            Router.doNavigate('list', 'edit', id);\r\n        }\r\n    }\r\n\r\n    async detectDevices() {\r\n        // read objects\r\n        await this.setStateAsync({ browse: true });\r\n\r\n        this.instances = await this.props.socket.getAdapters();\r\n        this.objects = await this.props.socket.getObjects(true);\r\n        const enums = await this.props.socket.getEnums();\r\n        this.enumIDs = Object.keys(enums).sort();\r\n        this.enumObj = enums;\r\n\r\n        await this.updateListItems();\r\n    }\r\n\r\n    onObjectsGenerate = (objects, devices) => {\r\n        this.prefix = this.props.prefix || 'alias.0';\r\n\r\n        let keys = Object.keys(objects).sort();\r\n\r\n        const prefix = this.prefix.startsWith('alias.') ? this.prefix.replace(/\\d+$/, '') : this.prefix; // alias.0 => alias.\r\n\r\n        const ids = [];\r\n\r\n        for (let j = 0; j < keys.length; j++) {\r\n            const id = keys[j];\r\n            if (id < prefix) {\r\n\r\n            } else\r\n            if (id.startsWith(prefix) &&\r\n                objects[id] &&\r\n                objects[id].common &&\r\n                (objects[id].type === 'channel' || objects[id].type === 'device' || objects[id].type === 'folder')\r\n            ) {\r\n                let parentId;\r\n                // getParentId\r\n                if (objects[id].type === 'channel' || objects[id].type === 'device' || objects[id].type === 'folder') {\r\n                    parentId = id;\r\n                } else {\r\n                    parentId = getParentId(id);\r\n                }\r\n\r\n                if (parentId && !ids.includes(parentId)) {\r\n                    ids.push(parentId);\r\n                }\r\n            } else\r\n            if (id > prefix + '\\u9999') {\r\n                break;\r\n            }\r\n        }\r\n\r\n        this.typesWords = {};\r\n\r\n        Object.keys(Types)\r\n            .filter(id => !UNSUPPORTED_TYPES.includes(id))\r\n            .forEach(typeId => this.typesWords[typeId] = I18n.t('type-' + Types[typeId]));\r\n\r\n        // sort types by ABC in the current language\r\n        this.types = Object.keys(this.typesWords).sort((a, b) => {\r\n            if (this.typesWords[a] === this.typesWords[b]) {\r\n                return 0;\r\n            } else\r\n            if (this.typesWords[a] > this.typesWords[b]) {\r\n                return 1;\r\n            } else {\r\n                return -1;\r\n            }\r\n        });\r\n\r\n        const stateIds = {};\r\n        const language = I18n.getLanguage();\r\n        ids.forEach(id => {\r\n            stateIds[id] = {\r\n                common: {\r\n                    name: objects[id]?.type === 'folder' ? Utils.getObjectName(objects, id, { language }) : getLastPart(id),\r\n                    nondeletable: true,\r\n                    color: objects[id]?.common?.color || null,\r\n                    icon: objects[id]?.common?.icon || this.searchIcon(id.channelId)\r\n                },\r\n                obj: objects[id],\r\n                type: objects[id].type,\r\n                role: objects[id].type !== 'folder' && objects[id].common ? objects[id].common.role || null : null\r\n            };\r\n        });\r\n\r\n        stateIds[`${this.prefix}.automatically_detected`] = {\r\n            common: {\r\n                name: I18n.t('Automatically detected'),\r\n                nondeletable: true,\r\n                noEdit: true,\r\n                showId: true,\r\n            },\r\n            type: 'folder'\r\n        };\r\n\r\n        let devicesArr = devices || this.state.devices;\r\n\r\n        devicesArr = devicesArr.filter(({ channelId }) => !channelId.startsWith('alias.0') && !channelId.startsWith('linkeddevices.0'));\r\n\r\n        devicesArr.forEach(device => {\r\n            let parts = device.channelId.split('.');\r\n            const name = `${parts[0]}.${parts[1]}`;\r\n            parts = `${parts[0]}`;\r\n            if (!stateIds[`${this.prefix}.automatically_detected.${parts}`]) {\r\n                const instances = this.instances.find(inst => inst._id.replace('system.adapter.', '') === parts);\r\n                stateIds[`${this.prefix}.automatically_detected.${parts}`] = {\r\n                    common: {\r\n                        name,\r\n                        nondeletable: true,\r\n                        icon: instances?.common?.extIcon || this.searchIcon(device.channelId)\r\n                    },\r\n                    noEdit: true,\r\n                    importer: true,\r\n                    showId: true,\r\n                    // obj:instances,\r\n                    type: 'folder'\r\n                };\r\n            }\r\n        });\r\n\r\n        devicesArr.forEach(device => {\r\n            let parts = device.channelId.split('.');\r\n            parts = `${parts[0]}`;\r\n            stateIds[`${this.prefix}.automatically_detected.${parts}.${device.channelId.replace(/[\\s.,%]/g, '')}`] = {\r\n                common: {\r\n                    name: Utils.getObjectName(objects, device.channelId, { language }),\r\n                    nondeletable: true,\r\n                    color: objects[device.channelId]?.common && objects[device.channelId].common.color ? objects[device.channelId].common.color : null,\r\n                    icon: objects[device.channelId]?.common && objects[device.channelId].common.icon ? objects[device.channelId].common.icon : this.searchIcon(device.channelId)\r\n                },\r\n                obj: objects[device.channelId],\r\n                type: objects[device.channelId]?.type,\r\n                role: device.type\r\n            };\r\n        });\r\n\r\n        if (this.state.linkeddevices) {\r\n            let devicesArrLinkeddevices = devices || this.state.devices;\r\n\r\n            devicesArrLinkeddevices = devicesArrLinkeddevices.filter(({ channelId }) => channelId.startsWith('linkeddevices.0'));\r\n            stateIds[`${this.prefix}.linked_devices`] = {\r\n                common: {\r\n                    name: I18n.t('Linked devices'),\r\n                    nondeletable: true,\r\n                    noEdit: true,\r\n                    showId: true,\r\n                    icon: <HiLink style={{ color: 'black' }} className={this.props.classes.iconCommon}\r\n                    />\r\n                },\r\n                type: 'folder'\r\n            };\r\n\r\n            devicesArrLinkeddevices.forEach(device => {\r\n                stateIds[`${this.prefix}.linked_devices.${device.channelId.replace('linkeddevices.0.', '')}`] = {\r\n                    common: {\r\n                        name: Utils.getObjectName(objects, device.channelId, { language }),\r\n                        nondeletable: true,\r\n                        color: objects[device.channelId]?.common && objects[device.channelId].common.color ? objects[device.channelId].common.color : null,\r\n                        icon: objects[device.channelId]?.common && objects[device.channelId].common.icon ? objects[device.channelId].common.icon : this.searchIcon(device.channelId)\r\n                    },\r\n                    obj: objects[device.channelId],\r\n                    type: objects[device.channelId]?.type,\r\n                    role: device.type\r\n                }\r\n            });\r\n        }\r\n\r\n        return prepareList(stateIds, null, this.object, keys);\r\n    }\r\n\r\n    updateEnumsForOneDevice(device, funcEnums, roomsEnums) {\r\n        funcEnums = funcEnums || this.enumIDs.filter(id => id.startsWith('enum.functions.'));\r\n        roomsEnums = roomsEnums || this.enumIDs.filter(id => id.startsWith('enum.rooms.'));\r\n        if (!device) {\r\n            return;\r\n        }\r\n        const stateId = device.states.find(state => state.id).id;\r\n        let statesCount = device.states.filter(state => state.id).length;\r\n        const pos = stateId.lastIndexOf('.');\r\n        let channelId = stateId;\r\n        if (pos !== -1 && (statesCount > 1 || channelId.startsWith(ALIAS) || channelId.startsWith(LINKEDDEVICES))) {\r\n            channelId = stateId.substring(0, pos);\r\n            if (!this.objects[channelId] ||\r\n                !this.objects[channelId].common ||\r\n                (this.objects[channelId].type !== 'channel' && this.objects[channelId].type !== 'device')) {\r\n                channelId = stateId;\r\n            }\r\n        }\r\n        device.usedStates = device.states.filter(state => state.id).length;\r\n        device.mainStateId = stateId;\r\n        device.channelId = channelId;\r\n\r\n        const functions = funcEnums.filter(id => {\r\n            const obj = this.objects[id];\r\n            return obj &&\r\n                obj.common &&\r\n                obj.common.members &&\r\n                (obj.common.members.includes(device.channelId) ||\r\n                    obj.common.members.includes(device.mainStateId));\r\n        });\r\n\r\n        const rooms = roomsEnums.filter(id => {\r\n            const obj = this.objects[id];\r\n            return obj &&\r\n                obj.common &&\r\n                obj.common.members &&\r\n                (obj.common.members.includes(device.channelId) ||\r\n                    obj.common.members.includes(device.mainStateId));\r\n        });\r\n\r\n        device.functions = functions;\r\n        device.functionsNames = functions.map(id => Utils.getObjectNameFromObj(this.objects[id], null, { language: I18n.getLanguage() })).join(', ');\r\n        device.rooms = rooms;\r\n        device.roomsNames = rooms.map(id => Utils.getObjectNameFromObj(this.objects[id], null, { language: I18n.getLanguage() })).join(', ');\r\n        device.name = SmartGeneric.getObjectName(this.objects, device.channelId, null, null, this.enumIDs);\r\n\r\n        device.icon = Utils.getObjectIcon(device.channelId, this.objects[device.channelId]) || this.searchIcon(device.channelId);\r\n\r\n        device.color = this.objects[channelId]?.common?.color || null;\r\n        if (!device.icon) {\r\n            const parts = device.channelId.split('.');\r\n            parts.pop();\r\n            const deviceId = parts.join('.');\r\n\r\n            if (this.objects[deviceId] && (this.objects[deviceId].type === 'channel' || this.objects[deviceId].type === 'device')) {\r\n                device.icon = Utils.getObjectIcon(deviceId, this.objects[deviceId]) || this.searchIcon(device.channelId);\r\n            }\r\n        }\r\n    }\r\n\r\n    searchIcon = (channelId) => {\r\n        if (!this.objects) {\r\n            return null;\r\n        }\r\n        let icon = null;\r\n        if (channelId) {\r\n            // check the parent\r\n            if (channelId && channelId.split('.').length > 2) {\r\n                const channelObj = this.objects[channelId];\r\n                if (channelObj && (channelObj.type === 'channel' || channelObj.type === 'device' || channelObj.type === 'state')) {\r\n                    if (channelObj.common?.icon) {\r\n                        icon = channelObj.common?.icon;\r\n                    } else {\r\n                        // check the parent\r\n                        const deviceId = Utils.getParentId(channelId);\r\n                        if (deviceId && deviceId.split('.').length > 2) {\r\n                            const arrayParent = deviceId.split('.');\r\n                            let parentId = deviceId;\r\n                            for (let i = 0; i < arrayParent.length - 2; i++) {\r\n                                const deviceObj = this.objects[parentId];\r\n                                if (deviceObj && (deviceObj.type === 'channel' || deviceObj.type === 'device')) {\r\n                                    if (deviceObj.common?.icon) {\r\n                                        icon = deviceObj.common?.icon;\r\n                                        break;\r\n                                    }\r\n                                }\r\n                                parentId = Utils.getParentId(parentId);\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        let imagePrefix = '../..';\r\n\r\n        const objects = this.objects;\r\n        const cIcon = icon;\r\n        const id = channelId;\r\n\r\n        if (cIcon && !cIcon.startsWith('data:image/') && cIcon.includes('.')) {\r\n            let instance;\r\n            if (objects[id].type === 'instance' || objects[id].type === 'adapter') {\r\n                icon = `${imagePrefix}/adapter/${objects[id].common.name}/${cIcon}`;\r\n            } else if (id && id.startsWith('system.adapter.')) {\r\n                instance = id.split('.', 3);\r\n                if (cIcon[0] === '/') {\r\n                    instance[2] += cIcon;\r\n                } else {\r\n                    instance[2] += '/' + cIcon;\r\n                }\r\n                icon = `${imagePrefix}/adapter/${instance[2]}`;\r\n            } else {\r\n                instance = id.split('.', 2);\r\n                if (cIcon[0] === '/') {\r\n                    instance[0] += cIcon;\r\n                } else {\r\n                    instance[0] += '/' + cIcon;\r\n                }\r\n                icon = `${imagePrefix}/adapter/${instance[0]}`;\r\n            }\r\n        }\r\n        return icon;\r\n    }\r\n\r\n    addChanged(id, cb) {\r\n        const changed = JSON.parse(JSON.stringify(this.state.changed));\r\n        if (!changed.includes(id)) {\r\n            changed.push(id);\r\n            this.setState({ changed }, () => cb && cb());\r\n        } else {\r\n            cb && cb();\r\n        }\r\n    }\r\n\r\n    removeChanged(id) {\r\n        const changed = JSON.parse(JSON.stringify(this.state.changed));\r\n        const pos = changed.indexOf(id);\r\n\r\n        if (pos !== -1) {\r\n            changed.splice(pos, 1);\r\n            this.setState({ changed });\r\n        }\r\n    }\r\n\r\n    renderMessage() {\r\n        if (this.state.message) {\r\n            return <MessageDialog text={this.state.message} onClose={() => this.setState({ message: '' })} />;\r\n        } else {\r\n            return null;\r\n        }\r\n    }\r\n\r\n    onUpdate(id, state) {\r\n        if (this.subscribes[id]) {\r\n            this.states[id] = state;\r\n            this.subscribes[id].forEach(elem => elem.updateState(id, state));\r\n        }\r\n    }\r\n\r\n    onEdit(editId, e) {\r\n        e && e.preventDefault();\r\n        e && e.stopPropagation();\r\n        Router.doNavigate('list', 'edit', editId.toString());\r\n        this.setState({ editId });\r\n    }\r\n\r\n    onCopy(copyId, e) {\r\n        e && e.preventDefault();\r\n        e && e.stopPropagation();\r\n        this.setState({ copyId, showAddDialog: ALIAS + '0' });\r\n    }\r\n\r\n    isFilteredOut(device) {\r\n        if (this.state.orderBy === 'IDs') {\r\n            if (this.filter &&\r\n                // device.type !== 'folder' &&\r\n                !Utils.getObjectNameFromObj(device.obj, I18n.getLanguage()).toLowerCase().includes(this.filter.toLowerCase()) &&\r\n                !device.id.toLowerCase().includes(this.filter.toLowerCase())\r\n            ) {\r\n                return true;\r\n            } else {\r\n                const deviceAllparams = this.state.devices.find(el => el.channelId === device.id);\r\n                return this.state.hideInfo && deviceAllparams && deviceAllparams.type === Types.info;\r\n            }\r\n        } else\r\n        if (this.filter &&\r\n            !device.channelId.toLowerCase().includes(this.filter) &&\r\n            !device.name.toLowerCase().includes(this.filter)) {\r\n            return true;\r\n        } else {\r\n            return !!(this.state.hideInfo && device.type === Types.info);\r\n        }\r\n    }\r\n\r\n    onEditEnum(values, enums, index) {\r\n        this.setState({ editEnum: { values, enums, index } });\r\n    }\r\n\r\n    renderEnumCell(names, values, enums, index) {\r\n        const objs = values.map(id => ({\r\n            icon: Utils.getObjectIcon(id, this.objects[id]),\r\n            name: Utils.getObjectName(this.objects, id, { language: I18n.getLanguage() }),\r\n            id\r\n        }));\r\n\r\n        return <ButtonBase\r\n            focusRipple\r\n            onClick={() => this.onEditEnum(values, enums, index)}\r\n            className={this.props.classes.enumsEdit}\r\n            focusVisibleClassName={this.props.classes.enumsEditFocusVisible}\r\n        >{\r\n            objs.map(obj =>\r\n                <div className={this.props.classes.wrapperIconEnumCell} key={obj.id}>\r\n                    {obj.icon && <Icon className={this.props.classes.enumIcon} src={obj.icon} alt={obj.id} />}\r\n                    <div className={this.props.classes.nameEnumCell}>{obj.name}</div>\r\n                </div>)\r\n        }\r\n        </ButtonBase>;\r\n    }\r\n\r\n    renderTypeCell(type) {\r\n        return <div className={clsx(this.props.classes.wrapperIconEnumCell, this.props.classes.spaceBetween)}>\r\n            <div className={this.props.classes.typeCellNameAndIcon}>\r\n                <TypeIcon className={this.props.classes.enumIcon} type={type} />\r\n                <div className={this.props.classes.nameEnumCell}>{I18n.t('type-' + type)}</div>\r\n            </div>\r\n            <div className={this.props.classes.iconWrapper}>\r\n                {Object.keys(TYPE_OPTIONS[type])\r\n                    .map(key => TYPE_OPTIONS[type][key] ?\r\n                        <Icon key={key} className={this.props.classes.iconStyleType} src={ICONS_TYPE[key]} title={I18n.t('Supported by \"%s\"', key)}/> :\r\n                        <div key={key} className={this.props.classes.emptyIcon} />\r\n                    )\r\n                }\r\n            </div>\r\n        </div>;\r\n    }\r\n\r\n    saveExpanded(expandedIDs) {\r\n        window.localStorage.setItem('IDs.expanded', JSON.stringify(expandedIDs || this.state.expandedIDs));\r\n    }\r\n\r\n    toggleExpanded(id, open) {\r\n        const expandedIDs = this.state.expandedIDs.slice();\r\n        const pos = expandedIDs.indexOf(id);\r\n        if (pos === -1) {\r\n            expandedIDs.push(id);\r\n            expandedIDs.sort();\r\n        } else if (!open) {\r\n            expandedIDs.splice(pos, 1);\r\n        }\r\n        this.setState({ expandedIDs });\r\n        this.saveExpanded(expandedIDs);\r\n    }\r\n\r\n    getTextStyle(item) {\r\n        if (item.type !== 'folder') {\r\n            return {\r\n                //width: 130,\r\n                // width: `calc(100% - ${this.state.width > 350 ? 210 : 165}px)`,\r\n                overflow: 'hidden',\r\n                whiteSpace: 'nowrap',\r\n                // flex: 'none',\r\n                padding: '0 16px 0 16px'\r\n            };\r\n        } else {\r\n            const style = {\r\n                whiteSpace: 'nowrap',\r\n                padding: '0 16px 0 16px'\r\n            };\r\n            if (item.id === this.state.selected) {\r\n                style.fontWeight = 'bold'\r\n            }\r\n\r\n            return style;\r\n        }\r\n    }\r\n\r\n    renderOneItem(items, item) {\r\n        let childrenFiltered = (this.state.searchText || this.state.typeFilter) && items.filter(i => i.parent === item.id ? !this.isFilteredOut(i) : false);\r\n        let children = items.filter(i => i.parent === item.id);\r\n        let childrenFilter = items.filter(i => i.parent === item.id).filter(i => !this.isFilteredOut(i));\r\n        if (this.isFilteredOut(item)) {\r\n            if (this.filter && !childrenFilter.length) {\r\n                return\r\n            } else if (!this.filter) {\r\n                return;\r\n            }\r\n        }\r\n\r\n        if (item.type === 'folder' && (this.state.searchText || this.state.typeFilter) && !childrenFiltered.length) {\r\n            return;\r\n        }\r\n\r\n        const depthPx = item.depth * 20 + 10;\r\n\r\n        let title = item.title;\r\n\r\n        if (this.state.searchText) {\r\n            const pos = title.toLowerCase().indexOf(this.state.searchText.toLowerCase());\r\n            if (pos !== -1) {\r\n                title = [\r\n                    <span key=\"first\">{title.substring(0, pos)}</span>,\r\n                    <span key=\"second\" style={{ color: 'orange' }}>{title.substring(pos, pos + this.state.searchText.length)}</span>,\r\n                    <span key=\"third\">{title.substring(pos + this.state.searchText.length)}</span>,\r\n                ];\r\n            }\r\n        }\r\n\r\n        const style = Object.assign({\r\n            paddingLeft: depthPx,\r\n            // borderRadius: 3,\r\n            cursor: item.type === 'folder' && this.state.reorder ? 'default' : 'pointer',\r\n            opacity: item.filteredPartly ? 0.5 : 1,\r\n        }, item.id === this.state.selected ? { background: this.props.theme.palette.secondary.dark, color: '#FFF' } : {});\r\n\r\n        let isExpanded = false;\r\n        if (children && children.length) {\r\n            isExpanded = this.state.expandedIDs.includes(item.id);\r\n        }\r\n\r\n        let iconStyle = {};\r\n        let countSpan = (childrenFiltered && childrenFiltered.length) || children.length ?\r\n            <span className={this.props.classes.childrenCount}>{childrenFiltered && childrenFiltered.length !== children.length ?\r\n                `${childrenFiltered.length}(${children.length})` :\r\n                children.length}</span>\r\n            : null;\r\n\r\n        const searchStyle = {};\r\n\r\n        if (!countSpan) {\r\n            iconStyle.opacity = 0.5;\r\n        }\r\n        if (!countSpan && item.type === 'folder') {\r\n            searchStyle.opacity = 0.5;\r\n        }\r\n\r\n        if (item.id === this.state.selected) {\r\n            iconStyle.opacity = 1;\r\n        }\r\n        if (this.filter && childrenFilter.length && item.type === 'folder') {\r\n            searchStyle.opacity = 0.5;\r\n            iconStyle.opacity = 0.5;\r\n        }\r\n        iconStyle.color = '#448dde';\r\n        iconStyle.width = 36;\r\n        iconStyle.height = 36;\r\n\r\n        let backgroundRow = null;\r\n\r\n        if (item.id === 'alias.0.automatically_detected') {\r\n            iconStyle.color = '#F1C40F';\r\n            backgroundRow = '#f1c40f33';\r\n        } else\r\n        if (item.id === 'alias.0.linked_devices') {\r\n            iconStyle.color = '#E67E22';\r\n            backgroundRow = '#e67e2233';\r\n        } else\r\n        if ((item.id === 'alias.0.automatically_detected' || item.id === 'alias.0.linked_devices') && !countSpan) {\r\n            return;\r\n        }\r\n\r\n        const classes = this.props.classes;\r\n        let background = null;\r\n        let color = null;\r\n        let index = null;\r\n\r\n        const device = this.state.devices.find(el => el.channelId === item.id);\r\n        const deviceIdx = this.state.devices.indexOf(device);\r\n        const roomsEnums = this.enumIDs.filter(id => id.startsWith('enum.rooms.'));\r\n        const funcEnums = this.enumIDs.filter(id => id.startsWith('enum.functions.'));\r\n\r\n        if (device) {\r\n            background = this.objects[device.channelId] && this.objects[device.channelId].common && this.objects[device.channelId].common.color;\r\n            color = Utils.invertColor(background, true);\r\n            index = this.state.devices.indexOf(device);\r\n        } else {\r\n            background = item.color;\r\n            color = Utils.invertColor(background, true);\r\n        }\r\n\r\n        if (background && item.type === 'folder') {\r\n            iconStyle.color = background;\r\n            // background = null;\r\n            // color = null;\r\n        }\r\n\r\n        let j = 0;\r\n        const WrapperRow = item.type !== 'folder' ? DragWrapper : DropWrapper;\r\n        const inner = <WrapperRow\r\n            id={item.id}\r\n            // style={{ background: backgroundRow }}\r\n            objects={this.objects}\r\n            deleteDevice={this.deleteDevice}\r\n            onCopyDevice={this.onCopyDevice}\r\n            openFolder={() => this.toggleExpanded(item.id, true)}\r\n            deviceIdx={deviceIdx}\r\n            backgroundRow={backgroundRow}\r\n            className={this.props.classes.hoverRow}\r\n            key={item.id || title}\r\n            padding=\"default\" >\r\n            <TableCell\r\n                colSpan={3}\r\n                style={Object.assign({ maxWidth: 300 }, style)}\r\n                onDoubleClick={() => this.toggleExpanded(item.id)}\r\n                className={Utils.clsx(item.type === 'folder' ? this.props.classes.folder : this.props.classes.element, this.state.reorder && this.props.classes.reorder)}\r\n            >\r\n                <div className={classes.displayFlex}>\r\n                    <ListItemIcon className={this.props.classes.iconStyle}>\r\n                        {item.type === 'folder' ?\r\n                            (isExpanded ?\r\n                                <IconFolderOpened onClick={() => this.toggleExpanded(item.id)} style={iconStyle} /> :\r\n                                <IconFolder onClick={() => this.toggleExpanded(item.id)} style={iconStyle} />)\r\n                            :\r\n                            <div style={{ background }} className={this.props.classes.tableIcon}>\r\n                                <TypeIcon src={item.icon} style={{ color }} className={this.props.classes.tableIconImg} type={item.role} />\r\n                            </div>}\r\n                        {item.type === 'folder' && item.icon &&\r\n                            <div className={clsx(isExpanded && this.props.classes.iconOpen)} onClick={() => this.toggleExpanded(item.id)}>\r\n                                <Icon className={this.props.classes.iconCommon} onClick={() => this.toggleExpanded(item.id)} alt={item.type} src={item.icon} />\r\n                            </div>}\r\n                    </ListItemIcon>\r\n                    <Tooltip title={<div>\r\n                        <div>{`${I18n.t(\"Name\")}: ${title}`}</div>\r\n                        {!item.showId && item.id !== \"alias.0.automatically_detected\" && item.id !== \"alias.0.linked_devices\" &&\r\n                            <div>{`${I18n.t(\"Id\")}: ${item.id}`}</div>\r\n                        }\r\n                    </div>}>\r\n                        <div className={this.props.classes.wrapperTitleAndId}>\r\n                            <div\r\n                                style={Object.assign(searchStyle, this.getTextStyle(item))}\r\n                                className={clsx(item.id === this.state.selected && this.props.classes.selected, this.props.classes.fontStyle)}\r\n                            >{title}</div>\r\n                            {!item.showId && item.id !== \"alias.0.automatically_detected\" && item.id !== \"alias.0.linked_devices\" && <div\r\n                                style={Object.assign(searchStyle, this.getTextStyle(item))}\r\n                                className={clsx(item.id === this.state.selected && this.props.classes.selected, this.props.classes.fontStyleId)}\r\n                            >{item.id}</div>}\r\n                        </div>\r\n                    </Tooltip>\r\n                    {/* <ListItemSecondaryAction style={{ color: item.id === this.state.selected ? 'white' : 'inherit' }}>{countSpan}</ListItemSecondaryAction> */}\r\n                </div>\r\n            </TableCell>\r\n            {/* <TableCell  /> */}\r\n            {/* <TableCell style={{ color }} className={classes.tableNameCell}>{item.id}</TableCell> */}\r\n            {device && this.state.windowWidth >= WIDTHS[1 + j++] ? <TableCell>{this.renderEnumCell(device.functionsNames, device.functions, funcEnums, index)}</TableCell> : null}\r\n\r\n            {device && this.state.windowWidth >= WIDTHS[1 + j++] ? <TableCell>\r\n                {this.renderEnumCell(device.roomsNames, device.rooms, roomsEnums, index)}\r\n            </TableCell> : null}\r\n            {device && this.state.windowWidth >= WIDTHS[1 + j++] ? <TableCell>{this.renderTypeCell(device.type)}</TableCell> : null}\r\n            {device && this.state.windowWidth >= WIDTHS[0] ? <TableCell>{device.usedStates}</TableCell> : null}\r\n            {device && <TableCell align=\"right\" className={classes.buttonsCell}>\r\n                <div className={classes.wrapperButton}>\r\n                    <Tooltip title={I18n.t('Copy device')}>\r\n                        <IconButton\r\n                            // size=\"small\"\r\n                            onClick={e => this.onCopy(item.id, e)}\r\n                        >\r\n                            <FileCopyIcon />\r\n                        </IconButton>\r\n                    </Tooltip>\r\n                    <Tooltip title={I18n.t('Edit states')}>\r\n                        <IconButton\r\n                            // size=\"small\"\r\n                            onClick={e => this.onEdit(item.id, e)}\r\n                        >\r\n                            <IconEdit />\r\n                        </IconButton>\r\n                    </Tooltip>\r\n                    {(device.channelId.startsWith(ALIAS) || device.channelId.startsWith(LINKEDDEVICES)) ?\r\n                        <Tooltip title={I18n.t('Delete device with all states')}>\r\n                            <IconButton\r\n                                onClick={e =>\r\n                                    deleteFolderAndDeviceCallBack(result =>\r\n                                        result && this.deleteDevice(index), true)}\r\n                            >\r\n                                <IconDelete />\r\n                            </IconButton>\r\n                        </Tooltip> : <div className={classes.emptyBlock} />}\r\n\r\n                </div>\r\n            </TableCell>}\r\n            {!device && this.state.windowWidth >= WIDTHS[1 + j++] && <TableCell colSpan={1} />}\r\n            {!device && this.state.windowWidth >= WIDTHS[1 + j++] && <TableCell colSpan={1} />}\r\n            {!device && this.state.windowWidth >= WIDTHS[1 + j++] && <TableCell colSpan={1} />}\r\n            {!device && this.state.windowWidth >= WIDTHS[0] && <TableCell colSpan={1} >{countSpan}</TableCell>}\r\n            {!device && <TableCell align=\"right\" className={classes.buttonsCell}>\r\n                {item.importer &&\r\n                    <div className={classes.wrapperButton}>\r\n                        <Tooltip title={I18n.t('Importer')}>\r\n                            <IconButton\r\n                                onClick={() => this.setState({ showImporterDialog: item })}\r\n                            >\r\n                                <FileCopyIcon />\r\n                            </IconButton>\r\n                        </Tooltip>\r\n                        <div className={classes.emptyBlock} />\r\n                        <div className={classes.emptyBlock} />\r\n                    </div>}\r\n                {!item.noEdit && item.id !== \"alias.0.automatically_detected\" && item.id !== \"alias.0.linked_devices\" && <div className={classes.wrapperButton}>\r\n                    <Tooltip title={I18n.t('Edit folder')}>\r\n                        <IconButton\r\n                            onClick={_ => this.setState({ showEditFolder: item.obj })}\r\n                        // onClick={e => editFolderCallBack(item.obj, bool => {\r\n                        //     bool && this.detectDevices(true);\r\n                        // }, this.props.socket,\r\n                        //     this.state.devices,\r\n                        //     this.objects,\r\n                        //     this.deleteDevice,\r\n                        //     this.processTasks)}\r\n                        >\r\n                            <IconEdit />\r\n                        </IconButton>\r\n                    </Tooltip>\r\n                    {!countSpan ?\r\n                        <Tooltip title={I18n.t('Delete folder')}>\r\n                            <IconButton\r\n                                onClick={e =>\r\n                                    deleteFolderAndDeviceCallBack(result =>\r\n                                        result && this.props.socket.delObjects(item.id, true), false)}\r\n                            >\r\n                                <IconDelete />\r\n                            </IconButton>\r\n                        </Tooltip> : <div className={classes.emptyBlock} />}\r\n                </div>}\r\n            </TableCell>}\r\n        </WrapperRow>;\r\n\r\n        const result = [inner];\r\n\r\n        if (isExpanded) {\r\n            children.forEach(it => result.push(this.renderOneItem(items, it)));\r\n        }\r\n        return result;\r\n    }\r\n\r\n    renderAllItems(items, dragging) {\r\n        const result = [];\r\n        items.forEach(item => !item.parent && result.push(this.renderOneItem(items, item, dragging)));\r\n\r\n        return result;\r\n    }\r\n\r\n    renderDevices() {\r\n        // let result = [];\r\n        const classes = this.props.classes;\r\n        // const funcEnums = this.enumIDs.filter(id => id.startsWith('enum.functions.'));\r\n        // const roomsEnums = this.enumIDs.filter(id => id.startsWith('enum.rooms.'));\r\n\r\n        // if (this.state.orderBy === 'functions' || this.state.orderBy === 'rooms') {\r\n        //     const enums = [];\r\n        //     for (let i = 0; i < this.enumIDs.length; i++) {\r\n        //         const id = this.enumIDs[i];\r\n        //         if (id.startsWith('enum.' + this.state.orderBy + '.')) {\r\n        //             enums.push(id);\r\n\r\n        //             // find any device for this function\r\n        //             if (this.state.devices.find(device => !this.isFilteredOut(device) && device[this.state.orderBy].includes(id))) {\r\n        //                 const isExpanded = this.state.expanded.includes(id);\r\n        //                 const icon = Utils.getObjectIcon(id, this.objects[id]);\r\n\r\n        //                 let j = 0;\r\n        //                 // add group\r\n        //                 result.push(<TableRow\r\n        //                     key={id}\r\n        //                     className={classes.tableGroup}\r\n        //                     onClick={() => this.onToggle(id)}\r\n        //                     padding=\"none\"\r\n        //                 >\r\n        //                     <TableCell className={classes.tableExpandIconCell}>{isExpanded ? <IconExpanded className={classes.tableExpandIcon} /> : <IconCollapsed className={classes.tableExpandIcon} />}</TableCell>\r\n        //                     <TableCell className={classes.tableIconCell}>{icon ? <img src={icon} alt=\"\" className={classes.tableGroupIcon} /> : null}</TableCell>\r\n        //                     <TableCell className={classes.tableGroupCell + ' ' + classes.tableNameCell}>{Utils.getObjectNameFromObj(this.objects[id], null, { language: I18n.getLanguage() })}</TableCell>\r\n        //                     <TableCell />\r\n        //                     {this.state.windowWidth >= WIDTHS[4] ? <TableCell /> : null}\r\n        //                     {this.state.orderBy !== 'functions' && this.state.windowWidth >= WIDTHS[1 + j++] ? <TableCell /> : null}\r\n        //                     {this.state.orderBy !== 'rooms' && this.state.windowWidth >= WIDTHS[1 + j++] ? <TableCell /> : null}\r\n        //                     {this.state.orderBy !== 'types' && this.state.windowWidth >= WIDTHS[1 + j++] ? <TableCell /> : null}\r\n        //                     {this.state.windowWidth >= WIDTHS[0] ? <TableCell /> : null}\r\n        //                     <TableCell className={classes.buttonsCell} />\r\n        //                 </TableRow>);\r\n\r\n        //                 if (isExpanded) {\r\n        //                     const devices = [];\r\n\r\n        //                     this.state.devices.forEach((device, i) =>\r\n        //                         device[this.state.orderBy].includes(id) && !this.isFilteredOut(device) && devices.push(this.renderDevice(id + '_' + i, i, device, funcEnums, roomsEnums)));\r\n\r\n        //                     result.push(devices);\r\n        //                 }\r\n        //             }\r\n        //         }\r\n        //     }\r\n\r\n        //     // No group\r\n        //     if (this.state.devices.find(device => !this.isFilteredOut(device) && !enums.find(id => device[this.state.orderBy].includes(id)))) {\r\n        //         let j = 0;\r\n        //         const isExpanded = this.state.expanded.includes('no_group');\r\n        //         // add group\r\n        //         result.push(<TableRow\r\n        //             key=\"no_group\"\r\n        //             className={classes.tableGroup}\r\n        //             onClick={() => this.onToggle('no_group')}\r\n        //             padding=\"none\">\r\n        //             <TableCell className={classes.tableExpandIconCell}>{isExpanded ? <IconExpanded className={classes.tableExpandIcon} /> : <IconCollapsed className={classes.tableExpandIcon} />}</TableCell>\r\n        //             <TableCell className={classes.tableIconCell} />\r\n        //             <TableCell className={classes.tableGroupCell + ' ' + classes.tableNameCell}>{I18n.t('no_group')}</TableCell>\r\n        //             <TableCell />\r\n        //             {this.state.windowWidth >= WIDTHS[4] ? <TableCell /> : null}\r\n        //             {this.state.orderBy !== 'functions' && this.state.windowWidth >= WIDTHS[1 + j++] ? <TableCell /> : null}\r\n        //             {this.state.orderBy !== 'rooms' && this.state.windowWidth >= WIDTHS[1 + j++] ? <TableCell /> : null}\r\n        //             {this.state.orderBy !== 'types' && this.state.windowWidth >= WIDTHS[1 + j++] ? <TableCell /> : null}\r\n        //             {this.state.windowWidth >= WIDTHS[0] ? <TableCell /> : null}\r\n        //             <TableCell className={classes.buttonsCell} />\r\n        //         </TableRow>);\r\n\r\n        //         if (isExpanded) {\r\n        //             const devices = [];\r\n        //             this.state.devices.forEach((device, i) =>\r\n        //                 !this.isFilteredOut(device) && !enums.find(id => device[this.state.orderBy].includes(id)) && devices.push(this.renderDevice('no_group_' + i, i, device, funcEnums, roomsEnums)));\r\n\r\n        //             result.push(devices);\r\n        //         }\r\n        //     }\r\n        // } else\r\n        //     if (this.state.orderBy === 'types') {\r\n        //         const types = [];\r\n        //         this.state.devices.forEach(device => !this.isFilteredOut(device) && !types.includes(device.type) && types.push(device.type));\r\n        //         types.sort();\r\n\r\n        //         types.forEach(type => {\r\n        //             const isExpanded = this.state.expanded.includes(type);\r\n        //             let j = 0;\r\n        //             // add group\r\n        //             result.push(<TableRow\r\n        //                 key={type}\r\n        //                 className={classes.tableGroup}\r\n        //                 onClick={() => this.onToggle(type)}\r\n        //                 padding=\"default\"\r\n        //             >\r\n        //                 <TableCell className={classes.tableExpandIconCell}>{isExpanded ? <IconExpanded className={classes.tableExpandIcon} /> : <IconCollapsed className={classes.tableExpandIcon} />}</TableCell>\r\n        //                 <TableCell className={classes.tableIconCell}><TypeIcon className={classes.tableIconImg} type={type} /></TableCell>\r\n        //                 <TableCell className={classes.tableGroupCell + ' ' + classes.tableNameCell}>{I18n.t('type-' + type)}</TableCell>\r\n        //                 <TableCell />\r\n        //                 {this.state.windowWidth >= WIDTHS[4] ? <TableCell /> : null}\r\n        //                 {this.state.orderBy !== 'functions' && this.state.windowWidth >= WIDTHS[1 + j++] ? <TableCell /> : null}\r\n        //                 {this.state.orderBy !== 'rooms' && this.state.windowWidth >= WIDTHS[1 + j++] ? <TableCell /> : null}\r\n        //                 {this.state.orderBy !== 'types' && this.state.windowWidth >= WIDTHS[1 + j++] ? <TableCell /> : null}\r\n        //                 {this.state.windowWidth >= WIDTHS[0] ? <TableCell /> : null}\r\n        //                 <TableCell className={classes.buttonsCell} />\r\n        //             </TableRow>);\r\n\r\n        //             if (isExpanded) {\r\n        //                 // find all devices for this type\r\n        //                 const devices = [];\r\n        //                 this.state.devices.forEach((device, i) =>\r\n        //                     !this.isFilteredOut(device) && device.type === type && devices.push(this.renderDevice('type_' + i, i, device, funcEnums, roomsEnums)));\r\n\r\n        //                 result.push(devices);\r\n        //             }\r\n        //         });\r\n        //     } else if (this.state.orderBy === 'IDs') {\r\n        //         result = this.renderAllItems(this.state.listItems);\r\n        //     } else {\r\n        //         for (let i = 0; i < this.state.devices.length; i++) {\r\n        //             if (!this.isFilteredOut(this.state.devices[i])) {\r\n        //                 result.push(this.renderDevice('dev_' + i, i, this.state.devices[i], funcEnums, roomsEnums));\r\n        //             }\r\n        //         }\r\n        //     }\r\n\r\n        let j = 0;\r\n\r\n        return <Paper className={classes.paperTable}>\r\n            <Table stickyHeader className={classes.table} size=\"small\">\r\n                <TableHead>\r\n                    <TableRow>\r\n                        <TableCell className={classes.tableExpandIconCell} />\r\n                        <TableCell className={classes.tableIconCell} />\r\n                        <TableCell className={classes.headerCell + ' ' + classes.tableNameCell}>{I18n.t('Name')}</TableCell>\r\n                        {/* <TableCell /> */}\r\n                        {this.state.orderBy !== 'IDs' && this.state.windowWidth >= WIDTHS[4] ? <TableCell className={classes.headerCell}>{I18n.t('ID')}</TableCell> : null}\r\n                        {this.state.orderBy !== 'functions' && this.state.windowWidth >= WIDTHS[1 + j++] ? <TableCell className={classes.headerCell}>{I18n.t('Function')}</TableCell> : null}\r\n                        {this.state.orderBy !== 'rooms' && this.state.windowWidth >= WIDTHS[1 + j++] ? <TableCell className={classes.headerCell}>{I18n.t('Room')}</TableCell> : null}\r\n                        {this.state.orderBy !== 'types' && this.state.windowWidth >= WIDTHS[1 + j++] ? <TableCell className={classes.headerCell}>{I18n.t('Type')}</TableCell> : null}\r\n                        {this.state.windowWidth >= WIDTHS[0] ? <TableCell style={{ width: 50 }} className={classes.headerCell}>{I18n.t('States')}</TableCell> : null}\r\n                        <TableCell className={classes.headerCell + ' ' + classes.buttonsCellHeader} />\r\n                    </TableRow>\r\n                </TableHead>\r\n                <TableBody>{this.renderAllItems(this.state.listItems)}</TableBody>\r\n            </Table>\r\n        </Paper>;\r\n\r\n        //return (<div key=\"listDevices\" className={classes.columnDiv}>{result}</div>);\r\n    }\r\n\r\n    onExpand(group) {\r\n        if (!this.state.expanded.includes(group)) {\r\n            const expanded = JSON.parse(JSON.stringify(this.state.expanded));\r\n            expanded.push(group);\r\n            window.localStorage.setItem('Devices.expanded', JSON.stringify(expanded));\r\n            this.setState({ expanded });\r\n        }\r\n    }\r\n\r\n    onCollapse(group) {\r\n        const pos = this.state.expanded.indexOf(group);\r\n        if (pos !== -1) {\r\n            const expanded = JSON.parse(JSON.stringify(this.state.expanded));\r\n            expanded.splice(pos, 1);\r\n            window.localStorage.setItem('Devices.expanded', JSON.stringify(expanded));\r\n            this.setState({ expanded });\r\n        }\r\n    }\r\n\r\n    onToggle(group) {\r\n        if (!this.state.expanded.includes(group)) {\r\n            this.onExpand(group);\r\n        } else {\r\n            this.onCollapse(group);\r\n        }\r\n    }\r\n\r\n    setSmartName(obj, newSmartName, language) {\r\n        // set smartName\r\n        language = language || I18n.getLanguage();\r\n        if (newSmartName || newSmartName === false) {\r\n            if (this.state.iotNoCommon) {\r\n                const iot = this.state.iot || 'iot.0';\r\n                obj.common.custom = obj.common.custom || {};\r\n                obj.common.custom[iot] = obj.common.custom[iot] || {};\r\n                obj.common.custom[iot].smartName = obj.common.custom[iot].smartName || {};\r\n                obj.common.custom[iot].smartName[language] = newSmartName;\r\n            } else {\r\n                obj.common.smartName = obj.common.smartName || {};\r\n                obj.common.smartName[language] = newSmartName;\r\n            }\r\n        } else {\r\n            if (this.state.iotNoCommon) {\r\n                const iot = this.state.iot || 'iot.0';\r\n                if (obj.common.custom && obj.common.custom[iot]) {\r\n                    obj.common.custom[iot].smartName[language] = '';\r\n                }\r\n            } else {\r\n                if (obj.common.smartName) {\r\n                    obj.common.smartName[language] = '';\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    getSmartName(obj, language) {\r\n        language = language || I18n.getLanguage();\r\n        let smartName;\r\n        if (obj &&\r\n            obj.common &&\r\n            obj.common.custom) {\r\n            if (this.state.iotNoCommon) {\r\n                const iot = this.state.iot || 'iot.0';\r\n                if (obj.common.custom[iot] && obj.common.custom[iot].smartName) {\r\n                    smartName = obj.common.custom[iot].smartName;\r\n                }\r\n            } else {\r\n                smartName = obj.common.smartName;\r\n            }\r\n        }\r\n\r\n        if (smartName && typeof smartName === 'object') {\r\n            smartName = smartName[language] || smartName.en || '';\r\n        }\r\n        return smartName || '';\r\n    }\r\n\r\n    addToEnum = async (enumId, id) => {\r\n        const obj = await this.props.socket.getObject(enumId);\r\n        if (obj && obj.common) {\r\n            obj.common.members = obj.common.members || [];\r\n            if (!obj.common.members.includes(id)) {\r\n                obj.common.members.push(id);\r\n                obj.common.members.sort();\r\n                return this.props.socket.setObject(enumId, obj);\r\n            }\r\n        }\r\n    }\r\n\r\n    removeFromEnum = async (enumId, id) => {\r\n        const obj = await this.props.socket.getObject(enumId);\r\n\r\n        if (obj?.common?.members) {\r\n            const pos = obj.common.members.indexOf(id);\r\n            if (pos !== -1) {\r\n                obj.common.members.splice(pos, 1);\r\n                await this.props.socket.setObject(enumId, obj);\r\n            }\r\n        }\r\n    }\r\n\r\n    processTasks = async tasks => {\r\n        for (let t = 0; t < tasks.length; t++) {\r\n            const task = tasks[t];\r\n\r\n            if (task.obj) {\r\n                if (task.enums) {\r\n                    for (let i = 0; i < task.enums.length; i++) {\r\n                        let enumId = task.enums[i];\r\n                        try {\r\n                            await this.addToEnum(enumId, task.id);\r\n                        } catch (e) {\r\n                            window.alert('Cannot change enum: ' + e);\r\n                        }\r\n                    }\r\n                }\r\n\r\n                try {\r\n                    await this.props.socket.setObject(task.id, task.obj);\r\n                } catch (e) {\r\n                    window.alert('Cannot change object: ' + e);\r\n                }\r\n            } else {\r\n                // delete\r\n                if (task.enums) {\r\n                    for (let i = 0; i < task.enums.length; i++) {\r\n                        let enumId = task.enums[i];\r\n                        try {\r\n                            await this.removeFromEnum(enumId, task.id);\r\n                        } catch (e) {\r\n                            window.alert('Cannot change enum: ' + e);\r\n                        }\r\n                    }\r\n                }\r\n\r\n            }\r\n        }\r\n    }\r\n\r\n    onCopyDevice = async (id, newChannelId) => {\r\n        // if this is device not from linkeddevice or from alias\r\n        const copyDevice = this.state.devices.find(device => device.channelId === id);\r\n\r\n        if (!copyDevice) {\r\n            return;\r\n        }\r\n\r\n        const channelId = copyDevice.channelId;\r\n        const isAlias = channelId.startsWith('alias.') || channelId.startsWith('linkeddevices.');\r\n\r\n        const channelObj = this.objects[channelId];\r\n        const { functions, rooms, icon, states, color, type } = copyDevice;\r\n        const tasks = [];\r\n\r\n        const obj = {\r\n            id: newChannelId,\r\n            obj: {\r\n                common: {\r\n                    name: channelObj.common.name,\r\n                    color,\r\n                    desc: channelObj.common.desc,\r\n                    role: type,\r\n                    icon: icon && icon.startsWith('adapter/') ? `../../${icon}` : icon,\r\n                },\r\n                native: {},\r\n                type: 'channel'\r\n            },\r\n            enums: rooms.concat(functions)\r\n        }\r\n\r\n        if (!obj.obj.common.color) {\r\n            delete obj.obj.common.color;\r\n        }\r\n\r\n        if (!isAlias) {\r\n            obj.obj.native.originalId = id;\r\n        }\r\n\r\n        tasks.push(obj);\r\n\r\n        states.forEach(state => {\r\n            if (!state.id) {\r\n                return;\r\n            }\r\n            const obj = JSON.parse(JSON.stringify(this.objects[state.id]));\r\n            obj._id = newChannelId + '.' + state.name;\r\n\r\n            obj.native = {};\r\n\r\n            if (!isAlias) {\r\n                obj.common.alias = { id: state.id };\r\n            }\r\n\r\n            tasks.push({ id: obj._id, obj });\r\n        });\r\n\r\n        await this.processTasks(tasks);\r\n    }\r\n\r\n    onEditFinished = async (data, refresh, cb) => {\r\n        let somethingChanged = false;\r\n        const device = this.state.devices.find(({ channelId }) => channelId === this.state.editId);\r\n        if (data) {\r\n            // const device = this.state.devices[this.state.editIndex];\r\n            const channelId = device.channelId;\r\n\r\n            if (channelId.startsWith(ALIAS)) {\r\n                for (let s = 0; s < device.states.length; s++) {\r\n                    const state = device.states[s];\r\n                    const obj = await this.props.socket.getObject(state.id);\r\n                    if (state.id && obj && obj.common && obj.common.alias) {\r\n                        if (data.ids[state.name] !== obj.common.alias.id ||\r\n                            obj.common.alias.read !== data.fx[state.name].read ||\r\n                            obj.common.alias.write !== data.fx[state.name].write) {\r\n                            // update alias ID\r\n                            if (!state.required && !data.ids[state.name]) {\r\n                                // delete state\r\n                                await this.props.socket.delObject(state.id);\r\n                            } else {\r\n                                // update state\r\n                                const stateObj = await this.props.socket.getObject(state.id);\r\n                                stateObj.common = stateObj.common || {};\r\n                                stateObj.common.alias = stateObj.common.alias || {};\r\n                                stateObj.common.alias.id = data.ids[state.name];\r\n                                if (!data.fx[state.name].read) {\r\n                                    delete stateObj.common.alias.read;\r\n                                } else {\r\n                                    stateObj.common.alias.read = data.fx[state.name].read;\r\n                                }\r\n                                if (!data.fx[state.name].write) {\r\n                                    delete stateObj.common.alias.write;\r\n                                } else {\r\n                                    stateObj.common.alias.write = data.fx[state.name].write;\r\n                                }\r\n                                await this.props.socket.setObject(stateObj._id, stateObj);\r\n                            }\r\n                        } // else nothing changed\r\n                    } else if (data.ids[state.name]) {\r\n                        state.id = state.id || (channelId + '.' + state.name);\r\n\r\n                        // Object not yet exists or invalid\r\n                        let stateObj;\r\n                        try {\r\n                            stateObj = await this.props.socket.getObject(state.id);\r\n                        } catch (e) {\r\n\r\n                        }\r\n                        stateObj = stateObj || {};\r\n                        stateObj._id = state.id;\r\n                        stateObj.native = stateObj.native || {};\r\n                        stateObj.type = 'state';\r\n                        stateObj.common = stateObj.common || {};\r\n                        const common = stateObj.common;\r\n                        common.alias = common.alias || {};\r\n                        common.alias.id = data.ids[state.name];\r\n                        common.name = common.name || state.name;\r\n                        common.role = state.defaultRole;\r\n                        if (state.read !== undefined) {\r\n                            common.read = state.read;\r\n                        }\r\n                        if (state.write !== undefined) {\r\n                            common.write = state.write;\r\n                        }\r\n\r\n                        if (state.defaultStates) {\r\n                            common.states = state.defaultStates;\r\n                        }\r\n\r\n                        if (data.fx[state.name].read) {\r\n                            stateObj.common.alias.read = data.fx[state.name].read;\r\n                        }\r\n                        if (data.fx[state.name].write) {\r\n                            stateObj.common.alias.write = data.fx[state.name].write;\r\n                        }\r\n\r\n                        common.type = state.type ? (typeof state.type === 'object' ? state.type[0] : state.type) : TYPES_MAPPING[state.defaultRole.split('.')[0]] || 'state';\r\n\r\n                        if (state.defaultMin !== undefined) {\r\n                            common.min = state.defaultMin;\r\n                        } else\r\n                        if (state.min !== undefined) {\r\n                            common.min = 0;\r\n                        }\r\n\r\n                        if (state.defaultMax !== undefined) {\r\n                            common.max = state.defaultMax;\r\n                        } else\r\n                        if (state.max !== undefined) {\r\n                            common.max = 100;\r\n                        }\r\n\r\n                        if (state.defaultUnit) {\r\n                            common.unit = state.defaultUnit;\r\n                        } else if (state.unit) {\r\n                            common.unit = state.unit;\r\n                        }\r\n                        somethingChanged = true;\r\n                        await this.props.socket.setObject(stateObj._id, stateObj);\r\n                    }\r\n                }\r\n            } else\r\n            if (channelId.startsWith(LINKEDDEVICES)) {\r\n                for (let s = 0; s < device.states.length; s++) {\r\n                    let state = device.states[s];\r\n                    const obj = await this.props.socket.getObject(state.id);\r\n                    let attrs;\r\n                    if (state.id && obj && obj.common && obj.common.custom && (attrs = Object.keys(obj.common.custom).filter(id => id.startsWith(LINKEDDEVICES))).length) {\r\n                        const attr = attrs[0];\r\n                        if (data.ids[state.name] !== obj.common.custom[attr].parentId ||\r\n                            !obj.common.custom[attr].enabled ||\r\n                            !obj.common.custom[attr].isLinked) {\r\n                            // update alias ID\r\n                            if (!state.required && !data.ids[state.name]) {\r\n                                // delete state\r\n                                await this.props.socket.delObject(state.id);\r\n                                somethingChanged = true;\r\n                            } else {\r\n                                // update state\r\n                                const stateObj = await this.props.socket.getObject(state.id);\r\n                                stateObj.common = stateObj.common || {};\r\n                                stateObj.common.custom = stateObj.common.custom || {};\r\n                                stateObj.common.custom[attr] = stateObj.common.custom[attr] || {};\r\n                                stateObj.common.custom[attr].parentId = data.ids[state.name];\r\n                                stateObj.common.custom[attr].enabled = true;\r\n                                stateObj.common.custom[attr].isLinked = true;\r\n                                somethingChanged = true;\r\n                                await this.props.socket.setObject(stateObj._id, stateObj);\r\n                            }\r\n                        } // else nothing changed\r\n                    } else if (data.ids[state.name]) {\r\n                        state.id = state.id || (channelId + '.' + state.name);\r\n\r\n                        // Object not yet exists or invalid\r\n                        let stateObj;\r\n                        try {\r\n                            stateObj = await this.props.socket.getObject(state.id);\r\n                        } catch (e) {\r\n\r\n                        }\r\n                        stateObj = stateObj || {};\r\n                        stateObj._id = state.id;\r\n                        stateObj.native = stateObj.native || {};\r\n                        stateObj.type = 'state';\r\n                        stateObj.common = stateObj.common || {};\r\n                        const common = stateObj.common;\r\n                        const attr = this.state.linkeddevices;\r\n                        common.custom = common.custom || {};\r\n                        common.custom[attr] = common.custom[attr] || {};\r\n                        common.custom[attr].parentId = data.ids[state.name];\r\n                        common.custom[attr].enabled = true;\r\n                        common.custom[attr].isLinked = true;\r\n                        common.custom[attr].parentType = 'mixed';\r\n\r\n                        common.name = common.name || state.name;\r\n                        common.role = state.defaultRole;\r\n\r\n                        if (state.read !== undefined) {\r\n                            common.read = state.read;\r\n                        }\r\n                        if (state.write !== undefined) {\r\n                            common.write = state.write;\r\n                        }\r\n\r\n                        if (state.defaultStates) {\r\n                            common.states = state.defaultStates;\r\n                        }\r\n                        common.type = state.type ? (typeof state.type === 'object' ? state.type[0] : state.type) : TYPES_MAPPING[state.defaultRole.split('.')[0]] || 'state';\r\n\r\n                        if (state.defaultMin !== undefined) {\r\n                            common.min = state.defaultMin;\r\n                        } else\r\n                        if (state.min !== undefined) {\r\n                            common.min = 0;\r\n                        }\r\n\r\n                        if (state.defaultMax !== undefined) {\r\n                            common.max = state.defaultMax;\r\n                        } else\r\n                        if (state.max !== undefined) {\r\n                            common.max = 100;\r\n                        }\r\n\r\n                        if (state.defaultUnit) {\r\n                            common.unit = state.defaultUnit;\r\n                        } else if (state.unit) {\r\n                            common.unit = state.unit;\r\n                        }\r\n                        somethingChanged = true;\r\n                        await this.props.socket.setObject(stateObj._id, stateObj);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        // update expert mode if was changed\r\n        const newState = { editId: null, expertMode: window.localStorage.getItem('Devices.expertMode') === 'true' };\r\n        if (somethingChanged) {\r\n            //const devices = JSON.parse(JSON.stringify(this.state.devices));\r\n            // update enums, name\r\n            this.updateEnumsForOneDevice(device); // TODO: here the device will be changed directly in state!\r\n            //newState.devices = devices;\r\n        }\r\n        cb && cb();\r\n        await this.setStateAsync(newState);\r\n        refresh && (await this.detectDevices(true));\r\n        Router.doNavigate(null, '', '');\r\n    }\r\n\r\n    onSaveProperties = async data => {\r\n        let somethingChanged = false;\r\n        const device = this.state.devices.find(({ channelId }) => channelId === this.state.editId);\r\n        if (data) {\r\n            const language = I18n.getLanguage();\r\n            const channelId = device.channelId;\r\n            const oldName = Utils.getObjectNameFromObj(this.objects[channelId], null, { language });\r\n\r\n            let oldSmartName = this.getSmartName(this.objects[channelId], language);\r\n\r\n            if (this.objects[channelId] && this.objects[channelId].common &&\r\n                (oldName !== data.name ||\r\n                    oldSmartName !== data.smartName ||\r\n                    (this.objects[channelId].common.color || '') !== data.color ||\r\n                    (this.objects[channelId].common.icon || '') !== data.icon)\r\n            ) {\r\n                // update channel\r\n                let obj = await this.props.socket.getObject(channelId);\r\n                obj = obj || {};\r\n                obj.common = obj.common || {};\r\n                if (typeof obj.common.name !== 'object') {\r\n                    obj.common.name = { [language]: obj.common.name || '' };\r\n                }\r\n                obj.common.name[language] = data.name;\r\n                // obj._id = data.name.replace(Utils.FORBIDDEN_CHARS, '_').replace(/\\s/g, '_').replace(/\\./g, '_');\r\n                obj.common.role = device.type;\r\n                obj.common.color = data.color;\r\n                if (!data.color) {\r\n                    delete obj.common.color;\r\n                }\r\n                obj.common.icon = data.icon;\r\n                if (!data.icon) {\r\n                    delete obj.common.icon;\r\n                }\r\n                obj.type = obj.type || 'channel';\r\n\r\n                if (data.smartName === false) {\r\n                    obj.common.smartName = false;\r\n                } else {\r\n                    this.setSmartName(obj, data.smartName, language);\r\n                }\r\n\r\n                await this.props.socket.setObject(obj._id, obj);\r\n                somethingChanged = true;\r\n            }\r\n\r\n            if (await this.setEnumsOfDevice(channelId, data.functions, data.rooms)) {\r\n                somethingChanged = true;\r\n            }\r\n        }\r\n\r\n        if (somethingChanged) {\r\n            const devices = JSON.parse(JSON.stringify(this.state.devices));\r\n            // update enums, name\r\n            this.updateEnumsForOneDevice(device);\r\n            this.setState({ devices });\r\n        }\r\n    }\r\n\r\n    renderEditDialog() {\r\n        if (this.state.editId === null) {\r\n            return null;\r\n        }\r\n        const device = this.state.devices.find(({ channelId }) => channelId === this.state.editId);\r\n        if (!device) {\r\n            return null;\r\n        }\r\n        if (!this.objects[this.state.editId]) {\r\n            window.alert('Device not found');\r\n            Router.doNavigate(null, '', '');\r\n            return this.setState({ editId: null });\r\n        }\r\n\r\n        return <DialogEdit\r\n            channelId={device.channelId}\r\n            type={device.type}\r\n            channelInfo={device}\r\n            objects={this.objects}\r\n            states={this.states}\r\n            patterns={this.patterns}\r\n            themeType={this.props.themeType}\r\n            processTasks={this.processTasks}\r\n            enumIDs={this.enumIDs}\r\n            socket={this.props.socket}\r\n            onCopyDevice={async (id, newId) => {\r\n                await this.onCopyDevice(id, newId);\r\n                const copiedDevice = this.state.devices.find(device => device.channelId === id);\r\n                if (copiedDevice) {\r\n                    await this.deleteDevice(this.state.devices.indexOf(copiedDevice));\r\n                }\r\n            }}\r\n            onSaveProperties={data => this.onSaveProperties(data)}\r\n            onClose={(data, refresh, cb) => this.onEditFinished(data, refresh, cb)}\r\n        />;\r\n    }\r\n\r\n    async setEnumsOfDevice(channelId, functions, rooms) {\r\n        let somethingChanged = false;\r\n\r\n        for (let e = 0; e < this.enumIDs.length; e++) {\r\n            const id = this.enumIDs[e];\r\n            const members = (this.objects[id] && this.objects[id].common && this.objects[id].common.members) || [];\r\n            // if this channel is in enum\r\n            if (id.startsWith('enum.functions.') && functions) {\r\n                if (functions.includes(id)) {\r\n                    if (!members.includes(channelId)) {\r\n                        const obj = await this.props.socket.getObject(id);\r\n                        obj.common = obj.common || {};\r\n                        obj.common.members = obj.common.members || [];\r\n                        obj.common.members.push(channelId);\r\n                        obj.common.members.sort();\r\n                        await this.props.socket.setObject(obj._id, obj);\r\n                        somethingChanged = true;\r\n                    }\r\n                } else {\r\n                    if (members.includes(channelId)) {\r\n                        const obj = await this.props.socket.getObject(id);\r\n                        obj.common = obj.common || {};\r\n                        obj.common.members = obj.common.members || [];\r\n                        const pos = obj.common.members.indexOf(channelId);\r\n                        if (pos !== -1) {\r\n                            obj.common.members.splice(pos, 1);\r\n                            obj.common.members.sort();\r\n                            await this.props.socket.setObject(obj._id, obj);\r\n                            somethingChanged = true;\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n\r\n            if (id.startsWith('enum.rooms.') && rooms) {\r\n                if (rooms.includes(id)) {\r\n                    if (!members.includes(channelId)) {\r\n                        const obj = await this.props.socket.getObject(id)\r\n                        obj.common = obj.common || {};\r\n                        obj.common.members = obj.common.members || [];\r\n                        obj.common.members.push(channelId);\r\n                        obj.common.members.sort();\r\n                        await this.props.socket.setObject(obj._id, obj);\r\n                        somethingChanged = true;\r\n                    }\r\n                } else {\r\n                    if (members.includes(channelId)) {\r\n                        const obj = await this.props.socket.getObject(id);\r\n                        obj.common = obj.common || {};\r\n                        obj.common.members = obj.common.members || [];\r\n                        const pos = obj.common.members.indexOf(channelId);\r\n                        if (pos !== -1) {\r\n                            obj.common.members.splice(pos, 1);\r\n                            obj.common.members.sort();\r\n                            await this.props.socket.setObject(obj._id, obj);\r\n                            somethingChanged = true;\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        return somethingChanged;\r\n    }\r\n\r\n    deleteDevice = async (index, devices) => {\r\n        devices = devices || JSON.parse(JSON.stringify(this.state.devices));\r\n        const device = devices[index];\r\n        if (!device) {\r\n            return;\r\n        }\r\n\r\n        // remove this device from all enums\r\n        for (let i = 0; i < this.enumIDs.length; i++) {\r\n            const enumId = this.enumIDs[i];\r\n            if (this.objects[enumId] && this.objects[enumId].common && this.objects[enumId].common.members) {\r\n                if (device.states.find(state => state.id && this.objects[enumId].common.members.includes(state.id)) ||\r\n                    this.objects[enumId].common.members.includes(device.channelId)\r\n                ) {\r\n                    const obj = await this.props.socket.getObject(enumId);\r\n                    if (!obj || !obj.common || !obj.common.members) {\r\n                        continue;\r\n                    }\r\n                    const members = [];\r\n\r\n                    obj.common.members.forEach(sid => {\r\n                        if (!device.states.find(state => state.id === sid) && sid !== device.channelId) {\r\n                            members.push(sid);\r\n                        }\r\n                    });\r\n\r\n                    if (JSON.stringify(members) !== JSON.stringify(obj.common.members)) {\r\n                        obj.common.members = members;\r\n                        await this.props.socket.setObject(obj._id, obj);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        // delete all states of this device\r\n        for (let i = 0; i < device.states.length; i++) {\r\n            const state = device.states[i];\r\n            if (state.id) {\r\n                const id = state.id;\r\n                await this.props.socket.delObject(id);\r\n            }\r\n        }\r\n\r\n        if (device.channelId && device.channelId !== device.mainStateId) {\r\n            await this.props.socket.delObject(device.channelId);\r\n        }\r\n\r\n        devices.splice(index, 1);\r\n\r\n        return devices;\r\n    }\r\n\r\n    async createDevice(options) {\r\n        const patterns = this.detector.getPatterns();\r\n        let states = Object.keys(patterns).find(t => patterns[t].type === options.type);\r\n        if (!states) {\r\n            return await this.setStateAsync({ message: I18n.t('Unknown type!') + options.type });\r\n        }\r\n        states = patterns[states].states;\r\n        if (options.states.length) {\r\n            states = options.states;\r\n        }\r\n        const obj = {\r\n            _id: options.id,\r\n            common: {\r\n                name: { [I18n.getLanguage()]: options.name },\r\n                role: options.type,\r\n                icon: options.icon,\r\n                color: options.color,\r\n            },\r\n            native: {},\r\n            type: 'channel'\r\n        };\r\n\r\n        // create channel\r\n        await this.props.socket.setObject(options.id, obj);\r\n\r\n        for (let s = 0; s < states.length; s++) {\r\n            const state = states[s];\r\n\r\n            if (state.required && state.defaultRole) {\r\n                const common = {\r\n                    name: state.name,\r\n                    role: state.defaultRole,\r\n                    type: state.type ? (typeof state.type === 'object' ? state.type[0] : state.type) : TYPES_MAPPING[state.defaultRole.split('.')[0]] || 'state',\r\n                    read: state.read === undefined ? true : state.read,\r\n                    write: state.write === undefined ? false : state.write,\r\n                    alias: {\r\n                        id: ''\r\n                    }\r\n                };\r\n                if (state.defaultStates) {\r\n                    common.states = state.defaultStates;\r\n                }\r\n\r\n                if (state.defaultMin !== undefined) {\r\n                    common.min = state.defaultMin;\r\n                } else\r\n                    if (state.min !== undefined) {\r\n                        common.min = 0;\r\n                    }\r\n\r\n                if (state.defaultMax !== undefined) {\r\n                    common.max = state.defaultMax;\r\n                } else\r\n                    if (state.max !== undefined) {\r\n                        common.max = 100;\r\n                    }\r\n\r\n                if (state.defaultUnit) {\r\n                    common.unit = state.defaultUnit;\r\n                } else\r\n                    if (state.unit) {\r\n                        common.unit = state.unit;\r\n                    }\r\n\r\n                const obj = {\r\n                    _id: options.id + '.' + state.name,\r\n                    common,\r\n                    native: {},\r\n                    type: 'state'\r\n                };\r\n                await this.props.socket.setObject(options.id + '.' + state.name, obj);\r\n            }\r\n\r\n            await this.setEnumsOfDevice(options.id, options.functions, options.rooms);\r\n        }\r\n\r\n        /*const devices = JSON.parse(JSON.stringify(this.state.devices));\r\n        const result = this.detector.detect({ id: options.id, objects: this.objects, forceRebuildKeys: true });\r\n\r\n        if (result) {\r\n            for (let r = 0; r < result.length; r++) {\r\n                this.updateEnumsForOneDevice(result[r]);\r\n                devices.push(result[r]);\r\n            }\r\n        }*/\r\n\r\n        this.editCreatedId = obj._id;\r\n        /*await this.setStateAsync({ devices, editId: obj._id });\r\n        Router.doNavigate('list', 'edit', obj._id);*/\r\n    }\r\n\r\n    renderAddDialog() {\r\n        if (!this.state.showAddDialog) {\r\n            return null;\r\n        } else {\r\n            return <DialogNew\r\n                themeType={this.props.themeType}\r\n                theme={this.props.theme}\r\n                objects={this.objects}\r\n                socket={this.props.socket}\r\n                processTasks={this.processTasks}\r\n                enumIDs={this.enumIDs}\r\n                prefix={this.state.showAddDialog}\r\n                copyDevice={this.state.copyId ? this.state.devices.find(el => el.channelId === this.state.copyId) || null : null}\r\n                onClose={options =>\r\n                    this.setState({ showAddDialog: '', copyId: '' }, () =>\r\n                        options && this.createDevice(options))}\r\n            />;\r\n        }\r\n    }\r\n\r\n    renderImporterDialog = () => {\r\n        if (!this.state.showImporterDialog) {\r\n            return null;\r\n        } else {\r\n            return <DialogImporter\r\n                item={this.state.showImporterDialog}\r\n                socket={this.props.socket}\r\n                devices={this.state.devices}\r\n                objects={this.objects}\r\n                onCopyDevice={this.onCopyDevice}\r\n                onClose={result =>\r\n                    this.setState({ showImporterDialog: null }, () =>\r\n                        result && this.detectDevices(true))}\r\n                listItems={this.state.listItems}\r\n            />;\r\n        }\r\n    }\r\n\r\n    renderEditFolder = () => {\r\n        if (!this.state.showEditFolder) {\r\n            return null;\r\n        } else {\r\n            return <DialogEditFolder\r\n                processTasks={this.processTasks}\r\n                deleteDevice={async (index, devices) => await this.deleteDevice(index, devices)}\r\n                objects={this.objects}\r\n                socket={this.props.socket}\r\n                devices={this.state.devices}\r\n                data={this.state.showEditFolder}\r\n                onClose={() =>\r\n                    this.setState({ showEditFolder: null })}\r\n            />;\r\n        }\r\n    }\r\n\r\n    // renderDeleteDialog() {\r\n    //     if (this.state.deleteIndex === null) {\r\n    //         return null;\r\n    //     } else {\r\n    //         const time = window.localStorage.getItem('DeleteDeviceTime');\r\n    //         const fiveMin = 1000 * 60 * 5;\r\n    //         const index = this.state.deleteIndex;\r\n    //         if (time && new Date().getTime() - time < fiveMin) {\r\n    //             return this.setState({ deleteIndex: null }, () => {\r\n    //                 this.deleteDevice(index);\r\n    //             })\r\n    //         }\r\n    //         return <DialogConfirm\r\n    //             title={I18n.t('Please confirm...')}\r\n    //             text={I18n.t('Device and all states will be deleted. Are you sure?')}\r\n    //             onClose={result => {\r\n    //                 const index = this.state.deleteIndex;\r\n    //                 this.setState({ deleteIndex: null }, async () => {\r\n    //                     if (result) {\r\n    //                         window.localStorage.setItem('DeleteDeviceTime', new Date().getTime());\r\n    //                         const devices = await this.deleteDevice(index);\r\n    //                         this.setState({ devices });\r\n    //                     }\r\n    //                 })\r\n    //             }}\r\n    //         />;\r\n    //     }\r\n    // }\r\n\r\n    renderEditEnumDialog() {\r\n        if (!this.state.editEnum) {\r\n            return null;\r\n        } else {\r\n            return <DialogEditEnums\r\n                objects={this.objects}\r\n                values={this.state.editEnum.values}\r\n                enumIDs={this.state.editEnum.enums}\r\n                deviceName={this.state.devices[this.state.editEnum.index].name}\r\n                onClose={async values => {\r\n                    if (values && JSON.stringify(values) !== JSON.stringify(this.state.editEnum.values)) {\r\n                        if (this.state.editEnum.enums[0] && this.state.editEnum.enums[0].startsWith('enum.functions.')) {\r\n                            await this.setEnumsOfDevice(this.state.devices[this.state.editEnum.index].channelId, values);\r\n                        } else {\r\n                            await this.setEnumsOfDevice(this.state.devices[this.state.editEnum.index].channelId, undefined, values);\r\n                        }\r\n                        const devices = JSON.parse(JSON.stringify(this.state.devices));\r\n                        // update enums, name\r\n                        this.updateEnumsForOneDevice(devices[this.state.editEnum.index]);\r\n                        this.setState({ editEnum: null, devices });\r\n                    } else {\r\n                        this.setState({ editEnum: null });\r\n                    }\r\n                }}\r\n            />;\r\n        }\r\n    }\r\n\r\n    setFilter(value) {\r\n        this.filter = value.toLowerCase();\r\n        this.filterTimer && clearTimeout(this.filterTimer);\r\n        this.filterTimer = setTimeout(() => {\r\n            this.filterTimer = null;\r\n            window.localStorage.setItem('Devices.filter', this.filter);\r\n            this.forceUpdate();\r\n        }, 400);\r\n    }\r\n\r\n    onCollapseAll() {\r\n        this.setState({ expandedIDs: [] });\r\n        this.saveExpanded([]);\r\n    }\r\n\r\n    onExpandAll() {\r\n        const expandedIDs = [];\r\n        this.state.listItems.forEach(item =>\r\n            this.state.listItems.find(it => it.parent === item.id) && expandedIDs.push(item.id));\r\n        this.setState({ expandedIDs });\r\n        this.saveExpanded(expandedIDs);\r\n    }\r\n\r\n    render() {\r\n        if (this.state.loading) {\r\n            return <CircularProgress />;\r\n        } else {\r\n            const classes = this.props.classes;\r\n            const small = this.props.width === 'xs' || this.props.width === 'sm';\r\n\r\n            return <DndProvider backend={!small ? HTML5Backend : TouchBackend}>\r\n                <Card className={classes.tab}>\r\n                    <div className={classes.wrapperIcon}>\r\n                        <div className={classes.icons}>\r\n                            <Tooltip title={I18n.t('Create new device with Aliases')}>\r\n                                <IconButton onClick={() => this.setState({ showAddDialog: ALIAS + '0' })}>\r\n                                    <IconAdd color={this.state.viewCategory ? 'primary' : 'inherit'} />\r\n                                </IconButton>\r\n                            </Tooltip>\r\n                            {this.state.linkeddevices && <Tooltip title={I18n.t('Create new device with LinkedDevices')}>\r\n                                <IconButton onClick={() => this.setState({ showAddDialog: this.state.linkeddevices })}>\r\n                                    <IconAdd style={{ color: '#E67E22' }} />\r\n                                </IconButton>\r\n                            </Tooltip>}\r\n                            <Tooltip title={I18n.t('Refresh')}>\r\n                                <IconButton onClick={() => this.detectDevices()} disabled={this.state.browse}>\r\n                                    {this.state.browse ? <CircularProgress size={20} /> : <IconRefresh />}\r\n                                </IconButton>\r\n                            </Tooltip>\r\n                            {/* <Tooltip title={I18n.t('Show only aliases')}>\r\n                        <IconButton\r\n                            color={this.state.onlyAliases ? 'primary' : 'inherit'}\r\n                            onClick={() => {\r\n                                window.localStorage.setItem('Devices.onlyAliases', this.state.onlyAliases ? 'false' : 'true');\r\n                                this.setState({ onlyAliases: !this.state.onlyAliases });\r\n                            }}>\r\n                            <IconStar />\r\n                        </IconButton>\r\n                    </Tooltip> */}\r\n                            <Tooltip title={I18n.t('Hide info devices')}>\r\n                                <IconButton\r\n                                    color={this.state.hideInfo ? 'primary' : 'inherit'}\r\n                                    onClick={() => {\r\n                                        window.localStorage.setItem('Devices.hideInfo', this.state.hideInfo ? 'false' : 'true');\r\n                                        this.setState({ hideInfo: !this.state.hideInfo });\r\n                                    }}>\r\n                                    <IconInfo />\r\n                                </IconButton>\r\n                            </Tooltip>\r\n\r\n                            {this.state.orderBy === 'IDs' &&\r\n                                <><Tooltip title={I18n.t('Expand all nodes')}>\r\n                                    <IconButton\r\n                                        color=\"primary\"\r\n                                        onClick={() => this.onExpandAll()}>\r\n                                        <IconFolderOpened />\r\n                                    </IconButton>\r\n                                </Tooltip>\r\n                                    <Tooltip title={I18n.t('Collapse all nodes')}>\r\n                                        <IconButton\r\n                                            color=\"primary\"\r\n                                            onClick={() => this.onCollapseAll()}>\r\n                                            <IconFolder />\r\n                                        </IconButton>\r\n                                    </Tooltip></>\r\n                            }\r\n\r\n                            {/* <FormControl>\r\n                    <InputLabel>{I18n.t('Select')}</InputLabel>\r\n                    <Select\r\n                        className={classes.orderSelector}\r\n                        value={this.state.orderBy}\r\n                        onChange={e => {\r\n                            this.setState({ orderBy: e.target.value });\r\n                            window.localStorage.setItem('Devices.orderBy', e.target.value);\r\n                        }}\r\n                    >\r\n                        <MenuItem value='names'>{I18n.t('Names')}</MenuItem>\r\n                        <MenuItem value='IDs'>{I18n.t('IDs')}</MenuItem>\r\n                        <MenuItem value='functions'>{I18n.t('Functions')}</MenuItem>\r\n                        <MenuItem value='rooms'>{I18n.t('Rooms')}</MenuItem>\r\n                        <MenuItem value='types'>{I18n.t('Types')}</MenuItem>\r\n                    </Select>\r\n                </FormControl> */}\r\n                            <div className={classes.emptyBlockFlex} />\r\n                            <TextField\r\n                                inputRef={this.inputRef}\r\n                                label={I18n.t('Filter')}\r\n                                InputLabelProps={{ shrink: true }}\r\n                                defaultValue={this.filter}\r\n                                onChange={e => this.setFilter(e.target.value)}\r\n                                InputProps={{\r\n                                    endAdornment: (\r\n                                        this.filter ? <InputAdornment position=\"end\">\r\n                                            <IconButton\r\n                                                size=\"small\"\r\n                                                onClick={() => {\r\n                                                    this.setFilter('');\r\n                                                    this.inputRef.current.value = '';\r\n                                                }}\r\n                                            >\r\n                                                <IconClear />\r\n                                            </IconButton>\r\n                                        </InputAdornment> : <div className={classes.emptyClear} />\r\n                                    ),\r\n                                }}\r\n                            />\r\n                            <div className={classes.emptyBlockFlex} />\r\n                            <div className={classes.wrapperName}>\r\n                                <DvrIcon color={this.state.themeName !== \"colored\" ? \"primary\" : \"inherit\"} style={{ marginRight: 5 }} />\r\n                                {I18n.t('Devices')}\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    {this.renderDevices()}\r\n                    {this.renderMessage()}\r\n                    {this.renderEditDialog()}\r\n                    {this.renderAddDialog()}\r\n                    {/* {this.renderDeleteDialog()} */}\r\n                    {this.renderEditEnumDialog()}\r\n                    {this.renderImporterDialog()}\r\n                    {this.renderEditFolder()}\r\n                </Card>\r\n            </DndProvider>;\r\n        }\r\n    }\r\n}\r\n\r\nListDevices.propTypes = {\r\n    adapterName: PropTypes.string.isRequired,\r\n    onError: PropTypes.func,\r\n    onLoad: PropTypes.func,\r\n    onChange: PropTypes.func,\r\n    socket: PropTypes.object.isRequired,\r\n    theme: PropTypes.object,\r\n    themeType: PropTypes.string,\r\n};\r\n\r\nexport default withWidth()(withStyles(styles)(ListDevices));\r\n","import React from 'react';\r\nimport { ThemeProvider, withStyles } from '@material-ui/core/styles';\r\n// import I18n from '@iobroker/adapter-react/i18n';\r\n\r\nimport { Paper } from '@material-ui/core';\r\n\r\nimport GenericApp from '@iobroker/adapter-react/GenericApp';\r\nimport Utils from '@iobroker/adapter-react/Components/Utils';\r\nimport Loader from '@iobroker/adapter-react/Components/Loader'\r\n// import ToggleThemeMenu from './Components/ToggleThemeMenu';\r\n\r\nimport TabDevices from './Tabs/ListDevices';\r\n\r\nconst styles = theme => ({\r\n    root: {},\r\n    tabContent: {\r\n        padding: 10,\r\n        height: 'calc(100% - 20px)',\r\n        overflow: 'auto',\r\n    },\r\n    wrapperMenu: {\r\n        display: 'flex',\r\n        justifyContent: 'space-between'\r\n    },\r\n    wrapperIconHeader: {\r\n\r\n    },\r\n    wrapperName: {\r\n        fontWeight: 800,\r\n        display: 'flex',\r\n        alignItems: 'center'\r\n    }\r\n});\r\n\r\nclass App extends GenericApp {\r\n    constructor(props) {\r\n        const extendedProps = { ...props };\r\n        extendedProps.bottomButtons = false;\r\n        extendedProps.adapterName = 'devices';\r\n        extendedProps.translations = {\r\n            'en': require('./i18n/en'),\r\n            'de': require('./i18n/de'),\r\n            'ru': require('./i18n/ru'),\r\n            'pt': require('./i18n/pt'),\r\n            'nl': require('./i18n/nl'),\r\n            'fr': require('./i18n/fr'),\r\n            'it': require('./i18n/it'),\r\n            'es': require('./i18n/es'),\r\n            'pl': require('./i18n/pl'),\r\n            'zh-cn': require('./i18n/zh-cn'),\r\n        };\r\n        super(props, extendedProps);\r\n\r\n        const theme = this.createTheme();\r\n        this.state = {\r\n            theme,\r\n            themeName: this.getThemeName(theme),\r\n            themeType: this.getThemeType(theme),\r\n        }\r\n    }\r\n\r\n    onHashChanged() {\r\n        //const location = GenericApp.getLocation();\r\n    }\r\n\r\n    getSelectedTab() {\r\n        const tab = this.state.selectedTab;\r\n        if (!tab || tab === 'list') {\r\n            return 0;\r\n        }\r\n    }\r\n    /**\r\n     * Changes the current theme\r\n     */\r\n    toggleTheme = currentThemeName => {\r\n        const themeName = this.state.themeName;\r\n\r\n        // dark => blue => colored => light => dark\r\n        let newThemeName = themeName === 'dark' ? 'blue' :\r\n            (themeName === 'blue' ? 'colored' :\r\n                (themeName === 'colored' ? 'light' : 'dark'));\r\n\r\n        if (currentThemeName) {\r\n            newThemeName = currentThemeName;\r\n        }\r\n\r\n        Utils.setThemeName(newThemeName);\r\n\r\n        const theme = this.createTheme(newThemeName);\r\n\r\n        this.setState({\r\n            theme: theme,\r\n            themeName: this.getThemeName(theme),\r\n            themeType: this.getThemeType(theme)\r\n        });\r\n    }\r\n\r\n    render() {\r\n        if (!this.state.loaded) {\r\n            return <Loader theme={this.state.themeType} />;\r\n        }\r\n\r\n        return <ThemeProvider theme={this.state.theme}>\r\n            {/* <ToggleThemeMenu\r\n                                toggleTheme={this.toggleTheme}\r\n                                themeName={this.state.themeName}\r\n                                t={I18n.t} /> */}\r\n            <Paper square elevation={0} className={this.props.classes.tabContent}>\r\n                {(this.state.selectedTab === 'list' || !this.state.selectedTab) ? \r\n                <TabDevices\r\n                    theme={this.state.theme}\r\n                    themeType={this.state.themeType}\r\n                    key=\"options\"\r\n                    common={this.common}\r\n                    socket={this.socket}\r\n                    native={this.state.native}\r\n                    onError={text => this.setState({ errorText: text })}\r\n                    onLoad={native => this.onLoadConfig(native)}\r\n                    instance={this.instance}\r\n                    adapterName={this.adapterName}\r\n                    onChange={(attr, value) => this.updateNativeValue(attr, value)}\r\n                /> \r\n                : null}\r\n\r\n            </Paper>\r\n            {this.renderError()}\r\n            {this.renderSaveCloseButtons()}\r\n        </ThemeProvider>;\r\n    }\r\n}\r\n\r\nexport default withStyles(styles)(App);\r\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && !contentType.includes('javascript'))\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport {version} from '../package.json';\r\nimport { MuiThemeProvider} from '@material-ui/core/styles';\r\nimport * as Sentry from '@sentry/browser';\r\nimport * as SentryIntegrations from '@sentry/integrations';\r\n\r\nimport theme from '@iobroker/adapter-react/Theme';\r\nimport Utils from '@iobroker/adapter-react/Components/Utils';\r\nimport App from './App';\r\n\r\nimport * as serviceWorker from './serviceWorker';\r\nimport '@iobroker/adapter-react/index.css';\r\n\r\nwindow.adapterName = 'devices';\r\n\r\nconsole.log('iobroker.' + window.adapterName + '@' + version);\r\nlet themeName = Utils.getThemeName();\r\n\r\nfunction build() {\r\n    return ReactDOM.render(<MuiThemeProvider theme={ theme(themeName) }>\r\n        <App onThemeChange={_themeName => {\r\n            themeName = _themeName;\r\n            build();\r\n        }}/>\r\n    </MuiThemeProvider>, document.getElementById('root'));\r\n}\r\n\r\nif (window.location.host !== 'localhost:3000') {\r\n    Sentry.init({\r\n        dsn: \"https://934e853b521248afabe9da038e6bf36e@sentry.iobroker.net/55\",\r\n        integrations: [\r\n            new SentryIntegrations.Dedupe()\r\n        ]\r\n    });\r\n}\r\n\r\nbuild();\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\nserviceWorker.register();\r\n"],"sourceRoot":""}
{"version":3,"sources":["../node_modules/@iobroker/adapter-react/assets/rooms sync /^/.*$","../node_modules/@iobroker/adapter-react/assets/devices sync /^/.*$","Devices/SmartDetector.js","icons/Jalousie.js","icons/PushButton.js","icons/DoorOpened.js","icons/FireOn.js","icons/FloodOn.js","icons/Gate.js","icons/Humidity.js","icons/MotionOn.js","icons/RGB.js","icons/Socket.js","icons/Thermometer.js","icons/Thermostat.js","icons/HeatValve.js","icons/WindowOpened.js","icons/WindowTilted.js","Components/icons/Cleaner.js","Components/TypeIcon.js","Components/icons/WindowTilted.js","Components/icons/Material.js","Components/TypeOptions.js","Components/UploadImage.js","Dialogs/DialogEditProperties.js","Dialogs/DialogAddState.js","Dialogs/DialogEditStates.js","Dialogs/DialogEditDevice.js","Components/helpers/search.js","Dialogs/DialogNewDevice.js","Components/helpers/LocalUtils.js","Dialogs/DialogEditEnums.js","Dialogs/DialogDeleteFolder.js","Dialogs/DialogEditFolder.js","Components/DragWrapper.js","Components/DropWrapper.js","Components/TreeView.js","Dialogs/DialogImporter.js","Components/helpers/hooks/useStateLocal.js","Tabs/ListDevices.js","App.js","serviceWorker.js","index.js"],"names":["map","webpackContext","req","id","webpackContextResolve","__webpack_require__","o","e","Error","code","keys","Object","resolve","module","exports","IOBChannelDetector","this","detector","ChannelDetector","getPatterns","options","_keysOptional","forceRebuildKeys","JSON","stringify","objects","sort","detect","Jalousie","props","viewBox","d","fill","PushButton","DoorOpened","FireOn","FloodOn","Gate","Humidity","MotionOn","cx","cy","r","RGB","style","stroke","fillRule","fillOpacity","Socket","width","height","Thermometer","Thermostat","HeatValve","WindowOpened","strokeWidth","strokeMiterlimit","WindowTilted","Cleaner","x","y","TYPE_ICONS","Types","airCondition","TypeIconAC","blind","TypeIconBlinds","button","TypeIconButton","buttonSensor","TypeIconButtonSensor","camera","TypeIconCamera","chart","TypeIconChart","url","TypeIconURL","image","TypeIconImage","dimmer","TypeIconDimmer","door","TypeIconDoor","fireAlarm","TypeIconFireAlarm","floodAlarm","TypeIconFloodAlarm","gate","TypeIconGate","humidity","TypeIconHumidity","info","TypeIconInfo","light","TypeIconLight","lock","TypeIconLock","location","TypeIconLocation","media","TypeIconMedia","motion","TypeIconMotion","rgb","TypeIconRGB","ct","TypeIconCT","rgbSingle","TypeIconRGBSingle","hue","TypeIconHUE","slider","TypeIconSlider","socket","TypeIconSocket","temperature","TypeIconTemperature","thermostat","TypeIconThermostat","valve","TypeIconValve","vacuumCleaner","TypeIconVacuumCleaner","volume","TypeIconVolume","volumeGroup","TypeIconVolumeGroup","window","TypeIconWindow","windowTilt","TypeIconWindowTilt","weatherCurrent","TypeIconWeather","weatherForecast","warning","TypeIconWarning","defaultStyle","marginTop","marginLeft","TypeIcon","src","assign","className","alt","Icon","type","Component","Material","rx","ry","TYPE_OPTIONS","alexa","alisa","google","material","blindButtons","ICONS_TYPE","margin","STATES_NAME_ICONS","AiOutlineAppstoreAdd","MdWork","IconUnreach","IconLowbat","IconMaintain","IconError","MdDirections","IconWorking","BiLastPage","FaCompressArrowsAlt","FaCompress","FaVolumeMute","GiLaserPrecision","AiOutlineRadiusBottomleft","AiOutlineColumnHeight","AiOutlineColumnWidth","AiOutlineSwap","MdGpsFixed","FaToggleOn","FaDoorOpen","GiStopSign","IoIosWater","GiNuclearWaste","AiFillPauseCircle","GiMatterStates","MdDeveloperMode","AiOutlinePoweroff","SiBoost","WiHumidity","WiThermometer","WiDaySunny","FaRunning","WiFire","WiSmoke","GiTreeSwing","GiSpeedometer","HiOutlineLightBulb","FiPower","FaSun","ELECTRIC_POWER","ImPower","CURRENT","GiElectric","VOLTAGE","GiElectricalResistance","CONSUMPTION","FcElectricalSensor","FREQUENCY","GiLightningFrequency","HUE","IoIosColorPalette","UploadImage","state","anchorEl","cropHandler","cropperRef","createRef","disabled","classes","icon","t","crop","onChange","position","buttonCropWrapper","Tooltip","title","IconButton","onClick","setState","currentTarget","stopPropagation","color","Menu","keepMounted","open","onClose","MenuItem","imageElement","current","cropper","getCroppedCanvas","toDataURL","label","customClasses","iconPickerLabel","base64","value","ref","initialAspectRatio","viewMode","guides","minCropBoxHeight","minCropBoxWidth","background","checkOrientation","defaultProps","maxSize","removeIconFunc","accept","error","console","log","el","withStyles","theme","objectFit","display","zIndex","right","top","buttonIconsWrapper","border","fontSize","fontWeight","DialogEditProperties","checkedName","name","initName","parts","channelId","split","pop","join","replace","Utils","FORBIDDEN_CHARS","channelObj","common","getObjectNameFromObj","language","I18n","getLanguage","functions","enumIDs","filter","startsWith","obj","members","includes","rooms","smartName","getSmartName","changeProperties","length","prevProps","prevState","realParent","ids","find","enums","objs","getObjectName","getObjectIcon","Select","oidField","fullWidth","multiple","renderValue","arrId","newArr","renderValueWrapper","renderValueCurrent","enumIcon","target","custom","iotNoCommon","iot","en","file","newValue","data","divOids","divOidField","oidName","TextField","FormControlLabel","disableSwitchLabel","control","Switch","disableSwitch","checked","placeholder","helperText","renderSelectEnum","wrapperColorFields","clsx","colorButton","dropZone","divDialogContent","renderProperties","React","PureComponent","paddingTop","paddingBottom","marginBottom","verticalAlign","divDevice","palette","divIndicators","fontFamily","buttonPen","headerButtons","textAlign","marginRight","alignItems","funcDivEdit","funcEditName","funcEdit","tableIconImg","opacity","spacing","flexDirection","node","useStyles","makeStyles","root","backgroundColor","paper","maxWidth","overflowHidden","pre","overflow","whiteSpace","showDialog","nameField","roleField","typeField","unitField","minField","maxField","minMax","overflowText","textOverflow","maxHeight","typeArray","DialogAddState","callback","arrayStateDefault","editState","useState","setOpen","role","setRole","roleInput","setRoleInput","roles","setRoles","setName","unit","setUnit","setType","checkedRead","setCheckedRead","checkedWrite","setCheckedWrite","min","setMin","max","setMax","step","setStep","checkedStates","setCheckedStates","useEffect","rolesArr","forEach","key","push","newObj","states","read","write","document","body","removeChild","ThemeProvider","getThemeName","Dialog","DialogTitle","DialogContent","dividers","Paper","padding","p","item","toUpperCase","Autocomplete","freeSolo","event","onInputChange","renderInput","params","FormControl","InputLabel","Checkbox","DialogActions","Button","variant","autoFocus","a","_id","parse","parseFloat","toString","setObject","startIcon","addStateCallBack","createElement","appendChild","ReactDOM","render","DragHandle","SortableHandle","cursor","SortableItem","SortableElement","ownIndex","onDelete","TableRow","TableCell","component","scope","align","undefined","SortableList","SortableContainer","items","TableBody","index","DialogEditStates","i","splice","onSortEnd","oldIndex","newIndex","result","disableBackdropClick","disableEscapeKeyDown","Fab","size","val","TableContainer","Table","table","aria-label","TableHead","useDragHandle","TabPanel","children","other","hidden","aria-labelledby","wrapperTabPanel","Typography","DialogEditDevice","handleClose","updateNewState","array","addedStates","stateObj","alias","fx","handleOk","startTheProcess","initChangeProperties","onSaveProperties","onCopyDevice","delObject","onToggleTypeStates","stateDevice","newIds","channelInfo","attr","parentId","defaultRole","updateFx","getAddedChannelStates","indicatorsAvailable","indicator","indicatorsVisible","extendedAvailable","idsInit","showIndicators","localStorage","getItem","expertMode","selectIdFor","newState","selectIdPrefix","editFxFor","newChannelId","newChannelError","disabledButton","tab","editStates","pattern","patterns","newStates","added","getObject","then","_sortedKeys","channelPrefix","channelPrefixEnd","getChannelItems","objOriginal","noType","required","nextProps","selected","imagePrefix","dialogName","findRealDevice","statesOnly","onOk","isAlias","native","deviceIconStyle","themeType","checkIndicators","header","divExtended","menuWrapperIcons","setItem","transform","prefix","fxRead","fxWrite","aria-describedby","titleBackground","titleColor","defaultValue","isAddedName","dName","titleTooltip","linkedDevices","IconsState","getStateIcon","divOidFieldObj","displayFlex","displayFlexRow","wrapperOidName","wrapperOidNameIcon","oidNameIcon","addedName","indicators","stateSubCategory","wrapperButtonsAndOidField","width100","FormHelperTextProps","wrapperItemButtons","emptyButton","divCollapsed","renderVariable","wrapperHeaderIndicators","headerIndicatorsLine","headerIndicatorsName","mobileWidth","renderSelectDialog","renderEditFxDialog","titleHead","content","AppBar","LinearProgress","wrapperIconHead","iconStyle","showDeviceIcon","deviceText","Tabs","_","newTab","indicatorColor","textColor","scrollButtons","Tab","a11yProps","initState","renderHeader","renderVariables","renderEditStates","HUMIDITY","COLOR_TEMP","TEMPERATURE","WATER","FIRE","SMOKE","SPEED","BRIGHTNESS","MOTION","WINDOW","MdHelpOutline","textTransform","minWidth","lineHeight","headerButton","float","idEditName","idEdit","justifyContent","flexGrow","borderTop","flex","wrapperTitleAndId","UNSUPPORTED_TYPES","unknown","instance","getLastPart","pos","lastIndexOf","substring","DialogNewDevice","copyDevice","generateId","handleCancel","getParentId","typesWords","typeId","types","b","stateIds","nondeletable","checkIdSelected","newPart","notUnique","rootCheck","Promise","tasks","defaultChannelRole","desc","concat","processTasks","setStateAsync","container","blockFields","newRootCheck","newRoot","onKeyPress","ev","preventDefault","itemChildrenWrapper","selectIcon","selectText","iconWrapper","emptyIcon","nameDiv","viewDiv","input","paddingRight","overflowX","flexFlow","treeDiv","direction","LocalUtils","channelName","enumNames","reg","RegExp","newName","trim","toLowerCase","CapitalWords","DialogEditEnums","values","slice","isRefresh","indexOf","List","list","ListItem","onToggle","ListItemIcon","ListItemText","primary","ListItemSecondaryAction","edge","deviceName","DialogDeleteFolder","cb","device","setChecked","Date","getTime","deleteFolderAndDeviceCallBack","time","fiveMin","emptyObj","DialogEditFolder","devices","deleteDevice","newFolder","dataEdit","setDataEdit","arrayObjects","setArrayObjects","setStartTheProcess","newId","setId","setRootCheck","getNonEmptyName","lang","idsObject","onCloseLocal","changed","newDataEdit","onChangeCopy","addNewFolder","dataFolder","newDevices","deleteFolderID","delObjects","icons","sizeDropZone","DragWrapper","openFolder","backgroundRow","deviceIdx","useRef","useDrag","canDrag","end","monitor","getDropResult","targetId","getTargetIds","didDrop","collect","isDragging","dragRef","setError","useDrop","canDrop","partsId","handlerId","getHandlerId","isOver","drop","hover","dropRef","DropWrapper","transition","prepareList","modified","depth","parent","engine","parseInt","regEx","it","parentIndex","images","IconTypeDimmer","IconTypeLight","IconTypeSwitch","def","IconTypeGeneric","TreeView","addNewName","expanded","listItems","renaming","deleting","errorText","filterMenuOpened","addNew","typeFilter","searchText","newExp","ensureSelectedIsVisible","filterTimer","dialogNew","addNewFolderTitle","dialogNewForm","noValidate","autoComplete","onAddNew","toggleExpanded","dialogNewInput","saveExpanded","onlyOpen","isExpanded","expandButton","onCollapse","onExpand","onSelect","childrenFiltered","isFilteredOut","depthPx","paddingLeft","borderRadius","reorder","filteredPartly","secondary","dark","countSpan","childrenCount","onDoubleClick","folder","element","itemIcon","iconCommon","getTextStyle","fontStyle","renderOneItem","dragging","dense","disablePadding","buttonWrapper","onExpandAll","onCollapseAll","renderAllItems","wrapperFoldersBlock","renderAddButton","renderTree","renderNewItemDialog","addButton","overflowY","userSelect","deviceWrapper","fontStyleId","alignSelf","tableIcon","wrapperDevices","wrapperItems","wrapperCloning","wrapperNameAndId","wrapperCheckbox","enumsWrapper","wrapperIconEnumCell","nameEnumCell","backgroundRed","emptyList","enumsStyle","formControlLabel","headerWrapElement","backgroundSilver","RenderNewItemDialog","object","checkDeviceInObjects","DialogImporter","arrayDevice","setArrayDevice","useStateLocal","cloningMethod","setCloningMethod","idsFolder","setSdsFolder","selectFolder","setSelectFolder","checkedSelect","setCheckedSelect","openEdit","setOpenEdit","skipElement","setSkipElement","originalIds","originalId","newArray","selectId","objName","addDevice","arrayDeviceFunction","s","checkEnumsScip","newObjFolder","renderEnumCell","generateFolders","indexDevice","newDevice","newArrayDevice","getThemeType","indeterminate","indexCurrent","colorOn","colorOff","colorSet","colorRead","colorLinkedDevices","colorNativeDevices","actionsMapping","turnOn","IconOn","turnOff","setTargetTemperature","IconTemperature","incrementTargetTemperature","IconUp","decrementTargetTemperature","IconDown","setPercentage","IconPercentage","incrementPercentage","decrementPercentage","setColor","IconColor","setColorTemperature","IconBulb","incrementColorTemperature","decrementColorTemperature","getTargetTemperature","IconThermometer","getTemperatureReading","setLockState","IconLock","getLockState","TYPES_MAPPING","level","action","WIDTHS","ALIAS","LINKEDDEVICES","IS_CHROME","test","navigator","userAgent","vendor","ListDevices","onHashChange","Router","getLocation","dialog","editId","disabledButtons","onObjectChanged","loading","updateTimeout","clearTimeout","setTimeout","updateListItems","onResize","resizeTimer","windowWidth","innerWidth","idsInEnums","enumObj","_usedIdsOptional","funcEnums","roomsEnums","updateEnumsForOneDevice","onObjectsGenerate","expandedIDs","applyFilter","browse","editCreatedId","doNavigate","j","searchIcon","noEdit","showId","devicesArr","adapter","instances","inst","extIcon","importer","linkeddevices","devicesArrLinkeddevices","partsLinkedDevices","deviceId","arrayParent","deviceObj","cIcon","addToEnum","enumId","removeFromEnum","task","alert","onEditFinished","refresh","somethingChanged","defaultStates","defaultMin","defaultMax","defaultUnit","attrs","enabled","isLinked","parentType","detectDevices","oldName","oldSmartName","setSmartName","setEnumsOfDevice","sid","mainStateId","renderImporterDialog","showImporterDialog","renderEditFolder","showEditFolder","translated","copyId","deleteId","editEnum","showAddDialog","showConfirmation","message","lastChanged","func","room","text","noInfo","onlyAliases","updating","inputRef","timerChanged","waitForUpdateID","subscribes","onUpdateBound","onUpdate","bind","SmartDetector","getAdapterInstances","catch","noCommon","addEventListener","subscribeObject","getElementById","scrollIntoView","block","removeEventListener","unsubscribeObject","getAdapters","getObjects","getEnums","stateId","statesCount","usedStates","functionsNames","roomsNames","elem","updateState","names","ButtonBase","focusRipple","onEditEnum","enumsEdit","focusVisibleClassName","enumsEditFocusVisible","wrapperButtonEnum","spaceBetween","typeCellNameAndIcon","iconStyleType","visible","someFilterActive","someChanges","folders","f","hasVisibleChildren","_item","searchId","searchStyle","invertColor","WrapperRow","hoverRow","colSpan","iconOpen","textStyle","renderTypeCell","buttonsCell","wrapperButton","onCopy","onEdit","emptyBlock","changeFilter","iconInSelect","unshift","paperTable","stickyHeader","tableExpandIconCell","tableIconCell","headerCell","tableNameCell","renderHeaderFunction","renderHeaderRoom","renderHeaderType","buttonsCellHeader","group","newSmartName","copiedDevice","createDevice","CircularProgress","small","DndProvider","backend","TouchBackend","HTML5Backend","Toolbar","wrapperHeadButtons","viewCategory","InputLabelProps","shrink","hide700","setFilter","InputProps","endAdornment","InputAdornment","emptyClear","emptyBlockFlex","wrapperName","themeName","renderDevices","renderMessage","renderEditDialog","renderAddDialog","renderEditEnumDialog","withWidth","column","columnDiv","buttonLinkedDevices","devLineExpand","devLineEnabled","devLineEdit","devLineDelete","devLineName","devLineNumber","editedId","enumLineSubName","devLine","devLineDescription","devLineActions","devLineProgress","left","channelLineActions","devLineNameBlock","columnHeader","contrastText","devModified","actionIcon","devSubLine","devSubLineName","devSubSubLineName","devSubLineByOn","devSubLineDelete","devSubLineEdit","devSubLineTypeTitle","orderSelector","tableLine","tableSmartName","tableIdCell","tableEditButtonCell","tableGroup","main","tableGroupCell","tableExpandIcon","tableGroupIcon","minHeight","pointerEvents","filterType","App","extendedProps","bottomButtons","adapterName","translations","require","toggleTheme","currentThemeName","newThemeName","setThemeName","createTheme","selectedTab","loaded","square","elevation","tabContent","onError","onLoad","onLoadConfig","updateNativeValue","renderError","renderSaveCloseButtons","GenericApp","wrapperMenu","wrapperIconHeader","Boolean","hostname","match","version","host","Sentry","dsn","integrations","SentryIntegrations","build","onThemeChange","_themeName","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.f8adbd80.chunk.js","sourcesContent":["var map = {\n\t\"./Anteroom.svg\": 508,\n\t\"./Attic.svg\": 509,\n\t\"./Balcony.svg\": 510,\n\t\"./Barn.svg\": 511,\n\t\"./Basement.svg\": 512,\n\t\"./Bathroom.svg\": 513,\n\t\"./Bedroom.svg\": 514,\n\t\"./Boiler Room.svg\": 515,\n\t\"./Carport.svg\": 516,\n\t\"./Cellar.svg\": 517,\n\t\"./Chamber.svg\": 518,\n\t\"./Corridor.svg\": 519,\n\t\"./Dining Area.svg\": 520,\n\t\"./Dining Room.svg\": 521,\n\t\"./Dining.svg\": 522,\n\t\"./Dressing Room.svg\": 523,\n\t\"./Driveway.svg\": 524,\n\t\"./Entrance.svg\": 525,\n\t\"./Equipment Room.svg\": 526,\n\t\"./Front Yard.svg\": 527,\n\t\"./Gallery.svg\": 528,\n\t\"./Garage.svg\": 529,\n\t\"./Garden.svg\": 530,\n\t\"./Ground Floor.svg\": 531,\n\t\"./Guest Bathroom.svg\": 532,\n\t\"./Guest Room.svg\": 533,\n\t\"./Gym.svg\": 534,\n\t\"./Hall.svg\": 535,\n\t\"./Home Theater.svg\": 536,\n\t\"./Kitchen.svg\": 537,\n\t\"./Laundry Room.svg\": 538,\n\t\"./Living Area.svg\": 539,\n\t\"./Living Room.svg\": 540,\n\t\"./Locker Room.svg\": 541,\n\t\"./Nursery.svg\": 542,\n\t\"./Office.svg\": 543,\n\t\"./Outdoors.svg\": 544,\n\t\"./Playroom.svg\": 545,\n\t\"./Pool.svg\": 546,\n\t\"./Rear Wall.svg\": 547,\n\t\"./Second Floor.svg\": 548,\n\t\"./Shed.svg\": 549,\n\t\"./Sleeping Area.svg\": 550,\n\t\"./Stairway.svg\": 551,\n\t\"./Stairwell.svg\": 552,\n\t\"./Storeroom.svg\": 553,\n\t\"./Summer House.svg\": 554,\n\t\"./Swimming Pool.svg\": 555,\n\t\"./Terrace.svg\": 556,\n\t\"./Toilet.svg\": 557,\n\t\"./Upstairs.svg\": 558,\n\t\"./Wardrobe.svg\": 559,\n\t\"./Washroom.svg\": 560,\n\t\"./Wc.svg\": 561,\n\t\"./Windscreen.svg\": 562,\n\t\"./Workshop.svg\": 563,\n\t\"./Workspace.svg\": 564,\n\t\"./list\": 266,\n\t\"./list.json\": 266,\n\t\"./names.txt\": 565,\n\t\"./parseNames\": 388,\n\t\"./parseNames.d.ts\": 566,\n\t\"./parseNames.js\": 388\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 507;","var map = {\n\t\"./Alarm Systems.svg\": 568,\n\t\"./Amplifier.svg\": 569,\n\t\"./Awnings.svg\": 570,\n\t\"./Battery Status.svg\": 571,\n\t\"./Ceiling Spotlights.svg\": 572,\n\t\"./Chandelier.svg\": 573,\n\t\"./Climate.svg\": 574,\n\t\"./Coffee Makers.svg\": 575,\n\t\"./Cold Water.svg\": 576,\n\t\"./Computer.svg\": 577,\n\t\"./Consumption.svg\": 578,\n\t\"./Curtains.svg\": 579,\n\t\"./Dishwashers.svg\": 580,\n\t\"./Doors.svg\": 581,\n\t\"./Doorstep.svg\": 582,\n\t\"./Dryer.svg\": 583,\n\t\"./Fan.svg\": 584,\n\t\"./Floor Lamps.svg\": 585,\n\t\"./Garage Doors.svg\": 586,\n\t\"./Gates.svg\": 587,\n\t\"./Hairdryer.svg\": 588,\n\t\"./Handle.svg\": 589,\n\t\"./Hanging Lamps.svg\": 590,\n\t\"./Heater.svg\": 591,\n\t\"./Hoods.svg\": 592,\n\t\"./Hot Water.svg\": 593,\n\t\"./Humidity.svg\": 594,\n\t\"./Iron.svg\": 595,\n\t\"./Irrigation.svg\": 596,\n\t\"./Led Strip.svg\": 597,\n\t\"./Light.svg\": 598,\n\t\"./Lightings.svg\": 599,\n\t\"./Lock.svg\": 600,\n\t\"./Louvre.svg\": 601,\n\t\"./Mowing Machine.svg\": 602,\n\t\"./Music.svg\": 603,\n\t\"./Outdoor Blinds.svg\": 604,\n\t\"./People.svg\": 605,\n\t\"./Pool.svg\": 606,\n\t\"./Power Consumption.svg\": 607,\n\t\"./Printer.svg\": 608,\n\t\"./Pump.svg\": 609,\n\t\"./Receiver.svg\": 610,\n\t\"./Sconces.svg\": 611,\n\t\"./Security.svg\": 612,\n\t\"./Shading.svg\": 613,\n\t\"./Shutters.svg\": 614,\n\t\"./SmokeDetector.svg\": 615,\n\t\"./Sockets.svg\": 616,\n\t\"./Speaker.svg\": 617,\n\t\"./Stove.svg\": 618,\n\t\"./Table Lamps.svg\": 619,\n\t\"./Temperature Sensors.svg\": 620,\n\t\"./Tv.svg\": 621,\n\t\"./Vacuum Cleaner.svg\": 622,\n\t\"./Ventilation.svg\": 623,\n\t\"./Washing Machines.svg\": 624,\n\t\"./Water Consumption.svg\": 625,\n\t\"./Water Heater.svg\": 626,\n\t\"./Water.svg\": 627,\n\t\"./Weather.svg\": 628,\n\t\"./Window.svg\": 629,\n\t\"./list\": 265,\n\t\"./list.json\": 265,\n\t\"./names.txt\": 630,\n\t\"./parseNames\": 389,\n\t\"./parseNames.d.ts\": 631,\n\t\"./parseNames.js\": 389\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 567;","/**\r\n * Copyright 2019-2021 bluefox <dogafox@gmail.com>\r\n *\r\n * MIT License\r\n *\r\n **/\r\n\r\nimport ChannelDetector from 'iobroker.type-detector';\r\n\r\nclass IOBChannelDetector {\r\n    constructor() {\r\n        this.detector = new ChannelDetector.ChannelDetector();\r\n    }\r\n\r\n    getPatterns() {\r\n        return this.detector.getPatterns();\r\n    }\r\n\r\n    detect(options) {\r\n        if (!options._keysOptional || options.forceRebuildKeys) {\r\n            if (JSON.stringify(this.objects) !== JSON.stringify(options.objects) || options.forceRebuildKeys) {\r\n                this.objects = options.objects;\r\n                this.keys = Object.keys(this.objects).sort();\r\n            }\r\n            options._keysOptional = this.keys;\r\n        }\r\n\r\n        return this.detector.detect(options);\r\n    }\r\n}\r\n\r\nexport default IOBChannelDetector;\r\n","import React from \"react\";\n\nconst Jalousie = props => (\n  <svg viewBox=\"0 0 508.16 508.16\" {...props}>\n    <path\n      d=\"M504.18 13.67a3.924 3.924 0 0 0-.42.02H4a4 4 0 0 0-4 4v47.28a4 4 0 0 0 4 4h19.72l-13.44 42.04a4 4 0 0 0 3.8 5.24h9.64l-13.44 42.04a4 4 0 0 0 3.8 5.24h9.64l-13.44 42.04a4 4 0 0 0 3.8 5.24h9.64l-13.44 42.04a4 4 0 0 0 3.8 5.24h9.64l-13.44 42.08a4 4 0 0 0 .56 3.56 4 4 0 0 0 3.24 1.64h9.64l-13.44 42.08a4 4 0 0 0 .56 3.56 4 4 0 0 0 3.24 1.64h9.64l-13.44 42.08a4 4 0 0 0 .56 3.56 4 4 0 0 0 3.24 1.64h9.64l-13.44 42.16a4 4 0 0 0 .56 3.56 4 4 0 0 0 3.24 1.64h9.64l-13.44 42a4 4 0 0 0 .56 3.56 4 4 0 0 0 3.24 1.64h479.8a4 4 0 0 0 3.24-1.64 4 4 0 0 0 .56-3.56l-13.44-42.08h9.64a4 4 0 0 0 3.24-1.64 4 4 0 0 0 .56-3.56l-13.44-42.08h9.64a4 4 0 0 0 3.24-1.64 4 4 0 0 0 .56-3.56l-13.44-42.08h9.64a4 4 0 0 0 3.24-1.64 4 4 0 0 0 .56-3.56l-13.44-42.08h9.64a4 4 0 0 0 3.24-1.64 4 4 0 0 0 .56-3.56l-13.64-42.08h9.84a4 4 0 0 0 4-5.24l-13.44-42.04h9.44a4 4 0 0 0 4-5.24l-13.44-42.04h9.44a4 4 0 0 0 4-5.24l-13.44-42.04h9.44a4 4 0 0 0 4-5.24l-13.44-42.04h19.72a4 4 0 0 0 4-4V17.69a4 4 0 0 0-3.98-4.02zM99.08 486.49H19.56l12.56-39.28h66.96v39.28zm0-47.28H19.56l12.56-39.28h66.96v39.28zm0-47.28H19.56l12.56-39.28h66.96v39.28zm0-47.28H19.56l12.56-39.28h66.96v39.28zm0-47.28H19.56l12.56-39.28h66.96v39.28zm0-47.28H19.56l12.56-39.28h66.96v39.28zm0-47.28H19.56l12.56-39.28h66.96v39.28zm0-47.28H19.56l12.56-39.28h66.96v39.28zm0-47.28H19.56l12.56-39.28h66.96v39.28zm26.8 378.24h-18.8v-39.28h18.8v39.28zm0-47.28h-18.8v-39.28h18.8v39.28zm0-47.28h-18.8v-39.28h18.8v39.28zm0-47.28h-18.8v-39.28h18.8v39.28zm0-47.28h-18.8v-39.28h18.8v39.28zm0-47.28h-18.8v-39.28h18.8v39.28zm0-47.28h-18.8v-39.28h18.8v39.28zm0-47.28h-18.8v-39.28h18.8v39.28zm.16-47.28h-18.96V68.97h18.96v39.28zm247.84 378.24h-240v-39.28h240v39.28zm-240-47.28v-39.28h239.68v39.28H133.88zm240-47.28h-240v-39.28h240v39.28zm0-47.28h-240v-39.28h240v39.28zm0-47.28h-240v-39.28h240v39.28zm0-47.28h-240v-39.28h240v39.28zm0-47.28h-240v-39.28h240v39.28zm0-47.28h-240v-39.28h240v39.28zm-240-47.28V68.97h239.84v39.28H133.88zm266.64 378.24h-18.64l-.32-39.28h18.96v39.28zm0-47.28h-18.96v-39.28h18.96v39.28zm0-47.28h-18.96v-39.28h18.96v39.28zm0-47.28h-18.96v-39.28h18.96v39.28zm.32-47.28h-18.96v-39.28h18.96v39.28zm0-47.28h-18.96v-39.28h18.96v39.28zm0-47.28h-18.96v-39.28h18.96v39.28zm0-47.28h-18.96v-39.28h18.96v39.28zm-18.96-47.28V68.97h18.8v39.28h-18.8zm63.56 8v39.28h-36.92v-39.28h36.92zm-36.76-8V68.97h36.92v39.28h-36.92zm36.76 55.28v39.28h-36.92v-39.28h36.92zm0 47.28v39.28h-36.92v-39.28h36.92zm0 47.28v39.28h-36.92v-39.28h36.92zm0 47.28v39.28h-36.76l-.16-39.28h36.92zm42.68 181.12h-79.44v-39.28h66.96l12.48 39.28zm0-47.28h-79.44v-39.28h66.96l12.48 39.28zm0-47.28h-79.44v-39.28h36.92v17.44a4 4 0 0 0 8 0v-17.44h22.04l12.48 39.28zm0-47.28h-34.6v-39.28h22.04l12.56 39.28zm0-47.28h-34.6v-39.28h22.04l12.56 39.28zm0-47.28h-34.6v-39.28h22.04l12.56 39.28zm0-47.28h-34.6v-39.28h22.04l12.56 39.28zm0-47.28h-34.6v-39.28h22.04l12.56 39.28zm0-47.28h-34.6V68.97h22.04l12.56 39.28zm11.56-47.28H8V21.69h491.76l-.08 39.28z\"\n      fill=\"currentColor\"\n    />\n    <path\n      d=\"M454.32 37.33h-13.76a4 4 0 0 0 0 8h13.76a4 4 0 0 0 0-8zM414.84 37.33h-96a4 4 0 0 0 0 8h96a4 4 0 0 0 0-8z\"\n      fill=\"currentColor\"\n    />\n  </svg>\n);\n\nexport default Jalousie;\n","import React from \"react\";\n\nconst PushButton = props => (\n    <svg viewBox=\"0 0 285 285\" {...props}>\n        <g>\n            <path fill=\"currentColor\" d=\"M88.4,87.996c2.525-2.146,2.832-5.933,0.687-8.458C82.801,72.144,79.34,62.719,79.34,53c0-22.607,18.393-41,41-41\n              c22.607,0,41,18.393,41,41c0,9.729-3.467,19.161-9.761,26.557c-2.148,2.523-1.843,6.311,0.681,8.458\n              c1.129,0.961,2.511,1.431,3.886,1.431c1.698,0,3.386-0.717,4.572-2.111C168.858,77.77,173.34,65.576,173.34,53\n              c0-29.225-23.775-53-53-53c-29.225,0-53,23.775-53,53c0,12.563,4.476,24.748,12.602,34.31C82.089,89.835,85.873,90.141,88.4,87.996\n              z\"/>\n            <path fill=\"currentColor\" d=\"M120.186,41.201c13.228,0,23.812,8.105,27.313,19.879c0.761-2.562,1.176-5.271,1.176-8.08\n                  c0-15.649-12.685-28.335-28.335-28.335c-15.648,0-28.334,12.686-28.334,28.335c0,2.623,0.364,5.16,1.031,7.571\n                  C96.691,49.076,107.152,41.201,120.186,41.201z\"/>\n            <path fill=\"currentColor\" d=\"M234.21,169.856c-3.769-22.452-19.597-26.04-27.034-26.462c-2.342-0.133-4.516-1.32-5.801-3.282\n                  c-5.388-8.225-12.609-10.4-18.742-10.4c-4.405,0-8.249,1.122-10.449,1.932c-0.275,0.102-0.559,0.15-0.837,0.15\n                  c-0.87,0-1.701-0.47-2.163-1.262c-5.472-9.387-13.252-11.809-19.822-11.809c-3.824,0-7.237,0.82-9.548,1.564\n                  c-0.241,0.077-0.764,0.114-1.001,0.114c-1.256,0-2.637-1.03-2.637-2.376V69.753c0-11.035-8.224-16.552-16.5-16.552\n                  c-8.276,0-16.5,5.517-16.5,16.552v84.912c0,4.989-3.811,8.074-7.918,8.074c-2.495,0-4.899-1.138-6.552-3.678l-7.937-12.281\n                  c-3.508-5.788-8.576-8.188-13.625-8.189c-11.412-0.001-22.574,12.258-14.644,25.344l62.491,119.692\n                  c0.408,0.782,1.225,1.373,2.108,1.373h87.757c1.253,0,2.289-1.075,2.365-2.325l2.196-35.816c0.025-0.413,0.162-0.84,0.39-1.186\n                  C231.591,212.679,237.828,191.414,234.21,169.856z\"/>\n        </g>\n    </svg>);\n\nexport default PushButton;\n","import React from \"react\";\n\nconst DoorOpened = props => (\n  <svg viewBox=\"0 0 512 512\" {...props}>\n    <path fill=\"currentColor\" d=\"M298.667 298.667c17.643 0 32-14.357 32-32s-14.357-32-32-32-32 14.357-32 32c0 17.642 14.357 32 32 32zm0-42.667c5.867 0 10.667 4.779 10.667 10.667s-4.8 10.667-10.667 10.667S288 272.555 288 266.667 292.8 256 298.667 256z\" />\n    <path fill=\"currentColor\" d=\"M448 490.667h-32v-480C416 4.779 411.221 0 405.333 0H106.667c-.597 0-1.131.256-1.707.341-.555.085-1.088.149-1.621.32-.939.32-1.749.789-2.56 1.344-.32.213-.704.277-1.003.533-.107.085-.149.213-.256.32-.768.704-1.365 1.579-1.899 2.496-.213.341-.512.619-.661.981-.597 1.345-.96 2.774-.96 4.332v480H64c-5.888 0-10.667 4.779-10.667 10.667C53.333 507.221 58.112 512 64 512h42.667c.576 0 1.173-.043 1.749-.149l256-42.667a10.672 10.672 0 0 0 8.917-10.517V53.333c0-5.227-3.776-9.664-8.917-10.517L235.541 21.333h159.125v480c0 5.888 4.779 10.667 10.667 10.667H448c5.888 0 10.667-4.779 10.667-10.667s-4.779-10.666-10.667-10.666zm-96-428.31v387.264l-234.667 39.125V23.253L352 62.357z\" />\n  </svg>\n);\n\nexport default DoorOpened;\n","import React from \"react\";\n\nconst FireOn = props => (\n  <svg viewBox=\"0 0 512.006 512.006\" {...props}>\n    <path\n      d=\"M502.379 211.249c0 74.656-60.52 135.176-135.176 135.176-6.469.01-12.919-.473-19.311-1.448-66.487-9.598-115.837-66.555-115.866-133.728-.019-67.212 49.349-124.227 115.866-133.825a142.128 142.128 0 0 1 19.311-1.352c74.656 0 135.176 60.521 135.176 135.177z\"\n      fill=\"#c52828\"\n    />\n    <path\n      d=\"M463.757 211.249c-.029 67.173-49.378 124.131-115.865 133.728-66.487-9.598-115.837-66.555-115.866-133.728-.019-67.212 49.349-124.227 115.866-133.825 66.516 9.598 115.875 66.613 115.865 133.825z\"\n      fill=\"#f44335\"\n    />\n    <g fill=\"#fdd834\">\n      <path d=\"M380.527 230.56h-26.649a8.208 8.208 0 0 1-8.4-7.242l-7.242-90.472c-.212-4.47 3.235-8.275 7.705-8.497.232-.01.463-.01.695 0h41.036a8.105 8.105 0 0 1 8.4 7.802c.01.232.01.463 0 .695l-7.242 90.472c-.501 4.181-4.093 7.319-8.303 7.242zM362.085 269.181h10.235c7.84 0 14.194 6.353 14.194 14.194v10.235c0 7.84-6.353 14.194-14.194 14.194h-10.235c-7.84 0-14.194-6.353-14.194-14.194v-10.235c.001-7.84 6.354-14.194 14.194-14.194z\" />\n    </g>\n    <path\n      d=\"M308.015 332.714a132.057 132.057 0 0 1-24.332-15.256 138.367 138.367 0 0 1-25.587-26.456 134.123 134.123 0 0 1-26.07-79.754 136.453 136.453 0 0 1 3.09-28.966 129.801 129.801 0 0 1 9.655-28.966c-24.428-39.201-50.691-78.113-85.547-108.334-2.607-2.221-5.214-4.442-7.917-6.566a161.051 161.051 0 0 0-14.387-10.621 80.965 80.965 0 0 0-13.807-7.145c1.641 7.338 3.476 14.773 4.731 22.208a180.355 180.355 0 0 1 2.993 26.939v7.145a192.012 192.012 0 0 1-60.829 139.521 202.647 202.647 0 0 0-43.836 52.719 149.063 149.063 0 0 0-6.566 120.017 152.006 152.006 0 0 0 22.208 40.167 164.926 164.926 0 0 0 106.21 61.891 86.874 86.874 0 0 1-44.801-32.249 51.315 51.315 0 0 1-3.669-5.6 77.46 77.46 0 0 1-6.469-13.325 79.464 79.464 0 0 1 3.766-63.726 111.914 111.914 0 0 1 23.463-28.387 101.983 101.983 0 0 0 32.442-74.25v-3.862a97.875 97.875 0 0 0-4.731-27.132 112.539 112.539 0 0 1 10.911 6.566 108.053 108.053 0 0 1 30.222 30.801 100.963 100.963 0 0 1 15.835 46.443v8.4a100.92 100.92 0 0 1-18.249 57.933c22.98 13.035 38.622-8.593 44.994-28.966a60.067 60.067 0 0 0 2.51-12.842 88.458 88.458 0 0 1 28.966 61.312v5.214c-2.704 33.678-25.346 62.451-57.45 72.995 73.353-11.789 128.717-72.889 133.245-147.053a131.977 131.977 0 0 1-30.994-10.815z\"\n      fill=\"#f57c00\"\n    />\n    <path\n      d=\"M263.117 417.489v-5.214a88.462 88.462 0 0 0-28.966-61.312 60.129 60.129 0 0 1-2.51 12.842c-5.986 20.47-22.014 42.098-44.994 28.966a100.923 100.923 0 0 0 18.249-57.933v-.966-7.338a100.971 100.971 0 0 0-15.835-46.443 108.027 108.027 0 0 0-30.222-30.801 108.949 108.949 0 0 0-39.877-35.532 97.838 97.838 0 0 1 4.731 27.132v3.862a101.988 101.988 0 0 1-32.442 74.25 111.924 111.924 0 0 0-23.366 28.387 79.491 79.491 0 0 0-3.573 63.726 83.948 83.948 0 0 0 35.436 42.291 51.315 51.315 0 0 0 3.669 5.6 86.886 86.886 0 0 0 44.415 32.249 164.927 164.927 0 0 1-106.21-61.892 152.082 152.082 0 0 1-22.014-40.167 149.055 149.055 0 0 1 6.564-120.015 202.714 202.714 0 0 1 44.029-53.202A192.012 192.012 0 0 0 131.03 76.458v-7.145a180.486 180.486 0 0 0-2.993-26.939c-1.255-7.435-3.09-14.869-4.731-22.208a80.965 80.965 0 0 1 13.807 7.145 159.446 159.446 0 0 1 14.773 10.718c2.704 2.124 5.311 4.345 7.917 6.566 34.856 30.222 61.119 69.133 85.547 108.334a129.75 129.75 0 0 0-9.655 28.966 136.634 136.634 0 0 0-3.669 29.353 134.116 134.116 0 0 0 26.07 79.754 138.396 138.396 0 0 0 25.587 26.456 132.164 132.164 0 0 0 24.332 15.256 152.203 152.203 0 0 1-44.898 84.775z\"\n      fill=\"#ff9801\"\n    />\n    <path d=\"M147.831 500.912h-1.448c-61.756-8.7-113.963-50.15-136.432-108.334a158.725 158.725 0 0 1 7.338-127.355 212.528 212.528 0 0 1 45.96-55.809 181.787 181.787 0 0 0 57.933-132.473v-6.759a171.298 171.298 0 0 0-2.8-25.587c-.966-5.697-2.221-11.2-3.476-16.704l-1.159-5.117c-1.178-5.204 2.076-10.37 7.28-11.548a9.663 9.663 0 0 1 5.948.541 89.473 89.473 0 0 1 15.449 8.014 172.47 172.47 0 0 1 15.449 11.2c41.036 32.732 70.871 77.244 95.589 117.314a9.673 9.673 0 0 1 .483 9.655 121.056 121.056 0 0 0-9.655 26.842 128.158 128.158 0 0 0-2.607 26.456c.01 59.198 41.374 110.333 99.258 122.721a9.655 9.655 0 0 1 7.628 9.655c-3.186 77.244-61.216 141.742-141.163 156.129-5.253.927-10.254-2.588-11.181-7.84a9.65 9.65 0 0 1 6.353-10.795c29.99-9.8 50.517-37.492 51.174-69.037a67.618 67.618 0 0 0-14.387-40.746 56.78 56.78 0 0 1-24.139 31.091 33.122 33.122 0 0 1-33.408-1.448c-4.644-2.626-6.276-8.516-3.659-13.16.145-.261.299-.502.473-.743a91.187 91.187 0 0 0 16.511-52.429v-.772a90.743 90.743 0 0 0-14.58-48.277 98.107 98.107 0 0 0-19.311-21.532v9.945a111.13 111.13 0 0 1-35.436 81.299 103.445 103.445 0 0 0-21.532 25.78 69.873 69.873 0 0 0-3.09 56.002 76.304 76.304 0 0 0 49.533 44.512c5.33.801 9.009 5.774 8.207 11.104-.801 5.328-5.774 8.997-11.103 8.205zM137.113 39.478v1.738a188.136 188.136 0 0 1 3.09 28.194v7.435A200.926 200.926 0 0 1 76.38 223.318a192.998 192.998 0 0 0-42.098 50.498 139.414 139.414 0 0 0-6.469 111.907 148.682 148.682 0 0 0 65.561 76.568 89.522 89.522 0 0 1-15.159-49.726 91.25 91.25 0 0 1 9.655-40.167 119.46 119.46 0 0 1 25.394-31.091 92.026 92.026 0 0 0 29.449-67.588v-3.09a88.799 88.799 0 0 0-4.248-24.911 9.653 9.653 0 0 1 6.237-12.147 9.638 9.638 0 0 1 7.473.657 119.392 119.392 0 0 1 44.705 40.649 110.062 110.062 0 0 1 17.669 58.898v1.159a110.343 110.343 0 0 1-13.035 52.139 12.555 12.555 0 0 0 4.731-1.448c9.655-5.31 17.283-22.497 18.345-35.436.434-5.31 5.088-9.269 10.409-8.844a9.61 9.61 0 0 1 6.006 2.761 95.586 95.586 0 0 1 32.153 68.168 89.528 89.528 0 0 1-13.711 47.408 146.774 146.774 0 0 0 69.133-108.817c-62.77-17.37-106.22-74.492-106.21-139.618a146.655 146.655 0 0 1 3.283-30.994 139.876 139.876 0 0 1 8.497-26.263c-23.27-37.077-51.27-78.402-88.541-108.045a113.049 113.049 0 0 0-8.496-6.467z\" />\n    <path d=\"M367.203 356.081a144.841 144.841 0 0 1-89.506-30.994 143.882 143.882 0 0 1-55.326-113.838 146.655 146.655 0 0 1 3.283-30.994 140.652 140.652 0 0 1 10.814-31.091c23.965-50.498 74.839-82.699 130.735-82.747 79.986.019 144.813 64.875 144.803 144.861a144.848 144.848 0 0 1-55.297 113.809 143.543 143.543 0 0 1-89.506 30.994zm0-270.353c-48.47.019-92.586 27.943-113.355 71.74a121.83 121.83 0 0 0-9.655 26.939 127.805 127.805 0 0 0-2.51 26.842c.01 59.198 41.374 110.333 99.258 122.721a125.763 125.763 0 0 0 26.263 2.8c69.326 0 125.521-56.195 125.521-125.521S436.519 85.728 367.203 85.728z\" />\n    <path d=\"M380.527 240.215h-26.649c-9.279.097-17.109-6.894-18.056-16.125l-7.242-90.085a17.201 17.201 0 0 1 4.538-13.035 18.38 18.38 0 0 1 13.518-5.89h41.036a18.375 18.375 0 0 1 13.518 5.89 17.204 17.204 0 0 1 4.635 13.035l-7.242 90.472c-1.139 9.076-8.912 15.854-18.056 15.738zm-25.49-19.311h24.525l6.952-86.899h-38.622l7.145 86.899zM372.32 317.459h-10.235c-13.151-.048-23.801-10.698-23.849-23.849v-10.235c.048-13.151 10.698-23.801 23.849-23.849h10.138c13.189 0 23.888 10.66 23.946 23.849v10.138c0 13.18-10.669 23.888-23.849 23.946zm-10.138-38.622a4.635 4.635 0 0 0-4.538 4.538v10.138a4.635 4.635 0 0 0 4.538 4.538h10.138a4.635 4.635 0 0 0 4.538-4.538v-10.138a4.635 4.635 0 0 0-4.538-4.538h-10.138z\" />\n  </svg>\n);\n\nexport default FireOn;\n","import React from \"react\";\n\nconst FloodOn = props => (\n  <svg viewBox=\"0 0 512.002 512.002\" {...props}>\n    <path\n      d=\"M481.929 324.35c0 65.951-53.464 119.415-119.415 119.415a111.938 111.938 0 0 1-17.059-1.279c-58.735-8.478-102.33-58.795-102.356-118.135-.017-59.375 43.595-109.742 102.356-118.221a125.333 125.333 0 0 1 17.059-1.194c65.951-.001 119.415 53.462 119.415 119.414z\"\n      fill=\"#c52828\"\n    />\n    <path\n      d=\"M447.81 324.35c-.026 59.341-43.621 109.657-102.356 118.135-58.735-8.478-102.33-58.795-102.356-118.135-.017-59.375 43.595-109.742 102.356-118.221 58.77 8.487 102.373 58.846 102.356 118.221z\"\n      fill=\"#f44335\"\n    />\n    <g fill=\"#fdd834\">\n      <path d=\"M374.285 341.409h-23.542a7.251 7.251 0 0 1-7.421-6.397l-6.397-79.923a7.174 7.174 0 0 1 6.807-7.506c.205-.009.409-.009.614 0h36.251a7.16 7.16 0 0 1 7.421 6.892c.009.205.009.409 0 .614l-6.397 79.923a7.249 7.249 0 0 1-7.336 6.397zM357.993 375.527h9.041c6.926 0 12.539 5.612 12.539 12.539v9.041c0 6.926-5.612 12.539-12.539 12.539h-9.041c-6.926 0-12.539-5.612-12.539-12.539v-9.041c0-6.926 5.621-12.539 12.539-12.539z\" />\n    </g>\n    <path\n      d=\"M318.415 435.235a153.553 153.553 0 0 1-19.192 22.859 157.081 157.081 0 0 1-50.154 33.095 159.575 159.575 0 0 1-61.413 12.283 149.268 149.268 0 0 1-20.556-1.365 155.17 155.17 0 0 1-40.857-10.833 156.698 156.698 0 0 1-84.017-82.311 152.753 152.753 0 0 1-12.368-60.219 150.27 150.27 0 0 1 17.059-69.005 752.602 752.602 0 0 1 42.648-68.237c15.268-22.774 29.513-46.145 44.013-69.346l34.119-54.504 7.335-11.771c4.504-7.353 14.117-9.656 21.469-5.143a15.525 15.525 0 0 1 5.143 5.143l34.716 55.869c-2.644 4.18-5.032 8.53-7.335 12.709a96.424 96.424 0 0 0-11.515 44.439 98.026 98.026 0 0 0 8.018 38.725 100.313 100.313 0 0 0 21.921 31.56 106.83 106.83 0 0 0 9.98 8.53 115.344 115.344 0 0 0-11.6 31.048 120.546 120.546 0 0 0-2.729 25.589c.041 48.9 29.878 92.828 75.315 110.885z\"\n      fill=\"#0377bc\"\n    />\n    <path\n      d=\"M277.217 435.235a153.553 153.553 0 0 1-19.192 22.859 157.081 157.081 0 0 1-50.154 33.095 158.847 158.847 0 0 1-40.772 10.833 155.17 155.17 0 0 1-40.857-10.833 156.698 156.698 0 0 1-84.017-82.311 152.657 152.657 0 0 1-12.368-60.134 150.27 150.27 0 0 1 17.059-69.005 752.602 752.602 0 0 1 42.648-68.237c15.268-22.774 29.513-46.145 44.013-69.346l34.119-54.504c9.212 14.671 18.339 29.427 27.465 44.098-2.644 4.18-5.032 8.53-7.335 12.709a96.502 96.502 0 0 0-10.833 44.354 98.026 98.026 0 0 0 8.018 38.725 100.313 100.313 0 0 0 21.921 31.56 106.83 106.83 0 0 0 9.98 8.53 115.323 115.323 0 0 0-12.283 31.133 120.546 120.546 0 0 0-2.729 25.589c.043 48.9 29.88 92.828 75.317 110.885z\"\n      fill=\"#02a9f4\"\n    />\n    <path\n      d=\"M411.388 144.545a477.911 477.911 0 0 0-27.636-43.842c-9.894-14.586-19.192-29.598-28.489-44.525L328.395 13.53c-3.037-4.708-9.323-6.065-14.031-3.028a10.259 10.259 0 0 0-3.028 3.028l-12.794 20.215-14.074 22.433c-9.297 14.927-18.595 29.939-28.489 44.525-6.994 10.236-13.989 20.471-20.301 31.133-2.644 4.18-5.032 8.53-7.335 12.709a96.502 96.502 0 0 0-10.833 44.354 98.758 98.758 0 0 0 29.939 70.284 106.83 106.83 0 0 0 9.98 8.53 119.423 119.423 0 0 1 84.017-60.902 114.9 114.9 0 0 1 21.068-1.877c5.186.009 10.372.324 15.524.938a119.369 119.369 0 0 1 39.578 12.539 96.462 96.462 0 0 0-6.228-73.866z\"\n      fill=\"#0377bc\"\n    />\n    <path\n      d=\"M379.573 188.899a93.046 93.046 0 0 1-1.535 17.059 131.537 131.537 0 0 0-15.524-1.024 114.797 114.797 0 0 0-21.068 1.877 119.425 119.425 0 0 0-84.017 60.902 106.96 106.96 0 0 1-9.98-8.53c-31.099-29.743-38.878-76.417-19.106-114.638 2.303-4.35 4.691-8.53 7.335-12.709 6.312-10.662 13.306-20.898 20.301-31.133 9.894-14.586 19.192-29.598 28.489-44.525l14.074-22.433 14.074 22.433c9.297 14.927 18.595 29.939 28.489 44.525a477.911 477.911 0 0 1 27.636 43.842 96.401 96.401 0 0 1 10.832 44.354z\"\n      fill=\"#02a9f4\"\n    />\n    <path d=\"M187.656 512.002a167.398 167.398 0 0 1-64.655-12.88 165.226 165.226 0 0 1-88.623-86.746 160.466 160.466 0 0 1-13.05-63.631 158.81 158.81 0 0 1 17.656-72.928 698.388 698.388 0 0 1 39.663-63.887l3.412-5.032c12.027-17.998 23.627-36.677 34.886-54.76L167.1 71.531c6.986-11.353 21.861-14.893 33.214-7.898a24.1 24.1 0 0 1 7.898 7.898l17.059 27.38 17.827 28.404a8.521 8.521 0 0 1 0 9.383c-2.559 4.009-4.777 8.018-6.994 12.112a87.69 87.69 0 0 0-10.065 40.089 89.456 89.456 0 0 0 7.335 35.398 92.438 92.438 0 0 0 20.045 28.83 99.608 99.608 0 0 0 9.212 7.847 8.534 8.534 0 0 1 2.303 10.918 106.955 106.955 0 0 0-10.747 28.745 112.483 112.483 0 0 0-2.559 23.712c.009 45.429 27.721 86.26 69.943 103.038 4.393 1.706 6.559 6.653 4.853 11.046a8.584 8.584 0 0 1-.93 1.749 162.407 162.407 0 0 1-20.301 24.139 164.29 164.29 0 0 1-52.884 34.886 167.489 167.489 0 0 1-64.653 12.795zm0-435.012a6.99 6.99 0 0 0-6.056 3.412l-50.154 80.69c-11.344 18.168-23.03 37.019-35.227 55.187l-3.412 5.032a687.543 687.543 0 0 0-38.725 62.266 141.613 141.613 0 0 0-15.695 65.166 143.56 143.56 0 0 0 11.686 56.893 148.16 148.16 0 0 0 79.411 77.79 152.855 152.855 0 0 0 116.344 0 147.616 147.616 0 0 0 47.425-31.133 143.446 143.446 0 0 0 12.027-13.306c-43.322-21.802-70.668-66.139-70.711-114.638a129.576 129.576 0 0 1 2.9-27.38 124.357 124.357 0 0 1 9.212-26.954 136.293 136.293 0 0 1-5.203-4.691 109.87 109.87 0 0 1-23.798-34.119 106.411 106.411 0 0 1-8.53-42.136c0-16.803 4.035-33.359 11.771-48.278 1.621-3.071 3.241-5.971 4.862-8.53l-14.927-24.054-17.059-27.38a7.087 7.087 0 0 0-6.141-3.837z\" />\n    <path d=\"M99.971 442.4A8.521 8.521 0 0 1 94 439.926a129.631 129.631 0 0 1-28.318-41.113 126.28 126.28 0 0 1-10.236-50.069 124.503 124.503 0 0 1 13.818-57.234c1.868-4.325 6.883-6.32 11.208-4.452s6.32 6.883 4.452 11.208c-.162.375-.35.742-.563 1.092a107.494 107.494 0 0 0-11.856 49.387 109.211 109.211 0 0 0 8.53 43.331 112.626 112.626 0 0 0 24.565 35.739c3.344 3.318 3.369 8.717.051 12.061a8.549 8.549 0 0 1-6.022 2.525l.342-.001zM257.428 276.242a8.526 8.526 0 0 1-5.118-1.706 115.222 115.222 0 0 1-10.747-9.212 109.87 109.87 0 0 1-23.798-34.119 106.411 106.411 0 0 1-8.53-42.136c0-16.803 4.035-33.359 11.771-48.278 2.559-4.862 5.118-9.212 7.677-13.306 6.312-10.662 13.392-21.068 20.386-31.218 9.041-13.903 17.912-27.807 26.442-41.881L304 8.753c5.485-8.734 17.017-11.379 25.751-5.894a18.698 18.698 0 0 1 5.894 5.894l28.574 45.634c8.53 13.733 17.059 27.977 26.612 41.539l1.706 2.474a457.473 457.473 0 0 1 26.442 42.136 104.968 104.968 0 0 1 6.824 80.434c-1.433 4.487-6.235 6.969-10.722 5.536a8.282 8.282 0 0 1-1.39-.589 112.612 112.612 0 0 0-106.535 2.388 110.28 110.28 0 0 0-42.136 43.416 8.52 8.52 0 0 1-5.715 4.265l-1.877.256zm62.437-258.959a1.541 1.541 0 0 0-1.365.768l-28.489 45.378c-8.53 13.903-17.571 28.233-26.954 42.051-6.909 10.065-13.903 20.301-20.045 30.707-2.644 4.18-4.947 8.53-7.165 12.368a87.722 87.722 0 0 0-9.809 40.345 89.456 89.456 0 0 0 7.335 35.398 92.438 92.438 0 0 0 20.045 28.83l1.791 1.706a127.216 127.216 0 0 1 43.331-41.369 129.73 129.73 0 0 1 113.359-7.25 87.904 87.904 0 0 0-8.53-57.831 444.102 444.102 0 0 0-25.589-40.516l-1.706-2.474c-9.383-13.818-18.339-28.148-26.954-42.051L321.23 18.05a1.532 1.532 0 0 0-1.365-.767z\" />\n    <path d=\"M271.246 243.233a8.519 8.519 0 0 1-5.971-2.388 75.502 75.502 0 0 1-16.292-23.456 71.923 71.923 0 0 1-5.885-28.489 70.537 70.537 0 0 1 7.933-32.498c1.877-3.582 4.009-7.25 6.227-10.833l.512-.768a8.538 8.538 0 0 1 11.609-3.284 8.538 8.538 0 0 1 3.284 11.609 6.997 6.997 0 0 1-.392.631l-.512.853c-2.132 3.327-3.924 6.568-5.63 9.724a53.307 53.307 0 0 0-5.971 24.565 54.816 54.816 0 0 0 4.435 21.665 58.198 58.198 0 0 0 12.624 18.083c3.395 3.267 3.489 8.666.222 12.061a8.518 8.518 0 0 1-6.193 2.61v-.085z\" />\n    <path d=\"M362.514 452.294c-70.66 0-127.945-57.285-127.945-127.945a129.576 129.576 0 0 1 2.9-27.38 123.98 123.98 0 0 1 12.453-33.351 127.15 127.15 0 0 1 48.619-50.154c37.94-21.495 84.136-22.518 122.997-2.729 62.744 32.489 87.275 109.7 54.777 172.452-22.005 42.512-65.916 69.184-113.801 69.107zm0-238.83c-40.763.009-78.234 22.382-97.579 58.257a107.238 107.238 0 0 0-10.747 28.83 112.818 112.818 0 0 0-2.559 23.798c0 61.243 49.643 110.885 110.885 110.885s110.885-49.642 110.885-110.885-49.643-110.885-110.885-110.885z\" />\n    <path d=\"M374.285 349.939h-23.542c-8.231.085-15.157-6.141-15.95-14.33l-6.397-79.496a15.26 15.26 0 0 1 4.009-11.515 16.312 16.312 0 0 1 11.942-5.203h36.251a16.31 16.31 0 0 1 11.941 5.203 15.27 15.27 0 0 1 4.094 11.515l-6.397 79.923c-.999 8.026-7.865 14.013-15.951 13.903zm-22.519-17.06h21.665l6.141-76.767h-34.119l6.313 76.767zM367.034 418.176h-9.041c-11.617-.043-21.026-9.451-21.068-21.068v-9.041c.043-11.617 9.451-21.026 21.068-21.068h8.956c11.651 0 21.102 9.417 21.153 21.068v8.956c.001 11.651-9.416 21.11-21.068 21.153zm-8.956-34.119a4.095 4.095 0 0 0-4.009 4.009v8.956a4.095 4.095 0 0 0 4.009 4.009h8.956a4.095 4.095 0 0 0 4.009-4.009v-8.956a4.095 4.095 0 0 0-4.009-4.009h-8.956z\" />\n  </svg>\n);\n\nexport default FloodOn;\n","import React from \"react\";\r\n\r\nconst Gate = props => (\r\n    <svg viewBox=\"0 0 512 512\" {...props}>\r\n    <path fill=\"currentColor\" d=\"M462,226c-5.52,0-10,4.48-10,10s4.48,10,10,10c5.52,0,10-4.48,10-10S467.52,226,462,226z\"/>\r\n    <path fill=\"currentColor\" d=\"M50,226c-5.52,0-10,4.48-10,10s4.48,10,10,10s10-4.48,10-10S55.52,226,50,226z\"/>\r\n\t<path fill=\"currentColor\" d=\"M502,126h-0.027C508.265,117.637,512,107.248,512,96c0-27.57-22.43-50-50-50s-50,22.43-50,50\r\n\t\tc0,11.248,3.735,21.637,10.027,30H422c-5.522,0-10,4.478-10,10v50.03c-7.399,0.025-17.158,0.065-23,0.113V166.63\r\n\t\tc0-5.522-4.478-10-10-10c-5.522,0-10,4.478-10,10v12.435c-0.931-0.964-1.899-2.045-2.923-3.258\r\n\t\tc-10.745-12.754-24.515-23.761-40.077-32.106V121.83c0-5.522-4.478-10-10-10c-5.522,0-10,4.478-10,10v12.983\r\n\t\tc-12.92-4.643-26.438-7.5-40-8.448V96c0-5.522-4.478-10-10-10c-5.522,0-10,4.478-10,10v30.365\r\n\t\tc-13.565,0.948-27.084,3.807-40,8.452V120.17c0-5.522-4.477-10-10-10s-10,4.478-10,10v23.542\r\n\t\tc-15.764,8.457-29.695,19.652-40.55,32.652c-0.758,0.908-1.587,1.755-2.45,2.566v-12.3c0-5.522-4.477-10-10-10s-10,4.478-10,10\r\n\t\tv20.385c-4.189,0.067-14.913,0.05-23,0.024V136c0-5.522-4.477-10-10-10h-0.027C96.265,117.637,100,107.248,100,96\r\n\t\tc0-27.57-22.43-50-50-50S0,68.43,0,96c0,11.248,3.735,21.637,10.027,30H10c-5.523,0-10,4.478-10,10v320c0,5.522,4.477,10,10,10h80\r\n\t\tc5.523,0,10-4.478,10-10v-11h312v11c0,5.522,4.478,10,10,10h80c5.522,0,10-4.478,10-10V136C512,130.478,507.522,126,502,126z\r\n\t\t M80,446H20V146h20v50c0,5.522,4.477,10,10,10s10-4.478,10-10v-50h20V446z M50,126c-16.542,0-30-13.458-30-30s13.458-30,30-30\r\n\t\ts30,13.458,30,30S66.542,126,50,126z M123,425h-23v-19h23V425z M123,386h-23V247h23V386z M123,227h-23v-19.959\r\n\t\tc3.808,0.011,8.197,0.022,12.244,0.022c4.378,0,8.351-0.012,10.756-0.046V227z M186,425h-43v-19h43V425z M186,276v40v70h-43\r\n\t\tV244.817c16.149-3.513,31.29-11.046,43-21.321V276z M186,194.605c-2.373,2.327-4.659,4.785-6.815,7.365\r\n\t\tc-8.521,10.2-21.771,18.214-36.185,22.224v-21.525c6.846-3.098,13.007-7.736,17.806-13.49c7.006-8.391,15.56-15.917,25.194-22.232\r\n\t\tV194.605z M206,156.285c12.757-5.415,26.344-8.765,40-9.871v20.099c-14.162,1.416-27.777,5.83-40,12.895V156.285z M206,203.562\r\n\t\tc11.538-9.26,25.37-15.088,40-16.922V266h-40V203.562z M246,425h-40v-19h40V425z M246,386h-40v-60h40V386z M306,425h-40v-19h40\r\n\t\tV425z M306,386h-40v-60h40V386z M306,306H206v-20h100V306z M306,266h-40v-79.359c14.617,1.835,28.449,7.664,40,16.924V266z\r\n\t\t M306,179.418c-12.232-7.071-25.847-11.487-40-12.904v-20.1c13.651,1.106,27.238,4.454,40,9.865V179.418z M369,425h-43v-19h43V425\r\n\t\tz M369,386h-43v-70v-40v-52.635c11.722,10.137,26.674,17.329,43,20.634V386z M369,223.458\r\n\t\tc-14.663-3.788-27.83-11.575-36.517-21.887c-2.039-2.417-4.216-4.742-6.483-6.965v-27.672c9.465,6.201,17.88,13.567,24.789,21.767\r\n\t\tc4.64,5.496,10.324,11.234,18.211,14.57V223.458z M412,425h-23v-19h23V425z M412,386h-23V246h23V386z M412,226h-23v-19.856\r\n\t\tc5.683-0.048,15.526-0.088,23-0.113V226z M492,446h-60V146h20v50c0,5.522,4.478,10,10,10c5.522,0,10-4.478,10-10v-50h20V446z\r\n\t\t M462,126c-16.542,0-30-13.458-30-30s13.458-30,30-30s30,13.458,30,30S478.542,126,462,126z\"/>\r\n</svg>\r\n);\r\n\r\nexport default Gate;","import React from \"react\";\n\nconst Humidity = props => (\n  <svg viewBox=\"0 0 511.448 511.448\" {...props}>\n    <path\n      d=\"M344.556 112.216C318.38 78.84 291.34 44.344 269.516 7.32c-5.76-9.76-21.824-9.76-27.552 0-21.856 37.024-48.896 71.52-75.072 104.896-53.056 67.68-103.168 131.616-103.168 207.232 0 105.888 86.112 192 192 192s192-86.112 192-192c0-75.616-50.112-139.552-103.168-207.232z\"\n      fill=\"#2196f3\"\n    />\n    <g fill=\"#fafafa\">\n      <path d=\"M207.724 287.448c-26.464 0-48-21.536-48-48s21.536-48 48-48 48 21.536 48 48-21.536 48-48 48zm0-64c-8.832 0-16 7.168-16 16s7.168 16 16 16 16-7.168 16-16-7.168-16-16-16zM303.724 447.448c-26.464 0-48-21.536-48-48s21.536-48 48-48 48 21.536 48 48-21.536 48-48 48zm0-64c-8.8 0-16 7.2-16 16s7.2 16 16 16 16-7.2 16-16-7.2-16-16-16zM175.724 415.448a16.07 16.07 0 0 1-11.328-4.672c-6.24-6.24-6.24-16.384 0-22.624l160-160c6.24-6.24 16.384-6.24 22.624 0s6.24 16.384 0 22.624l-160 160a15.943 15.943 0 0 1-11.296 4.672z\" />\n    </g>\n  </svg>\n);\n\nexport default Humidity;\n","import React from \"react\";\n\nconst MotionOn = props => (\n  <svg viewBox=\"0 0 63.907 63.907\" fill=\"currentColor\" {...props}>\n    <circle fill=\"currentColor\" cx={30.515} cy={6.136} r={6.136} />\n    <path fill=\"currentColor\" d=\"M47.399 27.455C42.346 24.53 38.2 20.579 34.71 15.931c-2.193-3.084-7.991-2.923-10.347-.097-3.584 3.487-6.625 7.081-9.037 10.677a3.209 3.209 0 0 0 5.329 3.573 54.205 54.205 0 0 1 3.59-4.734c-.051 3.333.116 9.347.2 12.05.028.9-.177 1.78-.595 2.579-3.308 6.317-5.424 12.294-7.572 19.606a3.37 3.37 0 1 0 6.465 1.901c1.982-6.742 3.897-12.201 6.884-17.981.152.006.304.006.458-.001 1.907 5.69 3.815 11.383 5.725 17.073 1.387 4.147 7.822 1.993 6.431-2.155-2.087-6.221-4.171-12.439-6.251-18.659-.121-.357-.414-1.755-.455-2.211-.344-3.832-.469-7.652-.432-11.477a51.027 51.027 0 0 0 9.782 7.328c3.597 2.088 6.063-3.891 2.514-5.948z\" />\n  </svg>\n);\n\nexport default MotionOn;\n","import React from \"react\";\n\nconst RGB = props => (\n    <svg viewBox=\"1 -10 511.99999 511\" {...props}>\n      <g fill=\"currentColor\" >\n        <path d=\"M 405.5 150 C 405.5 232.566406 338.566406 299.5 256 299.5 C 173.433594 299.5 106.5 232.566406 106.5 150 C 106.5 67.433594 173.433594 0.5 256 0.5 C 338.566406 0.5 405.5 67.433594 405.5 150 Z M 405.5 150 \" style={{stroke: 'none', fillRule: 'nonzero', fill: 'rgb(25.882353%,75.294118%,88.627451%)', fillOpacity: 1}} />\n        <path d=\"M 512 342.921875 C 512 425.488281 445.066406 492.421875 362.5 492.421875 C 279.933594 492.421875 213 425.488281 213 342.921875 C 213 260.355469 279.933594 193.421875 362.5 193.421875 C 445.066406 193.421875 512 260.355469 512 342.921875 Z M 512 342.921875 \" style={{stroke: 'none', fillRule: 'nonzero', fill: 'rgb(100%,81.568627%,38.039216%)', fillOpacity: 1}} />\n        <path d=\"M 220.746094 295.308594 C 232.050781 298.039062 243.855469 299.5 256 299.5 C 321.917969 299.5 377.871094 256.835938 397.753906 197.613281 C 386.449219 194.878906 374.644531 193.421875 362.5 193.421875 C 296.582031 193.421875 240.628906 236.085938 220.746094 295.308594 Z M 220.746094 295.308594 \" style={{stroke: 'none', fillRule: 'nonzero', fill: 'rgb(28.627451%,74.117647%,56.470588%)', fillOpacity: 1}} />\n        <path d=\"M 299 342.921875 C 299 425.488281 232.066406 492.421875 149.5 492.421875 C 66.933594 492.421875 0 425.488281 0 342.921875 C 0 260.355469 66.933594 193.421875 149.5 193.421875 C 232.066406 193.421875 299 260.355469 299 342.921875 Z M 299 342.921875 \" style={{stroke: 'none', fillRule: 'nonzero', fill: 'rgb(98.039216%,43.921569%,69.803922%)', fillOpacity: 1}} />\n        <path d=\"M 114.246094 197.613281 C 134.128906 256.835938 190.082031 299.5 256 299.5 C 268.144531 299.5 279.949219 298.039062 291.253906 295.308594 C 271.371094 236.085938 215.417969 193.421875 149.5 193.421875 C 137.355469 193.421875 125.550781 194.878906 114.246094 197.613281 Z M 114.246094 197.613281 \" style={{stroke: 'none', fillRule: 'nonzero', fill: 'rgb(68.627451%,48.235294%,77.647059%)', fillOpacity: 1}} />\n        <path d=\"M 213 342.921875 C 213 383.800781 229.414062 420.839844 256 447.828125 C 282.585938 420.839844 299 383.800781 299 342.921875 C 299 302.042969 282.585938 265.003906 256 238.015625 C 229.414062 265.003906 213 302.042969 213 342.921875 Z M 213 342.921875 \" style={{stroke: 'none', fillRule: 'nonzero', fill: 'rgb(93.72549%,38.039216%,13.333333%)', fillOpacity: 1}} />\n        <path d=\"M 291.253906 295.320312 C 279.949219 298.046875 268.140625 299.5 256 299.5 C 243.859375 299.5 232.050781 298.046875 220.746094 295.320312 C 228.058594 273.542969 240.242188 254.015625 256 238.015625 C 271.757812 254.015625 283.941406 273.542969 291.253906 295.320312 Z M 291.253906 295.320312 \" style={{stroke: 'none', fillRule: 'nonzero', fill: 'rgb(100%,100%,100%)', fillOpacity: 1}} />\n      </g>\n    </svg>\n);\n\nexport default RGB;\n","import React from \"react\";\n\nconst Socket = props => (\n  <svg\n    width={32}\n    height={32}\n    viewBox=\"0 0 365.445 365.445\"\n    {...props}\n  >\n    <g fill=\"currentColor\">\n      <path d=\"M146.7 162.775h-26.8a6.655 6.655 0 0 0-6.647 6.647v26.602a6.653 6.653 0 0 0 6.647 6.646h26.8a6.654 6.654 0 0 0 6.647-6.646v-26.602a6.655 6.655 0 0 0-6.647-6.647zM245.547 162.775h-26.801a6.653 6.653 0 0 0-6.646 6.647v26.602a6.652 6.652 0 0 0 6.646 6.646h26.801a6.654 6.654 0 0 0 6.646-6.646v-26.602a6.655 6.655 0 0 0-6.646-6.647z\" />\n    </g>\n    <path\n      d=\"M345.445 1.204H20c-11.046 0-20 8.954-20 20v323.037c0 11.045 8.954 20 20 20h325.445c11.045 0 20-8.955 20-20V21.204c0-11.045-8.953-20-20-20zM182.723 287.66c-57.955 0-104.937-46.981-104.937-104.937 0-57.957 46.982-104.938 104.937-104.938S287.66 124.767 287.66 182.723 240.678 287.66 182.723 287.66z\"\n      fill=\"currentColor\"\n    />\n  </svg>\n);\n\nexport default Socket;\n","import React from \"react\";\n\nconst Thermometer = props => (\n  <svg width={32} height={32} viewBox=\"0 0 45.659 45.659\" {...props}>\n    <path fill=\"currentColor\" d=\"M30.619 27.309V7.781C30.619 3.49 27.124 0 22.833 0c-4.29 0-7.785 3.491-7.785 7.78v19.528a10.722 10.722 0 0 0-3.05 7.522c0 5.972 4.857 10.828 10.829 10.828 5.97 0 10.834-4.856 10.834-10.828 0-2.918-1.141-5.572-3.042-7.521zM22.825 42.66c-4.316 0-7.824-3.512-7.824-7.828 0-2.527 1.174-4.779 3.077-6.211V16.237h3.372c.552 0 1-.47 1-1.022 0-.553-.448-1.021-1-1.021h-3.372v-2.466h3.372c.552 0 1-.434 1-.986a.989.989 0 0 0-1-.986h-3.372V7.78c0-2.636 2.119-4.78 4.754-4.78 2.637 0 4.756 2.144 4.756 4.781v20.871c1.903 1.434 3.047 3.671 3.047 6.18 0 4.316-3.494 7.828-7.81 7.828z\" />\n    <path fill=\"currentColor\" d=\"M25.334 30.463V18.632h-5.002v11.831a4.973 4.973 0 0 0-2.537 4.369 5.038 5.038 0 0 0 5.038 5.046 5.034 5.034 0 0 0 5.034-5.046c0-1.866-.982-3.495-2.533-4.369z\" />\n  </svg>\n);\n\nexport default Thermometer;\n","import React from \"react\";\r\n\r\nconst Thermostat = props => (\r\n    <svg viewBox=\"0 0 297 297\" {...props}>\r\n        <g>\r\n            <path fill=\"currentColor\" d=\"m243.404,138.042c-5.775,0-10.458,4.683-10.458,10.458 0,46.564-37.883,84.446-84.446,84.446s-84.446-37.882-84.446-84.446 37.883-84.446 84.446-84.446c5.775,0 10.458-4.683 10.458-10.458s-4.683-10.457-10.458-10.457c-58.097,0-105.361,47.265-105.361,105.361s47.264,105.361 105.361,105.361 105.361-47.264 105.361-105.361c0-5.775-4.681-10.458-10.457-10.458z\"/>\r\n            <path fill=\"currentColor\" d=\"m142.963,121.344l-20.272-30.41c-3.203-4.807-9.695-6.104-14.502-2.9-4.805,3.202-6.104,9.695-2.9,14.502l20.279,30.422c-3.015,4.436-4.78,9.787-4.78,15.543 0,15.281 12.432,27.713 27.713,27.713 15.281,0 27.713-12.432 27.713-27.713 0-15.281-12.432-27.713-27.713-27.713-1.897-0.001-3.749,0.191-5.538,0.556zm12.335,27.156c0,3.748-3.05,6.798-6.798,6.798s-6.798-3.05-6.798-6.798 3.05-6.798 6.798-6.798 6.798,3.05 6.798,6.798z\"/>\r\n            <path fill=\"currentColor\" d=\"M148.5,0C66.617,0,0,66.617,0,148.5S66.617,297,148.5,297S297,230.383,297,148.5S230.383,0,148.5,0z M158.958,275.653   v-6.366c0-5.775-4.683-10.458-10.458-10.458c-5.775,0-10.458,4.683-10.458,10.458v6.366   c-62.027-5.056-111.64-54.668-116.695-116.695h6.366c5.775,0,10.458-4.683,10.458-10.458s-4.683-10.458-10.458-10.458h-6.366   c5.056-62.027,54.668-111.64,116.695-116.695v6.366c0,5.775,4.683,10.458,10.458,10.458c5.775,0,10.458-4.683,10.458-10.458v-6.366   c62.027,5.056,111.64,54.668,116.695,116.695h-6.366c-5.775,0-10.458,4.683-10.458,10.458s4.683,10.458,10.458,10.458h6.366   C270.598,220.985,220.985,270.598,158.958,275.653z\"/>\r\n        </g>\r\n    </svg>\r\n);\r\n\r\nexport default Thermostat;\r\n","import React from \"react\";\r\n\r\nconst HeatValve = props => (\r\n    <svg viewBox=\"0 0 512 512\" {...props}>\r\n        <path fill=\"currentColor\" d=\"M391,362h77.417L440.989,58.467C438.075,26.229,409.37,0,377,0H135c-32.37,0-61.075,26.229-63.989,58.467L43.583,362H121v30  H91v120h330V392h-30V362z M135,30h242c16.963,0,32.584,14.273,34.11,31.167L416.427,120H95.573l5.316-58.833  C102.416,44.273,118.037,30,135,30z M92.862,150h326.275l16.446,182H76.416L92.862,150z M151,362h210v30H151V362z M241,422v60h-45  v-60H241z M271,422h45v60h-45V422z M121,422h45v60h-45V422z M391,482h-45v-60h45V482z\"/>\r\n    </svg>\r\n);\r\n\r\nexport default HeatValve;\r\n","import React from \"react\";\n\nconst WindowOpened = props => (\n  <svg width={32} height={32} viewBox=\"0 0 361 361\" {...props}>\n    <path\n      d=\"M267.826 263.303c0 3.91-3.156 7.082-7.05 7.082l-157.885.021c-3.894 0-7.05-3.171-7.05-7.083v-157.5c0-3.911 3.156-7.083 7.05-7.083l157.885-.021c3.894 0 7.05 3.172 7.05 7.083v157.501z\"\n      fill=\"none\"\n      stroke=\"currentColor\"\n      strokeWidth={10}\n      strokeMiterlimit={10}\n    />\n    <path\n      d=\"M228.5 205.584h6.639c2.726 0 5-2.274 5-5s-2.274-5-5-5H228.5c-2.726 0-5 2.274-5 5s2.274 5 5 5z\"\n      fill=\"currentColor\"\n    />\n    <path\n      d=\"M267.826 103.208c0 2.485-2.711 4.5-6.053 4.5l-159.88.021c-3.342 0-6.052-2.015-6.052-4.5v-9c0-2.485 2.71-4.5 6.052-4.5l159.88-.021c3.342 0 6.053 2.015 6.053 4.5v9z\"\n      fill=\"none\"\n      stroke=\"currentColor\"\n      strokeWidth={10}\n      strokeMiterlimit={10}\n    />\n    <path\n      d=\"M232.826 280.905c-.339 3.356-18.813-.782-20.919-1.06l-45.073-5.94-45.074-5.94-14.507-1.912c-1.456-.192-6.201-.055-6.412-2.147-.621-6.157 0-12.699 0-18.878v-43.5-82.076-5.13c0-2.551 5.184-1.015 6.412-.853l35.438 4.67 83.723 11.035c1.457.192 6.201.055 6.412 2.147.169 1.673 0 3.451 0 5.13v144.454c0 6.448 10 6.448 10 0V136.451v-5.13c0-7.619-6.137-10.793-12.673-11.655l-28.531-3.76-88.411-11.652-9.897-1.304c-6.555-.864-12.473 4.9-12.473 11.38v144.832c0 2.023-.071 4.04.132 6.053.717 7.111 6.606 9.563 12.759 10.374l76.827 10.125 39.896 5.259 9.697 1.278c7.063.931 12.011-4.778 12.673-11.346.648-6.415-9.358-6.352-9.999 0z\"\n      fill=\"currentColor\"\n    />\n  </svg>\n);\n\nexport default WindowOpened;\n","import React from \"react\";\n\nconst WindowTilted = props => (\n  <svg width={32} height={32} viewBox=\"0 0 361 361\" {...props}>\n    <path\n      d=\"M267.826 263.303c0 3.91-3.156 7.082-7.05 7.082l-157.885.021c-3.894 0-7.05-3.171-7.05-7.083v-157.5c0-3.911 3.156-7.083 7.05-7.083l157.885-.021c3.894 0 7.05 3.172 7.05 7.083v157.501z\"\n      fill=\"none\"\n      stroke=\"currentColor\"\n      strokeWidth={10}\n      strokeMiterlimit={10}\n    />\n    <path\n      d=\"M267.826 103.208c0 2.485-2.711 4.5-6.053 4.5l-159.88.021c-3.342 0-6.052-2.015-6.052-4.5v-9c0-2.485 2.71-4.5 6.052-4.5l159.88-.021c3.342 0 6.053 2.015 6.053 4.5v9zM265.732 265.178c.584 2.887-1.629 5.228-4.942 5.228H103.457c-3.313 0-6.474-2.341-7.058-5.228L75.24 130.633c-.584-2.887 1.628-5.228 4.942-5.228h157.333c3.313 0 6.474 2.34 7.058 5.228l21.159 134.545z\"\n      fill=\"none\"\n      stroke=\"currentColor\"\n      strokeWidth={10}\n      strokeMiterlimit={10}\n    />\n    <path\n      d=\"M247.194 199.667h6.639c2.726 0 5-2.274 5-5s-2.274-5-5-5h-6.639c-2.726 0-5 2.274-5 5s2.275 5 5 5z\"\n      fill=\"currentColor\"\n    />\n  </svg>\n);\n\nexport default WindowTilted;\n","import React from \"react\";\r\n\r\nconst Cleaner = props => (\r\n    <svg viewBox=\"0 0 512 512\" {...props}>\r\n        <g fill=\"currentColor\">\r\n            <path d=\"M296,320H216a24,24,0,0,0,0,48h80a24,24,0,0,0,0-48Zm0,32H216a8,8,0,0,1,0-16h80a8,8,0,0,1,0,16Z\"/>\r\n            <path d=\"M68.071,123.492c22.578-13.918,52.2-25.229,85.674-32.71l-3.49-15.615c-35.688,7.977-66.163,19.653-90.58,34.705-17.914,11.043-32.041,23.643-41.99,37.451l12.98,9.354C39.376,144.588,51.961,133.423,68.071,123.492Z\"/>\r\n            <path d=\"M435.533,137.112C409.439,121.027,374,108.967,332.845,102.144,322.474,87,288.213,80,256,80s-66.474,7-76.845,22.144C138,108.967,102.561,121.027,76.467,137.112,47.376,155.045,32,176.792,32,200v96c0,29,24.155,55.7,68.016,75.193C141.813,389.77,197.209,400,256,400s114.187-10.23,155.984-28.807C455.845,351.7,480,325,480,296V200C480,176.792,464.624,155.045,435.533,137.112ZM177.64,151.23C185.676,168.192,221.98,176,256,176s70.324-7.808,78.36-24.77c21.862,4.212,41.832,10.19,58.13,17.44C422.343,181.941,432,195.509,432,200s-9.657,18.059-39.51,31.33C357.224,247.008,307.475,256,256,256s-101.224-8.992-136.49-24.67C89.657,218.059,80,204.491,80,200s9.657-18.059,39.512-31.331C135.808,161.42,155.778,155.442,177.64,151.23Zm14.36-19c15.6,8,40.35,11.773,64,11.773s48.4-3.775,64-11.773V144c0,.687-2.715,5.08-15.618,9.381C291.577,157.649,274.4,160,256,160s-35.577-2.351-48.382-6.619C194.715,149.08,192,144.687,192,144Zm15.618-29.608C220.423,98.351,237.605,96,256,96s35.577,2.351,48.382,6.619C317.285,106.92,320,111.313,320,112s-2.715,5.08-15.618,9.381C291.577,125.649,274.4,128,256,128s-35.577-2.351-48.382-6.619C194.715,117.08,192,112.687,192,112S194.715,106.92,207.618,102.619ZM176,118.937v16.319c-23.589,4.453-45.254,10.9-62.99,18.794C82.779,167.489,64,185.1,64,200s18.779,32.511,49.01,45.95C150.249,262.505,202.367,272,256,272s105.751-9.5,142.99-26.05C429.221,232.511,448,214.9,448,200s-18.779-32.511-49.008-45.95c-17.738-7.89-39.4-14.341-62.992-18.794V118.937C411.852,132.7,464,165.41,464,200c0,21.967-21.328,44.044-58.516,60.572C365.688,278.259,312.6,288,256,288s-109.688-9.741-149.484-27.428C69.328,244.044,48,221.967,48,200,48,165.41,100.148,132.7,176,118.937ZM464,296c0,21.967-21.327,44.044-58.514,60.572C365.689,374.259,312.6,384,256,384s-109.689-9.741-149.486-27.428C69.327,340.044,48,317.967,48,296V239.371c11.522,13.444,29.066,25.621,52.018,35.822C141.814,293.77,197.211,304,256,304s114.186-10.23,155.982-28.807c22.952-10.2,40.5-22.378,52.018-35.822Z\"/>\r\n            <path d=\"M418.482,385.814C374.684,405.28,316.979,416,256,416a488.01,488.01,0,0,1-78.705-6.23l-2.59,15.789A504.064,504.064,0,0,0,256,432c63.169,0,123.181-11.21,168.981-31.565q1.3-.576,2.572-1.16l-6.655-14.55Q419.7,385.274,418.482,385.814Z\"/>\r\n            <path d=\"M436.123,377.062l7.754,14c5.883-3.259,11.492-6.728,16.674-10.31l-9.1-13.161C446.7,370.871,441.546,374.059,436.123,377.062Z\"/>\r\n            <rect x=\"248\" y=\"192\" width=\"16\" height=\"16\"/>\r\n            <rect x=\"280\" y=\"192\" width=\"16\" height=\"16\"/>\r\n            <rect x=\"216\" y=\"192\" width=\"16\" height=\"16\"/>\r\n        </g>\r\n    </svg>\r\n);\r\n\r\nexport default Cleaner;\r\n","import React, {Component} from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nimport {Types} from 'iobroker.type-detector';\r\n\r\nimport {AiOutlineLineChart as TypeIconChart} from 'react-icons/ai';\r\nimport TypeIconBlinds from '../icons/Jalousie';\r\nimport TypeIconButton from '../icons/PushButton';\r\nimport {GoDeviceCameraVideo as TypeIconCamera} from 'react-icons/go';\r\nimport {FaExternalLinkSquareAlt as TypeIconURL} from 'react-icons/fa';\r\nimport {FaImage as TypeIconImage} from 'react-icons/fa';\r\nimport {FaRegLightbulb as TypeIconDimmer} from 'react-icons/fa';\r\nimport TypeIconDoor from '../icons/DoorOpened';\r\nimport TypeIconFireAlarm from '../icons/FireOn';\r\nimport TypeIconFloodAlarm from '../icons/FloodOn';\r\nimport TypeIconGate from '../icons/Gate';\r\nimport TypeIconHumidity from '../icons/Humidity';\r\nimport {FaInfoCircle as TypeIconInfo} from 'react-icons/fa';\r\nimport {FaLightbulb as TypeIconLight} from 'react-icons/fa';\r\nimport {FaLock as TypeIconLock} from 'react-icons/fa';\r\nimport {FaStreetView as TypeIconLocation} from 'react-icons/fa';\r\nimport {FaStepForward as TypeIconMedia} from 'react-icons/fa';\r\nimport TypeIconMotion from '../icons/MotionOn';\r\nimport TypeIconRGB from '../icons/RGB';\r\nimport {MdFormatColorFill as TypeIconCT} from 'react-icons/md';\r\nimport TypeIconRGBSingle from '../icons/RGB';\r\nimport {MdFormatColorFill as TypeIconHUE} from 'react-icons/md';\r\nimport {FaSlidersH as TypeIconSlider} from 'react-icons/fa';\r\nimport TypeIconSocket from '../icons/Socket';\r\nimport TypeIconTemperature from '../icons/Thermometer';\r\nimport TypeIconThermostat from '../icons/Thermostat';\r\nimport TypeIconValve from '../icons/HeatValve';\r\nimport {FaVolumeDown as TypeIconVolume} from 'react-icons/fa';\r\nimport {FaVolumeUp as TypeIconVolumeGroup} from 'react-icons/fa';\r\nimport TypeIconWindow from '../icons/WindowOpened';\r\nimport TypeIconWindowTilt from '../icons/WindowTilted';\r\nimport {WiCloudy as TypeIconWeather} from 'react-icons/wi';\r\nimport {MdWarning as TypeIconWarning} from 'react-icons/md';\r\nimport {FaFan as TypeIconAC} from 'react-icons/fa';\r\nimport {IoIosRadioButtonOn as TypeIconButtonSensor} from 'react-icons/io';\r\nimport TypeIconVacuumCleaner from './icons/Cleaner';\r\n\r\nimport IconAdapter from '@iobroker/adapter-react/Components/Icon';\r\n\r\nconst TYPE_ICONS = {\r\n    [Types.airCondition]: TypeIconAC,\r\n    [Types.blind]: TypeIconBlinds,\r\n    [Types.button]: TypeIconButton,\r\n    [Types.buttonSensor]: TypeIconButtonSensor,\r\n    [Types.camera]: TypeIconCamera,\r\n    [Types.chart]: TypeIconChart,\r\n    [Types.url]: TypeIconURL,\r\n    [Types.image]: TypeIconImage,\r\n    [Types.dimmer]: TypeIconDimmer,\r\n    [Types.door]: TypeIconDoor,\r\n    [Types.fireAlarm]: TypeIconFireAlarm,\r\n    'sensor.alarm.fire': TypeIconFireAlarm,\r\n    [Types.floodAlarm]: TypeIconFloodAlarm,\r\n    'sensor.alarm.flood': TypeIconFireAlarm,\r\n    [Types.gate]: TypeIconGate,\r\n    [Types.humidity]: TypeIconHumidity,\r\n    [Types.info]: TypeIconInfo,\r\n    [Types.light]: TypeIconLight,\r\n    [Types.lock]: TypeIconLock,\r\n    [Types.location]: TypeIconLocation,\r\n    [Types.media]: TypeIconMedia,\r\n    [Types.motion]: TypeIconMotion,\r\n    [Types.rgb]: TypeIconRGB,\r\n    [Types.ct]: TypeIconCT,\r\n    [Types.rgbSingle]: TypeIconRGBSingle,\r\n    [Types.hue]: TypeIconHUE,\r\n    [Types.slider]: TypeIconSlider,\r\n    [Types.socket]: TypeIconSocket,\r\n    [Types.temperature]: TypeIconTemperature,\r\n    [Types.thermostat]: TypeIconThermostat,\r\n    [Types.valve]: TypeIconValve,\r\n    [Types.vacuumCleaner]: TypeIconVacuumCleaner,\r\n    [Types.volume]: TypeIconVolume,\r\n    [Types.volumeGroup]: TypeIconVolumeGroup,\r\n    [Types.window]: TypeIconWindow,\r\n    [Types.windowTilt]: TypeIconWindowTilt,\r\n    [Types.weatherCurrent]: TypeIconWeather,\r\n    [Types.weatherForecast]: TypeIconWeather,\r\n    [Types.warning]: TypeIconWarning,\r\n};\r\n\r\nconst defaultStyle = {\r\n    marginTop: 4,\r\n    marginLeft: 4,\r\n    width: 32,\r\n    height: 32,\r\n};\r\n\r\nclass TypeIcon extends Component {\r\n    render() {\r\n        if (!!this.props.src) {\r\n            return <IconAdapter src={this.props.src} style={Object.assign({}, !this.props.className && defaultStyle, this.props.style || {})} className={this.props.className || ''} alt=\"\"/>;\r\n        } else {\r\n            const Icon = this.props.type && TYPE_ICONS[this.props.type];\r\n            return Icon ? <Icon style={Object.assign({}, !this.props.className && defaultStyle, this.props.style || {})} className={this.props.className || ''}/> : null;\r\n        }\r\n    }\r\n}\r\n\r\nTypeIcon.propTypes = {\r\n    type: PropTypes.string,\r\n    style: PropTypes.object,\r\n    src: PropTypes.string,\r\n    className: PropTypes.string,\r\n};\r\n\r\nexport default TypeIcon;","import React from \"react\";\n\nconst WindowTilted = props => (\n  <svg width={361} height={361} viewBox=\"0 0 361 361\" {...props}>\n    <path\n      d=\"M267.826 263.303c0 3.91-3.156 7.082-7.05 7.082l-157.885.021c-3.894 0-7.05-3.171-7.05-7.083v-157.5c0-3.911 3.156-7.083 7.05-7.083l157.885-.021c3.894 0 7.05 3.172 7.05 7.083v157.501z\"\n      fill=\"none\"\n      stroke=\"currentColor\"\n      strokeWidth={10}\n      strokeMiterlimit={10}\n    />\n    <path\n      d=\"M267.826 103.208c0 2.485-2.711 4.5-6.053 4.5l-159.88.021c-3.342 0-6.052-2.015-6.052-4.5v-9c0-2.485 2.71-4.5 6.052-4.5l159.88-.021c3.342 0 6.053 2.015 6.053 4.5v9zM265.732 265.178c.584 2.887-1.629 5.228-4.942 5.228H103.457c-3.313 0-6.474-2.341-7.058-5.228L75.24 130.633c-.584-2.887 1.628-5.228 4.942-5.228h157.333c3.313 0 6.474 2.34 7.058 5.228l21.159 134.545z\"\n      fill=\"none\"\n      stroke=\"currentColor\"\n      strokeWidth={10}\n      strokeMiterlimit={10}\n    />\n    <path\n      d=\"M247.194 199.667h6.639c2.726 0 5-2.274 5-5s-2.274-5-5-5h-6.639c-2.726 0-5 2.274-5 5s2.275 5 5 5z\"\n      fill=\"currentColor\"\n    />\n  </svg>\n);\n\nexport default WindowTilted;\n","import React from 'react';\n\nconst Material = props => (\n  <svg viewBox=\"0 0 230 230\" {...props}>\n      <ellipse fill=\"#2979ff\" stroke=\"#2979ff\" strokeWidth=\"1.5\" cx=\"112.9\" cy=\"114\" rx=\"112\" ry=\"112\"/>\n      <ellipse fill=\"#40c4ff\" strokeWidth=\"1.5\" cx=\"112.900006\" cy=\"113.999995\" rx=\"73.684216\" ry=\"73.684216\"\n               stroke=\"#40c4ff\"/>\n      <ellipse fill=\"#ffffff\" strokeWidth=\"1.5\" cx=\"112.900003\" cy=\"114\" rx=\"33.578948\" ry=\"33.578948\"\n               stroke=\"#ffffff\"/>\n  </svg>\n);\n\nexport default Material;\n","import { Types } from 'iobroker.type-detector';\r\n\r\nimport { FcGoogle } from 'react-icons/fc';\r\nimport { SiAmazonalexa } from 'react-icons/si';\r\nimport { TiCogOutline as IconWorking } from 'react-icons/ti';\r\nimport { MdPermScanWifi as IconUnreach } from 'react-icons/md';\r\nimport { MdPriorityHigh as IconMaintain } from 'react-icons/md';\r\nimport { MdBatteryAlert as IconLowbat } from 'react-icons/md';\r\nimport { MdError as IconError } from 'react-icons/md';\r\nimport { MdDirections } from 'react-icons/md';\r\nimport { AiOutlineAppstoreAdd } from 'react-icons/ai';\r\nimport { BiLastPage } from 'react-icons/bi';\r\nimport {FaCompressArrowsAlt, FaRunning, FaSun} from 'react-icons/fa';\r\nimport { FaCompress } from 'react-icons/fa';\r\nimport { FaVolumeMute } from 'react-icons/fa';\r\nimport {GiElectricalResistance, GiLaserPrecision} from 'react-icons/gi';\r\nimport { AiOutlineRadiusBottomleft } from 'react-icons/ai';\r\nimport { AiOutlineColumnHeight } from 'react-icons/ai';\r\nimport { AiOutlineColumnWidth } from 'react-icons/ai';\r\nimport { AiOutlineSwap } from 'react-icons/ai';\r\nimport { FaToggleOn } from 'react-icons/fa';\r\nimport { FaDoorOpen } from 'react-icons/fa';\r\nimport { MdGpsFixed } from 'react-icons/md';\r\nimport { GiStopSign } from 'react-icons/gi';\r\nimport {IoIosColorPalette, IoIosWater} from 'react-icons/io';\r\nimport { GiNuclearWaste } from 'react-icons/gi';\r\nimport { AiFillPauseCircle } from 'react-icons/ai';\r\nimport { GiMatterStates } from 'react-icons/gi';\r\nimport { MdWork } from 'react-icons/md';\r\nimport { MdDeveloperMode } from 'react-icons/md';\r\nimport { AiOutlinePoweroff } from 'react-icons/ai';\r\nimport { SiBoost } from 'react-icons/si';\r\nimport {WiDaySunny, WiFire, WiHumidity, WiSmoke, WiThermometer} from 'react-icons/wi';\r\nimport { GiTreeSwing } from 'react-icons/gi';\r\nimport { GiSpeedometer } from 'react-icons/gi';\r\nimport { GiElectric, GiLightningFrequency } from 'react-icons/gi';\r\nimport { FcElectricalSensor } from 'react-icons/fc';\r\nimport WindowTilted from './icons/WindowTilted';\r\nimport MaterialIcon from './icons/Material';\r\nimport {FiPower, HiOutlineLightBulb, ImPower} from 'react-icons/all';\r\n\r\nconst TYPE_OPTIONS = {\r\n    [Types.airCondition]:    { alexa: false, alisa: true,  google: false, material: false },\r\n    [Types.blindButtons]:    { alexa: false, alisa: false, google: false, material: false },\r\n    [Types.blind]:           { alexa: false, alisa: true,  google: true,  material: true  },\r\n    [Types.buttonSensor]:    { alexa: false, alisa: false, google: false, material: false },\r\n    [Types.button]:          { alexa: false, alisa: false, google: true,  material: true  },\r\n    [Types.camera]:          { alexa: false, alisa: false, google: false, material: false },\r\n    [Types.ct]:              { alexa: true,  alisa: true,  google: true,  material: false },\r\n    [Types.dimmer]:          { alexa: true,  alisa: true,  google: true,  material: true  },\r\n    [Types.door]:            { alexa: false, alisa: true,  google: true,  material: false },\r\n    [Types.fireAlarm]:       { alexa: false, alisa: false, google: false, material: false },\r\n    [Types.floodAlarm]:      { alexa: false, alisa: false, google: false, material: false },\r\n    [Types.gate]:            { alexa: false, alisa: false, google: false, material: false },\r\n    [Types.hue]:             { alexa: true,  alisa: false, google: true,  material: true  },\r\n    [Types.humidity]:        { alexa: false, alisa: true,  google: false, material: true  },\r\n    [Types.image]:           { alexa: false, alisa: false, google: false, material: false },\r\n    [Types.info]:            { alexa: false, alisa: false, google: true,  material: false },\r\n    [Types.light]:           { alexa: true,  alisa: true,  google: true,  material: false },\r\n    [Types.location]:        { alexa: false, alisa: false, google: false, material: false },\r\n    [Types.lock]:            { alexa: true,  alisa: true,  google: false, material: true  },\r\n    [Types.media]:           { alexa: false, alisa: false, google: true,  material: true  },\r\n    [Types.motion]:          { alexa: false, alisa: true,  google: false, material: false },\r\n    [Types.rgbSingle]:       { alexa: false, alisa: true,  google: true,  material: false },\r\n    [Types.rgb]:             { alexa: false, alisa: false, google: true,  material: true  },\r\n    [Types.slider]:          { alexa: false, alisa: false, google: true,  material: false },\r\n    [Types.socket]:          { alexa: true,  alisa: true,  google: true,  material: false },\r\n    [Types.temperature]:     { alexa: false, alisa: true,  google: true,  material: true  },\r\n    [Types.thermostat]:      { alexa: true,  alisa: true,  google: true,  material: true  },\r\n    [Types.url]:             { alexa: false, alisa: false, google: false, material: false },\r\n    [Types.vacuumCleaner]:   { alexa: false, alisa: true,  google: false, material: false },\r\n    [Types.valve]:           { alexa: false, alisa: false, google: false, material: false },\r\n    [Types.volumeGroup]:     { alexa: false, alisa: false, google: false, material: true  },\r\n    [Types.volume]:          { alexa: false, alisa: false, google: false, material: true  },\r\n    [Types.warning]:         { alexa: false, alisa: false, google: false, material: true  },\r\n    [Types.weatherCurrent]:  { alexa: false, alisa: false, google: false, material: false },\r\n    [Types.weatherForecast]: { alexa: false, alisa: false, google: false, material: true  },\r\n    [Types.windowTilt]:      { alexa: false, alisa: false, google: true,  material: true  },\r\n    [Types.window]:          { alexa: false, alisa: true,  google: true,  material: true  },\r\n};\r\n\r\nexport const ICONS_TYPE = {\r\n    alexa: <SiAmazonalexa style={{margin: '0 3px', width: 16, height: 16}} />,\r\n    alisa: <img style={{margin: '0 3px', width: 16, height: 16}} src=\"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iMzcwcHgiIGhlaWdodD0iMzcwcHgiIHZpZXdCb3g9IjAgMCAzNzAgMzcwIiB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPgogICAgPCEtLSBHZW5lcmF0b3I6IFNrZXRjaCA0Ni4yICg0NDQ5NikgLSBodHRwOi8vd3d3LmJvaGVtaWFuY29kaW5nLmNvbS9za2V0Y2ggLS0+CiAgICA8dGl0bGU+R3JvdXA8L3RpdGxlPgogICAgPGRlc2M+Q3JlYXRlZCB3aXRoIFNrZXRjaC48L2Rlc2M+CiAgICA8ZGVmcz4KICAgICAgICA8bGluZWFyR3JhZGllbnQgeDE9IjAlIiB5MT0iMTAwJSIgeDI9IjEwMCUiIHkyPSIwJSIgaWQ9ImxpbmVhckdyYWRpZW50LTEiPgogICAgICAgICAgICA8c3RvcCBzdG9wLWNvbG9yPSIjQzkyNkZGIiBvZmZzZXQ9IjAlIj48L3N0b3A+CiAgICAgICAgICAgIDxzdG9wIHN0b3AtY29sb3I9IiM0QTI2RkYiIG9mZnNldD0iMTAwJSI+PC9zdG9wPgogICAgICAgIDwvbGluZWFyR3JhZGllbnQ+CiAgICA8L2RlZnM+CiAgICA8ZyBpZD0iUGFnZS0xIiBzdHJva2U9Im5vbmUiIHN0cm9rZS13aWR0aD0iMSIgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj4KICAgICAgICA8ZyBpZD0iR3JvdXAiPgogICAgICAgICAgICA8cmVjdCBpZD0iUmVjdGFuZ2xlIiBmaWxsPSIjRkZGRkZGIiB4PSI3NyIgeT0iNzIiIHdpZHRoPSIyMTUiIGhlaWdodD0iMTk5Ij48L3JlY3Q+CiAgICAgICAgICAgIDxnIGlkPSJhbGljZV9sb2dvIiBmaWxsLXJ1bGU9Im5vbnplcm8iIGZpbGw9InVybCgjbGluZWFyR3JhZGllbnQtMSkiPgogICAgICAgICAgICAgICAgPHBhdGggZD0iTTE4NSwzNzAgQzgyLjgyNzMyMDksMzcwIDAsMjg3LjE3MjY3OCAwLDE4NSBDMCw4Mi44MjczMjA5IDgyLjgyNzMyMDksMCAxODUsMCBDMjg3LjE3MjY3OCwwIDM3MCw4Mi44MjczMjA5IDM3MCwxODUgQzM3MCwyODcuMTcyNjc4IDI4Ny4xNzI2NzgsMzcwIDE4NSwzNzAgWiBNMTAwLjI4Nzk1MiwyNDQuNzA4MjQ0IEMxMTMuNTY4OTA4LDI1Ny45MjM4NzUgMTQ4Ljk0NTcxNiwyNjUuODU5NTc3IDE4NSwyNjUuOTk4Njc3IEMyMjEuMDUzMTgzLDI2NS44NTk1NzcgMjU2LjQzMTA5MiwyNTcuOTIzODc1IDI2OS43MTIwNDgsMjQ0LjcwODI0NCBDMzAyLjcwODYwOCwyMTEuODczOTg0IDIyMi41MDAwNDQsODYuMDgwMTUgMTg1LjA0MTI3Niw4NS44OTcyMzgzIEMxNDcuNDk5OTU2LDg2LjA4MDE1IDY3LjI5MTM5MTIsMjExLjg3Mzk4NCAxMDAuMjg3OTUyLDI0NC43MDgyNDQgWiIgaWQ9ImFsaXNhLXN5bWJvbCI+PC9wYXRoPgogICAgICAgICAgICA8L2c+CiAgICAgICAgPC9nPgogICAgPC9nPgo8L3N2Zz4=\" alt=\"alisa\"/>,\r\n    google: <FcGoogle style={{margin: '0 3px', width: 16, height: 16}} />,\r\n    material: <MaterialIcon style={{margin: '0 3px', width: 16, height: 16}} />,\r\n}\r\n\r\nexport const STATES_NAME_ICONS = {\r\n    'SET': AiOutlineAppstoreAdd,\r\n    'WORKING': MdWork,\r\n    'UNREACH': IconUnreach,\r\n    'LOWBAT': IconLowbat,\r\n    'MAINTAIN': IconMaintain,\r\n    'ERROR': IconError,\r\n    'DIRECTION': MdDirections,\r\n    'CONNECTED': IconUnreach,\r\n    'ACTUAL': IconWorking,\r\n    'SECOND': BiLastPage,\r\n    'PRESS_LONG': FaCompressArrowsAlt,\r\n    'PRESS': FaCompress,\r\n    'MUTE': FaVolumeMute,\r\n    'ACCURACY': GiLaserPrecision,\r\n    'RADIUS': AiOutlineRadiusBottomleft,\r\n    'ELEVATION': AiOutlineColumnHeight,\r\n    'LATITUDE': AiOutlineColumnWidth,\r\n    'LONGITUDE': AiOutlineSwap,\r\n    'GPS': MdGpsFixed,\r\n    'ON_ACTUAL': FaToggleOn,\r\n    'ON_SET': FaToggleOn,\r\n    'OPEN': FaDoorOpen,\r\n    'STOP': GiStopSign,\r\n    'WATER_ALARM': IoIosWater,  // water\r\n    'WASTE_ALARM': GiNuclearWaste,\r\n    'PAUSE': AiFillPauseCircle,\r\n    'STATE': GiMatterStates,\r\n    'BATTERY': IconLowbat,\r\n    'WASTE': GiNuclearWaste,\r\n    'WATER': IoIosWater,\r\n    'WORK_MODE': MdWork,\r\n    'MODE': MdDeveloperMode,\r\n    'POWER': AiOutlinePoweroff,\r\n    'BOOST': SiBoost,\r\n    'HUMIDITY': WiHumidity,\r\n    'TEMPERATURE': WiThermometer,\r\n    'BRIGHTNESS': WiDaySunny,\r\n    'MOTION': FaRunning,\r\n    'FIRE': WiFire,\r\n    'WINDOW': WindowTilted,\r\n    'SMOKE': WiSmoke,\r\n    'SWING': GiTreeSwing,\r\n    'SPEED': GiSpeedometer,\r\n    'DIMMER': HiOutlineLightBulb,\r\n    'ON': FiPower,\r\n    'COLOR_TEMP': FaSun,\r\n    ELECTRIC_POWER: ImPower,\r\n    CURRENT: GiElectric,\r\n    VOLTAGE: GiElectricalResistance,\r\n    CONSUMPTION: FcElectricalSensor,\r\n    FREQUENCY: GiLightningFrequency,\r\n    HUE: IoIosColorPalette,\r\n}\r\n\r\nexport default TYPE_OPTIONS;","import { Component, createRef } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { withStyles } from '@material-ui/core/styles';\r\n\r\nimport { Cropper } from 'react-cropper';\r\nimport 'cropperjs/dist/cropper.css';\r\n\r\nimport { Menu, MenuItem, Tooltip } from '@material-ui/core';\r\nimport IconButton from '@material-ui/core/IconButton';\r\n\r\nimport CropIcon from '@material-ui/icons/Crop';\r\n\r\nimport IconPicker from '@iobroker/adapter-react/Components/IconPicker';\r\n\r\nconst styles = theme => ({\r\n    image: {\r\n        objectFit: 'contain',\r\n        margin: 'auto',\r\n        display: 'flex',\r\n        width: '100%',\r\n        height: '100%',\r\n    },\r\n\r\n    buttonCropWrapper: {\r\n        position: 'absolute',\r\n        zIndex: 222,\r\n        right: 0,\r\n        top: 50\r\n    },\r\n    buttonIconsWrapper: {\r\n        position: 'absolute',\r\n        zIndex: 222,\r\n        right: 0,\r\n        top: 100\r\n    },\r\n    error: {\r\n        border: '2px solid red'\r\n    },\r\n    iconPickerLabel: {\r\n        fontSize: 20,\r\n        fontWeight: 'bold',\r\n    }\r\n});\r\n\r\nclass UploadImage extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            anchorEl: null,\r\n            cropHandler: false,\r\n        };\r\n        this.cropperRef = createRef();\r\n    }\r\n\r\n    render() {\r\n        const { disabled, classes, icon, t, crop, onChange, className } = this.props;\r\n        const { anchorEl, cropHandler } = this.state;\r\n        return <div className={className} style={{position: 'relative'}}>\r\n            {icon && crop && <div className={classes.buttonCropWrapper}>\r\n                <Tooltip title={t('Crop')}>\r\n                    <IconButton onClick={e => {\r\n                        if (!cropHandler) {\r\n                            this.setState({ cropHandler: true });\r\n                        } else {\r\n                            this.setState({ anchorEl: e.currentTarget });\r\n                        }\r\n                        e.stopPropagation();\r\n                    }}><CropIcon color={cropHandler ? 'primary' : 'inherit'} />\r\n                    </IconButton>\r\n                </Tooltip>\r\n                <Menu\r\n                    anchorEl={anchorEl}\r\n                    keepMounted\r\n                    open={!!anchorEl}\r\n                    onClose={() => this.setState({ anchorEl: null })}\r\n                >\r\n                    <MenuItem onClick={() => this.setState({ anchorEl: null, cropHandler: false }, () => {\r\n                        const imageElement = this.cropperRef?.current?.cropper;\r\n                        onChange(imageElement.getCroppedCanvas().toDataURL());\r\n                    })}>{t('Save')}</MenuItem>\r\n                    <MenuItem onClick={() => this.setState({ anchorEl: null, cropHandler: false })}>{t('Close')}</MenuItem>\r\n                </Menu>\r\n            </div>}\r\n\r\n            <IconPicker\r\n                label={this.props.t('Icon')}\r\n                disabled={disabled}\r\n                customClasses={{label: classes.iconPickerLabel}}\r\n                onChange={base64 => onChange(base64)}\r\n                value={icon}/>\r\n\r\n            {icon && crop && cropHandler ? <Cropper\r\n                ref={this.cropperRef}\r\n                className={classes.image}\r\n                src={icon}\r\n                initialAspectRatio={1}\r\n                viewMode={1}\r\n                guides={false}\r\n                minCropBoxHeight={10}\r\n                minCropBoxWidth={10}\r\n                background={false}\r\n                checkOrientation={false}\r\n            /> : null}\r\n        </div>;\r\n    }\r\n}\r\n\r\nUploadImage.defaultProps = {\r\n    disabled: false,\r\n    maxSize: 10 * 1024,\r\n    icon: null,\r\n    removeIconFunc: null,\r\n    accept: 'image/*',\r\n    error: false,\r\n    onChange: base64 => console.log(base64),\r\n    t: el => el,\r\n    crop: false\r\n}\r\n\r\nUploadImage.propTypes = {\r\n    classes: PropTypes.object,\r\n    maxSize: PropTypes.number,\r\n    disabled: PropTypes.bool,\r\n    crop: PropTypes.bool,\r\n    error: PropTypes.bool,\r\n    onChange: PropTypes.func,\r\n    accept: PropTypes.string,\r\n    t: PropTypes.func,\r\n};\r\n\r\nexport default withStyles(styles)(UploadImage);\r\n","/**\r\n * Copyright 2019-2021 bluefox <dogafox@gmail.com>\r\n *\r\n * MIT License\r\n *\r\n **/\r\nimport React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport clsx from 'clsx';\r\nimport { withStyles } from '@material-ui/core/styles';\r\n\r\nimport TextField from '@material-ui/core/TextField';\r\nimport Select from '@material-ui/core/Select';\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\nimport Switch from '@material-ui/core/Switch';\r\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\r\n\r\nimport I18n from '@iobroker/adapter-react/i18n';\r\nimport Utils from '@iobroker/adapter-react/Components/Utils';\r\nimport Icon from '@iobroker/adapter-react/Components/Icon';\r\n\r\nimport UploadImage from '../Components/UploadImage';\r\n\r\nconst styles = theme => ({\r\n    divOidField: {\r\n        width: '100%',\r\n        display: 'block',\r\n        paddingTop: 7,\r\n        paddingBottom: 7,\r\n    },\r\n    oidName: {\r\n        fontSize: 14,\r\n        fontWeight: 'bold'\r\n    },\r\n    oidField: {\r\n        display: 'inline-block',\r\n        marginTop: 0,\r\n        marginBottom: 0,\r\n    },\r\n    colorButton: {\r\n        marginLeft: 5,\r\n        '&>div': {\r\n            width: '100%'\r\n        }\r\n    },\r\n    divOids: {\r\n        display: 'inline-block',\r\n        width: '100%',\r\n        verticalAlign: 'top',\r\n    },\r\n    divDevice: {\r\n        color: theme.palette.type === 'light' ? 'black' : 'white',\r\n        display: 'inline-block',\r\n        width: 100,\r\n        verticalAlign: 'top',\r\n    },\r\n    divIndicators: {\r\n        display: 'inline-block',\r\n        width: 'calc(50% - 55px)',\r\n        verticalAlign: 'top',\r\n    },\r\n    divDialogContent: {\r\n        fontSize: '1rem',\r\n        fontFamily: '\"Roboto\", \"Helvetica\", \"Arial\", sans-serif'\r\n    },\r\n    buttonPen: {\r\n        color: '#ffffff',\r\n    },\r\n    headerButtons: {\r\n        textAlign: 'right'\r\n    },\r\n    enumIcon: {\r\n        width: 24,\r\n        height: 24,\r\n        marginRight: 10\r\n    },\r\n    renderValueWrapper: {\r\n        display: 'flex'\r\n    },\r\n    renderValueCurrent: {\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n        marginRight: 10\r\n    },\r\n    funcDivEdit: {\r\n        width: '100%'\r\n    },\r\n    funcEditName: {\r\n        display: 'inline-block',\r\n        width: 85\r\n    },\r\n    funcEdit: {\r\n        display: 'inline-block',\r\n        marginTop: 0,\r\n        marginBottom: 0,\r\n        width: 'calc(100% - 85px)',\r\n    },\r\n    tableIconImg: {\r\n        marginTop: 4,\r\n        marginLeft: 4,\r\n        width: 32,\r\n        height: 32,\r\n        color: '#888'\r\n    },\r\n    disableSwitch: {\r\n        '& .Mui-checked .MuiSwitch-thumb': {\r\n            background: '#ffb3ce'\r\n        }\r\n    },\r\n    disableSwitchLabel: {\r\n        '& .MuiFormControlLabel-label': {\r\n            fontSize: '0.75rem',\r\n            opacity: 0.6,\r\n        }\r\n    },\r\n    dropZone: {\r\n        textAlign: 'left',\r\n        marginTop: theme.spacing(2),\r\n    },\r\n    wrapperColorFields:{\r\n        display: 'flex',\r\n        width: '100%'\r\n    },\r\n    '@media screen and (max-width: 650px)': {\r\n        oidName: {\r\n            fontSize: 11\r\n        },\r\n        oidField: {\r\n            '& input': {\r\n                fontSize: 12\r\n            },\r\n            '& p': {\r\n                fontSize: 7\r\n            },\r\n        },\r\n        renderValueCurrent: {\r\n            fontSize: 12\r\n        },\r\n        enumIcon: {\r\n            width: 14,\r\n            height: 14,\r\n            marginRight: 5\r\n        },\r\n        disableSwitchLabel: {\r\n            '& span': {\r\n                fontSize: 11\r\n            }\r\n        },\r\n        wrapperColorFields:{\r\n            flexDirection: 'column'\r\n        },\r\n        colorButton:{\r\n            marginLeft:0\r\n        }\r\n    }\r\n});\r\n\r\nclass DialogEditProperties extends React.PureComponent {\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        let name = '';\r\n        const channelObj = this.props.objects[this.props.channelId];\r\n\r\n        if (channelObj && channelObj.common) {\r\n            name = Utils.getObjectNameFromObj(channelObj, null, { language: I18n.getLanguage() }) === 'undefined' ? channelObj.common.name[Object.keys(channelObj.common.name)[0]] : Utils.getObjectNameFromObj(channelObj, null, { language: I18n.getLanguage() });\r\n        }\r\n\r\n        const functions = this.props.enumIDs.filter(id => {\r\n            if (!id.startsWith('enum.functions.')) {\r\n                return false;\r\n            }\r\n            const obj = this.props.objects[id];\r\n            return obj && obj.common && obj.common.members && obj.common.members.includes(this.props.channelId);\r\n        });\r\n\r\n        const rooms = this.props.enumIDs.filter(id => {\r\n            if (!id.startsWith('enum.rooms.')) {\r\n                return false;\r\n            }\r\n            const obj = this.props.objects[id];\r\n            return obj && obj.common && obj.common.members && obj.common.members.includes(this.props.channelId);\r\n        });\r\n\r\n        // ;common.custom[adapter.namespace].smartName\r\n        let smartName = this.getSmartName(channelObj);\r\n\r\n        this.state = Object.keys(this.props.changeProperties).length ? this.props.changeProperties : {\r\n            color: channelObj && channelObj.common && channelObj.common.color,\r\n            icon: channelObj && channelObj.common && channelObj.common.icon,\r\n            functions,\r\n            rooms,\r\n            name,\r\n            initName: name,\r\n            smartName,\r\n        };\r\n    }\r\n\r\n    componentDidMount() {\r\n        if (!Object.keys(this.props.changeProperties).length) {\r\n            this.props.onChange(this.state, this.state);\r\n        }\r\n    }\r\n\r\n    componentDidUpdate(prevProps, prevState) {\r\n        if (JSON.stringify(prevState) !== JSON.stringify(this.state)) {\r\n            this.props.onChange(this.state, false, this.checkedName());\r\n        }\r\n    }\r\n\r\n    handleClose() {\r\n        this.props.onClose && this.props.onClose();\r\n    }\r\n\r\n    handleOk() {\r\n        this.props.onClose && this.props.onClose({\r\n            rooms: this.state.rooms,\r\n            functions: this.state.functions,\r\n            name: this.state.name,\r\n            icon: this.state.icon,\r\n            color: this.state.color,\r\n            smartName: this.state.smartName,\r\n        });\r\n    }\r\n\r\n    findRealDevice() {\r\n        let realParent = Object.keys(this.state.ids).find(id => this.state.ids[id]);\r\n        if (realParent) {\r\n            realParent = this.state.ids[realParent];\r\n            const parts = realParent.split('.');\r\n            parts.pop();\r\n            realParent = parts.join('.');\r\n        }\r\n        return realParent || '';\r\n    }\r\n\r\n    renderSelectEnum(name) {\r\n        const enums = this.props.enumIDs.filter(id => id.startsWith('enum.' + name + '.'));\r\n        const language = I18n.getLanguage();\r\n        const objs = enums.map(id => {\r\n            return {\r\n                name: Utils.getObjectName(this.props.objects, id, { language }),\r\n                icon: Utils.getObjectIcon(id, this.props.objects[id]),\r\n                id: id\r\n            }\r\n        });\r\n\r\n        return <Select\r\n            className={this.props.classes.oidField}\r\n            value={this.state[name]}\r\n            fullWidth\r\n            multiple\r\n            disabled={this.props.disabled}\r\n            renderValue={arrId => {\r\n                const newArr = arrId.map(id => {\r\n                    return {\r\n                        name: Utils.getObjectName(this.props.objects, id, { language }),\r\n                        icon: Utils.getObjectIcon(id, this.props.objects[id]),\r\n                        id: id\r\n                    }\r\n                });\r\n\r\n                return <div className={this.props.classes.renderValueWrapper}>\r\n                    {newArr.map(obj => <div className={this.props.classes.renderValueCurrent} key={`${obj.id}-render`}>\r\n                        {obj.icon ? <Icon className={this.props.classes.enumIcon} src={obj.icon} alt={obj.id} /> : <div className={this.props.classes.enumIcon} />}\r\n                        {obj.name}\r\n                    </div>)}\r\n                </div>\r\n            }}\r\n            onChange={e => {\r\n                this.setState({ [name]: e.target.value })\r\n            }}\r\n        >\r\n            {objs.map(obj => <MenuItem key={obj.id} icon={obj.icon} value={obj.id}>\r\n                {obj.icon ? <Icon className={this.props.classes.enumIcon} src={obj.icon} alt={obj.id} /> : <div className={this.props.classes.enumIcon} />}\r\n                {obj.name}\r\n            </MenuItem>)}\r\n        </Select>;\r\n    }\r\n\r\n    getSmartName(obj, language) {\r\n        language = language || I18n.getLanguage();\r\n        let smartName;\r\n        if (obj &&\r\n            obj.common &&\r\n            obj.common.custom) {\r\n            if (this.props.iotNoCommon) {\r\n                const iot = this.props.iot || 'iot.0';\r\n                if (obj.common.custom[iot] && obj.common.custom[iot].smartName) {\r\n                    smartName = obj.common.custom[iot].smartName;\r\n                }\r\n            } else {\r\n                smartName = obj.common.smartName;\r\n            }\r\n        } else {\r\n            smartName = obj?.common?.smartName;\r\n        }\r\n\r\n        if (smartName === false) {\r\n            return false;\r\n        } else\r\n            if (smartName && typeof smartName === 'object') {\r\n                if (smartName[language] === false || smartName.en === false) {\r\n                    return false;\r\n                }\r\n                smartName = smartName[language] || smartName.en || '';\r\n            }\r\n        return smartName || '';\r\n    }\r\n\r\n    handleIcon(file) {\r\n        const newValue = typeof file === 'object' ? file.data : file;\r\n\r\n        //newValue.changed = this.isChanged(name, newValue.values[name]);\r\n        this.setState({ icon: newValue });\r\n    }\r\n\r\n    checkedName = () => {\r\n        if (!this.state.name) {\r\n            return true;\r\n        } else if (this.state.name === this.state.initName) {\r\n            return false;\r\n        }\r\n        let parts = this.props.channelId.split('.');\r\n        parts.pop();\r\n        parts = parts.join('.');\r\n        parts = `${parts}.${this.state.name.replace(Utils.FORBIDDEN_CHARS, '_').replace(/\\s/g, '_').replace(/\\./g, '_')}`\r\n        return this.props.objects[parts];\r\n    }\r\n\r\n    renderProperties() {\r\n        const { classes, disabled } = this.props;\r\n        return <div className={classes.divOids}>\r\n            <div className={classes.divOidField}>\r\n                <div className={classes.oidName} >{I18n.t('Name')}</div>\r\n                <TextField\r\n                    key=\"_name\"\r\n                    fullWidth\r\n                    disabled={disabled}\r\n                    value={this.state.name || ''}\r\n                    error={this.checkedName()}\r\n                    className={classes.oidField}\r\n                    onChange={e => this.setState({ name: e.target.value })}\r\n                    margin=\"normal\"\r\n                />\r\n            </div>\r\n            <div className={classes.divOidField}>\r\n                <div className={classes.oidName} >{I18n.t('Disable smart')}</div>\r\n                <FormControlLabel\r\n                    className={classes.disableSwitchLabel}\r\n                    control={\r\n                        <Switch\r\n                            className={classes.disableSwitch}\r\n                            disabled={disabled}\r\n                            checked={this.state.smartName === false}\r\n                            color=\"secondary\"\r\n                            onChange={e => this.setState({ smartName: e.target.checked ? false : null })}\r\n                        />\r\n                    }\r\n                    label={I18n.t('Hide this name from smart assistance')}\r\n                />\r\n            </div>\r\n            {this.state.smartName !== false ? <div className={classes.divOidField}>\r\n                <div className={classes.oidName} >{I18n.t('Smart name')}</div>\r\n                <TextField\r\n                    key=\"_smartName\"\r\n                    fullWidth\r\n                    disabled={disabled}\r\n                    placeholder={this.state.name.replace(/[-^#_%&{}!?()§\"'`+*~/\\\\]/g, ' ')}\r\n                    value={this.state.smartName || ''}\r\n                    className={classes.oidField}\r\n                    helperText={I18n.t('This name will use be in smart assistance. (optional)')}\r\n                    onChange={e => this.setState({ smartName: e.target.value.replace(/[-^#_%&{}!?()§\"'`+*~/\\\\]/g, ' ') })}\r\n                    margin=\"normal\"\r\n                />\r\n            </div> : null}\r\n            <div className={classes.divOidField}>\r\n                <div className={classes.oidName} >{I18n.t('Function')}</div>\r\n                {this.renderSelectEnum('functions')}\r\n            </div>\r\n            <div className={classes.divOidField}>\r\n                <div className={classes.oidName} >{I18n.t('Room')}</div>\r\n                {this.renderSelectEnum('rooms')}\r\n            </div>\r\n            <div className={classes.divOidField}>\r\n                <div className={classes.oidName} >{I18n.t('Color')}</div>\r\n                <div className={classes.wrapperColorFields}>\r\n                    <TextField\r\n                        key=\"_color\"\r\n                        fullWidth\r\n                        disabled={disabled}\r\n                        value={this.state.color || ''}\r\n                        onChange={e => this.setState({ color: e.target.value })}\r\n                    />\r\n                    <TextField\r\n                        key=\"_color1\"\r\n                        type=\"color\"\r\n                        style={{ width: 40 }}\r\n                        disabled={disabled}\r\n                        value={this.state.color || ''}\r\n                        className={clsx(classes.oidField, classes.colorButton)}\r\n                        onChange={e => this.setState({ color: e.target.value })}\r\n                        margin=\"normal\"\r\n                    />\r\n                </div>\r\n            </div>\r\n            <UploadImage\r\n                crop={false}\r\n                disabled={disabled}\r\n                className={classes.dropZone}\r\n                maxSize={256 * 1024}\r\n                icon={this.state.icon}\r\n                onChange={base64 => this.setState({ icon: base64 })}\r\n                t={I18n.t}\r\n            />\r\n        </div>;\r\n    }\r\n\r\n    render() {\r\n        return <div className={this.props.classes.divDialogContent}>\r\n            {this.renderProperties()}\r\n        </div>;\r\n    }\r\n}\r\n\r\nDialogEditProperties.propTypes = {\r\n    onClose: PropTypes.func,\r\n    type: PropTypes.string,\r\n    iot: PropTypes.string,\r\n    iotNoCommon: PropTypes.bool,\r\n    channelId: PropTypes.string,\r\n    objects: PropTypes.object,\r\n    enumIDs: PropTypes.array,\r\n    socket: PropTypes.object,\r\n    disabled: PropTypes.bool\r\n};\r\n\r\nexport default withStyles(styles)(DialogEditProperties);\r\n","import React, { useEffect, useState } from 'react';\r\nimport ReactDOM from 'react-dom';\r\n\r\nimport Button from '@material-ui/core/Button';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogActions from '@material-ui/core/DialogActions';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport { Checkbox, DialogTitle, FormControl, FormControlLabel, InputLabel, makeStyles, MenuItem, Paper, Select, TextField, ThemeProvider } from '@material-ui/core';\r\nimport Autocomplete from '@material-ui/lab/Autocomplete';\r\n\r\nimport IconClose from '@material-ui/icons/Close';\r\nimport IconCheck from '@material-ui/icons/Check';\r\n\r\nimport I18n from '@iobroker/adapter-react/i18n';\r\nimport theme from '@iobroker/adapter-react/Theme';\r\nimport Utils from '@iobroker/adapter-react/Components/Utils';\r\n\r\nlet node = null;\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    root: {\r\n        backgroundColor: theme.palette.background.paper,\r\n        width: '100%',\r\n        height: 'auto',\r\n        display: 'flex'\r\n    },\r\n    paper: {\r\n        maxWidth: 960,\r\n        width: 'calc(100% - 64px)'\r\n    },\r\n    overflowHidden: {\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        border: 'none'\r\n        // overflow: 'hidden'\r\n    },\r\n    pre: {\r\n        overflow: 'auto',\r\n        whiteSpace: 'pre-wrap',\r\n        margin: 0\r\n    },\r\n    showDialog: {\r\n        marginTop: 10\r\n    },\r\n    nameField: {\r\n        marginTop: 10\r\n    },\r\n    roleField: {\r\n        marginTop: 10\r\n\r\n    },\r\n    typeField: {\r\n        marginTop: 10\r\n\r\n    },\r\n    unitField: {\r\n        // marginTop: 10\r\n\r\n    },\r\n    minField: {\r\n        marginTop: 10,\r\n        marginRight: 10\r\n\r\n    },\r\n    maxField: {\r\n        marginTop: 10\r\n\r\n    },\r\n    minMax: {\r\n        display: 'flex'\r\n    },\r\n    overflowText:{\r\n        '& h2':{\r\n            overflow: 'hidden',\r\n            textOverflow: 'ellipsis'\r\n        }\r\n    },\r\n    '@media screen and (max-width: 450px)': {\r\n        paper: {\r\n            maxWidth: 960,\r\n            width: 'calc(100% - 12px)',\r\n            height: 'calc(100% - 12px)',\r\n            maxHeight:'calc(100% - 12px)',\r\n            margin: 0\r\n        }\r\n    }\r\n}));\r\n\r\nconst typeArray = [\r\n    'string',\r\n    'boolean',\r\n    'number',\r\n    'file',\r\n];\r\n\r\nconst DialogAddState = ({ callback, objects, socket, channelId, arrayStateDefault, editState }) => {\r\n    const classes = useStyles();\r\n    const [open, setOpen] = useState(true);\r\n    const [role, setRole] = useState(null);\r\n    const [roleInput, setRoleInput] = useState(null);\r\n    const [roles, setRoles] = useState([]);\r\n    const [name, setName] = useState('NEW_STATE');\r\n    const [unit, setUnit] = useState('');\r\n    const [type, setType] = useState('string');\r\n    const [checkedRead, setCheckedRead] = useState(true);\r\n    const [checkedWrite, setCheckedWrite] = useState(true);\r\n    const [min, setMin] = useState(0);\r\n    const [max, setMax] = useState(100);\r\n    const [step, setStep] = useState(0);\r\n    const [checkedStates, setCheckedStates] = useState(false);\r\n\r\n    useEffect(() => {\r\n        let rolesArr = [];\r\n        Object.keys(objects).forEach(key => {\r\n            const obj = objects[key];\r\n            if (obj) {\r\n                const common = obj.common;\r\n                const role = common && common.role;\r\n                if (role && !rolesArr.includes(role)) {\r\n                    rolesArr.push(role);\r\n                }\r\n            }\r\n        });\r\n\r\n        setRoles(rolesArr.sort());\r\n\r\n        if (editState) {\r\n            const newObj = objects[editState];\r\n            if (newObj) {\r\n                setType(newObj.common.type);\r\n                setRole(newObj.common.role);\r\n                setName(newObj.common.name);\r\n                if (newObj.common.type === 'number') {\r\n                    setMin(newObj.common.min);\r\n                    setMax(newObj.common.max);\r\n                    setUnit(newObj.common.unit);\r\n                    setStep(newObj.common.step);\r\n                    setCheckedStates(!!newObj.common.states);\r\n                }\r\n                if (newObj.common.type !== 'file') {\r\n                    setCheckedRead(newObj.common.read);\r\n                    setCheckedWrite(newObj.common.write);\r\n                }\r\n            }\r\n        }\r\n    }, [editState, objects])\r\n\r\n    const onClose = () => {\r\n        setOpen(false);\r\n        if (node) {\r\n            document.body.removeChild(node);\r\n            node = null;\r\n        }\r\n    };\r\n\r\n    return <ThemeProvider theme={theme(Utils.getThemeName())}>\r\n        <Dialog\r\n            onClose={onClose}\r\n            open={open}\r\n            classes={{ paper: classes.paper }}\r\n        >\r\n            <DialogTitle className={classes.overflowText}>{I18n.t(editState ? 'Edit state %s' : 'Add state %s', `${channelId}.${name}`)}</DialogTitle>\r\n            <DialogContent className={classes.overflowHidden} dividers>\r\n                <Paper className={classes.showDialog} style={{ padding: `10px 20px` }} p={3}>\r\n                    <TextField\r\n                        fullWidth\r\n                        value={name}\r\n                        error={!name || (objects[`${channelId}.${name}`] && editState !== `${channelId}.${name}`) || arrayStateDefault.find(item => item.name === name)}\r\n                        className={classes.nameField}\r\n                        label={I18n.t('Name')}\r\n                        onChange={e => setName(e.target.value?.toUpperCase())}\r\n                    />\r\n                    <Autocomplete\r\n                        freeSolo\r\n                        options={roles}\r\n                        className={classes.roleField}\r\n                        style={{ width: '100%' }}\r\n                        value={role}\r\n                        onChange={(event, role) => {\r\n                            setRole(role);\r\n                            setRoleInput(role);\r\n                        }}\r\n                        onInputChange={(event, role) => setRoleInput(role)}\r\n                        renderInput={params => <TextField\r\n                            {...params}\r\n                            label={I18n.t('Role')}\r\n                        // variant=\"outlined\"\r\n                        />}\r\n                    />\r\n                    <FormControl fullWidth\r\n                        className={classes.typeField}>\r\n                        <InputLabel>{I18n.t('Type')}</InputLabel>\r\n                        <Select\r\n                            fullWidth\r\n                            value={type}\r\n                            onChange={e => setType(e.target.value)}\r\n                        >\r\n                            {typeArray.map(key => <MenuItem key={key} value={key}>{key}</MenuItem>)}\r\n                        </Select>\r\n                    </FormControl>\r\n                    {type !== 'file' &&\r\n                        <>\r\n                            <FormControlLabel\r\n                                control={<Checkbox checked={checkedRead} onChange={e => setCheckedRead(e.target.checked)} />}\r\n                                label={I18n.t('Readable')}\r\n                            />\r\n                            <FormControlLabel\r\n                                control={<Checkbox checked={checkedWrite} onChange={e => setCheckedWrite(e.target.checked)} />}\r\n                                label={I18n.t('Writable')}\r\n                            />\r\n                        </>\r\n                    }\r\n                    {type === 'number' && <TextField\r\n                        fullWidth\r\n                        value={unit}\r\n                        className={classes.unitField}\r\n                        label={I18n.t('Unit')}\r\n                        onChange={e => setUnit(e.target.value)}\r\n                    />}\r\n                    {type === 'number' && <div className={classes.minMax}>\r\n                        <TextField\r\n                            fullWidth\r\n                            value={min}\r\n                            type=\"number\"\r\n                            className={classes.minField}\r\n                            label={I18n.t('Min')}\r\n                            onChange={e => setMin(e.target.value)}\r\n                        />\r\n                        <TextField\r\n                            fullWidth\r\n                            value={max}\r\n                            type=\"number\"\r\n                            className={classes.minField}\r\n                            label={I18n.t('Max')}\r\n                            onChange={e => setMax(e.target.value)}\r\n                        />\r\n                        <TextField\r\n                            fullWidth\r\n                            value={step}\r\n                            type=\"number\"\r\n                            className={classes.maxField}\r\n                            label={I18n.t('Step')}\r\n                            onChange={e => setStep(e.target.value)}\r\n                        />\r\n                        <FormControlLabel\r\n                            control={<Checkbox checked={checkedStates} onChange={e => setCheckedStates(e.target.checked)} />}\r\n                            label={I18n.t('Value=>String')}\r\n                        />\r\n                    </div>}\r\n                </Paper>\r\n            </DialogContent>\r\n            <DialogActions>\r\n                <Button\r\n                    variant=\"contained\"\r\n                    autoFocus\r\n                    disabled={!name || (objects[`${channelId}.${name}`] && !editState) || (editState && editState !== `${channelId}.${name}` && objects[`${channelId}.${name}`]) || arrayStateDefault.find(item => item.name === name)}\r\n                    onClick={async () => {\r\n                        onClose();\r\n                        let obj = {\r\n                            _id: `${channelId}.${name}`,\r\n                            common: {\r\n                                name,\r\n                                role: roleInput,\r\n                                type,\r\n                            },\r\n                            type: 'state'\r\n                        };\r\n                        if (editState){\r\n                            obj = JSON.parse(JSON.stringify(objects[editState]));\r\n                            obj._id = `${channelId}.${name}`;\r\n                            obj.common.name = name;\r\n                            obj.common.role = roleInput;\r\n                            obj.common.type = type;\r\n                        }\r\n                        if (type === 'number') {\r\n                            obj.common.min = parseFloat(min.toString().replace(',', '.'));\r\n                            obj.common.max = parseFloat(max.toString().replace(',', '.'));\r\n                            obj.common.unit = unit;\r\n                            if (step || step === 0) {\r\n                                obj.common.step = parseFloat(step.toString().replace(',', '.'));\r\n                            }\r\n                            if (checkedStates) {\r\n                                obj.common.states = obj.common.states || {};\r\n                            } else if (obj.common.states) {\r\n                               delete obj.common.states;\r\n                            }\r\n                        }\r\n                        if (type !== 'file') {\r\n                            obj.common.read = checkedRead;\r\n                            obj.common.write = checkedWrite;\r\n                        }\r\n                        await socket.setObject(`${channelId}.${name}`, obj);\r\n                        callback && callback(obj);\r\n                    }}\r\n                    startIcon={<IconCheck />}\r\n                    color=\"primary\">\r\n                    {I18n.t(editState ? 'Save' : 'Add')}\r\n                </Button>\r\n                <Button\r\n                    variant=\"contained\"\r\n                    onClick={() => onClose()}\r\n                    startIcon={<IconClose />}\r\n                    color=\"default\">\r\n                    {I18n.t('Cancel')}\r\n                </Button>\r\n            </DialogActions>\r\n        </Dialog>\r\n    </ThemeProvider>;\r\n}\r\n\r\nDialogAddState.defaultProps = {\r\n    editState: null\r\n};\r\n\r\nexport const addStateCallBack = (callback, objects, socket, channelId, arrayStateDefault, editState) => {\r\n    if (!node) {\r\n        node = document.createElement('div');\r\n        node.id = 'renderModal';\r\n        document.body.appendChild(node);\r\n    }\r\n\r\n    return ReactDOM.render(\r\n        <DialogAddState\r\n            arrayStateDefault={arrayStateDefault}\r\n            channelId={channelId}\r\n            socket={socket}\r\n            objects={objects}\r\n            callback={callback}\r\n            editState={editState}\r\n        />, node);\r\n}","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport {withStyles} from '@material-ui/core/styles';\r\n\r\nimport {SortableContainer, SortableElement, SortableHandle } from 'react-sortable-hoc';\r\n\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport DialogActions from '@material-ui/core/DialogActions';\r\nimport Fab from '@material-ui/core/Fab';\r\nimport Table from '@material-ui/core/Table';\r\nimport TableBody from '@material-ui/core/TableBody';\r\nimport TableCell from '@material-ui/core/TableCell';\r\nimport TableContainer from '@material-ui/core/TableContainer';\r\nimport TableHead from '@material-ui/core/TableHead';\r\nimport TableRow from '@material-ui/core/TableRow';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport {TextField} from '@material-ui/core';\r\n\r\nimport {MdAdd as IconAdd} from 'react-icons/md';\r\nimport Button from '@material-ui/core/Button';\r\nimport IconCheck from '@material-ui/icons/Check';\r\nimport IconClose from '@material-ui/icons/Close';\r\nimport IconDelete from '@material-ui/icons/Delete';\r\nimport IconDragHandle from '@material-ui/icons/DragHandle';\r\n\r\nimport I18n from '@iobroker/adapter-react/i18n';\r\nconst DragHandle = SortableHandle(() => <IconDragHandle style={{cursor: 'grab'}}/>);\r\n\r\nconst SortableItem = SortableElement(({item, ownIndex, onDelete, onChange}) =>\r\n    <TableRow style={{zIndex: 10000}}>\r\n        <TableCell><DragHandle /></TableCell>\r\n        <TableCell component=\"th\" scope=\"row\">{\r\n            <TextField value={item.value} onChange={e => onChange(ownIndex, e.target.value)}/>\r\n        }</TableCell>\r\n        <TableCell align=\"right\">{\r\n            <TextField value={item.label} onChange={e => onChange(ownIndex, undefined, e.target.value)}/>\r\n        }</TableCell>\r\n        <TableCell><IconButton onClick={() => onDelete(ownIndex)}\r\n        ><IconDelete/></IconButton></TableCell>\r\n    </TableRow>);\r\n\r\nconst SortableList = SortableContainer(({items, onDelete, onChange}) => {\r\n    return <TableBody>\r\n        {items.map((item, index) =>\r\n            <SortableItem key={`item-${index}`} index={index} ownIndex={index} onDelete={onDelete} onChange={onChange} item={item} />)}\r\n    </TableBody>;\r\n});\r\n\r\nconst styles = theme => ({\r\n\r\n});\r\n\r\nclass DialogEditStates extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            states: Object.keys(this.props.states || {}).map(value => ({label: this.props.states[value], value})),\r\n            error: false,\r\n        };\r\n    }\r\n\r\n    onClose() {\r\n        const result = {};\r\n        this.state.states.forEach(item => result[item.value] = item.label);\r\n        this.props.onClose(result);\r\n    }\r\n\r\n    onDelete = i => {\r\n        const states = JSON.parse(JSON.stringify(this.state.states));\r\n        states.splice(i, 1);\r\n        this.setState({states});\r\n    }\r\n\r\n    onChange = (i, value, label) => {\r\n        const states = JSON.parse(JSON.stringify(this.state.states));\r\n        if (value !== undefined) {\r\n            states[i].value = value;\r\n        }\r\n        if (label !== undefined) {\r\n            states[i].label = label;\r\n        }\r\n        this.setState({states});\r\n    }\r\n\r\n    onSortEnd = ({oldIndex, newIndex}) => {\r\n        const states = JSON.parse(JSON.stringify(this.state.states));\r\n        const item = states[oldIndex];\r\n        states[oldIndex] = states[newIndex];\r\n        states[newIndex] = item;\r\n        this.setState({states});\r\n    };\r\n\r\n    render() {\r\n        return <Dialog\r\n            open={true}\r\n            disableBackdropClick\r\n            disableEscapeKeyDown\r\n        >\r\n            <DialogTitle>{I18n.t('Edit states')}</DialogTitle>\r\n            <DialogContent>\r\n                <Fab size=\"small\" style={{marginBottom: 10}} onClick={() => {\r\n                    const states = JSON.parse(JSON.stringify(this.state.states));\r\n                    // find max value\r\n                    let max = states.length ? parseFloat(states[0].value) : 0;\r\n                    for (let i = 1; i < states.length; i++) {\r\n                        const val = parseFloat(states[i].value);\r\n                        if (val > max) {\r\n                            max = val;\r\n                        }\r\n                    }\r\n                    if (states.length) {\r\n                        states.push({value: max + 1, label: (max + 1).toString()});\r\n                    } else {\r\n                        states.push({value: 0, label: '0'});\r\n                    }\r\n                    this.setState({states});\r\n                }}><IconAdd/></Fab>\r\n                <TableContainer component={Paper}>\r\n                    <Table className={this.props.classes.table} aria-label=\"simple table\">\r\n                        <TableHead>\r\n                            <TableRow>\r\n                                <TableCell/>\r\n                                <TableCell>Value</TableCell>\r\n                                <TableCell>Title</TableCell>\r\n                                <TableCell/>\r\n                            </TableRow>\r\n                        </TableHead>\r\n                        <SortableList useDragHandle items={this.state.states} onSortEnd={this.onSortEnd} onDelete={this.onDelete} onChange={this.onChange}/>\r\n                    </Table>\r\n                </TableContainer>\r\n            </DialogContent>\r\n            <DialogActions>\r\n                <Button variant=\"contained\" disabled={JSON.stringify(this.props.states) === JSON.stringify(this.state.states) || this.state.error} onClick={() => this.onClose()} color=\"primary\" startIcon={<IconCheck/>}>{I18n.t('Ok')}</Button>\r\n                <Button variant=\"contained\" onClick={() => this.props.onClose()} startIcon={<IconClose/>}>{I18n.t('Cancel')} < /Button>\r\n            </DialogActions>\r\n        </Dialog>;\r\n    }\r\n}\r\n\r\nDialogEditStates.propTypes = {\r\n    states: PropTypes.object.isRequired,\r\n    onClose: PropTypes.func.isRequired,\r\n};\r\n\r\nexport default withStyles(styles)(DialogEditStates);\r\n","/**\r\n * Copyright 2019-2021 bluefox <dogafox@gmail.com>\r\n *\r\n * MIT License\r\n *\r\n **/\r\nimport React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport clsx from 'clsx';\r\n\r\nimport Button from '@material-ui/core/Button';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogActions from '@material-ui/core/DialogActions';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport Select from '@material-ui/core/Select';\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\nimport { AppBar, IconButton, LinearProgress, Paper, Tab, Tabs, Tooltip, Typography } from '@material-ui/core';\r\n\r\nimport { MdEdit as IconEdit } from 'react-icons/md';\r\nimport { MdFunctions as IconFunction } from 'react-icons/md';\r\nimport { MdOpenInNew as IconExtended } from 'react-icons/md';\r\nimport { MdHelpOutline } from 'react-icons/md';\r\nimport IconClose from '@material-ui/icons/Close';\r\nimport IconCheck from '@material-ui/icons/Check';\r\nimport { MdDelete as IconDelete } from 'react-icons/md';\r\nimport { MdAdd as IconAdd } from 'react-icons/md';\r\nimport { AiOutlineEdit as IconEditStates } from 'react-icons/ai';\r\nimport ImportExportIcon from '@material-ui/icons/ImportExport';\r\n\r\nimport DialogSelectID from '@iobroker/adapter-react/Dialogs/SelectID';\r\nimport I18n from '@iobroker/adapter-react/i18n';\r\nimport Utils from '@iobroker/adapter-react/Components/Utils';\r\n\r\nimport TypeIcon from '../Components/TypeIcon';\r\nimport { STATES_NAME_ICONS } from '../Components/TypeOptions';\r\nimport DialogEditProperties from './DialogEditProperties';\r\nimport { addStateCallBack } from './DialogAddState';\r\nimport { getChannelItems } from '../Components/helpers/search';\r\nimport DialogEditStates from './DialogEditStates';\r\n\r\nconst styles = theme => ({\r\n    header: {\r\n        width: '100%',\r\n        fontSize: 16,\r\n        textTransform: 'capitalize',\r\n        textAlign: 'center',\r\n        paddingBottom: 20,\r\n        color: '#000',\r\n    },\r\n    divOidField: {\r\n        width: '100%',\r\n        display: 'flex',\r\n        paddingTop: 5,\r\n        paddingBottom: 5,\r\n        height: 69,\r\n    },\r\n    oidName: {\r\n        minWidth: 100,\r\n        display: 'block',\r\n        flexDirection: 'column',\r\n        // marginTop: 17,\r\n        whiteSpace: 'nowrap',\r\n        overflow: 'hidden',\r\n        textOverflow: 'ellipsis',\r\n        marginRight: 8,\r\n    },\r\n    oidField: {\r\n        display: 'inline-block',\r\n        marginTop: 0,\r\n        marginBottom: 0,\r\n        width: '100%',\r\n    },\r\n    colorButton: {\r\n        '&>div': {\r\n            width: '100%'\r\n        }\r\n    },\r\n    divOids: {\r\n        display: 'inline-block',\r\n        verticalAlign: 'top',\r\n        width: '100%',\r\n    },\r\n    divDevice: {\r\n        color: theme.palette.type === 'light' ? 'black' : 'white',\r\n        display: 'inline-block',\r\n        width: 100,\r\n        verticalAlign: 'top',\r\n        fontWeight: 'bold',\r\n        whiteSpace: 'nowrap',\r\n        lineHeight: '32px',\r\n    },\r\n    divIndicators: {\r\n        display: 'inline-block',\r\n        verticalAlign: 'top',\r\n    },\r\n    menuWrapperIcons: {\r\n        display: 'flex'\r\n    },\r\n    divExtended: {\r\n        width: 'calc(50% - 55px)',\r\n    },\r\n    divDialogContent: {\r\n        fontSize: '1rem',\r\n        fontFamily: '\"Roboto\", \"Helvetica\", \"Arial\", sans-serif'\r\n    },\r\n    buttonPen: {\r\n        color: '#ffffff',\r\n    },\r\n    headerButtons: {\r\n        textAlign: 'right'\r\n    },\r\n    headerButton: {\r\n        float: 'right',\r\n        marginLeft: 3,\r\n    },\r\n    enumIcon: {\r\n        width: 24,\r\n        height: 24\r\n    },\r\n    funcDivEdit: {\r\n        width: '100%'\r\n    },\r\n    funcEditName: {\r\n        display: 'inline-block',\r\n        width: 85\r\n    },\r\n    funcEdit: {\r\n        display: 'inline-block',\r\n        marginTop: 0,\r\n        marginBottom: 0,\r\n        width: 'calc(100% - 85px)',\r\n    },\r\n    idEditName: {\r\n        display: 'inline-block',\r\n        width: 200\r\n    },\r\n    idEdit: {\r\n        width: 'calc(100% - 200px)',\r\n        display: 'inline-block',\r\n        marginTop: 0,\r\n        marginBottom: 0,\r\n    },\r\n    icon: {\r\n        color: theme.palette.type === 'light' ? 'black' : 'white',\r\n        display: 'inline-block',\r\n        verticalAlign: 'middle'\r\n    },\r\n    deviceText: {\r\n        verticalAlign: 'middle'\r\n    },\r\n    wrapperIconHead: {\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n        justifyContent: 'center',\r\n        fontSize: 18,\r\n        fontWeight: 900,\r\n        marginTop: 5\r\n    },\r\n    iconStyle: {\r\n        marginRight: 7\r\n    },\r\n    content: {\r\n        paddingTop: 0\r\n    },\r\n    wrapperItemButtons: {\r\n        display: 'flex',\r\n        margin: 'auto 0',\r\n        marginLeft: 'auto'\r\n    },\r\n    emptyButton: {\r\n        width: 48,\r\n        height: 48\r\n    },\r\n    tab: {\r\n        '& .Mui-selected': {\r\n            color: theme.name === 'colored' && 'black'\r\n        }\r\n    },\r\n    indicator: {\r\n        backgroundColor: theme.name === 'colored' && 'black'\r\n    },\r\n    divOidFieldObj: {\r\n        height: 140\r\n    },\r\n    displayFlex: {\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        width: '100%'\r\n    },\r\n    displayFlexRow: {\r\n        display: 'flex',\r\n\r\n    },\r\n    width100: {\r\n        width: '100%'\r\n    },\r\n    stateSubCategory: {\r\n        fontSize: 12,\r\n        opacity: .6\r\n    },\r\n    wrapperHeaderIndicators: {\r\n        display: 'flex',\r\n        padding: 30\r\n    },\r\n    headerIndicatorsLine: {\r\n        flexGrow: 1,\r\n        borderTop: '1px solid #4dabf5',\r\n        margin: '0 10px',\r\n        marginTop: 11,\r\n        opacity: 0.8\r\n    },\r\n    headerIndicatorsName: {\r\n        color: '#4dabf5',\r\n        fontSize: 18\r\n    },\r\n    wrapperOidName: {\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n        overflow: 'hidden'\r\n    },\r\n    oidNameIcon: {\r\n        // marginTop: 16,\r\n        marginRight: 3,\r\n        width: 24,\r\n        height: 24,\r\n    },\r\n    addedName: {\r\n        color: '#e67e229e'\r\n    },\r\n    indicators: {\r\n        color: '#4dabf5'\r\n    },\r\n    helperText: {\r\n        opacity: 0.2\r\n    },\r\n    titleHead: {\r\n        '& h2': {\r\n            textOverflow: 'ellipsis',\r\n            overflow: 'hidden'\r\n        }\r\n    },\r\n    deviceIconStyle: {\r\n        marginTop: 4,\r\n        marginLeft: 4,\r\n        width: 32,\r\n        height: 32,\r\n    },\r\n    '@media screen and (max-width: 650px)': {\r\n        deviceIconStyle: {\r\n            width: 20,\r\n            height: 20\r\n        },\r\n        deviceText: {\r\n            fontSize: 12\r\n        },\r\n        emptyButton: {\r\n            width: 24,\r\n            height: 24\r\n        },\r\n        wrapperItemButtons: {\r\n            marginLeft: 'auto'\r\n        },\r\n        wrapperOidName: {\r\n\r\n        },\r\n        oidField: {\r\n            '& p': {\r\n                fontSize: 7\r\n            },\r\n            '& input': {\r\n                fontSize: 11\r\n            }\r\n        },\r\n        oidNameIcon: {\r\n            width: 10,\r\n            height: 10,\r\n            marginTop: 0\r\n        },\r\n        oidName: {\r\n            fontSize: 12,\r\n            minWidth: 60,\r\n            marginTop: 0,\r\n            maxWidth: 150,\r\n            display: 'block',\r\n            textOverflow: 'ellipsis'\r\n        },\r\n    },\r\n    wrapperButtonsAndOidField: {\r\n        display: 'flex',\r\n        flex: 1\r\n    },\r\n    wrapperTabPanel: {\r\n        padding: `10px 20px`\r\n    }, mobileWidth: {\r\n    },\r\n    '@media screen and (max-width: 450px)': {\r\n        mobileWidth: {\r\n            margin: 0,\r\n            width: 'calc(100% - 12px)',\r\n            height: 'calc(100% - 12px)',\r\n            maxHeight: 'calc(100% - 12px)'\r\n        },\r\n        divOidField: {\r\n            flexDirection: 'column'\r\n        },\r\n        oidField: {\r\n            paddingTop: '0 !important'\r\n        },\r\n        oidName: {\r\n            maxWidth: 'max-content'\r\n        },\r\n        wrapperTabPanel: {\r\n            padding: `10px 10px`\r\n        },\r\n    },\r\n    '@media screen and (max-width: 360px)': {\r\n        wrapperTitleAndId: {\r\n            maxWidth: 120\r\n        },\r\n    },\r\n});\r\n\r\n// const FORBIDDEN_CHARS = /[\\][*,;'\"`<>\\\\?]/g;\r\n\r\nfunction TabPanel(props) {\r\n    const { children, value, index, classes, ...other } = props;\r\n\r\n    return <div\r\n        role=\"tabpanel\"\r\n        hidden={value !== index}\r\n        id={`scrollable-auto-tabpanel-${index}`}\r\n        aria-labelledby={`scrollable-auto-tab-${index}`}\r\n        {...other}\r\n    >\r\n        {value === index && (\r\n            <Paper className={classes.wrapperTabPanel} p={3}>\r\n                <Typography component=\"div\">{children}</Typography>\r\n            </Paper>\r\n        )}\r\n    </div>;\r\n}\r\n\r\nclass DialogEditDevice extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        const ids = {};\r\n        this.fx = {};\r\n        const states = {};\r\n\r\n        this.props.channelInfo.states.forEach(state => {\r\n            if (state.id) {\r\n                const obj = this.props.objects[state.id];\r\n                if (obj && obj.common && obj.common.alias) {\r\n                    ids[state.name] = obj.common.alias.id || '';\r\n                    this.fx[state.name] = {\r\n                        read: obj.common.alias.read || '',\r\n                        write: obj.common.alias.write || '',\r\n                    };\r\n                    if (obj.common.states) {\r\n                        states[state.name] = JSON.parse(JSON.stringify(obj.common.states));\r\n                    }\r\n                } else {\r\n                    this.fx[state.name] = { read: '', write: '' };\r\n                }\r\n\r\n                if (obj && obj.common && obj.common.custom) {\r\n                    const attr = Object.keys(obj.common.custom).filter(id => id.startsWith('linkeddevices.'));\r\n                    if (attr && attr.length && obj.common.custom[attr] && obj.common.custom[attr].parentId) {\r\n                        ids[state.name] = obj.common.custom[attr].parentId;\r\n                    }\r\n                }\r\n\r\n                if (state.defaultRole && state.defaultRole.startsWith('button')) {\r\n                    delete this.fx[state.name].read;\r\n                }\r\n                if (!state.write ||\r\n                    (state.defaultRole && (state.defaultRole.startsWith('indicator') || state.defaultRole.startsWith('value')))\r\n                ) {\r\n                    delete this.fx[state.name].write;\r\n                }\r\n            } else {\r\n                this.fx[state.name] = { read: '', write: '' };\r\n            }\r\n        });\r\n\r\n        const { addedStates } = this.updateFx(this.getAddedChannelStates(), ids, states);\r\n\r\n        this.channelId = this.props.channelInfo.channelId;\r\n        let name = '';\r\n        const channelObj = this.props.objects[this.channelId];\r\n\r\n        if (channelObj && channelObj.common) {\r\n            name = Utils.getObjectNameFromObj(channelObj, null, { language: I18n.getLanguage() });\r\n        }\r\n\r\n        const indicatorsAvailable = !!this.props.channelInfo.states.filter(item => item.indicator).length;\r\n        const indicatorsVisible   = this.channelId.startsWith('alias.') || this.channelId.startsWith('linkeddevices.') || (indicatorsAvailable && !!this.props.channelInfo.states.filter(item => item.indicator && item.id).length);\r\n        const extendedAvailable = indicatorsAvailable && (this.channelId.startsWith('alias.') || this.channelId.startsWith('linkeddevices.'));\r\n\r\n        this.state = {\r\n            ids: ids,\r\n            idsInit: JSON.parse(JSON.stringify(ids)),\r\n            name,\r\n            addedStates,\r\n            showIndicators: indicatorsAvailable && window.localStorage.getItem('Devices.editExtended') === 'true',\r\n            expertMode: true,\r\n            selectIdFor: '',\r\n            newState: false,\r\n            selectIdPrefix: '',\r\n            editFxFor: '',\r\n            newChannelId: '',\r\n            indicatorsVisible,\r\n            newChannelError: false,\r\n            startTheProcess: false,\r\n            disabledButton: false,\r\n            extendedAvailable,\r\n            indicatorsAvailable,\r\n            tab: localStorage.getItem('EditDevice.tab') ? JSON.parse(localStorage.getItem('EditDevice.tab')) || 0 : 0,\r\n            initChangeProperties: {},\r\n            changeProperties: {},\r\n            editStates: null,\r\n            states,\r\n        };\r\n\r\n        this.pattern = this.props.patterns[Object.keys(this.props.patterns)\r\n            .find(type => this.props.patterns[type].type === this.props.channelInfo.type)];\r\n    }\r\n\r\n    renderEditStates() {\r\n        if (!this.state.editStates) {\r\n            return null;\r\n        } else {\r\n            return <DialogEditStates\r\n                states={this.state.states[this.state.editStates]}\r\n                onClose={states => {\r\n                    if (states) {\r\n                        const name = this.state.editStates;\r\n                        const newStates = JSON.parse(JSON.stringify(this.state.states));\r\n                        newStates[name] = states;\r\n                        let id;\r\n                        if (this.state.ids[name]) {\r\n                            id = this.state.ids[name];\r\n                        } else {\r\n                            const added = this.state.addedStates.find(item => item.name === name);\r\n                            id = added.id;\r\n                        }\r\n\r\n                        this.setState({editStates: null, states: newStates}, () =>\r\n                            this.props.socket.getObject(id)\r\n                                .then(obj => {\r\n                                    obj.common.states = states;\r\n                                    this.props.socket.setObject(obj._id, obj);\r\n                                }));\r\n                    } else {\r\n                        this.setState({editStates: null});\r\n                    }\r\n                }}\r\n            />\r\n        }\r\n    }\r\n\r\n    getAddedChannelStates() {\r\n        const channelIds = getChannelItems(this.props.objects, this.props.channelInfo.channelId);\r\n\r\n        // Add states, that could not be detected by type-detector\r\n        return channelIds\r\n            .filter(key => !this.props.channelInfo.states.find(item => item.id === key) && this.props.objects[key].type === 'state')\r\n            .map(key => {\r\n                const objOriginal = this.props.objects[key];\r\n                return {\r\n                    defaultRole: objOriginal?.common?.role,\r\n                    id: objOriginal?._id,\r\n                    noType: true,\r\n                    name: objOriginal?.common?.name,\r\n                    type: objOriginal?.common?.type,\r\n                    write: objOriginal?.common?.write,\r\n                    indicator: false,\r\n                    required: false,\r\n                    states: objOriginal?.common?.states ? JSON.parse(JSON.stringify(objOriginal.common.states)) : undefined,\r\n                };\r\n            })\r\n            .filter(item => !this.props.channelInfo.states\r\n                .filter(item => item.defaultRole)\r\n                .find(el => el.name === item.name)\r\n            );\r\n    }\r\n\r\n    updateFx(addedStates, ids, states) {\r\n        const newIds = ids || JSON.parse(JSON.stringify(this.state.ids));\r\n        const newStates = states || JSON.parse(JSON.stringify(this.state.states));\r\n\r\n        addedStates.forEach(state => {\r\n            if (state.id) {\r\n                const obj = this.props.objects[state.id];\r\n                if (obj && obj.common && obj.common.alias) {\r\n                    newIds[state.name] = obj.common.alias.id || '';\r\n                    this.fx[state.name] = this.fx[state.name] || {\r\n                        read: obj.common.alias.read || '',\r\n                        write: obj.common.alias.write || '',\r\n                    };\r\n                } else {\r\n                    this.fx[state.name] = this.fx[state.name] || { read: '', write: '' };\r\n                }\r\n                if (obj && obj.common && obj.common.custom) {\r\n                    const attr = Object.keys(obj.common.custom).filter(id => id.startsWith('linkeddevices.'));\r\n                    if (attr && attr.length && obj.common.custom[attr] && obj.common.custom[attr].parentId) {\r\n                        newIds[state.name] = newIds[state.name] || obj.common.custom[attr].parentId;\r\n                    }\r\n                }\r\n\r\n                if (state.defaultRole && state.defaultRole.startsWith('button')) {\r\n                    delete this.fx[state.name].read;\r\n                }\r\n                if (!state.write ||\r\n                    (state.defaultRole && (state.defaultRole.startsWith('indicator') || state.defaultRole.startsWith('value')))\r\n                ) {\r\n                    delete this.fx[state.name].write;\r\n                }\r\n                if (state.states) {\r\n                    newStates[state.name] = state.states;\r\n                } else if (newStates[state.name]) {\r\n                    delete newStates[state.name];\r\n                }\r\n            } else {\r\n                this.fx[state.name] = this.fx[state.name] || { read: '', write: '' };\r\n            }\r\n        });\r\n\r\n        return { addedStates, newIds, newStates };\r\n    }\r\n\r\n    UNSAFE_componentWillReceiveProps(nextProps) {\r\n        const addedStates = this.getAddedChannelStates();\r\n        const newStates = JSON.parse(JSON.stringify(this.state.states));\r\n\r\n        addedStates.forEach(state => {\r\n            if (state.states) {\r\n                newStates[state.name] = state.states;\r\n            } else if (newStates[state.name]) {\r\n                delete newStates[state.name];\r\n            }\r\n        });\r\n\r\n        if (JSON.stringify(addedStates) !== JSON.stringify(this.state.addedStates) ||\r\n            JSON.stringify(newStates) !== JSON.stringify(this.state.states)) {\r\n            const { newIds, newStates } = this.updateFx(addedStates);\r\n\r\n            this.setState({ addedStates, ids: newIds, states: newStates });\r\n        }\r\n    }\r\n\r\n    renderSelectDialog() {\r\n        if (!this.state.selectIdFor && !this.state.newState) {\r\n            return null;\r\n        }\r\n        const selected = this.state.selectIdPrefix ? this.state.ids[this.state.selectIdFor][this.state.selectIdPrefix] : this.state.ids[this.state.selectIdFor];\r\n        return <DialogSelectID\r\n            key=\"selectDialog\"\r\n            imagePrefix=\"../..\"\r\n            socket={this.props.socket}\r\n            dialogName=\"devicesEdit\"\r\n            title={this.state.newState ? I18n.t('Importer state') : I18n.t('Select for \"%s\"',  this.state.selectIdFor)}\r\n            selected={selected || this.findRealDevice(this.state.selectIdPrefix)}\r\n            statesOnly={true}\r\n            onOk={async id => {\r\n                const ids = JSON.parse(JSON.stringify(this.state.ids));\r\n                if (!this.state.newState) {\r\n                    if (this.state.selectIdPrefix) {\r\n                        ids[this.state.selectIdFor][this.state.selectIdPrefix] = id;\r\n                    } else {\r\n                        ids[this.state.selectIdFor] = id;\r\n                    }\r\n                } else {\r\n                    const isAlias = id.startsWith('alias.') || id.startsWith('linkeddevices.');\r\n                    const obj = JSON.parse(JSON.stringify(this.props.objects[id]));\r\n                    let parts = id.split('.');\r\n                    parts = parts.pop();\r\n                    obj._id = `${this.channelId}.${parts}`;\r\n                    obj.native = {};\r\n                    obj.common.name = parts;\r\n                    if (!isAlias) {\r\n                        obj.common.alias = { id };\r\n                    }\r\n                    await this.props.socket.setObject(`${this.channelId}.${parts}`, obj);\r\n                    //const newObject = await this.props.socket.getObject(`${this.channelId}.${parts}`);\r\n                    //this.props.objects[`${this.channelId}.${parts}`] = newObject;\r\n                    //if (newObject.common) {\r\n                    //    ids[newObject.common.name] = newObject?.common?.alias?.id;\r\n                    //}\r\n                }\r\n                this.setState({ selectIdPrefix: '', selectIdFor: '', ids });\r\n            }}\r\n            onClose={() => this.setState({ selectIdFor: '', selectIdPrefix: '', newState: false })}\r\n        />;\r\n    }\r\n\r\n    handleClose = () => {\r\n        this.props.onClose && this.props.onClose(null);\r\n    }\r\n\r\n    updateNewState = async () => {\r\n        const array = this.state.addedStates.filter(item => Object.keys(this.state.ids).includes(item.name));\r\n        for (let i = 0; i < array.length; i++) {\r\n            const item = array[i];\r\n            const stateObj = this.props.objects[item.id];\r\n            stateObj.common = stateObj.common || {};\r\n            stateObj.common.alias = stateObj.common.alias || {};\r\n            stateObj.common.alias.id = this.state.ids[item.name];\r\n            if (!this.fx[item.name].read) {\r\n                delete stateObj.common.alias.read;\r\n            } else {\r\n                stateObj.common.alias.read = this.fx[item.name].read;\r\n            }\r\n            if (!this.fx[item.name].write) {\r\n                delete stateObj.common.alias.write;\r\n            } else {\r\n                stateObj.common.alias.write = this.fx[item.name].write;\r\n            }\r\n            await this.props.socket.setObject(stateObj._id, stateObj);\r\n        }\r\n    }\r\n\r\n    handleOk = async () => {\r\n        this.setState({ startTheProcess: true });\r\n        if (JSON.stringify(this.state.initChangeProperties) !== JSON.stringify(this.state.changeProperties)) {\r\n            this.props.onSaveProperties && (await this.props.onSaveProperties(this.state.changeProperties));\r\n        }\r\n        await this.props.onClose({\r\n            ids: this.state.ids,\r\n            fx: this.fx,\r\n            states: this.states,\r\n        });\r\n        await this.updateNewState();\r\n\r\n        if (this.state.changeProperties.name &&\r\n            this.state.initChangeProperties.name &&\r\n            this.state.initChangeProperties.name !== this.state.changeProperties.name\r\n        ) {\r\n            let parts = this.channelId.split('.');\r\n            parts.pop();\r\n            parts = parts.join('.');\r\n            parts = `${parts}.${this.state.changeProperties.name.replace(Utils.FORBIDDEN_CHARS, '_').replace(/\\s/g, '_').replace(/\\./g, '_')}`;\r\n            await this.props.onCopyDevice(this.channelId, parts);\r\n        }\r\n        this.setState({ startTheProcess: false });\r\n    };\r\n\r\n    showDeviceIcon() {\r\n        return <div className={this.props.classes.icon}>\r\n            <TypeIcon className={this.props.classes.deviceIconStyle} type={this.props.channelInfo.type} style={{ color: this.props.themeType === 'dark' ? '#FFFFFF' : '#000' }} />\r\n        </div>;\r\n    }\r\n\r\n    renderHeader() {\r\n        const classes = this.props.classes;\r\n\r\n        const checkIndicators = this.props.channelInfo.states\r\n            .filter(item => item.indicator && item.defaultRole)\r\n            .find(obj => this.state.ids[obj.name]);\r\n\r\n        return <div className={classes.header}>\r\n            <div className={clsx(classes.divOids, classes.headerButtons, classes.divExtended)} />\r\n            <div className={classes.menuWrapperIcons}>\r\n                {this.state.indicatorsVisible && this.state.indicatorsAvailable && !this.state.startTheProcess && <Tooltip title={I18n.t('Show hide indicators')}>\r\n                    <IconButton\r\n                        style={{ color: this.state.showIndicators ? '#4DABF5' : null, border: checkIndicators && !this.state.showIndicators ? '1px solid #4DABF5' : null }}\r\n                        onClick={() => {\r\n                            window.localStorage.setItem('Devices.editExtended', this.state.showIndicators ? 'false' : 'true');\r\n                            this.setState({ showIndicators: !this.state.showIndicators });\r\n                        }}>\r\n                        <IconExtended style={{ transform: !this.state.showIndicators ? 'rotate(180deg)' : '' }} />\r\n                    </IconButton>\r\n                </Tooltip>}\r\n                {this.state.extendedAvailable && !this.state.startTheProcess &&\r\n                    <Tooltip title={I18n.t('Add state')}>\r\n                        <IconButton\r\n                            onClick={() => addStateCallBack(\r\n                                null,\r\n                                this.props.objects,\r\n                                this.props.socket,\r\n                                this.channelId,\r\n                                this.props.channelInfo.states.filter(item => item.indicator && item.defaultRole)\r\n                            )}>\r\n                            <IconAdd />\r\n                        </IconButton>\r\n                    </Tooltip>}\r\n                {this.state.extendedAvailable && !this.state.startTheProcess &&\r\n                    <Tooltip title={I18n.t('Import state')}>\r\n                        <IconButton\r\n                            style={{ color: '#e67e229e' }}\r\n                            onClick={() => this.setState({ newState: true })}\r\n                        >\r\n                            <IconAdd />\r\n                        </IconButton>\r\n                    </Tooltip>}\r\n            </div>\r\n        </div>;\r\n    }\r\n\r\n    onDelete = async (id) => {\r\n        await this.props.socket.delObject(id);\r\n    }\r\n\r\n    findRealDevice(prefix) {\r\n        if (prefix) {\r\n            return\r\n        }\r\n        let realParent = Object.keys(this.state.ids).find(id => this.state.ids[id]);\r\n        if (realParent) {\r\n            realParent = this.state.ids[realParent];\r\n            if (typeof realParent === 'string') {\r\n                const parts = realParent.split('.');\r\n                parts.pop();\r\n                realParent = parts.join('.');\r\n            } else if (typeof realParent === 'object') {\r\n                realParent = Object.keys(realParent)[0];\r\n                const parts = realParent.split('.');\r\n                parts.pop();\r\n                realParent = parts.join('.');\r\n            }\r\n        }\r\n        return realParent || '';\r\n    }\r\n\r\n    renderSelectEnum(name) {\r\n        const enums = this.props.enumIDs.filter(id => id.startsWith('enum.' + name + '.'));\r\n        const language = I18n.getLanguage();\r\n        const objs = enums.map(id => {\r\n            return {\r\n                name: Utils.getObjectName(this.props.objects, id, { language }),\r\n                icon: Utils.getObjectIcon(id, this.props.objects[id]),\r\n                id\r\n            }\r\n        });\r\n\r\n        return <Select\r\n            className={this.props.classes.oidField}\r\n            value={this.state[name]}\r\n            multiple={true}\r\n            onChange={e => this.setState({ [name]: e.target.value })}\r\n        >\r\n            {objs.map(obj => <MenuItem key={obj.id} icon={obj.icon} value={obj.id}>\r\n                {obj.name}\r\n            </MenuItem>)}\r\n        </Select>;\r\n    }\r\n\r\n    renderEditFxDialog() {\r\n        if (!this.state.editFxFor) {\r\n            return null;\r\n        }\r\n        const fx = this.fx[this.state.editFxFor];\r\n\r\n        this.fxRead = fx.read;\r\n        this.fxWrite = fx.write;\r\n\r\n        return <Dialog\r\n            open={true}\r\n            key=\"editFxDialog\"\r\n            maxWidth=\"sm\"\r\n            onClose={() => this.setState({ editFxFor: '' })}\r\n            aria-labelledby=\"alert-dialog-title\"\r\n            aria-describedby=\"alert-dialog-description\"\r\n        >\r\n            <DialogTitle className={this.props.classes.titleBackground}\r\n                classes={{ root: this.props.classes.titleColor }}\r\n                id=\"edit-device-dialog-title\">{I18n.t('Edit read/write functions')} <b>{this.state.editFxFor}</b></DialogTitle>\r\n            <DialogContent>\r\n                <div className={this.props.classes.divDialogContent}>\r\n                    {fx.read !== undefined ? <div className={this.props.classes.funcDivEdit}>\r\n                        <div className={this.props.classes.funcEditName} style={{ fontWeight: 'bold' }}>\r\n                            {I18n.t('Read function')}\r\n                        </div>\r\n                        <TextField\r\n                            fullWidth\r\n                            defaultValue={this.fxRead}\r\n                            className={this.props.classes.funcEdit}\r\n                            onChange={e => this.fxRead = e.target.value}\r\n                            helperText={I18n.t('JS function like') + ' \"val / 5 + 21\"'}\r\n                            margin=\"normal\"\r\n                        />\r\n                    </div> : null}\r\n                    {fx.write !== undefined ? <div className={this.props.classes.funcDivEdit}>\r\n                        <div className={this.props.classes.funcEditName} style={{ fontWeight: 'bold' }}>\r\n                            {I18n.t('Write function')}\r\n                        </div>\r\n                        <TextField\r\n                            fullWidth\r\n                            defaultValue={this.fxWrite}\r\n                            helperText={I18n.t('JS function like') + ' \"(val - 21) * 5\"'}\r\n                            className={this.props.classes.funcEdit}\r\n                            onChange={e => this.fxWrite = e.target.value}\r\n                            margin=\"normal\"\r\n                        />\r\n                    </div> : null}\r\n                </div>\r\n            </DialogContent>\r\n            <DialogActions>\r\n                <Button variant=\"contained\" onClick={() => {\r\n                    this.setState({ editFxFor: '' });\r\n                    if (this.fx[this.state.editFxFor].read !== undefined) {\r\n                        this.fx[this.state.editFxFor].read = this.fxRead;\r\n                    }\r\n                    if (this.fx[this.state.editFxFor].write !== undefined) {\r\n                        this.fx[this.state.editFxFor].write = this.fxWrite;\r\n                    }\r\n                }} color=\"primary\" autoFocus>{I18n.t('Ok')}</Button>\r\n                <Button variant=\"contained\" onClick={() => this.setState({ editFxFor: '' })}>{I18n.t('Cancel')}</Button>\r\n            </DialogActions>\r\n        </Dialog>;\r\n    }\r\n\r\n    onToggleTypeStates = name => {\r\n        let stateDevice = this.state.ids[name];\r\n        if (typeof stateDevice === 'object') {\r\n            stateDevice = stateDevice.read;\r\n        } else {\r\n            stateDevice = {\r\n                read: stateDevice,\r\n                write: ''\r\n            }\r\n        }\r\n        const newIds = JSON.parse(JSON.stringify(this.state.ids));\r\n        newIds[name] = stateDevice;\r\n        this.setState({ ids: newIds });\r\n    }\r\n\r\n    static getStateIcon(name, role) {\r\n        // Get icon by role\r\n        if (role.includes('humidity')) {\r\n            return STATES_NAME_ICONS.HUMIDITY;\r\n        } else if (role.includes('color.temperature')) {\r\n            return STATES_NAME_ICONS.COLOR_TEMP;\r\n        } else if (role.includes('temperature')) {\r\n            return STATES_NAME_ICONS.TEMPERATURE;\r\n        } else if (role.includes('water')) {\r\n            return STATES_NAME_ICONS.WATER;\r\n        } else if (role.includes('fire')) {\r\n            return STATES_NAME_ICONS.FIRE;\r\n        } else if (role.includes('smoke')) {\r\n            return STATES_NAME_ICONS.SMOKE;\r\n        } else if (role.includes('speed')) {\r\n            return STATES_NAME_ICONS.SPEED;\r\n        } else if (role.includes('brightness')) {\r\n            return STATES_NAME_ICONS.BRIGHTNESS;\r\n        } else if (role.includes('motion')) {\r\n            return STATES_NAME_ICONS.MOTION;\r\n        } else if (role.includes('window')) {\r\n            return STATES_NAME_ICONS.WINDOW;\r\n        } else {\r\n            return STATES_NAME_ICONS[name] || MdHelpOutline;\r\n        }\r\n    }\r\n\r\n    renderVariable(item, isAddedName, index) {\r\n        if (!item.id && !this.channelId.startsWith('alias.') && !this.channelId.startsWith('linkeddevices.')) {\r\n            return null;\r\n        }\r\n        let props = [item.type || 'any'];\r\n        const dName = item.name.replace(/\\d+$/, '%d');\r\n        let pattern = this.pattern.states.find(state => state.name === item.name || state.name === dName);\r\n        if (item.write) props.push('write');\r\n        if (item.read) props.push('read');\r\n        if (pattern?.defaultRole) {\r\n            props.push('role=' + pattern.defaultRole);\r\n        } else if (item.defaultRole) {\r\n            props.push('role=' + item.defaultRole);\r\n        } else {\r\n            pattern?.role && props.push('role=' + pattern.role.toString());\r\n        }\r\n\r\n        if (pattern?.enums) {\r\n            const type = this.props.channelInfo.type;\r\n            if (type === 'dimmer' || type === 'light') {\r\n                props.push('enum light');\r\n            } else if (type === 'blinds' || type === 'window' || type === 'windowTilt') {\r\n                props.push('enum window');\r\n            } else if (type === 'door') {\r\n                props.push('enum door');\r\n            } else {\r\n                props.push('enum ' + this.props.channelInfo.type);\r\n            }\r\n        }\r\n\r\n        if (item.required) {\r\n            props.push('required');\r\n        }\r\n\r\n        const role = pattern?.defaultRole || (pattern?.role && pattern?.role.toString()) || item?.defaultRole || '';\r\n        const titleTooltip = <div>\r\n            {item.required && <div>{`${I18n.t('Required')}: true`}</div>}\r\n            <div>{`${I18n.t('Type')}: ${item.type || 'any'}`}</div>\r\n            <div>{`${I18n.t('Writable')}: ${!!item.write}`}</div>\r\n            {role && <div>{`${I18n.t('Role')}: ${pattern?.defaultRole || (pattern?.role && pattern?.role.toString()) || item?.defaultRole || ''}`}</div>}\r\n        </div>\r\n\r\n        ////////////// ImportExportIcon\r\n        const alias = this.channelId.startsWith('alias.');\r\n        const linkedDevices = this.channelId.startsWith('linkeddevices.');\r\n        const name = item.name;\r\n\r\n        // Get icon by role\r\n        const IconsState = DialogEditDevice.getStateIcon(name, role);\r\n\r\n        if (typeof this.state.ids[name] === 'object') {\r\n            return <div key={name + '_' + index}>\r\n                <div\r\n                    className={clsx(this.props.classes.divOidField, this.props.classes.divOidFieldObj)}\r\n                    style={!item.id && !this.state.ids[name] ? { opacity: 0.6 } : {}}\r\n                >\r\n                    <div className={this.props.classes.displayFlex}>\r\n                        <div className={this.props.classes.displayFlexRow}>\r\n                            <Tooltip title={titleTooltip}>\r\n                                <div className={this.props.classes.wrapperOidName}>\r\n                                    <div className={this.props.classes.wrapperOidNameIcon}>\r\n                                        <IconsState className={clsx(this.props.classes.oidNameIcon, isAddedName === 'add' && this.props.classes.addedName, isAddedName === 'indicators' && this.props.classes.indicators)} />\r\n                                    </div>\r\n                                    <div className={clsx(this.props.classes.oidName, isAddedName === 'add' && this.props.classes.addedName, isAddedName === 'indicators' && this.props.classes.indicators)} style={{ fontWeight: item.required ? 'bold' : null }}>\r\n                                        {(item.required ? '*' : '') + name}\r\n                                        <div className={this.props.classes.stateSubCategory}>{I18n.t('alias_read')}</div>\r\n                                    </div>\r\n                                </div>\r\n                            </Tooltip>\r\n                            <div className={this.props.classes.wrapperButtonsAndOidField}>\r\n                                <TextField\r\n                                    key={name}\r\n                                    fullWidth\r\n                                    disabled={(!alias && !linkedDevices) || this.state.startTheProcess}\r\n                                    value={this.state.ids[name].read}\r\n                                    className={clsx(this.props.classes.oidField, this.props.classes.width100)}\r\n                                    style={{ paddingTop: 8 }}\r\n                                    onChange={e => {\r\n                                        const ids = JSON.parse(JSON.stringify(this.state.ids));\r\n                                        ids[name].read = e.target.value;\r\n                                        this.setState({ ids });\r\n                                    }}\r\n                                    FormHelperTextProps={{ className: this.props.classes.helperText }}\r\n                                    helperText={`${props.join(', ')}`}\r\n                                    margin=\"normal\"\r\n                                />\r\n                                <div className={this.props.classes.wrapperItemButtons}>\r\n                                    {(alias || linkedDevices) && !this.state.startTheProcess && <Tooltip title={I18n.t('Select ID')}>\r\n                                        <IconButton size=\"small\"  onClick={() => this.setState({ selectIdFor: name, selectIdPrefix: 'read' })}>\r\n                                            <IconEdit />\r\n                                        </IconButton>\r\n                                    </Tooltip>}\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                        <div className={this.props.classes.displayFlexRow}>\r\n                            <Tooltip title={titleTooltip}>\r\n                                <div className={this.props.classes.wrapperOidName}>\r\n                                    <div className={this.props.classes.wrapperOidNameIcon}>\r\n                                        <IconsState className={clsx(this.props.classes.oidNameIcon, isAddedName === 'add' && this.props.classes.addedName, isAddedName === 'indicators' && this.props.classes.indicators)} />\r\n                                    </div>\r\n                                    <div className={clsx(this.props.classes.oidName, isAddedName === 'add' && this.props.classes.addedName, isAddedName === 'indicators' && this.props.classes.indicators)} style={{ fontWeight: item.required ? 'bold' : null }}>\r\n                                        {(item.required ? '*' : '') + name}\r\n                                        <div className={this.props.classes.stateSubCategory}>{I18n.t('alias_write')}</div>\r\n                                    </div>\r\n                                </div>\r\n                            </Tooltip>\r\n                            <div className={this.props.classes.wrapperButtonsAndOidField}>\r\n                                <TextField\r\n                                    key={name}\r\n                                    fullWidth\r\n                                    disabled={(!alias && !linkedDevices) || this.state.startTheProcess}\r\n                                    value={this.state.ids[name].write}\r\n                                    className={clsx(this.props.classes.oidField, this.props.classes.width100)}\r\n                                    style={{ paddingTop: 8 }}\r\n                                    onChange={e => {\r\n                                        const ids = JSON.parse(JSON.stringify(this.state.ids));\r\n                                        ids[name].write = e.target.value;\r\n                                        this.setState({ ids });\r\n                                    }}\r\n                                    FormHelperTextProps={{ className: this.props.classes.helperText }}\r\n                                    helperText={`${props.join(', ')}`}\r\n                                    margin=\"normal\"\r\n                                />\r\n                                <div className={this.props.classes.wrapperItemButtons}>\r\n                                    {(alias || linkedDevices) && !this.state.startTheProcess && <Tooltip title={I18n.t('Select ID')}>\r\n                                        <IconButton size=\"small\"  onClick={() => this.setState({ selectIdFor: name, selectIdPrefix: 'write' })}>\r\n                                            <IconEdit />\r\n                                        </IconButton>\r\n                                    </Tooltip>}\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    <div className={this.props.classes.wrapperItemButtons}>\r\n                        {(alias || linkedDevices) && !this.state.startTheProcess && <Tooltip title={I18n.t('Use one state for read and write')}>\r\n                            <IconButton size=\"small\"  color=\"primary\" onClick={() => this.onToggleTypeStates(name)}>\r\n                                <ImportExportIcon />\r\n                            </IconButton>\r\n                        </Tooltip>}\r\n                        {(this.state.ids[name].read || this.state.ids[name].write) && alias && this.state.ids[name] && !this.state.startTheProcess ? <Tooltip title={I18n.t('Edit convert functions')}>\r\n                            <IconButton size=\"small\"  onClick={() => this.setState({ editFxFor: name })}>\r\n                                <IconFunction />\r\n                            </IconButton>\r\n                        </Tooltip> : item.noType ? '' : <div className={this.props.classes.emptyButton} />}\r\n                        {isAddedName === 'add' && <Tooltip title={I18n.t('Edit state')}>\r\n                            <IconButton size=\"small\" className={clsx(this.props.classes.addedName)}\r\n                                onClick={() => addStateCallBack(\r\n                                    async obj => {\r\n                                        if (obj) {\r\n                                            if (obj.common.name !== name) {\r\n                                                this.onDelete(item.id);\r\n                                                const newIds = JSON.parse(JSON.stringify(this.state.ids));\r\n                                                const newValue = newIds[name];\r\n                                                delete newIds[name];\r\n                                                newIds[obj.common.name] = newValue;\r\n                                                this.setState({ids:newIds});\r\n                                            }\r\n                                        }\r\n                                    },\r\n                                    this.props.objects,\r\n                                    this.props.socket,\r\n                                    this.channelId,\r\n                                    this.props.channelInfo.states.filter(item => item.indicator && item.defaultRole),\r\n                                    item.id\r\n                                )}>\r\n                                <IconEdit />\r\n                            </IconButton>\r\n                        </Tooltip>}\r\n                        {this.state.states[name] && !this.state.startTheProcess && <Tooltip title={I18n.t('Edit states')}>\r\n                            <IconButton size=\"small\" onClick={() => this.setState({editStates: name})}>\r\n                                <IconEditStates />\r\n                            </IconButton>\r\n                        </Tooltip>}\r\n                        {item.noType && !this.state.startTheProcess && <Tooltip title={I18n.t('Delete state')}>\r\n                            <IconButton size=\"small\"  onClick={() => this.onDelete(item.id)}>\r\n                                <IconDelete />\r\n                            </IconButton>\r\n                        </Tooltip>}\r\n                    </div>\r\n                </div>\r\n            </div>;\r\n        } else {\r\n            return <div key={name + '_' + index} className={clsx(this.props.classes.divOidField)} style={!item.id && !this.state.ids[name] ? { opacity: 0.6 } : {}}>\r\n                <Tooltip title={titleTooltip}>\r\n                    <div className={this.props.classes.wrapperOidName}>\r\n                        <div className={this.props.classes.wrapperOidNameIcon}>\r\n                            <IconsState className={clsx(this.props.classes.oidNameIcon, isAddedName === 'add' && this.props.classes.addedName, isAddedName === 'indicators' && this.props.classes.indicators)} />\r\n                        </div>\r\n                        <div className={clsx(this.props.classes.oidName, isAddedName === 'add' && this.props.classes.addedName, isAddedName === 'indicators' && this.props.classes.indicators)} style={{ fontWeight: item.required ? 'bold' : null }}>\r\n                            {(item.required ? '*' : '') + name}\r\n                        </div>\r\n                    </div>\r\n                </Tooltip>\r\n                <div className={this.props.classes.wrapperButtonsAndOidField}>\r\n                    <TextField\r\n                        fullWidth\r\n                        disabled={(!alias && !linkedDevices) || this.state.startTheProcess}\r\n                        value={(alias || linkedDevices) ? this.state.ids[name] || '' : item.id || ''}\r\n                        className={this.props.classes.oidField}\r\n                        style={{ paddingTop: 8 }}\r\n                        onChange={e => {\r\n                            const ids = JSON.parse(JSON.stringify(this.state.ids));\r\n                            ids[name] = e.target.value;\r\n                            this.setState({ ids });\r\n                        }}\r\n                        FormHelperTextProps={{\r\n                            className: this.props.classes.helperText\r\n                        }}\r\n                        helperText={props.join(', ')}\r\n                        margin=\"normal\"\r\n                    />\r\n                    <div className={this.props.classes.wrapperItemButtons}>\r\n                        {(alias || linkedDevices) && !this.state.startTheProcess && <Tooltip title={I18n.t('Select ID')}>\r\n                            <IconButton size=\"small\"  onClick={() => this.setState({ selectIdFor: name })}>\r\n                                <IconEdit />\r\n                            </IconButton>\r\n                        </Tooltip>}\r\n                        {(alias || linkedDevices) && !this.state.startTheProcess && <Tooltip title={I18n.t('Use different states for read and write')}>\r\n                            <IconButton size=\"small\"  onClick={() => this.onToggleTypeStates(name)}>\r\n                                <ImportExportIcon />\r\n                            </IconButton>\r\n                        </Tooltip>}\r\n                        {alias && this.state.ids[name] && !this.state.startTheProcess ? <Tooltip title={I18n.t('Edit convert functions')}>\r\n                            <IconButton size=\"small\"  onClick={() => this.setState({ editFxFor: name })}>\r\n                                <IconFunction />\r\n                            </IconButton>\r\n                        </Tooltip> : item.noType ? '' : <div className={this.props.classes.emptyButton} />}\r\n                        {isAddedName === 'add' && <Tooltip title={I18n.t('Edit state')}>\r\n                            <IconButton size=\"small\" className={this.props.classes.addedName}\r\n                                onClick={() => addStateCallBack(\r\n                                    async obj => {\r\n                                        if (obj) {\r\n                                            if (obj.common.name !== name) {\r\n                                                this.onDelete(item.id);\r\n                                                const newIds = JSON.parse(JSON.stringify(this.state.ids));\r\n                                                const newValue = newIds[name];\r\n                                                delete newIds[name];\r\n                                                newIds[obj.common.name] = newValue;\r\n                                                this.setState({ids:newIds});\r\n                                            }\r\n                                        }\r\n                                    },\r\n                                    this.props.objects,\r\n                                    this.props.socket,\r\n                                    this.channelId,\r\n                                    this.props.channelInfo.states.filter(item => item.indicator && item.defaultRole),\r\n                                    item.id\r\n                                )}>\r\n                                <IconEdit />\r\n                            </IconButton>\r\n                        </Tooltip>}\r\n                        {this.state.states[item.name] && !this.state.startTheProcess && <Tooltip title={I18n.t('Edit states')}>\r\n                            <IconButton size=\"small\" onClick={() => this.setState({editStates: item.name})}>\r\n                                <IconEditStates />\r\n                            </IconButton>\r\n                        </Tooltip>}\r\n                        {item.noType && !this.state.startTheProcess && <Tooltip title={I18n.t('Delete state')}>\r\n                            <IconButton size=\"small\"  onClick={() => this.onDelete(item.id)}>\r\n                                <IconDelete />\r\n                            </IconButton>\r\n                        </Tooltip>}\r\n                    </div>\r\n                </div>\r\n            </div>;\r\n        }\r\n    }\r\n\r\n    renderVariables() {\r\n        return <div key=\"vars\" className={clsx(this.props.classes.divOids, this.props.classes.divCollapsed)}>\r\n            {this.props.channelInfo.states.filter(item => !item.indicator && item.defaultRole).map((item, i) => this.renderVariable(item, 'def', i))}\r\n            {this.state.extendedAvailable && this.state.addedStates.map((item, i) => this.renderVariable(item, 'add', i))}\r\n            {this.state.indicatorsVisible && this.state.showIndicators && this.state.indicatorsAvailable &&\r\n                <div className={this.props.classes.wrapperHeaderIndicators}>\r\n                    <div className={this.props.classes.headerIndicatorsLine} />\r\n                    <div className={this.props.classes.headerIndicatorsName}>{I18n.t('Indicators')}</div>\r\n                    <div className={this.props.classes.headerIndicatorsLine} />\r\n                </div>}\r\n            {this.state.indicatorsVisible && this.state.showIndicators && this.state.indicatorsAvailable &&\r\n                this.props.channelInfo.states\r\n                    .filter(item => item.indicator && item.defaultRole)\r\n                    .map(item => this.renderVariable(item, 'indicators'))}\r\n        </div>;\r\n    }\r\n\r\n    a11yProps(index) {\r\n        return {\r\n            id: `scrollable-auto-tab-${index}`,\r\n            'aria-controls': `scrollable-auto-tabpanel-${index}`,\r\n        };\r\n    }\r\n\r\n    render() {\r\n        return <Dialog\r\n            key=\"editDialog\"\r\n            open={true}\r\n            maxWidth=\"md\"\r\n            fullWidth={true}\r\n            classes={{ paper: this.props.classes.mobileWidth }}\r\n            aria-labelledby=\"alert-dialog-title\"\r\n            aria-describedby=\"alert-dialog-description\"\r\n        >\r\n            {this.renderSelectDialog()}\r\n            {this.renderEditFxDialog()}\r\n            <DialogTitle className={this.props.classes.titleHead}\r\n                classes={{ root: this.props.classes.titleColor }}\r\n                id=\"edit-device-dialog-title\">{I18n.t('Edit device')} <b>{this.channelId}</b></DialogTitle>\r\n            <DialogContent className={this.props.classes.content}>\r\n                <AppBar style={{ top: 0 }} position=\"sticky\" color=\"default\">\r\n                    {this.state.startTheProcess && <LinearProgress />}\r\n                    <div className={this.props.classes.wrapperIconHead}>\r\n                        <div className={this.props.classes.iconStyle}>{this.showDeviceIcon()}</div>\r\n                        <span className={this.props.classes.deviceText}>{I18n.t('type-' + this.props.channelInfo.type)}</span>\r\n                    </div>\r\n                    <Tabs\r\n                        value={this.state.tab}\r\n                        className={this.props.classes.tab}\r\n                        classes={{\r\n                            indicator: this.props.classes.indicator\r\n                        }}\r\n                        onChange={(_, newTab) => this.setState({ tab: newTab }, () => {\r\n                            localStorage.setItem('EditDevice.tab', newTab);\r\n                        })}\r\n                        indicatorColor=\"primary\"\r\n                        textColor=\"primary\"\r\n                        variant=\"scrollable\"\r\n                        scrollButtons=\"auto\"\r\n                        aria-label=\"scrollable auto tabs example\"\r\n                    >\r\n                        <Tab disabled={this.state.startTheProcess} label={I18n.t('General')} {...this.a11yProps(0)} />\r\n                        <Tab disabled={this.state.startTheProcess} label={I18n.t('States')} {...this.a11yProps(1)} />\r\n                    </Tabs>\r\n                </AppBar>\r\n                <TabPanel classes={this.props.classes} value={this.state.tab} index={0}>\r\n                    <DialogEditProperties\r\n                        channelId={this.props.channelId}\r\n                        disabled={this.state.startTheProcess}\r\n                        type={this.props.type}\r\n                        iot={this.props.iot}\r\n                        iotNoCommon={this.props.iotNoCommon}\r\n                        objects={this.props.objects}\r\n                        patterns={this.props.patterns}\r\n                        enumIDs={this.props.enumIDs}\r\n                        socket={this.props.socket}\r\n                        changeProperties={this.state.changeProperties}\r\n                        onChange={(state, initState, disabledButton) => {\r\n                            if (initState) {\r\n                                // TODO unclear! why immediately after setstate the settings are reset\r\n                                return this.setState({ initChangeProperties: initState, changeProperties: initState, disabledButton: false }, () =>\r\n                                    this.setState({ changeProperties: state, disabledButton }));\r\n                            } else {\r\n                                this.setState({ changeProperties: state, disabledButton });\r\n                            }\r\n                        }}\r\n                    />\r\n                </TabPanel>\r\n                <TabPanel classes={this.props.classes} value={this.state.tab} index={1}>\r\n                    <div className={this.props.classes.divDialogContent}>\r\n                        {this.renderHeader()}\r\n                        {this.renderVariables()}\r\n                    </div>\r\n                </TabPanel>\r\n\r\n            </DialogContent>\r\n            <DialogActions>\r\n                <Button\r\n                    variant=\"contained\"\r\n                    disabled={(JSON.stringify(this.state.initChangeProperties) === JSON.stringify(this.state.changeProperties) && JSON.stringify(this.state.ids) === JSON.stringify(this.state.idsInit)) || this.state.disabledButton || this.state.startTheProcess}\r\n                    onClick={async () => await this.handleOk()}\r\n                    startIcon={<IconCheck />}\r\n                    color=\"primary\">{I18n.t('Save')}</Button>\r\n                <Button\r\n                    variant=\"contained\"\r\n                    disabled={this.state.startTheProcess}\r\n                    onClick={this.handleClose}\r\n                    startIcon={<IconClose />}\r\n                >{I18n.t('Cancel')}</Button>\r\n            </DialogActions>\r\n            {this.renderEditStates()}\r\n        </Dialog>;\r\n    }\r\n}\r\n\r\nDialogEditDevice.propTypes = {\r\n    channelId: PropTypes.string,\r\n    onClose: PropTypes.func,\r\n    patterns: PropTypes.object,\r\n    channelInfo: PropTypes.object,\r\n    objects: PropTypes.object,\r\n    enumIDs: PropTypes.array,\r\n    states: PropTypes.object,\r\n    socket: PropTypes.object,\r\n    themeType: PropTypes.string,\r\n    onCopyDevice: PropTypes.func,\r\n    onSaveProperties: PropTypes.func,\r\n};\r\n\r\nexport default withStyles(styles)(DialogEditDevice);\r\n","function binarySearch(array, sValue, argStart, argLen) {\r\n    // Range of [start, start+len): only start is inclusive. It works\r\n    // similarly to \"...\".substr(start, len).indexOf(sValue)\r\n    // `void 0` is shorthand for `undefined`\r\n    const start = (argStart === void 0 ? 0 : argStart) | 0;\r\n    let len = (argLen === void 0 ? (array.length|0) - start : argLen) | 0;\r\n    len = len - 1 | 0;\r\n\r\n    if (len & 0x80000000) {\r\n        const nCB = len & 0x80000000;\r\n        len ^= (len ^ (nCB - 1)) & ((array[start + nCB|0] <= sValue |0) - 1 >>> 0);\r\n    }\r\n    if (len & 0x40000000) {\r\n        const nCB = len & 0xc0000000;\r\n        len ^= (len ^ (nCB - 1)) & ((array[start + nCB|0] <= sValue |0) - 1 >>> 0);\r\n    }\r\n    if (len & 0x20000000) {\r\n        const nCB = len & 0xe0000000;\r\n        len ^= (len ^ (nCB - 1)) & ((array[start + nCB|0] <= sValue |0) - 1 >>> 0);\r\n    }\r\n    if (len & 0x10000000) {\r\n        const nCB = len & 0xf0000000;\r\n        len ^= (len ^ (nCB - 1)) & ((array[start + nCB|0] <= sValue |0) - 1 >>> 0);\r\n    }\r\n    if (len & 0x8000000) {\r\n        const nCB = len & 0xf8000000;\r\n        len ^= (len ^ (nCB - 1)) & ((array[start + nCB|0] <= sValue |0) - 1 >>> 0);\r\n    }\r\n    if (len & 0x4000000) {\r\n        const nCB = len & 0xfc000000;\r\n        len ^= (len ^ (nCB - 1)) & ((array[start + nCB|0] <= sValue |0) - 1 >>> 0);\r\n    }\r\n    if (len & 0x2000000) {\r\n        const nCB = len & 0xfe000000;\r\n        len ^= (len ^ (nCB - 1)) & ((array[start + nCB|0] <= sValue |0) - 1 >>> 0);\r\n    }\r\n    if (len & 0x1000000) {\r\n        const nCB = len & 0xff000000;\r\n        len ^= (len ^ (nCB - 1)) & ((array[start + nCB|0] <= sValue |0) - 1 >>> 0);\r\n    }\r\n    if (len & 0x800000) {\r\n        const nCB = len & 0xff800000;\r\n        len ^= (len ^ (nCB - 1)) & ((array[start + nCB|0] <= sValue |0) - 1 >>> 0);\r\n    }\r\n    if (len & 0x400000) {\r\n        const nCB = len & 0xffc00000;\r\n        len ^= (len ^ (nCB - 1)) & ((array[start + nCB|0] <= sValue |0) - 1 >>> 0);\r\n    }\r\n    if (len & 0x200000) {\r\n        const nCB = len & 0xffe00000;\r\n        len ^= (len ^ (nCB - 1)) & ((array[start + nCB|0] <= sValue |0) - 1 >>> 0);\r\n    }\r\n    if (len & 0x100000) {\r\n        const nCB = len & 0xfff00000;\r\n        len ^= (len ^ (nCB - 1)) & ((array[start + nCB|0] <= sValue |0) - 1 >>> 0);\r\n    }\r\n    if (len & 0x80000) {\r\n        const nCB = len & 0xfff80000;\r\n        len ^= (len ^ (nCB - 1)) & ((array[start + nCB|0] <= sValue |0) - 1 >>> 0);\r\n    }\r\n    if (len & 0x40000) {\r\n        const nCB = len & 0xfffc0000;\r\n        len ^= (len ^ (nCB - 1)) & ((array[start + nCB|0] <= sValue |0) - 1 >>> 0);\r\n    }\r\n    if (len & 0x20000) {\r\n        const nCB = len & 0xfffe0000;\r\n        len ^= (len ^ (nCB - 1)) & ((array[start + nCB|0] <= sValue |0) - 1 >>> 0);\r\n    }\r\n    if (len & 0x10000) {\r\n        const nCB = len & 0xffff0000;\r\n        len ^= (len ^ (nCB - 1)) & ((array[start + nCB|0] <= sValue |0) - 1 >>> 0);\r\n    }\r\n    if (len & 0x8000) {\r\n        const nCB = len & 0xffff8000;\r\n        len ^= (len ^ (nCB - 1)) & ((array[start + nCB|0] <= sValue |0) - 1 >>> 0);\r\n    }\r\n    if (len & 0x4000) {\r\n        const nCB = len & 0xffffc000;\r\n        len ^= (len ^ (nCB - 1)) & ((array[start + nCB|0] <= sValue |0) - 1 >>> 0);\r\n    }\r\n    if (len & 0x2000) {\r\n        const nCB = len & 0xffffe000;\r\n        len ^= (len ^ (nCB - 1)) & ((array[start + nCB|0] <= sValue |0) - 1 >>> 0);\r\n    }\r\n    if (len & 0x1000) {\r\n        const nCB = len & 0xfffff000;\r\n        len ^= (len ^ (nCB - 1)) & ((array[start + nCB|0] <= sValue |0) - 1 >>> 0);\r\n    }\r\n    if (len & 0x800) {\r\n        const nCB = len & 0xfffff800;\r\n        len ^= (len ^ (nCB - 1)) & ((array[start + nCB|0] <= sValue |0) - 1 >>> 0);\r\n    }\r\n    if (len & 0x400) {\r\n        const nCB = len & 0xfffffc00;\r\n        len ^= (len ^ (nCB - 1)) & ((array[start + nCB|0] <= sValue |0) - 1 >>> 0);\r\n    }\r\n    if (len & 0x200) {\r\n        const nCB = len & 0xfffffe00;\r\n        len ^= (len ^ (nCB - 1)) & ((array[start + nCB|0] <= sValue |0) - 1 >>> 0);\r\n    }\r\n    if (len & 0x100) {\r\n        const nCB = len & 0xffffff00;\r\n        len ^= (len ^ (nCB - 1)) & ((array[start + nCB|0] <= sValue |0) - 1 >>> 0);\r\n    }\r\n    if (len & 0x80) {\r\n        const nCB = len & 0xffffff80;\r\n        len ^= (len ^ (nCB - 1)) & ((array[start + nCB|0] <= sValue |0) - 1 >>> 0);\r\n    }\r\n    if (len & 0x40) {\r\n        const nCB = len & 0xffffffc0;\r\n        len ^= (len ^ (nCB - 1)) & ((array[start + nCB|0] <= sValue |0) - 1 >>> 0);\r\n    }\r\n    if (len & 0x20) {\r\n        const nCB = len & 0xffffffe0;\r\n        len ^= (len ^ (nCB - 1)) & ((array[start + nCB|0] <= sValue |0) - 1 >>> 0);\r\n    }\r\n    if (len & 0x10) {\r\n        const nCB = len & 0xfffffff0;\r\n        len ^= (len ^ (nCB - 1)) & ((array[start + nCB|0] <= sValue |0) - 1 >>> 0);\r\n    }\r\n    if (len & 0x8) {\r\n        const nCB = len & 0xfffffff8;\r\n        len ^= (len ^ (nCB - 1)) & ((array[start + nCB|0] <= sValue |0) - 1 >>> 0);\r\n    }\r\n    if (len & 0x4) {\r\n        const nCB = len & 0xfffffffc;\r\n        len ^= (len ^ (nCB - 1)) & ((array[start + nCB|0] <= sValue |0) - 1 >>> 0);\r\n    }\r\n    if (len & 0x2) {\r\n        const nCB = len & 0xfffffffe;\r\n        len ^= (len ^ (nCB - 1)) & ((array[start + nCB|0] <= sValue |0) - 1 >>> 0);\r\n    }\r\n    if (len & 0x1) {\r\n        const nCB = len & 0xffffffff;\r\n        len ^= (len ^ (nCB - 1)) & ((array[start + nCB|0] <= sValue |0) - 1 >>> 0);\r\n    }\r\n    if (array[start+len|0] !== sValue) {\r\n        // remove this if-statement to return the next closest\r\n        // element going downwards from the searched-for value\r\n        // OR 0 if the value is less than all values in the\r\n        // array. https://stackoverflow.com/a/44981570/5601591\r\n        return -1 - start - len | 0;\r\n    }\r\n    return start + len | 0;\r\n}\r\n\r\nfunction getChannelItems(objects, channelId, _sortedKeys) {\r\n    _sortedKeys = _sortedKeys || Object.keys(objects).sort();\r\n    const channelPrefix = channelId + '.';\r\n    const channelPrefixEnd = channelId + '.\\u9999';\r\n    const result = [];\r\n    for (let i = 0; i < _sortedKeys.length; i++) {\r\n        const id = _sortedKeys[i];\r\n        if (id < channelPrefix) {\r\n\r\n        } else if (id > channelPrefixEnd) {\r\n            break;\r\n        } else if (id.startsWith(channelPrefix)) {\r\n            result.push(id);\r\n        }\r\n    }\r\n\r\n    return result;\r\n}\r\n\r\nexport { binarySearch, getChannelItems };","/**\r\n * Copyright 2019-2021 bluefox <dogafox@gmail.com>\r\n *\r\n * MIT License\r\n *\r\n **/\r\nimport React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { withStyles } from '@material-ui/core/styles';\r\n\r\nimport Button from '@material-ui/core/Button';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogActions from '@material-ui/core/DialogActions';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport FormControl from '@material-ui/core/FormControl';\r\nimport Select from '@material-ui/core/Select';\r\nimport InputLabel from '@material-ui/core/InputLabel';\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\nimport IconClose from '@material-ui/icons/Close';\r\nimport IconCheck from '@material-ui/icons/Check';\r\n\r\nimport { Types } from 'iobroker.type-detector';\r\nimport I18n from '@iobroker/adapter-react/i18n';\r\nimport Utils, { FORBIDDEN_CHARS } from '@iobroker/adapter-react/Components/Utils';\r\nimport Icon from '@iobroker/adapter-react/Components/Icon';\r\n\r\n// import TreeView from '../Components/TreeView';\r\nimport TypeIcon from '../Components/TypeIcon';\r\nimport TYPE_OPTIONS, { ICONS_TYPE } from '../Components/TypeOptions';\r\nimport { Checkbox, FormControlLabel } from '@material-ui/core';\r\n\r\nconst styles = theme => ({\r\n    header: {\r\n        width: '100%',\r\n        fontSize: 16,\r\n        textTransform: 'capitalize',\r\n        textAlign: 'center',\r\n        paddingBottom: 20,\r\n        color: '#000',\r\n    },\r\n    nameDiv: {\r\n        width: '50%',\r\n        display: 'inline-block',\r\n        verticalAlign: 'top',\r\n    },\r\n    viewDiv: {\r\n        width: '50%',\r\n        display: 'inline-block',\r\n    },\r\n    type: {\r\n        marginTop: 10\r\n    },\r\n    input: {\r\n        width: 200\r\n    },\r\n    icon: {\r\n        display: 'inline-block',\r\n    },\r\n    selectIcon: {\r\n        paddingRight: theme.spacing(1),\r\n        verticalAlign: 'middle',\r\n        width: 20,\r\n        height: 20\r\n    },\r\n    selectText: {\r\n        verticalAlign: 'middle',\r\n    },\r\n    enumIcon: {\r\n        width: 24,\r\n        height: 24,\r\n        marginRight: 10\r\n    },\r\n    renderValueWrapper: {\r\n        display: 'flex'\r\n    },\r\n    renderValueCurrent: {\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n        marginRight: 10\r\n    },\r\n    blockFields: {\r\n        display: 'flex',\r\n        flex: 1,\r\n        width: '100%',\r\n        flexDirection: 'column',\r\n        margin: 5\r\n    },\r\n    container: {\r\n        display: 'flex',\r\n        overflowX: 'hidden',\r\n        flexFlow: 'wrap'\r\n    },\r\n    treeDiv: {\r\n        width: '100%',\r\n        flex: 1,\r\n        margin: 5,\r\n        overflow: 'hidden'\r\n    },\r\n    titleColor: {\r\n        '& h2': {\r\n            overflow: 'hidden',\r\n            direction: 'rtl',\r\n            textOverflow: 'ellipsis',\r\n            textAlign: 'end'\r\n        },\r\n    },\r\n    iconStyle: {\r\n        width: 16,\r\n        height: 16,\r\n        margin: '0 3px'\r\n    },\r\n    emptyIcon: {\r\n        width: 16,\r\n        height: 16,\r\n        margin: '0 3px'\r\n    },\r\n    itemChildrenWrapper: {\r\n        display: 'flex',\r\n        width: '100%',\r\n        justifyContent: 'space-between'\r\n    },\r\n    iconWrapper: {\r\n        display: 'flex',\r\n        alignItems: 'center'\r\n    }\r\n});\r\n\r\nconst UNSUPPORTED_TYPES = [\r\n    Types.unknown,\r\n    Types.instance,\r\n    Types.chart,\r\n];\r\n\r\nfunction getParentId(id) {\r\n    const pos = id.lastIndexOf('.');\r\n    if (pos !== -1) {\r\n        return id.substring(0, pos);\r\n    } else {\r\n        return '';\r\n    }\r\n}\r\n\r\nfunction getLastPart(id) {\r\n    const pos = id.lastIndexOf('.');\r\n    if (pos !== -1) {\r\n        return id.substring(pos + 1);\r\n    } else {\r\n        return id;\r\n    }\r\n}\r\n\r\nclass DialogNewDevice extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        let i = 1;\r\n\r\n        this.prefix = this.props.prefix || 'alias.0';\r\n\r\n        while (this.props.objects[`${this.prefix}.${I18n.t('Device')}_${i}`]) {\r\n            i++;\r\n        }\r\n\r\n        const prefix = this.prefix.startsWith('alias.') ? this.prefix.replace(/\\d+$/, '') : this.prefix; // alias.0 => alias.\r\n\r\n        // filter aliases\r\n        const ids = [];\r\n\r\n        Object.keys(this.props.objects).forEach(id => {\r\n            if (id.startsWith(prefix) &&\r\n                this.props.objects[id] &&\r\n                this.props.objects[id].common &&\r\n                (this.props.objects[id].type === 'channel' || this.props.objects[id].type === 'device' || this.props.objects[id].type === 'folder')) {\r\n                let parentId;\r\n                // getParentId\r\n                if (this.props.objects[id].type === 'folder') {\r\n                    parentId = id;\r\n                } else {\r\n                    parentId = getParentId(id);\r\n                }\r\n\r\n                if (parentId && !ids.includes(parentId)) {\r\n                    ids.push(parentId);\r\n                }\r\n            }\r\n        });\r\n\r\n        this.typesWords = {};\r\n        Object.keys(Types)\r\n            .filter(id => !UNSUPPORTED_TYPES.includes(id))\r\n            .forEach(typeId => this.typesWords[typeId] = I18n.t('type-' + Types[typeId]));\r\n\r\n        // sort types by ABC in the current language\r\n        this.types = Object.keys(this.typesWords).sort((a, b) => {\r\n            if (this.typesWords[a] === this.typesWords[b]) {\r\n                return 0;\r\n            } else\r\n                if (this.typesWords[a] > this.typesWords[b]) {\r\n                    return 1;\r\n                } else {\r\n                    return -1;\r\n                }\r\n        });\r\n\r\n        const stateIds = {};\r\n        const language = I18n.getLanguage();\r\n        ids.forEach(id => stateIds[id] = {\r\n            common: {\r\n                name: this.props.objects[id] && this.props.objects[id].type === 'folder' ? Utils.getObjectName(this.props.objects, id, { language }) : getLastPart(id),\r\n                nondeletable: true,\r\n                color: this.props.objects[id]?.common && this.props.objects[id].common.color ? this.props.objects[id].common.color : null,\r\n                icon: this.props.objects[id]?.common && this.props.objects[id].common.icon ? this.props.objects[id].common.icon : null\r\n            },\r\n            type: 'folder'\r\n        });\r\n\r\n        stateIds[this.prefix] = {\r\n            common: {\r\n                name: I18n.t('Root'),\r\n                nondeletable: true\r\n            },\r\n            type: 'folder'\r\n        };\r\n        let functions = [];\r\n        let rooms = [];\r\n        try {\r\n            functions = JSON.parse(window.localStorage.getItem('Devices.new.functions') || '[]');\r\n            rooms = JSON.parse(window.localStorage.getItem('Devices.new.rooms') || '[]');\r\n        } catch (e) {\r\n\r\n        }\r\n\r\n        let root = window.localStorage.getItem('NewDeviceRoot');\r\n        if (!root || this.props.prefix.includes('alias') !== root.includes('alias') || !this.props.objects[root]) {\r\n            root = null;\r\n        }\r\n\r\n        if ((this.props.selected.startsWith('alias') && this.props.prefix.startsWith('alias.0'))) {\r\n            const checkIdSelected = (newPart = this.props.selected) => {\r\n                if (this.props.objects[newPart]?.type && this.props.objects[newPart]?.type !== 'folder') {\r\n                    let parts = newPart.split('.');\r\n                    parts.pop();\r\n                    parts = parts.join('.');\r\n                    return checkIdSelected(parts);\r\n                }\r\n                return newPart\r\n            }\r\n            root = checkIdSelected();\r\n        }\r\n\r\n        if (root?.startsWith('alias.0.automatically_detected') || root?.startsWith('alias.0.linked_devices')){\r\n            root = this.prefix;\r\n        }\r\n\r\n        this.state = {\r\n            root: root?.startsWith(this.prefix) ? root : this.prefix,\r\n            name: this.props.copyDevice ? `${this.props.copyDevice.name}-copy` : I18n.t('Device') + ' ' + i,\r\n            notUnique: false,\r\n            functions,\r\n            rooms,\r\n            type: window.localStorage.getItem('Devices.newType') || 'light',\r\n            ids: stateIds,\r\n            rootCheck: (root || this.prefix) === this.prefix ? this.prefix : null\r\n        };\r\n    }\r\n\r\n    setStateAsync(newState) {\r\n        return new Promise(resolve => this.setState(newState, () => resolve()));\r\n    }\r\n\r\n    renderSelectEnum(name, title) {\r\n        const enums = this.props.enumIDs.filter(id => id.startsWith('enum.' + name + '.'));\r\n        const language = I18n.getLanguage();\r\n        const objs = enums.map(id => {\r\n            return {\r\n                name: Utils.getObjectName(this.props.objects, id, { language }),\r\n                icon: Utils.getObjectIcon(id, this.props.objects[id]),\r\n                id: id\r\n            }\r\n        });\r\n\r\n        return <FormControl className={this.props.classes.type}>\r\n            <InputLabel>{title}</InputLabel>\r\n            <Select\r\n                className={this.props.classes.oidField}\r\n                fullWidth\r\n                multiple\r\n                renderValue={(arrId) => {\r\n                    const newArr = arrId.length && typeof arrId !== 'string' ? arrId.map(id => {\r\n                        return {\r\n                            name: Utils.getObjectName(this.props.objects, id, { language }),\r\n                            icon: Utils.getObjectIcon(id, this.props.objects[id]),\r\n                            id: id\r\n                        }\r\n                    }) : [];\r\n                    return <div className={this.props.classes.renderValueWrapper}>\r\n                        {newArr.map(obj => <div className={this.props.classes.renderValueCurrent} key={`${obj.id}-render`}>\r\n                            {obj.icon ? <Icon className={this.props.classes.enumIcon} src={obj.icon} alt={obj.id} /> : <div className={this.props.classes.enumIcon} />}\r\n                            {obj.name}\r\n                        </div>)}\r\n                    </div>\r\n                }}\r\n                value={this.state[name] || []}\r\n                onChange={e => {\r\n                    localStorage.setItem('Devices.new.' + name, JSON.stringify(e.target.value));\r\n                    this.setState({ [name]: e.target.value });\r\n                }}\r\n            >\r\n                {objs.map(obj => <MenuItem key={obj.id} icon={obj.icon} value={obj.id}>\r\n                    {obj.icon ? <Icon className={this.props.classes.enumIcon} src={obj.icon} alt={obj.id} /> : <div className={this.props.classes.enumIcon} />}\r\n                    {obj.name}\r\n                </MenuItem>)}\r\n            </Select>\r\n        </FormControl>;\r\n    }\r\n\r\n    generateId() {\r\n        return `${this.state.root}.${this.state.name.replace(FORBIDDEN_CHARS, '_').replace(/\\s/g, '_')}`;\r\n    }\r\n\r\n    async onCopyDevice(newChannelId) {\r\n        // if this is device not from linkeddevice or from alias\r\n        this.channelId = this.props.copyDevice.channelId;\r\n        const isAlias = this.channelId.startsWith('alias.') || this.channelId.startsWith('linkeddevices.');\r\n\r\n        const channelObj = this.props.objects[this.channelId];\r\n        const { functions, rooms, icon, states, color, type } = this.props.copyDevice;\r\n        const tasks = [];\r\n\r\n        const patterns = this.props.detector.getPatterns();\r\n        const role = patterns[type]?.states && patterns[type].states.find(item => item.defaultChannelRole);\r\n\r\n        tasks.push({\r\n            id: newChannelId,\r\n            obj: {\r\n                common: {\r\n                    name: channelObj.common.name,\r\n                    color: color,\r\n                    desc: channelObj.common.desc,\r\n                    role: role?.defaultChannelRole || type,\r\n                    icon: icon && icon.startsWith('adapter/') ? `../../${icon}` : icon,\r\n                },\r\n                type: 'channel',\r\n                native: channelObj.native || {}\r\n            },\r\n            enums: rooms.concat(functions)\r\n        });\r\n\r\n        states.forEach(state => {\r\n            if (!state.id) {\r\n                return;\r\n            }\r\n            const obj = JSON.parse(JSON.stringify(this.props.objects[state.id]));\r\n            obj._id = newChannelId + '.' + state.name;\r\n\r\n            if (!obj.native) {\r\n                obj.native = {};\r\n            }\r\n            if (!isAlias) {\r\n                obj.common.alias = { id: state.id };\r\n            }\r\n            tasks.push({ id: obj._id, obj });\r\n        });\r\n\r\n        await this.props.processTasks(tasks);\r\n    }\r\n\r\n    handleOk = async () => {\r\n        // check if name is unique\r\n        if (this.props.copyDevice) {\r\n            await this.onCopyDevice(this.generateId());\r\n            // await this.props.onChange();\r\n            this.props.onClose();\r\n        } else {\r\n            this.props.onClose({\r\n                id: this.generateId(),\r\n                type: this.state.type,\r\n                name: this.state.name,\r\n                functions: this.state.functions,\r\n                icon: '',\r\n                states: [],\r\n                color: null,\r\n                rooms: this.state.rooms,\r\n                prefix: this.prefix\r\n            });\r\n        }\r\n    }\r\n\r\n    handleCancel = () => {\r\n        // check if name is unique\r\n        this.props.onClose && this.props.onClose(null);\r\n    }\r\n\r\n    showEnumIcon(name) {\r\n        const obj = this.props.objects[this.state[name]];\r\n        if (obj && obj.common && obj.common.icon) {\r\n            return <Icon className={this.props.classes.icon} src={obj.icon} alt=\"\" />;\r\n        } else {\r\n            return null;\r\n        }\r\n    }\r\n\r\n    async addNewFolder(name, parentId) {\r\n        const id = `${parentId}.${name.replace(FORBIDDEN_CHARS, '_').replace(/\\s/g, '_').replace(/\\./g, '_')}`;\r\n        const obj = {\r\n            _id: id,\r\n            common: { name: { [I18n.getLanguage()]: name } },\r\n            native: {},\r\n            type: 'folder'\r\n        };\r\n\r\n        await this.props.processTasks([{ id, obj }]);\r\n\r\n        // create folder\r\n        const ids = JSON.parse(JSON.stringify(this.state.ids));\r\n        ids[id] = {\r\n            common: { name },\r\n            type: 'folder'\r\n        };\r\n        this.prefix = id;\r\n        await this.setStateAsync({ ids, root: id });\r\n    }\r\n\r\n    render() {\r\n        const classes = this.props.classes;\r\n\r\n        return <Dialog\r\n            open={true}\r\n            maxWidth=\"md\"\r\n            fullWidth={true}\r\n            onClose={() => this.handleCancel()}\r\n            aria-labelledby=\"alert-dialog-title\"\r\n            aria-describedby=\"alert-dialog-description\"\r\n        >\r\n            <DialogTitle className={classes.titleBackground}\r\n                classes={{ root: classes.titleColor }}\r\n                id=\"edit-device-dialog-title\">{I18n.t('Create new device')}: <b>{this.generateId()}</b>\r\n            </DialogTitle>\r\n            <DialogContent className={classes.container}>\r\n                <div className={classes.blockFields}>\r\n                    <FormControlLabel\r\n                        disabled={this.state.rootCheck === this.state.root}\r\n                        control={<Checkbox checked={this.state.rootCheck} onChange={() => {\r\n                            let newRootCheck = null;\r\n                            let newRoot = this.state.rootCheck;\r\n                            if (!this.state.rootCheck) {\r\n                                newRootCheck = this.state.root;\r\n                                newRoot = this.prefix;\r\n                            }\r\n                            this.setState({ rootCheck: newRootCheck, root: newRoot })\r\n                        }} />}\r\n                        label={I18n.t('Add to root')}\r\n                    />\r\n                    <TextField\r\n                        fullWidth\r\n                        autoFocus={!!this.props.copyDevice}\r\n                        onKeyPress={(ev) => {\r\n                            if (this.props.copyDevice) {\r\n                                if (ev.key === 'Enter') {\r\n                                    if (this.state.name && !this.props.objects[this.generateId()]) {\r\n                                        this.handleOk();\r\n                                    } else {\r\n                                        this.handleCancel();\r\n                                    }\r\n                                    ev.preventDefault();\r\n                                }\r\n                            }\r\n                        }}\r\n                        label={I18n.t('Device name')}\r\n                        error={!!this.props.objects[this.generateId()]}\r\n                        className={classes.name}\r\n                        value={this.state.name}\r\n                        onChange={e => this.setState({ name: e.target.value })}\r\n                        margin=\"normal\"\r\n                    />\r\n                    {!this.props.copyDevice && <FormControl className={classes.type}>\r\n                        <InputLabel>{I18n.t('Device type')}</InputLabel>\r\n                        <Select\r\n                            value={this.state.type}\r\n                            onChange={e => {\r\n                                localStorage.setItem('Devices.newType', e.target.value);\r\n                                this.setState({ type: e.target.value });\r\n                            }}\r\n                        >\r\n                            {this.types\r\n                                .filter(id => !UNSUPPORTED_TYPES.includes(id))\r\n                                .map(typeId => <MenuItem key={Types[typeId]} value={Types[typeId]}>\r\n                                    <div className={classes.itemChildrenWrapper}>\r\n                                        <div>\r\n                                            <TypeIcon className={this.props.classes.selectIcon} type={Types[typeId]} style={{ color: this.props.themeType === 'dark' ? '#FFFFFF' : '#000' }} />\r\n                                            <span className={this.props.classes.selectText}>{this.typesWords[typeId]}</span>\r\n                                        </div>\r\n                                        <div className={classes.iconWrapper}>{Object.keys(TYPE_OPTIONS[typeId]).map(key => TYPE_OPTIONS[typeId][key] ? <Icon className={classes.iconStyle} src={ICONS_TYPE[key]} /> : <div key={key} className={classes.emptyIcon} />)}</div>\r\n                                    </div>\r\n                                </MenuItem>)}\r\n                        </Select>\r\n                    </FormControl>}\r\n                    {!this.props.copyDevice && this.renderSelectEnum('functions', I18n.t('Function'))}\r\n                    {!this.props.copyDevice && this.renderSelectEnum('rooms', I18n.t('Room'))}\r\n                </div>\r\n            </DialogContent>\r\n            <DialogActions>\r\n                <Button\r\n                    variant=\"contained\"\r\n                    disabled={!!this.props.objects[this.generateId()]}\r\n                    onClick={this.handleOk}\r\n                    startIcon={<IconCheck />}\r\n                    color=\"primary\">{I18n.t('Create')}</Button>\r\n                <Button\r\n                    variant=\"contained\"\r\n                    onClick={this.handleCancel}\r\n                    startIcon={<IconClose />}\r\n                >{I18n.t('Cancel')}</Button>\r\n            </DialogActions>\r\n        </Dialog>;\r\n    }\r\n}\r\n\r\nDialogNewDevice.defaultProps = {\r\n    selected: 'alias.0'\r\n}\r\n\r\nDialogNewDevice.propTypes = {\r\n    onClose: PropTypes.func,\r\n    objects: PropTypes.object,\r\n    theme: PropTypes.object,\r\n    themeType: PropTypes.string,\r\n    enumIDs: PropTypes.array,\r\n    socket: PropTypes.object,\r\n    detector: PropTypes.object,\r\n};\r\n\r\nexport default withStyles(styles)(DialogNewDevice);\r\n","/**\r\n * Copyright 2018-2021 bluefox <dogafox@gmail.com>\r\n *\r\n * MIT License\r\n *\r\n **/\r\nimport Utils from '@iobroker/adapter-react/Components/Utils';\r\nimport I18n from '@iobroker/adapter-react/i18n';\r\n\r\nclass LocalUtils  {\r\n    static getObjectName(objects, id, label, channelName, enumNames) {\r\n        let name;\r\n        if (label) {\r\n            name = label;\r\n        } else\r\n        if (!id) {\r\n            name = 'No elements';\r\n        } else {\r\n            //if (objects[enumName]) {\r\n            //    enumName = Utils.getObjectName(objects, enumName);\r\n            //}\r\n\r\n            let item = objects[id];\r\n            if (item && item.common && item.common.name) {\r\n                name = Utils.getObjectName(objects, id, null, {language: I18n.getLanguage()});\r\n\r\n                if (enumNames) {\r\n                    if (typeof enumNames === 'object') {\r\n                        enumNames.forEach(e => {\r\n                            let reg = new RegExp('\\\\b' + e + '\\\\b');\r\n                            const newName = name.replace(reg, ' ').replace(/\\s\\s/g, '').trim();\r\n                            if (newName) {\r\n                                name = newName;\r\n                            }\r\n                        });\r\n                    } else {\r\n                        let reg = new RegExp('\\\\b' + enumNames + '\\\\b');\r\n                        const newName = name.replace(reg, ' ').replace(/\\s\\s/g, '').trim();\r\n                        if (newName) {\r\n                            name = newName;\r\n                        }\r\n                    }\r\n                }\r\n                if (channelName) {\r\n                    let reg = new RegExp(channelName + '[.: ]?');\r\n                    const newName = name.replace(reg, ' ').trim();\r\n                    if (newName) {\r\n                        name = newName;\r\n                    }\r\n                }\r\n\r\n                if (name && name === name.toUpperCase()) {\r\n                    name = name[0] + name.substring(1).toLowerCase();\r\n                }\r\n            } else {\r\n                let pos = id.lastIndexOf('.');\r\n                name = id.substring(pos + 1).replace(/_/g, ' ');\r\n                name = Utils.CapitalWords(name);\r\n\r\n                if (enumNames) {\r\n                    if (typeof enumNames === 'object') {\r\n                        enumNames.forEach(e => {\r\n                            let reg = new RegExp('\\\\b' + e + '\\\\b');\r\n                            name = name.replace(reg, ' ').replace(/\\s\\s/g, '').trim();\r\n                        });\r\n                    } else {\r\n                        let reg = new RegExp('\\\\b' + enumNames + '\\\\b');\r\n                        name = name.replace(reg, ' ').replace(/\\s\\s/g, '').trim();\r\n                    }\r\n                }\r\n\r\n                if (channelName) {\r\n                    let reg = new RegExp(channelName + '[.: ]?');\r\n                    name = I18n.t(name.replace(reg, ' ').trim());\r\n                }\r\n            }\r\n        }\r\n        return name.trim();\r\n    }\r\n}\r\n\r\nexport default LocalUtils;\r\n","/**\r\n * Copyright 2020-2021 bluefox <dogafox@gmail.com>\r\n *\r\n * MIT License\r\n *\r\n **/\r\nimport React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport {withStyles} from '@material-ui/core/styles';\r\n\r\nimport Button from '@material-ui/core/Button';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogActions from '@material-ui/core/DialogActions';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\nimport List from '@material-ui/core/List';\r\nimport ListItem from '@material-ui/core/ListItem';\r\nimport ListItemSecondaryAction from '@material-ui/core/ListItemSecondaryAction';\r\nimport ListItemText from '@material-ui/core/ListItemText';\r\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\r\nimport Checkbox from '@material-ui/core/Checkbox';\r\n\r\nimport I18n from '@iobroker/adapter-react/i18n';\r\nimport Utils from '@iobroker/adapter-react/Components/Utils';\r\nimport Icon from '@iobroker/adapter-react/Components/Icon';\r\n\r\nconst styles = theme => ({\r\n    header: {\r\n        width: '100%',\r\n        fontSize: 16,\r\n        textTransform: 'capitalize',\r\n        textAlign: 'center',\r\n        paddingBottom: 20,\r\n        color: '#000',\r\n    },\r\n    divDialogContent: {\r\n        fontSize: '1rem',\r\n        fontFamily: '\"Roboto\", \"Helvetica\", \"Arial\", sans-serif'\r\n    },\r\n    enumIcon: {\r\n        width: 24,\r\n        height: 24\r\n    },\r\n});\r\n\r\n\r\nclass DialogEditEnums extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            values: this.props.values ? this.props.values.slice() : [] // copy array\r\n        }\r\n    }\r\n\r\n    handleClose() {\r\n        this.props.onClose && this.props.onClose(null);\r\n    }\r\n\r\n    handleOk(isRefresh) {\r\n        this.props.onClose && this.props.onClose(this.state.values);\r\n    };\r\n\r\n    renderHeader() {\r\n        return null;\r\n    }\r\n\r\n    onToggle(id) {\r\n        const values = this.state.values.slice();\r\n        const pos = values.indexOf(id);\r\n        if (pos === -1) {\r\n            values.push(id)\r\n        } else {\r\n            values.splice(pos, 1);\r\n        }\r\n        this.setState({values});\r\n    }\r\n\r\n    renderSelectEnum() {\r\n        const enums = this.props.enumIDs;\r\n        const language = I18n.getLanguage();\r\n        const objs = enums.map(id => ({\r\n                name: Utils.getObjectName(this.props.objects, id, {language}),\r\n                icon: Utils.getObjectIcon(id, this.props.objects[id]),\r\n                id\r\n            }));\r\n\r\n        return <List className={this.props.classes.list}>\r\n            {objs.map(obj => <ListItem key={obj.id} button onClick={() => this.onToggle(obj.id)}>\r\n                <ListItemIcon>\r\n                    {obj.icon ? <Icon className={this.props.classes.enumIcon} src={obj.icon} alt={obj.id}/> : <div className={this.props.classes.enumIcon}/>}\r\n                </ListItemIcon>\r\n                <ListItemText primary={obj.name} />\r\n                <ListItemSecondaryAction>\r\n                    <Checkbox\r\n                        edge=\"end\"\r\n                        onChange={() => this.onToggle(obj.id)}\r\n                        checked={this.state.values.includes(obj.id)}\r\n                    />\r\n                </ListItemSecondaryAction>\r\n            </ListItem>)}\r\n        </List>;\r\n    }\r\n\r\n    render() {\r\n        return <Dialog\r\n            key=\"enumDialog\"\r\n            open={true}\r\n            maxWidth={'sm'}\r\n            onClose={() => this.handleOk()}\r\n            aria-labelledby=\"alert-dialog-title\"\r\n            aria-describedby=\"alert-dialog-description\"\r\n        >\r\n            <DialogTitle className={this.props.classes.titleBackground}\r\n                         classes={{root: this.props.classes.titleColor}}\r\n                         id=\"edit-device-dialog-title\">{I18n.t('Edit enums')} <b>{this.props.deviceName}</b></DialogTitle>\r\n            <DialogContent>\r\n                <div className={this.props.classes.divDialogContent}>\r\n                    {this.renderHeader()}\r\n                    {this.renderSelectEnum()}\r\n                </div>\r\n            </DialogContent>\r\n            <DialogActions>\r\n                <Button variant=\"contained\" onClick={() => this.handleOk()} color=\"primary\" autoFocus>{I18n.t('Ok')}</Button>\r\n                <Button variant=\"contained\" onClick={() => this.handleClose()}>{I18n.t('Cancel')}</Button>\r\n            </DialogActions>\r\n        </Dialog>;\r\n    }\r\n}\r\n\r\nDialogEditEnums.propTypes = {\r\n    onClose: PropTypes.func,\r\n    deviceName: PropTypes.string,\r\n    objects: PropTypes.object,\r\n    enumIDs: PropTypes.array,\r\n    values: PropTypes.array,\r\n};\r\n\r\nexport default withStyles(styles)(DialogEditEnums);\r\n","import React, { useState } from 'react';\r\nimport ReactDOM from 'react-dom';\r\n\r\nimport Button from '@material-ui/core/Button';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogActions from '@material-ui/core/DialogActions';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport { Checkbox, DialogTitle, FormControlLabel, makeStyles, ThemeProvider } from '@material-ui/core';\r\n\r\nimport IconClose from '@material-ui/icons/Close';\r\nimport IconCheck from '@material-ui/icons/Check';\r\n\r\nimport I18n from '@iobroker/adapter-react/i18n';\r\nimport theme from '@iobroker/adapter-react/Theme';\r\nimport Utils from '@iobroker/adapter-react/Components/Utils';\r\n\r\nlet node = null;\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    root: {\r\n        backgroundColor: theme.palette.background.paper,\r\n        width: '100%',\r\n        height: 'auto',\r\n        display: 'flex'\r\n    },\r\n    paper: {\r\n        maxWidth: 960,\r\n        width: 'calc(100% - 64px)'\r\n    },\r\n    overflowHidden: {\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        border: 'none'\r\n        // overflow: 'hidden'\r\n    },\r\n    pre: {\r\n        overflow: 'auto',\r\n        whiteSpace: 'pre-wrap',\r\n        margin: 0\r\n    },\r\n    showDialog: {\r\n        marginTop: 10\r\n    }\r\n}));\r\n\r\nconst DialogDeleteFolder = ({ cb, device }) => {\r\n    const classes = useStyles();\r\n    const [open, setOpen] = useState(true);\r\n    const [checked, setChecked] = useState(false);\r\n\r\n    const onClose = () => {\r\n        setOpen(false);\r\n        if (node) {\r\n            document.body.removeChild(node);\r\n            node = null;\r\n        }\r\n    };\r\n\r\n    return <ThemeProvider theme={theme(Utils.getThemeName())}>\r\n        <Dialog\r\n            onClose={onClose}\r\n            open={open}\r\n            classes={{ paper: classes.paper }}\r\n        >\r\n            <DialogTitle>{I18n.t('Please confirm...')}</DialogTitle>\r\n            <DialogContent className={classes.overflowHidden} dividers>\r\n                {I18n.t(device ? 'Device and all states will be deleted. Are you sure?' : 'Folder will be deleted. Are you sure?')}\r\n                <div className={classes.showDialog}>\r\n                    <FormControlLabel\r\n                        control={<Checkbox checked={checked} onChange={e => setChecked(e.target.checked)} />}\r\n                        label={I18n.t('Do not show dialog for 5 minutes')}\r\n                    />\r\n                </div>\r\n            </DialogContent>\r\n            <DialogActions>\r\n                <Button\r\n                    variant=\"contained\"\r\n                    autoFocus\r\n                    onClick={() => {\r\n                        onClose();\r\n                        if (checked) {\r\n                            window.localStorage.setItem(device ? 'DeleteDeviceTime' : 'DeleteFolderTime', new Date().getTime());\r\n                        }\r\n                        cb(true);\r\n                    }}\r\n                    startIcon={<IconCheck />}\r\n                    color=\"primary\">\r\n                    {I18n.t('Delete')}\r\n                </Button>\r\n                <Button\r\n                    variant=\"contained\"\r\n                    onClick={() => {\r\n                        onClose();\r\n                        cb(false);\r\n                    }}\r\n                    startIcon={<IconClose />}\r\n                    color=\"default\">\r\n                    {I18n.t('Cancel')}\r\n                </Button>\r\n            </DialogActions>\r\n        </Dialog>\r\n    </ThemeProvider>;\r\n}\r\n\r\nexport const deleteFolderAndDeviceCallBack = (cb, device = false) => {\r\n    const time = window.localStorage.getItem(device ? 'DeleteDeviceTime' : 'DeleteFolderTime');\r\n    const fiveMin = 1000 * 60 * 5;\r\n    if (time && new Date().getTime() - time < fiveMin) {\r\n        return cb(true);\r\n    }\r\n    if (!node) {\r\n        node = document.createElement('div');\r\n        node.id = 'renderModal';\r\n        document.body.appendChild(node);\r\n    }\r\n    return ReactDOM.render(<DialogDeleteFolder cb={cb} device={device} />, node);\r\n}","import React, { useEffect, useState } from 'react';\r\n\r\nimport Button from '@material-ui/core/Button';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogActions from '@material-ui/core/DialogActions';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport { Checkbox, DialogTitle, FormControlLabel, makeStyles, TextField, ThemeProvider } from '@material-ui/core';\r\n\r\nimport IconClose from '@material-ui/icons/Close';\r\nimport IconCheck from '@material-ui/icons/Check';\r\n\r\nimport I18n from '@iobroker/adapter-react/i18n';\r\nimport theme from '@iobroker/adapter-react/Theme';\r\nimport Utils from '@iobroker/adapter-react/Components/Utils';\r\n\r\nimport UploadImage from '../Components/UploadImage';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    root: {\r\n        backgroundColor: theme.palette.background.paper,\r\n        width: '100%',\r\n        height: 'auto',\r\n        display: 'flex'\r\n    },\r\n    paper: {\r\n        maxWidth: 600,\r\n        width: '100%'\r\n    },\r\n    overflowHidden: {\r\n        display: 'flex',\r\n        // overflow: 'hidden'\r\n    },\r\n    pre: {\r\n        overflow: 'auto',\r\n        whiteSpace: 'pre-wrap',\r\n        margin: 0\r\n    },\r\n    divOids: {\r\n        display: 'inline-block',\r\n        width: '100%',\r\n        verticalAlign: 'top',\r\n    },\r\n    divOidField: {\r\n        width: '100%',\r\n        display: 'block',\r\n        paddingTop: 7,\r\n        paddingBottom: 7,\r\n    },\r\n\r\n    oidName: {\r\n        fontSize: 14,\r\n        fontWeight: 'bold'\r\n    },\r\n}));\r\n\r\nconst emptyObj = {\r\n    _id: '',\r\n    common: {\r\n        name: '',\r\n        color: null,\r\n        icon: null\r\n    },\r\n    native: {},\r\n    type: 'folder'\r\n};\r\n\r\nconst DialogEditFolder = ({ onClose, data, socket, devices, objects, deleteDevice, processTasks, selected, newFolder, detector }) => {\r\n    const classes = useStyles();\r\n    const [dataEdit, setDataEdit] = useState(newFolder ? emptyObj : JSON.parse(JSON.stringify(data)));\r\n    const [arrayObjects, setArrayObjects] = useState([]);\r\n    const [name, setName] = useState(Utils.getObjectNameFromObj(dataEdit, I18n.getLanguage()) === 'undefined' ? dataEdit.common.name[Object.keys(dataEdit.common.name)[0]] : Utils.getObjectNameFromObj(dataEdit, I18n.getLanguage()))\r\n    const [startTheProcess, setStartTheProcess] = useState(false);\r\n\r\n    const checkIdSelected = (newPart = selected) => {\r\n        if (objects[newPart]?.type && objects[newPart]?.type !== 'folder') {\r\n            let parts = newPart.split('.');\r\n            parts.pop();\r\n            parts = parts.join('.');\r\n            return checkIdSelected(parts);\r\n        }\r\n        return newPart?.startsWith('alias.0') ? newPart : 'alias.0'\r\n    }\r\n\r\n    const [newId, setId] = useState(newFolder ? checkIdSelected() : data?._id);\r\n    const [rootCheck, setRootCheck] = useState(newId === 'alias.0' ? 'alias.0' : null);\r\n\r\n    useEffect(() => {\r\n        const idsObject = Object.keys(objects).filter(el => el === data._id || el.startsWith(data._id + '.'))\r\n            .filter(id => objects[id].type === 'folder' || objects[id].type === 'channel' || objects[id].type === 'device')\r\n            .map(id => objects[id]);\r\n\r\n        setArrayObjects(idsObject);\r\n    }, [data?._id, objects]);\r\n\r\n    function getNonEmptyName(obj) {\r\n        const lang = I18n.getLanguage();\r\n        const name = Utils.getObjectNameFromObj(obj, lang);\r\n        return name === 'undefined' ? obj.common.name[Object.keys(obj.common.name)[0]] : name\r\n    }\r\n\r\n    const onCloseLocal = async changed => {\r\n        if (!startTheProcess && changed) {\r\n            setStartTheProcess(true);\r\n            if (newFolder) {\r\n                const newDataEdit = JSON.parse(JSON.stringify(dataEdit));\r\n                newDataEdit._id = `${newId}.${name.replace(Utils.FORBIDDEN_CHARS, '_').replace(/\\s/g, '_').replace(/\\./g, '_')}`;\r\n                await socket.setObject(newDataEdit._id, newDataEdit);\r\n            } else {\r\n                // If name and ID were changed\r\n                if (getNonEmptyName(dataEdit) !== getNonEmptyName(data)) {\r\n\r\n                    await onChangeCopy();\r\n                } else if (JSON.stringify(dataEdit) !== JSON.stringify(data)) {\r\n\r\n                    await socket.setObject(dataEdit._id, dataEdit);\r\n                }\r\n            }\r\n        }\r\n\r\n        onClose();\r\n    };\r\n\r\n    const addNewFolder = async (dataFolder, id) => {\r\n        const obj = {\r\n            _id: id,\r\n            common: {\r\n                name: typeof dataFolder.name === 'string' ? { [I18n.getLanguage()]: dataFolder.name } : dataFolder.name,\r\n                color: dataFolder.color,\r\n                icon: dataFolder.icon\r\n            },\r\n            native: {},\r\n            type: 'folder'\r\n        };\r\n        await socket.setObject(id, obj);\r\n    }\r\n\r\n    const onCopyDevice = async (copyDevice, newChannelId, obj) => {\r\n        if (!copyDevice && !copyDevice?.channelId) {\r\n            return null;\r\n        }\r\n        // if this is device not from linkeddevice or from alias\r\n        const channelId = copyDevice.channelId;\r\n        const isAlias = channelId.startsWith('alias.') || channelId.startsWith('linkeddevices.');\r\n        let channelObj = objects[channelId];\r\n        if (!channelObj?.common) {\r\n            if (obj) {\r\n                channelObj = obj\r\n            } else {\r\n                return null;\r\n            }\r\n        }\r\n        const { functions, rooms, icon, states, color, type } = copyDevice;\r\n        const tasks = [];\r\n\r\n        const patterns = detector.getPatterns();\r\n        const role = patterns[type]?.states && patterns[type].states.find(item => item.defaultChannelRole);\r\n\r\n        tasks.push({\r\n            id: newChannelId,\r\n            obj: {\r\n                common: {\r\n                    name: channelObj.common.name,\r\n                    color: color,\r\n                    desc: channelObj.common.desc,\r\n                    role: role?.defaultChannelRole || type,\r\n                    icon: icon && icon.startsWith('adapter/') ? `../../${icon}` : icon,\r\n                },\r\n                type: 'channel',\r\n                native: channelObj.native || {}\r\n            },\r\n            enums: rooms.concat(functions)\r\n        });\r\n\r\n        states.forEach(state => {\r\n            if (!state.id) {\r\n                return;\r\n            }\r\n            const obj = JSON.parse(JSON.stringify(objects[state.id]));\r\n            obj._id = newChannelId + '.' + state.name;\r\n\r\n            if (!obj.native) {\r\n                obj.native = {};\r\n            }\r\n            if (!isAlias) {\r\n                obj.common.alias = { id: state.id };\r\n            }\r\n            tasks.push({ id: obj._id, obj });\r\n        });\r\n\r\n        await processTasks(tasks);\r\n    }\r\n\r\n    const generateId = () => {\r\n        if (typeof dataEdit?.common?.name !== 'string') {\r\n            return false;\r\n        } else if (!dataEdit?.common?.name) {\r\n            return data._id;\r\n        }\r\n\r\n        let parts;\r\n        if (newFolder) {\r\n            parts = newId;\r\n        } else {\r\n            parts = data._id.split('.');\r\n            parts.pop();\r\n            parts = parts.join('.');\r\n        }\r\n        parts = `${parts}.${dataEdit.common.name.replace(Utils.FORBIDDEN_CHARS, '_').replace(/\\s/g, '_').replace(/\\./g, '_')}`\r\n        return parts;\r\n    }\r\n\r\n    const onChangeCopy = async () => {\r\n        let newDevices = JSON.parse(JSON.stringify(devices));\r\n\r\n        let parts = data._id.split('.');\r\n        parts.pop();\r\n        parts = parts.join('.');\r\n        parts = `${parts}.${dataEdit.common.name.replace(Utils.FORBIDDEN_CHARS, '_').replace(/\\s/g, '_').replace(/\\./g, '_')}`;\r\n\r\n        let deleteFolderID = '';\r\n        for (let i = 0; i < arrayObjects.length; i++) {\r\n            const el = arrayObjects[i];\r\n            const newId = el._id.replace(data._id, parts);\r\n            if (el.type === 'folder') {\r\n                await addNewFolder(data._id === el._id ? dataEdit.common : el.common, newId);\r\n                deleteFolderID = el._id;\r\n            } else {\r\n                const device = newDevices.find(device => el._id === device.channelId);\r\n                await onCopyDevice(device, newId, el);\r\n                newDevices = await deleteDevice(newDevices.indexOf(device));\r\n            }\r\n        }\r\n\r\n        // Delete folder and all object\r\n        deleteFolderID && (await socket.delObjects(deleteFolderID, true));\r\n    }\r\n\r\n    return <ThemeProvider theme={theme(Utils.getThemeName())}>\r\n        <Dialog\r\n            onClose={() => onCloseLocal()}\r\n            open={true}\r\n            classes={{ paper: classes.paper }}\r\n        >\r\n            <DialogTitle>{I18n.t(!newFolder ? 'Edit folder %s' : 'Add new folder %s', newId)}{name && newFolder ? `.${name}` : ''}</DialogTitle>\r\n            <DialogContent className={classes.overflowHidden} dividers>\r\n                <div className={classes.divOids}>\r\n                    {newFolder && <FormControlLabel\r\n                        disabled={rootCheck === newId}\r\n                        control={<Checkbox checked={rootCheck} onChange={() => {\r\n                            let newRootCheck = null;\r\n                            let newRoot = rootCheck;\r\n                            if (!rootCheck) {\r\n                                newRootCheck = newId;\r\n                                newRoot = 'alias.0';\r\n                            }\r\n                            setRootCheck(newRootCheck);\r\n                            setId(newRoot);\r\n                        }} />}\r\n                        label={I18n.t('Add to root')}\r\n                    />}\r\n                    <div className={classes.divOidField}>\r\n                        <div className={classes.oidName} >{I18n.t('Name')}</div>\r\n                        <TextField\r\n                            key=\"_name\"\r\n                            fullWidth\r\n                            autoFocus\r\n                            onKeyPress={(ev) => {\r\n                                if (ev.key === 'Enter') {\r\n                                    // if (dataEdit.common.name && JSON.stringify(dataEdit) !== JSON.stringify(data)) {\r\n                                    //     cb(dataEdit);\r\n                                    // } else {\r\n                                    //     cb(false);\r\n                                    // }\r\n                                    onCloseLocal(true);\r\n                                    ev.preventDefault();\r\n                                }\r\n                            }}\r\n                            value={name}\r\n                            className={classes.oidField}\r\n                            error={!!objects[generateId()] || !name}\r\n                            disabled={startTheProcess}\r\n                            onChange={e => {\r\n                                const newDataEdit = JSON.parse(JSON.stringify(dataEdit));\r\n                                newDataEdit.common.name = e.target.value;\r\n                                setDataEdit(newDataEdit);\r\n\r\n                                if (!newFolder) {\r\n                                    let parts;\r\n                                    parts = data._id.split('.');\r\n                                    parts.pop();\r\n                                    parts = parts.join('.');\r\n                                    parts = `${parts}.${e.target.value.replace(Utils.FORBIDDEN_CHARS, '_').replace(/\\s/g, '_').replace(/\\./g, '_')}`\r\n                                    setId(parts);\r\n                                }\r\n\r\n                                setName(e.target.value);\r\n\r\n                            }}\r\n                            margin=\"normal\"\r\n                        />\r\n                    </div>\r\n                    <div className={classes.divOidField}>\r\n                        <div className={classes.oidName} >{I18n.t('Color')}</div>\r\n                        <TextField\r\n                            key=\"_color\"\r\n                            disabled={startTheProcess}\r\n                            // fullWidth\r\n                            value={dataEdit?.common?.color}\r\n                            style={{ width: 'calc(100% - 40px)' }}\r\n                            onChange={e => {\r\n                                const newDataEdit = JSON.parse(JSON.stringify(dataEdit));\r\n                                newDataEdit.common.color = e.target.value;\r\n                                setDataEdit(newDataEdit);\r\n                            }}\r\n                        />\r\n                        <TextField\r\n                            key=\"_color1\"\r\n                            type=\"color\"\r\n                            style={{ width: 40 }}\r\n                            disabled={startTheProcess}\r\n                            value={dataEdit?.common?.color}\r\n                            className={classes.oidField + ' ' + classes.colorButton}\r\n                            onChange={e => {\r\n                                const newDataEdit = JSON.parse(JSON.stringify(dataEdit));\r\n                                newDataEdit.common.color = e.target.value;\r\n                                setDataEdit(newDataEdit);\r\n                            }}\r\n                        // margin=\"normal\"\r\n                        />\r\n                    </div>\r\n                    <UploadImage\r\n                        crop={false}\r\n                        icons\r\n                        className={classes.sizeDropZone}\r\n                        disabled={startTheProcess}\r\n                        maxSize={256 * 1024}\r\n                        icon={dataEdit?.common?.icon}\r\n                        removeIconFunc={e => {\r\n                            const newDataEdit = JSON.parse(JSON.stringify(dataEdit));\r\n                            newDataEdit.common.icon = '';\r\n                            setDataEdit(newDataEdit);\r\n                        }}\r\n                        onChange={base64 => {\r\n                            const newDataEdit = JSON.parse(JSON.stringify(dataEdit));\r\n                            newDataEdit.common.icon = base64;\r\n                            setDataEdit(newDataEdit);\r\n                        }}\r\n                        t={I18n.t}\r\n                    />\r\n                </div>\r\n            </DialogContent>\r\n            <DialogActions>\r\n                <Button\r\n                    variant=\"contained\"\r\n                    autoFocus\r\n                    disabled={JSON.stringify(dataEdit) === JSON.stringify(data) || !dataEdit.common.name || !!objects[generateId()] || startTheProcess}\r\n                    onClick={() => onCloseLocal(true)}\r\n                    startIcon={<IconCheck />}\r\n                    color=\"primary\">\r\n                    {I18n.t('Save')}\r\n                </Button>\r\n                <Button\r\n                    variant=\"contained\"\r\n                    disabled={startTheProcess}\r\n                    onClick={() => onCloseLocal(false)}\r\n                    startIcon={<IconClose />}\r\n                    color=\"default\">\r\n                    {I18n.t('Close')}\r\n                </Button>\r\n            </DialogActions>\r\n        </Dialog>\r\n    </ThemeProvider>;\r\n}\r\n\r\nDialogEditFolder.defaultProps = {\r\n    data: emptyObj,\r\n    selected: 'alias.0'\r\n}\r\n\r\nexport default DialogEditFolder;","import Utils from '@iobroker/adapter-react/Components/Utils';\r\nimport I18n from '@iobroker/adapter-react/i18n';\r\nimport { TableRow } from '@material-ui/core';\r\nimport React, { useRef, useState } from 'react';\r\nimport { useDrag, useDrop } from 'react-dnd';\r\n\r\nconst DragWrapper = ({ openFolder, backgroundRow, objects, onCopyDevice, deleteDevice, deviceIdx, id, children, style, className, onClick }) => {\r\n    const ref = useRef(null);\r\n    const language = I18n.getLanguage();\r\n    const [{ isDragging }, dragRef] = useDrag({\r\n        type: 'box',\r\n        item: { id, deviceIdx },\r\n        canDrag:()=>{\r\n            return !id?.includes('linked_devices') && !id?.includes('linkeddevices.0');\r\n\r\n        },\r\n        end: async (item, monitor) => {\r\n            let parts;\r\n            if (objects[item.id]?.common?.name) {\r\n                parts = Utils.getObjectName(objects, item.id, { language }).replace(Utils.FORBIDDEN_CHARS, '_').replace(/\\s/g, '_').replace(/\\./g, '_');\r\n            } else {\r\n                parts = item.id.split('.');\r\n                parts = parts.pop();\r\n            }\r\n            const result = monitor.getDropResult();\r\n            const targetId = monitor.getTargetIds();\r\n            const didDrop = monitor.didDrop();\r\n            if (id !== `alias.0.${parts}` && !result && !targetId.length && !didDrop) {\r\n                await onCopyDevice(id, `alias.0.${parts}`);\r\n                openFolder()\r\n                if (id.includes('alias.0')) {\r\n                    await deleteDevice(item.deviceIdx);\r\n                }\r\n            }\r\n        },\r\n        collect: monitor => ({ isDragging: monitor.isDragging() }),\r\n    });\r\n    const [error, setError] = useState(false);\r\n    const [{ isOver, canDrop }, dropRef] = useDrop({\r\n        accept: 'box',\r\n        canDrop: (item) => {\r\n            let parts;\r\n            if (objects[item.id]?.common?.name) {\r\n                parts = Utils.getObjectName(objects, item.id, { language }).replace(Utils.FORBIDDEN_CHARS, '_').replace(/\\s/g, '_').replace(/\\./g, '_');\r\n            } else {\r\n                parts = item.id.split('.');\r\n                parts = parts.pop();\r\n            }\r\n            let partsId = id.split('.');\r\n            partsId.pop();\r\n            partsId = partsId.join('.');\r\n            if (!id?.includes('alias.0') || id?.includes('automatically_detected') || id?.includes('linked_devices') || objects[`${partsId}.${parts}`]) {\r\n                return false;\r\n            }\r\n            return true;\r\n        },\r\n        collect: (monitor) => ({\r\n            handlerId: monitor.getHandlerId(),\r\n            isOver: monitor.isOver(),\r\n            canDrop: monitor.canDrop()\r\n        }),\r\n        drop: async (item) => {\r\n            let parts;\r\n            if (objects[item.id]?.common?.name) {\r\n                parts = Utils.getObjectName(objects, item.id, { language }).replace(Utils.FORBIDDEN_CHARS, '_').replace(/\\s/g, '_').replace(/\\./g, '_');\r\n            } else {\r\n                parts = item.id.split('.');\r\n                parts = parts.pop();\r\n            }\r\n            let partsId = id.split('.');\r\n            partsId.pop();\r\n            partsId = partsId.join('.');\r\n            setError(false);\r\n            await onCopyDevice(item.id, `${partsId}.${parts}`);\r\n            openFolder()\r\n            if (item.id.includes('alias.0')) {\r\n                await deleteDevice(item.deviceIdx);\r\n            }\r\n        },\r\n        hover(item, monitor) {\r\n            let parts;\r\n            if (objects[item.id]?.common?.name) {\r\n                parts = Utils.getObjectName(objects, item.id, { language }).replace(Utils.FORBIDDEN_CHARS, '_').replace(/\\s/g, '_').replace(/\\./g, '_');\r\n            } else {\r\n                parts = item.id.split('.');\r\n                parts = parts.pop();\r\n            }\r\n            let partsId = id.split('.');\r\n            partsId.pop();\r\n            partsId = partsId.join('.');\r\n            if (!id?.includes('alias.0') || id?.includes('automatically_detected') || id?.includes('linked_devices') || objects[`${partsId}.${parts}`]) {\r\n                setError(true);\r\n            } else {\r\n                setError(false);\r\n            }\r\n        }\r\n    });\r\n    const isActive = isOver && canDrop;\r\n    let background = backgroundRow;\r\n    if (isOver && error) {\r\n        background = '#e73c3c75';\r\n    } else if (isActive) {\r\n        background = '#00640057';\r\n    }\r\n\r\n    const opacity = isDragging ? 0.5 : 1;\r\n    dragRef(dropRef(ref));\r\n\r\n    return <TableRow\r\n        className={className}\r\n        onClick={isDragging ? null : e => onClick(e)}\r\n        padding=\"default\"\r\n        ref={ref}\r\n        style={{ ...style, opacity, background }}>\r\n        {children}\r\n    </TableRow>;\r\n}\r\n\r\nexport default DragWrapper;","import Utils from '@iobroker/adapter-react/Components/Utils';\r\nimport I18n from '@iobroker/adapter-react/i18n';\r\nimport { TableRow } from '@material-ui/core';\r\nimport React, { useState } from 'react';\r\nimport { useDrop } from 'react-dnd';\r\n\r\nconst DropWrapper = ({ openFolder, objects, deleteDevice, onCopyDevice, id, children, className, backgroundRow, onClick }) => {\r\n    const [error, setError] = useState(false);\r\n    const language = I18n.getLanguage();\r\n    const [{ isOver, canDrop }, drop] = useDrop({\r\n        accept: 'box',\r\n        canDrop: (item) => {\r\n            let parts;\r\n            if (objects[item.id]?.common?.name) {\r\n                parts = Utils.getObjectName(objects, item.id, { language }).replace(Utils.FORBIDDEN_CHARS, '_').replace(/\\s/g, '_').replace(/\\./g, '_');\r\n                parts = item.id.split('.');\r\n                parts = parts.pop();\r\n            }\r\n            return !(!id?.includes('alias.0') ||\r\n                id?.includes('automatically_detected') ||\r\n                id?.includes('linked_devices') ||\r\n                objects[`${id}.${parts}`]);\r\n        },\r\n        collect: (monitor) => ({\r\n            handlerId: monitor.getHandlerId(),\r\n            isOver: monitor.isOver(),\r\n            canDrop: monitor.canDrop()\r\n        }),\r\n        drop: async (item) => {\r\n            let parts;\r\n            if (objects[item.id]?.common?.name) {\r\n                parts = Utils.getObjectName(objects, item.id, { language }).replace(Utils.FORBIDDEN_CHARS, '_').replace(/\\s/g, '_').replace(/\\./g, '_');\r\n            } else {\r\n                parts = item.id.split('.');\r\n                parts = parts.pop();\r\n            }\r\n            setError(false);\r\n            await onCopyDevice(item.id, `${id}.${parts}`);\r\n            openFolder();\r\n            if (item.id.includes('alias.0')) {\r\n                await deleteDevice(item.deviceIdx);\r\n            }\r\n        },\r\n        hover(item, monitor) {\r\n            let parts;\r\n            if (objects[item.id]?.common?.name) {\r\n                parts = Utils.getObjectName(objects, item.id, { language }).replace(Utils.FORBIDDEN_CHARS, '_').replace(/\\s/g, '_').replace(/\\./g, '_');\r\n            } else {\r\n                parts = item.id.split('.');\r\n                parts = parts.pop();\r\n            }\r\n            if (!id?.includes('alias.0') || id?.includes('automatically_detected') || id?.includes('linked_devices') || objects[`${id}.${parts}`]) {\r\n                setError(true);\r\n            } else {\r\n                setError(false);\r\n            }\r\n        }\r\n    });\r\n\r\n    const isActive = isOver && canDrop;\r\n    let background = backgroundRow;\r\n    if (isOver && error) {\r\n        background = '#e73c3c75';\r\n    } else if (isActive) {\r\n        background = '#00640057';\r\n    }\r\n\r\n    return <TableRow\r\n        className={className}\r\n        padding=\"default\"\r\n        ref={drop}\r\n        onClick={e => onClick(e)}\r\n        style={{ background, transition: 'background .3s' }}\r\n    >\r\n        {children}\r\n    </TableRow>;\r\n}\r\n\r\nexport default DropWrapper;","/**\r\n * Copyright 2019-2020 bluefox <dogafox@gmail.com>\r\n *\r\n * MIT License\r\n *\r\n **/\r\nimport React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport List from '@material-ui/core/List';\r\nimport ListItem from '@material-ui/core/ListItem';\r\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport ListItemSecondaryAction from '@material-ui/core/ListItemSecondaryAction';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogActions from '@material-ui/core/DialogActions';\r\nimport Button from '@material-ui/core/Button';\r\n\r\nimport { FaFolderOpen as IconFolderOpened } from 'react-icons/fa';\r\nimport { FaFolder as IconFolder } from 'react-icons/fa';\r\nimport { TiLightbulb as IconTypeLight } from 'react-icons/ti'\r\nimport { TiLightbulb as IconTypeDimmer } from 'react-icons/ti'\r\nimport { TiLightbulb as IconTypeSwitch } from 'react-icons/ti'\r\nimport { FaQuestion as IconTypeGeneric } from 'react-icons/fa'\r\nimport { MdExpandMore as IconCollapse } from 'react-icons/md';\r\nimport { MdKeyboardArrowRight as IconExpand } from 'react-icons/md';\r\nimport { MdCheck as IconOK } from 'react-icons/md';\r\nimport { MdCancel as IconCancel } from 'react-icons/md';\r\nimport CreateNewFolderIcon from '@material-ui/icons/CreateNewFolder';\r\n\r\nimport I18n from '@iobroker/adapter-react/i18n';\r\nimport Utils from '@iobroker/adapter-react/Components/Utils';\r\nimport { Paper, Tooltip } from '@material-ui/core';\r\nimport clsx from 'clsx';\r\nimport Icon from '@iobroker/adapter-react/Components/Icon';\r\n\r\nconst LEVEL_OFFSET = 14;\r\n\r\nconst styles = theme => ({\r\n    expandButton: {\r\n        width: 37,\r\n        height: 37\r\n    },\r\n    addButton: {\r\n        marginBottom: 5,\r\n    },\r\n    list: {\r\n        maxHeight: 400,\r\n        overflowY: 'auto',\r\n        //background: theme.palette.type === 'dark' ? '#6a6a6a' : '#e2e2e2',\r\n    },\r\n    selected: {\r\n        //color: theme.palette.action.selected\r\n    },\r\n    folder: {\r\n        //background: theme.palette.type === 'dark' ? '#6a6a6a' : '#e2e2e2',\r\n        cursor: 'pointer',\r\n        paddingTop: 0,\r\n        paddingBottom: 0,\r\n        paddingLeft: 1,\r\n        paddingRight: 0,\r\n        userSelect: 'none'\r\n    },\r\n    element: {\r\n        cursor: 'pointer',\r\n        padding: 0,\r\n        userSelect: 'none'\r\n    },\r\n    itemIcon: {\r\n        width: 18,\r\n        height: 18,\r\n        borderRadius: 2\r\n    },\r\n    dialogNewForm: {\r\n        width: 'calc(100% - 30px)',\r\n        padding: 10\r\n    },\r\n    dialogNewInput: {\r\n        width: '100%',\r\n    },\r\n    dialogNew: {\r\n        minWidth: 200,\r\n    },\r\n    childrenCount: {\r\n        fontSize: 'smaller',\r\n        opacity: 0.8,\r\n    },\r\n    wrapperFoldersBlock: {\r\n        padding: 10,\r\n        height: 'calc(100% - 20px)'\r\n    },\r\n    iconStyle: {\r\n        minWidth: 25\r\n    },\r\n    buttonWrapper: {\r\n        display: 'flex',\r\n        top: 0,\r\n        background: theme.palette.type === 'light' ? '#0000000d' : '#ffffff12',\r\n        marginBottom: 5\r\n    },\r\n    iconCommon: {\r\n        marginRight: 5,\r\n        width: 15,\r\n        height: 15\r\n    },\r\n    fontStyle: {\r\n        fontSize: 14,\r\n        fontFamily: '\"Roboto\", \"Helvetica\", \"Arial\", sans-serif',\r\n        lineHeight: 1.5,\r\n        fontWeight: 600,\r\n        overflow: 'hidden',\r\n        textOverflow: 'ellipsis',\r\n        paddingRight: '30px !important'\r\n    },\r\n    addNewFolderTitle: {\r\n        whiteSpace: 'nowrap',\r\n        overflow: 'hidden',\r\n        textOverflow: 'ellipsis',\r\n        '& h2': {\r\n            whiteSpace: 'nowrap',\r\n            overflow: 'hidden',\r\n            textOverflow: 'ellipsis',\r\n        }\r\n    },\r\n    displayFlex: {\r\n        display: 'flex',\r\n        flexDirection: 'column'\r\n    }\r\n});\r\n\r\nconst prepareList = (data, root) => {\r\n    const result = [];\r\n    const ids = Object.keys(data);\r\n    root = root || '';\r\n\r\n    // place common and global scripts at the end\r\n    ids.sort((a, b) => {\r\n        if ((a === 'script.js.common' || a === 'script.js.global') && (b === 'script.js.common' || b === 'script.js.global')) {\r\n            return a > b ? 1 : -1;\r\n        } else if (a === 'script.js.common' || a === 'script.js.global' || b === 'script.js.common' || b === 'script.js.global') {\r\n            return 1;\r\n        } else {\r\n            return a > b ? 1 : -1;\r\n        }\r\n    });\r\n\r\n    for (let i = 0; i < ids.length; i++) {\r\n        const obj = data[ids[i]];\r\n        const parts = ids[i].split('.');\r\n        parts.pop();\r\n        result.push({\r\n            id: ids[i],\r\n            title: Utils.getObjectName(data, ids[i], { language: I18n.getLanguage() }),\r\n            icon: obj.common.icon || null,\r\n            color: obj.common.color || null,\r\n            depth: parts.length - 1,\r\n            type: obj.type,\r\n            parent: parts.length > 2 ? parts.join('.') : null,\r\n            instance: obj.common.engine ? parseInt(obj.common.engine.split('.').pop(), 10) || 0 : null\r\n        });\r\n    }\r\n\r\n    // Place all folder-less items at start\r\n    result.sort((a, b) => {\r\n        // without folders => always at start\r\n        if (!a.parent && a.type !== 'folder' && !b.parent && b.type !== 'folder') {\r\n            if (a.id === b.id) return 0;\r\n            return a.id > b.id ? 1 : -1;\r\n        } else if (!a.parent && a.type !== 'folder') {\r\n            return -1;\r\n        } else if (!b.parent && b.type !== 'folder') {\r\n            return 1;\r\n        } else {\r\n            // common and global are always at the end\r\n            if ((a.id.startsWith('script.js.common') || a.id.startsWith('script.js.global')) &&\r\n                (b.id.startsWith('script.js.common') || b.id.startsWith('script.js.global'))) {\r\n                if (a.id === b.id) return 0;\r\n                return a.id > b.id ? 1 : -1;\r\n            } else if (a.id.startsWith('script.js.common') || a.id.startsWith('script.js.global')) {\r\n                return 1;\r\n            } else if (b.id.startsWith('script.js.common') || b.id.startsWith('script.js.global')) {\r\n                return -1;\r\n            } else {\r\n                if (a.id === b.id) return 0;\r\n                return a.id > b.id ? 1 : -1;\r\n            }\r\n        }\r\n    });\r\n\r\n    // Fill all index\r\n    result.forEach((item, i) => item.index = i);\r\n\r\n    let modified;\r\n    const regEx = new RegExp('^' + root.replace(/\\./g, '\\\\.'));\r\n    do {\r\n        modified = false;\r\n        // check if all parents exists\r\n\r\n        // eslint-disable-next-line no-loop-func\r\n        result.forEach(item => {\r\n            if (item.parent) {\r\n                const parent = result.find(it => it.id === item.parent);\r\n                if (!parent) {\r\n                    const parts = item.parent.split('.');\r\n                    parts.pop();\r\n                    result.push({\r\n                        id: item.parent,\r\n                        title: root ? item.parent.replace(regEx, '') : item.parent,\r\n                        depth: parts.length - 1,\r\n                        type: 'folder',\r\n                        parent: parts.length >= 2 ? parts.join('.') : null\r\n                    });\r\n                    modified = true;\r\n                }\r\n            }\r\n        });\r\n    } while (modified);\r\n\r\n    // Fill all parentIndex\r\n    result.forEach(item => {\r\n        if (item.parent) {\r\n            const parent = result.find(it => it.id === item.parent);\r\n            if (parent) {\r\n                item.parentIndex = parent.index;\r\n            }\r\n        }\r\n    });\r\n\r\n    return result;\r\n};\r\n\r\nconst images = {\r\n    'dimmer': IconTypeDimmer,\r\n    'light': IconTypeLight,\r\n    'socket': IconTypeSwitch,\r\n    def: IconTypeGeneric,\r\n};\r\n\r\nclass TreeView extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        let expanded = window.localStorage ? window.localStorage.getItem('TreeView.expanded') : '';\r\n        try {\r\n            expanded = expanded ? JSON.parse(expanded) || null : null;\r\n        } catch (e) {\r\n            expanded = null;\r\n        }\r\n        const listItems = prepareList(props.objects || {});\r\n\r\n        if (expanded === null) {\r\n            expanded = [];\r\n            listItems.forEach(item =>\r\n                expanded.includes(item.parent) && expanded.push(item.parent));\r\n        }\r\n\r\n        this.state = {\r\n            listItems,\r\n            expanded,\r\n            theme: this.props.theme,\r\n            selected: this.props.selected || (listItems[0] && listItems[0].id) || '',\r\n            renaming: null,\r\n            deleting: null,\r\n            errorText: '',\r\n            width: this.props.width || 300,\r\n            filterMenuOpened: false,\r\n            addNew: false,\r\n            addNewName: '',\r\n            typeFilter: window.localStorage ? window.localStorage.getItem('TreeView.typeFilter') || '' : '', // lamp, window, ...\r\n            searchText: window.localStorage ? window.localStorage.getItem('TreeView.searchText') || '' : '',\r\n        };\r\n\r\n        this.theme = this.props.theme || 'light';\r\n\r\n        const newExp = this.ensureSelectedIsVisible();\r\n        if (newExp) {\r\n            this.state.expanded = newExp;\r\n        }\r\n        // debounce search process\r\n        this.filterTimer = null;\r\n        // setTimeout(() => this.props.onSelect && this.props.onSelect(this.state.selected), 200);\r\n    }\r\n\r\n    handleOk() {\r\n        this.props.onClose && this.props.onClose();\r\n    };\r\n\r\n    static getDerivedStateFromProps(props, state) {\r\n        let changed = false;\r\n        const newState = {};\r\n        if (props.objects) {\r\n            const listItems = prepareList(props.objects || {});\r\n            if (JSON.stringify(listItems) !== JSON.stringify(state.listItems)) {\r\n                state.listItems = listItems;\r\n                changed = true;\r\n            }\r\n        }\r\n\r\n        return changed ? newState : null;\r\n    }\r\n\r\n    componentDidUpdate(prevProps) {\r\n        if (prevProps.selected !== this.props.selected) {\r\n            this.setState({ selected: this.props.selected });\r\n        }\r\n    }\r\n\r\n    generateId = () => {\r\n        if (!this.state.addNewName) {\r\n            return true;\r\n        }\r\n        let parts = `${this.state.selected}.${this.state.addNewName.replace(Utils.FORBIDDEN_CHARS, '_').replace(/\\s/g, '_').replace(/\\./g, '_')}`;\r\n        return parts;\r\n\r\n    }\r\n\r\n    renderNewItemDialog() {\r\n        // const id = this.state.addNew ? `${this.state.addNew.id}.${this.state.addNewName.replace(FORBIDDEN_CHARS, '_').replace(/\\s/g, '_').replace(/\\./g, '_')}` : null;\r\n        const error = this.generateId() === true ? true : this.props.objects[this.generateId()];\r\n        return (\r\n            <Dialog\r\n                key=\"newDialog\" onClose={() => this.setState({ addNew: null })} open={!!this.state.addNew} className={this.props.classes.dialogNew}>\r\n                <DialogTitle className={this.props.classes.addNewFolderTitle} >{I18n.t('Add new folder to \"%s\"', this.state.addNew && this.state.addNew.title)}</DialogTitle>\r\n                <form className={this.props.classes.dialogNewForm} noValidate autoComplete=\"off\">\r\n                    <TextField\r\n                        onKeyPress={async ev => {\r\n                            if (ev.key === 'Enter') {\r\n                                ev.preventDefault();\r\n                                ev.stopPropagation();\r\n\r\n                                if (this.state.addNewName) {\r\n                                    const id = this.state.selected;\r\n                                    await this.props.onAddNew(this.state.addNewName, this.state.addNew.id);\r\n                                    this.toggleExpanded(id, true);\r\n                                    this.setState({ addNew: null, addNewName: '' });\r\n                                } else {\r\n                                    this.setState({ addNew: null, addNewName: '' });\r\n                                }\r\n                            }\r\n                        }}\r\n                        error={!!error}\r\n                        className={this.props.classes.dialogNewInput} autoFocus\r\n                        label={I18n.t('Folder name')}\r\n                        value={this.state.addNewName}\r\n                        onChange={e => this.setState({ addNewName: e.target.value })} />\r\n                </form>\r\n                <DialogActions>\r\n                    <Button\r\n                        variant=\"contained\"\r\n                        disabled={!!error}\r\n                        onClick={async () => {\r\n                            const id = this.state.selected;\r\n                            await this.props.onAddNew(this.state.addNewName, this.state.addNew.id);\r\n                            this.toggleExpanded(id, true);\r\n                            this.setState({ addNew: null, addNewName: '' });\r\n                        }}\r\n                        startIcon={<IconOK />}\r\n                        color=\"primary\"\r\n                    >{I18n.t('Add')}</Button>\r\n                    <Button\r\n                        variant=\"contained\"\r\n                        onClick={() => this.setState({ addNew: null, addNewName: '' })}\r\n                        startIcon={<IconCancel />}\r\n                    >{I18n.t('Cancel')}</Button>\r\n                </DialogActions>\r\n            </Dialog>);\r\n    }\r\n\r\n    ensureSelectedIsVisible(selected, expanded) {\r\n        expanded = JSON.parse(JSON.stringify(expanded || this.state.expanded));\r\n        selected = selected || this.state.selected;\r\n        let changed = false;\r\n        // ensure that the item is visible\r\n        let el = typeof selected === 'object' ? selected : this.state.listItems.find(it => it.id === selected);\r\n        do {\r\n            // eslint-disable-next-line\r\n            el = el && el.parent && this.state.listItems.find(it => it.id === el.parent);\r\n            if (el) {\r\n                if (!expanded.includes(el.id)) {\r\n                    expanded.push(el.id);\r\n                    changed = true;\r\n                }\r\n            }\r\n        } while (el);\r\n        return changed && expanded;\r\n    }\r\n\r\n    onCollapseAll() {\r\n        this.setState({ expanded: [] });\r\n        this.saveExpanded([]);\r\n    }\r\n\r\n    onExpandAll() {\r\n        const expanded = [];\r\n        this.state.listItems.forEach(item => {\r\n            if (this.state.listItems.find(it => it.parent === item.id)) {\r\n                expanded.push(item.id);\r\n            }\r\n        });\r\n        this.setState({ expanded });\r\n        this.saveExpanded(expanded);\r\n    }\r\n\r\n    saveExpanded(expanded) {\r\n        window.localStorage.setItem('TreeView.expanded', JSON.stringify(expanded || this.state.expanded));\r\n    }\r\n\r\n    toggleExpanded(id, onlyOpen) {\r\n        if(this.props.disabled){\r\n            return;\r\n        }\r\n        const expanded = this.state.expanded.slice();\r\n        const pos = expanded.indexOf(id);\r\n        if (pos === -1) {\r\n            expanded.push(id);\r\n            expanded.sort();\r\n        } else {\r\n            if (!onlyOpen) {\r\n                expanded.splice(pos, 1);\r\n            }\r\n        }\r\n\r\n        this.setState({ expanded });\r\n        this.saveExpanded(expanded);\r\n    }\r\n\r\n    isFilteredOut(item) {\r\n        return false;\r\n    }\r\n\r\n    getTextStyle(item) {\r\n        if (item.type !== 'folder') {\r\n            return {\r\n                //width: 130,\r\n                width: `calc(100% - ${this.state.width > 350 ? 210 : 165}px)`,\r\n                overflow: 'hidden',\r\n                whiteSpace: 'nowrap',\r\n                flex: 'none',\r\n                padding: '0 16px 0 0'\r\n            };\r\n        } else {\r\n            const style = {\r\n                whiteSpace: 'nowrap',\r\n                padding: '0 16px 0 0'\r\n            };\r\n\r\n            if (item.id === this.state.selected) {\r\n                style.fontWeight = 'bold'\r\n            }\r\n\r\n            return style;\r\n        }\r\n    }\r\n\r\n    renderFolderButtons(item, children, isExpanded) {\r\n        if (children && children.length) {\r\n            return <IconButton\r\n                className={this.props.classes.expandButton}\r\n                onClick={isExpanded ? e => this.onCollapse(item.id, e) : e => this.onExpand(item.id, e)}>\r\n                {isExpanded ? <IconCollapse fontSize=\"small\" /> : <IconExpand fontSize=\"small\" />}\r\n            </IconButton>;\r\n        } else {\r\n            return <div className={this.props.classes.expandButton} />;\r\n        }\r\n    }\r\n\r\n    onClick(item, e) {\r\n        if (this.props.disabled) {\r\n            return\r\n        }\r\n        // window.localStorage.setItem('TreeView.selected', item.id);\r\n        this.setState({ selected: item.id });\r\n        this.props.onSelect && this.props.onSelect(item.id);\r\n    }\r\n\r\n    renderOneItem(items, item) {\r\n        let childrenFiltered = (this.state.searchText || this.state.typeFilter) && items.filter(i => i.parent === item.id ? !this.isFilteredOut(i) : false);\r\n        let children = items.filter(i => i.parent === item.id);\r\n\r\n        if (this.isFilteredOut(item)) {\r\n            return;\r\n        }\r\n\r\n        if (item.type === 'folder' && (this.state.searchText || this.state.typeFilter) && !childrenFiltered.length) {\r\n            return;\r\n        }\r\n\r\n        const depthPx = item.depth * LEVEL_OFFSET + 10;\r\n\r\n        let title = item.title;\r\n\r\n        if (this.state.searchText) {\r\n            const pos = title.toLowerCase().indexOf(this.state.searchText.toLowerCase());\r\n            if (pos !== -1) {\r\n                title = [\r\n                    <span key=\"first\">{title.substring(0, pos)}</span>,\r\n                    <span key=\"second\" style={{ color: 'orange' }}>{title.substring(pos, pos + this.state.searchText.length)}</span>,\r\n                    <span key=\"third\">{title.substring(pos + this.state.searchText.length)}</span>,\r\n                ];\r\n            }\r\n        }\r\n\r\n        const style = Object.assign({\r\n            paddingLeft: depthPx,\r\n            borderRadius: 3,\r\n            cursor: item.type === 'folder' && this.state.reorder ? 'default' : 'pointer',\r\n            opacity: item.filteredPartly ? 0.5 : 1,\r\n        }, item.id === this.state.selected ? { background: this.props.theme.palette.secondary.dark, color: '#FFF' } : {});\r\n\r\n        let isExpanded = false;\r\n        if (children && children.length) {\r\n            isExpanded = this.state.expanded.includes(item.id);\r\n        }\r\n\r\n        let iconStyle = {};\r\n        let countSpan = (childrenFiltered && childrenFiltered.length) || children.length ?\r\n            <span className={this.props.classes.childrenCount}>{childrenFiltered && childrenFiltered.length !== children.length ?\r\n                `${childrenFiltered.length}(${children.length})` :\r\n                children.length}</span>\r\n            : null;\r\n\r\n        if (!countSpan) {\r\n            iconStyle.opacity = 0.5;\r\n        }\r\n        if (item.id === this.state.selected) {\r\n            iconStyle.opacity = 1;\r\n        }\r\n        iconStyle.color = \"#448dde\";\r\n\r\n        if (item.color) {\r\n            iconStyle.color = item.color;\r\n        }\r\n\r\n        const inner = <ListItem\r\n            key={item.id}\r\n            style={style}\r\n            onDoubleClick={() => this.toggleExpanded(item.id)}\r\n            className={Utils.clsx(item.type === 'folder' ? this.props.classes.folder : this.props.classes.element, this.state.reorder && this.props.classes.reorder)}\r\n            onClick={e => this.onClick(item, e)}\r\n        >\r\n            <ListItemIcon className={this.props.classes.iconStyle}>{item.type === 'folder' ?\r\n                (isExpanded ?\r\n                    <IconFolderOpened onClick={() => this.toggleExpanded(item.id)} style={iconStyle} /> :\r\n                    <IconFolder onClick={() => this.toggleExpanded(item.id)} style={iconStyle} />)\r\n                :\r\n                <Icon className={this.props.classes.itemIcon} alt={item.type} src={images[item.type] || images.def} />\r\n            }</ListItemIcon>\r\n            {item.icon && <Icon className={this.props.classes.iconCommon} alt={item.type} src={item.icon} />}\r\n            <div\r\n                style={this.getTextStyle(item)}\r\n                className={clsx(item.id === this.state.selected && this.props.classes.selected, this.props.classes.fontStyle)}\r\n\r\n            >{title}</div>\r\n            <ListItemSecondaryAction style={{ color: item.id === this.state.selected ? 'white' : 'inherit' }}>{countSpan}</ListItemSecondaryAction>\r\n        </ListItem>;\r\n\r\n        const result = [inner];\r\n\r\n        if (isExpanded) {\r\n            children.forEach(it => result.push(this.renderOneItem(items, it)));\r\n        }\r\n        return result;\r\n    }\r\n\r\n    renderAllItems(items, dragging) {\r\n        const result = [];\r\n        items.forEach(item => !item.parent && result.push(this.renderOneItem(items, item, dragging)));\r\n\r\n        return <List key=\"list\" dense={true} disablePadding={true} className={this.props.classes.list}>{result}</List>;\r\n    }\r\n\r\n    renderAddButton() {\r\n\r\n        return <Paper className={this.props.classes.buttonWrapper} position=\"sticky\" color=\"default\">\r\n            {this.props.onAddNew && <Tooltip title={I18n.t('Create new folder')}>\r\n                <div>\r\n                    <IconButton\r\n                        color=\"primary\"\r\n                        disabled={this.props.disabled}\r\n                        onClick={() => this.setState({ addNew: this.state.listItems.find(it => it.id === this.state.selected) })}>\r\n                        <CreateNewFolderIcon />\r\n                    </IconButton>\r\n                </div>\r\n            </Tooltip>}\r\n            <Tooltip title={I18n.t('Expand all nodes')}>\r\n                <div>\r\n                    <IconButton\r\n                        color=\"primary\"\r\n                        disabled={this.props.disabled}\r\n                        onClick={() => this.onExpandAll()}>\r\n                        <IconFolderOpened />\r\n                    </IconButton>\r\n                </div>\r\n            </Tooltip>\r\n            <Tooltip title={I18n.t('Collapse all nodes')}>\r\n                <div>\r\n                    <IconButton\r\n                        color=\"primary\"\r\n                        disabled={this.props.disabled}\r\n                        onClick={() => this.onCollapseAll()}>\r\n                        <IconFolder />\r\n                    </IconButton>\r\n                </div>\r\n            </Tooltip>\r\n        </Paper>;\r\n    }\r\n\r\n    renderTree() {\r\n        return this.renderAllItems(this.state.listItems);\r\n    }\r\n\r\n    render() {\r\n        return <Paper className={clsx(this.props.classes.wrapperFoldersBlock, this.props.displayFlex && this.props.classes.displayFlex)}>\r\n            {this.renderAddButton()}\r\n            {this.renderTree()}\r\n            {this.renderNewItemDialog()}\r\n        </Paper>;\r\n    }\r\n}\r\n\r\nTreeView.propTypes = {\r\n    objects: PropTypes.object,\r\n    onSelect: PropTypes.func,\r\n    selected: PropTypes.string,\r\n    theme: PropTypes.object,\r\n    themeType: PropTypes.string,\r\n    root: PropTypes.string,\r\n    onAddNew: PropTypes.func,\r\n    disabled: PropTypes.bool\r\n};\r\n\r\nexport default withStyles(styles)(TreeView);\r\n","import React, { useEffect, useState } from 'react';\r\nimport clsx from 'clsx';\r\n\r\nimport Button from '@material-ui/core/Button';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogActions from '@material-ui/core/DialogActions';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport {\r\n    Checkbox,\r\n    DialogTitle, FormControl, FormControlLabel, IconButton, InputLabel, LinearProgress, makeStyles,\r\n    MenuItem,\r\n    Select,\r\n    TextField,\r\n    ThemeProvider,\r\n    Tooltip\r\n} from '@material-ui/core';\r\n\r\nimport { MdModeEdit as IconEdit } from 'react-icons/md';\r\nimport IconClose from '@material-ui/icons/Close';\r\nimport IconCheck from '@material-ui/icons/Check';\r\n\r\nimport I18n from '@iobroker/adapter-react/i18n';\r\nimport theme from '@iobroker/adapter-react/Theme';\r\nimport Utils from '@iobroker/adapter-react/Components/Utils';\r\nimport Icon from '@iobroker/adapter-react/Components/Icon';\r\n\r\nimport TypeIcon from '../Components/TypeIcon';\r\nimport TreeView from '../Components/TreeView';\r\nimport { useStateLocal } from '../Components/helpers/hooks/useStateLocal';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    root: {\r\n        backgroundColor: theme.palette.background.paper,\r\n        width: '100%',\r\n        height: 'auto',\r\n        display: 'flex'\r\n    },\r\n    paper: {\r\n        maxWidth: 960,\r\n        maxHeight: 'calc(100% - 64px)',\r\n        width: '100%'\r\n    },\r\n    overflowHidden: {\r\n        display: 'flex',\r\n        overflow: 'hidden'\r\n    },\r\n    pre: {\r\n        overflow: 'auto',\r\n        whiteSpace: 'pre-wrap',\r\n        margin: 0\r\n    },\r\n    divOids: {\r\n        display: 'flex',\r\n        width: '100%',\r\n    },\r\n    divOidField: {\r\n        width: '100%',\r\n        display: 'block',\r\n        paddingTop: 7,\r\n        paddingBottom: 7,\r\n    },\r\n\r\n    oidName: {\r\n        fontSize: 14,\r\n        fontWeight: 'bold'\r\n    },\r\n    flex: {\r\n        flex: 1,\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        overflow: 'hidden'\r\n    },\r\n    type: {\r\n        width: '100%',\r\n    },\r\n    deviceWrapper: {\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        padding: 4,\r\n        margin: '2px 10px',\r\n        '&:hover': {\r\n            background: '#6969694f',\r\n            borderRadius: 4\r\n        }\r\n    },\r\n    fontStyle: {\r\n        padding: '0px 8px',\r\n        overflow: 'hidden',\r\n        fontWeight: 'bold',\r\n        whiteSpace: 'nowrap',\r\n        textOverflow: 'ellipsis'\r\n    },\r\n    fontStyleId: {\r\n        padding: '0px 8px',\r\n        overflow: 'hidden',\r\n        fontWeight: 'bold',\r\n        whiteSpace: 'nowrap',\r\n        textOverflow: 'ellipsis',\r\n        opacity: 0.6,\r\n        fontSize: 9,\r\n        fontStyle: 'italic'\r\n    },\r\n    wrapperTitleAndId: {\r\n        alignSelf: 'center',\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        width: '100%',\r\n        overflow: 'hidden'\r\n    },\r\n    tableIcon: {\r\n        margin: 'auto 0'\r\n    },\r\n    tableIconImg: {\r\n        width: 20,\r\n        height: 20\r\n    },\r\n    header: {\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        background: '#00000057',\r\n        margin: 10,\r\n        padding: 4,\r\n        borderRadius: 4,\r\n        marginBottom: 10\r\n    },\r\n    wrapperDevices: {\r\n        margin: '0 10px'\r\n    },\r\n    wrapperItems: {\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        overflow: 'auto'\r\n    },\r\n    wrapperCloning: {\r\n        backgroundColor: '#FFFFFF10',\r\n        borderRadius: 3,\r\n        flex: 2\r\n    },\r\n    wrapperNameAndId: {\r\n        display: 'flex',\r\n        justifyContent: 'space-between',\r\n        width: '100%'\r\n    },\r\n    wrapperCheckbox: {\r\n        display: 'flex',\r\n        width: '100%'\r\n    },\r\n    enumsWrapper: {\r\n        display: 'flex',\r\n        paddingLeft: 60,\r\n        overflow: 'hidden'\r\n    },\r\n    wrapperIconEnumCell: {\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n        margin: '0 4px'\r\n    },\r\n    enumIcon: {\r\n        width: 20,\r\n        height: 20\r\n    },\r\n    nameEnumCell: {\r\n        fontSize: 10,\r\n        opacity: 0.7,\r\n        marginLeft: 4\r\n    },\r\n    backgroundRed: {\r\n        background: '#ff000029',\r\n        borderRadius: 4\r\n    },\r\n    dialogNewForm: {\r\n        margin: 10\r\n    },\r\n    emptyList: {\r\n        display: 'flex',\r\n        margin: 10,\r\n        padding: '0 10px',\r\n        opacity: 0.7,\r\n        fontWeight: 'bold'\r\n    },\r\n    enumsStyle: {\r\n        color: '#448dde',\r\n        opacity: 1\r\n    },\r\n    formControlLabel: {\r\n        marginLeft: 0,\r\n        opacity: 0.6\r\n    },\r\n    headerWrapElement: {\r\n        display: 'flex'\r\n    },\r\n    backgroundSilver: {\r\n        opacity: 0.5\r\n    },\r\n    startTheProcess: {\r\n        opacity: 0.5\r\n    },\r\n    '@media screen and (max-width: 650px)': {\r\n        divOids: {\r\n            flexDirection: 'column'\r\n        },\r\n        wrapperDevices: {\r\n            height: 200,\r\n            width: '100%',\r\n            display: 'block',\r\n            flex: 'auto',\r\n            margin: '10px 0'\r\n        },\r\n        overflowHidden: {\r\n            overflowY: 'auto',\r\n            padding: 10\r\n        },\r\n        wrapperCloning:{\r\n            flex: 'auto',\r\n            overflow: 'auto'\r\n        },\r\n        flex:{\r\n            overflow: 'initial'\r\n        },\r\n        formControlLabel:{\r\n            '& span':{\r\n                fontSize:10,\r\n            }\r\n        },\r\n        header:{\r\n            margin: 0\r\n        },\r\n        deviceWrapper:{\r\n            margin:'2px 0'\r\n        },\r\n        fontStyle:{\r\n            fontSize:10,\r\n        },\r\n        fontStyleId:{\r\n            fontSize:8,\r\n        },\r\n        nameEnumCell:{\r\n            fontSize: 7,\r\n            marginLeft: 2\r\n        }\r\n    }\r\n}));\r\n\r\nconst RenderNewItemDialog = ({ classes, object, onClose, open, checkDeviceInObjects }) => {\r\n    const [name, setName] = useState(object.title);\r\n    const error = !name || (object && checkDeviceInObjects(name, object.id));\r\n\r\n    useEffect(() => {\r\n        if (object && name !== object.title) {\r\n            setName(object.title)\r\n        }\r\n        // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, [object]);\r\n\r\n    return <Dialog\r\n        key=\"newDialog\"\r\n        onClose={() => onClose()}\r\n        open={open}>\r\n        <DialogTitle className={classes.addNewFolderTitle} >{I18n.t('Edit name \"%s\"', name)}</DialogTitle>\r\n        <form className={classes.dialogNewForm} autoComplete=\"off\">\r\n            <TextField\r\n                onKeyPress={(ev) => {\r\n                    if (ev.key === 'Enter') {\r\n                        ev.preventDefault();\r\n\r\n                        if (name && !error) {\r\n                            onClose(name);\r\n                        } else {\r\n                            onClose();\r\n                        }\r\n                    }\r\n                }}\r\n                error={!!error}\r\n                className={classes.dialogNewInput}\r\n                autoFocus\r\n                fullWidth\r\n                label={I18n.t('Name')}\r\n                value={name}\r\n                onChange={e => setName(e.target.value)} />\r\n        </form>\r\n        <DialogActions>\r\n            <Button\r\n                variant=\"contained\"\r\n                disabled={!!error || object.title === name}\r\n                onClick={() => onClose(name)}\r\n                startIcon={<IconCheck />}\r\n                color=\"primary\">{I18n.t('Apply')}</Button>\r\n            <Button\r\n                variant=\"contained\"\r\n                onClick={() => onClose()}\r\n                startIcon={<IconClose />}\r\n            >{I18n.t('Cancel')}</Button>\r\n        </DialogActions>\r\n    </Dialog>;\r\n}\r\n\r\nconst DialogImporter = ({\r\n    onClose,\r\n    item,\r\n    socket,\r\n    devices,\r\n    objects,\r\n    listItems,\r\n    onCopyDevice\r\n}) => {\r\n    const classes = useStyles();\r\n    const [arrayDevice, setArrayDevice] = useState([]);\r\n    const [cloningMethod, setCloningMethod] = useStateLocal('flat', 'importer.cloningMethod');\r\n    const [idsFolder, setSdsFolder] = useState([]);\r\n    const [selectFolder, setSelectFolder] = useState('alias.0');\r\n    const [checkedSelect, setCheckedSelect] = useState([]);\r\n    const [openEdit, setOpenEdit] = useState(false);\r\n    const [skipElement, setSkipElement] = useState(true);\r\n    const [startTheProcess, setStartTheProcess] = useState(false);\r\n\r\n    useEffect(() => {\r\n        const ids = [];\r\n        const getParentId = id => {\r\n            const pos = id.lastIndexOf('.');\r\n            if (pos !== -1) {\r\n                return id.substring(0, pos);\r\n            } else {\r\n                return '';\r\n            }\r\n        };\r\n\r\n        const getLastPart = (id) => {\r\n            const pos = id.lastIndexOf('.');\r\n            if (pos !== -1) {\r\n                return id.substring(pos + 1);\r\n            } else {\r\n                return id;\r\n            }\r\n        };\r\n\r\n        const prefix = 'alias.0';\r\n        Object.keys(objects).forEach(id => {\r\n            if (id.startsWith(prefix) &&\r\n                objects[id] &&\r\n                objects[id].common &&\r\n                (objects[id].type === 'channel' || objects[id].type === 'device' || objects[id].type === 'folder')) {\r\n                let parentId;\r\n                // getParentId\r\n                if (objects[id].type === 'folder') {\r\n                    parentId = id;\r\n                } else {\r\n                    parentId = getParentId(id);\r\n                }\r\n\r\n                if (parentId && !ids.includes(parentId)) {\r\n                    ids.push(parentId);\r\n                }\r\n            }\r\n        });\r\n\r\n        const stateIds = {};\r\n        const language = I18n.getLanguage();\r\n        ids.forEach(id => stateIds[id] = {\r\n            common: {\r\n                name: objects[id] && objects[id].type === 'folder' ? Utils.getObjectName(objects, id, { language }) : getLastPart(id),\r\n                nondeletable: true,\r\n                color: objects[id]?.common && objects[id].common.color ? objects[id].common.color : null,\r\n                icon: objects[id]?.common && objects[id].common.icon ? objects[id].common.icon : null\r\n            },\r\n            type: 'folder'\r\n        });\r\n\r\n        stateIds[prefix] = {\r\n            common: {\r\n                name: I18n.t('Root'),\r\n                nondeletable: true\r\n            },\r\n            type: 'folder'\r\n        };\r\n\r\n        setSdsFolder(stateIds);\r\n    }, [objects, listItems]);\r\n\r\n    useEffect(() => {\r\n        const originalIds = listItems.filter(el => el?.obj?.native?.originalId).map(el => el.obj.native.originalId)\r\n\r\n        const newArray = listItems.filter(device => device.parent === item.id && !originalIds.includes(device.id));\r\n        setArrayDevice(newArray);\r\n        const selectId = newArray.map(device => device.id);\r\n        setCheckedSelect(selectId);\r\n    }, [item.id, item.parent, listItems]);\r\n\r\n    const addNewFolder = async (dataFolder, id) => {\r\n        const obj = {\r\n            _id: id,\r\n            common: {\r\n                name: dataFolder.objName ? dataFolder.objName : { [I18n.getLanguage()]: dataFolder.name },\r\n                color: dataFolder.color,\r\n                icon: dataFolder.icon\r\n            },\r\n            native: {},\r\n            type: 'folder'\r\n        };\r\n\r\n        await socket.setObject(id, obj);\r\n    };\r\n\r\n    const addDevice = async (id, el) => {\r\n        const newId = `${id}.${el.title.replace(Utils.FORBIDDEN_CHARS, '_').replace(/\\s/g, '_').replace(/\\./g, '_')}`\r\n        await onCopyDevice(el.id, newId);\r\n    };\r\n\r\n    const arrayDeviceFunction = async () => {\r\n        for (let s = 0; s < arrayDevice.length; s++) {\r\n            const el = arrayDevice[s];\r\n            if (checkedSelect.indexOf(el.id) === -1 ||\r\n                checkDeviceInObjects(el.title, el.id) ||\r\n                checkEnumsScip(el.id)\r\n            ) {\r\n                continue;\r\n            }\r\n            let newId = `${selectFolder}`;\r\n            const device = devices.find(device => el.id === device.channelId);\r\n\r\n            if (cloningMethod === 'rooms') {\r\n                if (device.rooms.length) {\r\n                    newId = `${newId}.${device.rooms[0].replace('enum.rooms.', '')}`;\r\n                    if (!objects[newId]) {\r\n                        const newObjFolder = objects[device.rooms[0]];\r\n                        await addNewFolder({\r\n                            objName: newObjFolder.common.name,\r\n                            color: newObjFolder.common.color,\r\n                            icon: newObjFolder.common.icon\r\n                        }, newId);\r\n                        await addDevice(newId, el);\r\n                        continue;\r\n                    }\r\n                }\r\n            } else if (cloningMethod === 'functions') {\r\n                if (device.functions.length) {\r\n                    newId = `${newId}.${device.functions[0].replace('enum.functions.', '')}`;\r\n                    if (!objects[newId]) {\r\n                        const newObjFolder = objects[device.functions[0]];\r\n                        await addNewFolder({\r\n                            objName: newObjFolder.common.name,\r\n                            color: newObjFolder.common.color,\r\n                            icon: newObjFolder.common.icon\r\n                        }, newId);\r\n                        await addDevice(newId, el);\r\n                        continue;\r\n                    }\r\n                }\r\n            }\r\n            await addDevice(newId, el);\r\n        }\r\n    };\r\n\r\n    const onChangeCopy = async () => {\r\n        if (!objects[selectFolder] && selectFolder !== 'alias.0') {\r\n            let parts = selectFolder.split('.');\r\n            parts = parts.pop();\r\n            await addNewFolder({\r\n                name: parts.replace(Utils.FORBIDDEN_CHARS, '_').replace(/\\s/g, '_').replace(/\\./g, '_'),\r\n                color: null,\r\n                icon: null\r\n            }, selectFolder);\r\n        }\r\n        await arrayDeviceFunction();\r\n    };\r\n\r\n    const generateFolders = () => {\r\n        switch (cloningMethod) {\r\n            case 'flat':\r\n                return '';\r\n            case 'rooms':\r\n                return `.{${I18n.t('rooms')}}`;\r\n            case 'functions':\r\n                return `.{${I18n.t('functions')}}`;\r\n            default:\r\n                return '';\r\n        }\r\n    };\r\n\r\n    const renderEnumCell = (id, name) => {\r\n        const device = devices.find(device => id === device.channelId);\r\n        if (!device || (device && !device[name])) {\r\n            return null;\r\n        }\r\n        return device[name].map(id => ({\r\n            icon: Utils.getObjectIcon(id, objects[id]),\r\n            name: Utils.getObjectName(objects, id, { language: I18n.getLanguage() }),\r\n            id\r\n        })).map(obj => <div className={clsx(classes.wrapperIconEnumCell, name === 'rooms' && classes.enumsStyle)} key={obj.id}>\r\n            {obj.icon && <Icon className={classes.enumIcon} src={obj.icon} alt={obj.id} />}\r\n            <div className={classes.nameEnumCell}>{obj.name}</div>\r\n        </div>);\r\n    };\r\n\r\n    const checkDeviceInObjects = (name, id) => {\r\n        const device = devices.find(device => id === device.channelId);\r\n        let newId = `${selectFolder}.${name.replace(Utils.FORBIDDEN_CHARS, '_').replace(/\\s/g, '_').replace(/\\./g, '_')}`;\r\n        if (cloningMethod === 'rooms') {\r\n            if (device.rooms.length) {\r\n                newId = `${selectFolder}.${device.rooms[0].replace('enum.rooms.', '')}.${name.replace(Utils.FORBIDDEN_CHARS, '_').replace(/\\s/g, '_').replace(/\\./g, '_')}`;\r\n            }\r\n        } else if (cloningMethod === 'functions') {\r\n            if (device.functions.length) {\r\n                newId = `${selectFolder}.${device.functions[0].replace('enum.functions.', '')}.${name.replace(Utils.FORBIDDEN_CHARS, '_').replace(/\\s/g, '_').replace(/\\./g, '_')}`;\r\n            }\r\n        }\r\n        return !!objects[newId];\r\n    };\r\n\r\n    const checkEnumsScip = (id) => {\r\n        const device = devices.find(device => id === device.channelId);\r\n\r\n        if (cloningMethod === 'rooms' && skipElement) {\r\n            return !device.rooms.length;\r\n        } else if (cloningMethod === 'functions' && skipElement) {\r\n            return !device.functions.length;\r\n        } else {\r\n            return false;\r\n        }\r\n    };\r\n\r\n    return <ThemeProvider theme={theme(Utils.getThemeName())}>\r\n        <Dialog\r\n            onClose={() => onClose()}\r\n            open={true}\r\n            classes={{ paper: classes.paper }}\r\n        >\r\n            <DialogTitle>{I18n.t('Importer')} {item.title} → {selectFolder}{generateFolders()}</DialogTitle>\r\n            <DialogContent className={classes.overflowHidden} dividers>\r\n                <RenderNewItemDialog\r\n                    classes={classes}\r\n                    object={openEdit}\r\n                    checkDeviceInObjects={checkDeviceInObjects}\r\n                    onClose={name => {\r\n                        if (name) {\r\n                            const indexDevice = arrayDevice.indexOf(openEdit);\r\n                            if (indexDevice !== -1) {\r\n                                const newDevice = JSON.parse(JSON.stringify(openEdit));\r\n                                const newArrayDevice = JSON.parse(JSON.stringify(arrayDevice));\r\n                                newDevice.title = name;\r\n                                newArrayDevice[indexDevice] = newDevice;\r\n                                setArrayDevice(newArrayDevice);\r\n                            }\r\n                        }\r\n                        setOpenEdit(false);\r\n                    }}\r\n                    open={openEdit}\r\n                />\r\n                <div className={classes.divOids}>\r\n                    <div className={clsx(classes.flex, classes.wrapperDevices, startTheProcess && classes.startTheProcess)}>\r\n                        <TreeView\r\n                            themeType={Utils.getThemeType()}\r\n                            theme={theme(Utils.getThemeName())}\r\n                            objects={idsFolder}\r\n                            onAddNew={async (name, parentId) => await addNewFolder({ name, icon: null, color: null }, `${parentId}.${name.replace(Utils.FORBIDDEN_CHARS, '_').replace(/\\s/g, '_').replace(/\\./g, '_')}`)}\r\n                            onSelect={id => setSelectFolder(id)}\r\n                            selected={selectFolder}\r\n                            displayFlex\r\n                            disabled={startTheProcess}\r\n                        />\r\n                    </div>\r\n                    <div className={clsx(classes.flex, classes.wrapperCloning)}>\r\n                        {startTheProcess && <LinearProgress />}\r\n                        <div className={classes.header}>\r\n                            <div className={clsx(classes.headerWrapElement, startTheProcess && classes.startTheProcess)}>\r\n                                <Checkbox\r\n                                    disabled={!arrayDevice.length || startTheProcess}\r\n                                    checked={arrayDevice.length === checkedSelect.length || ((arrayDevice.length !== checkedSelect.length) && checkedSelect.length !== 0)}\r\n                                    indeterminate={(arrayDevice.length !== checkedSelect.length) && checkedSelect.length !== 0}\r\n                                    onChange={() => {\r\n                                        if (arrayDevice.length === checkedSelect.length) {\r\n                                            setCheckedSelect([]);\r\n                                        } else {\r\n                                            const selectId = arrayDevice.map(device => device.id);\r\n                                            setCheckedSelect(selectId);\r\n                                        }\r\n                                    }}\r\n                                />\r\n                                <FormControl className={classes.type}>\r\n                                    <InputLabel>{I18n.t('cloning method')}</InputLabel>\r\n                                    <Select\r\n                                        className={classes.oidField}\r\n                                        fullWidth\r\n                                        disabled={!arrayDevice.length || startTheProcess}\r\n                                        value={cloningMethod}\r\n                                        onChange={e => {\r\n                                            setCloningMethod(e.target.value);\r\n                                        }}\r\n                                    >\r\n                                        <MenuItem value={'flat'}>\r\n                                            {I18n.t('flat')}\r\n                                        </MenuItem>\r\n                                        <MenuItem value={'rooms'}>\r\n                                            {I18n.t('rooms')}\r\n                                        </MenuItem>\r\n                                        <MenuItem value={'functions'}>\r\n                                            {I18n.t('functions')}\r\n                                        </MenuItem>\r\n                                    </Select>\r\n                                </FormControl>\r\n                            </div>\r\n                            {cloningMethod !== 'flat' &&\r\n                                <FormControlLabel\r\n                                    className={classes.formControlLabel}\r\n                                    control={<Checkbox\r\n                                        checked={skipElement}\r\n                                        onChange={() => setSkipElement(!skipElement)}\r\n                                    />}\r\n                                    label={I18n.t('do not export devices without category')}\r\n                                />}\r\n                        </div>\r\n                        <div className={clsx(classes.wrapperItems, startTheProcess && classes.startTheProcess)}>\r\n                            {!arrayDevice.length && <div className={classes.emptyList}>\r\n                                {I18n.t('The list of devices to copy is empty')}\r\n                            </div>}\r\n                            {arrayDevice.map(device => <div className={clsx(classes.deviceWrapper, checkDeviceInObjects(device.title, device.id) && classes.backgroundRed, checkEnumsScip(device.id) && classes.backgroundSilver)} key={device.id}>\r\n                                <div className={classes.wrapperNameAndId}>\r\n                                    <div className={classes.wrapperCheckbox}>\r\n                                        <Checkbox\r\n                                            disabled={checkDeviceInObjects(device.title, device.id) || checkEnumsScip(device.id) || startTheProcess}\r\n                                            checked={checkedSelect.indexOf(device.id) !== -1}\r\n                                            onChange={() => {\r\n                                                const newArray = JSON.parse(JSON.stringify(checkedSelect));\r\n                                                const indexCurrent = checkedSelect.indexOf(device.id);\r\n                                                if (indexCurrent !== -1) {\r\n                                                    newArray.splice(indexCurrent, 1);\r\n                                                    setCheckedSelect(newArray);\r\n                                                } else {\r\n                                                    newArray.push(device.id);\r\n                                                    setCheckedSelect(newArray);\r\n                                                }\r\n                                            }}\r\n                                        />\r\n                                        <div className={classes.tableIcon}>\r\n                                            <TypeIcon src={device.icon} className={classes.tableIconImg} type={device.role} />\r\n                                        </div>\r\n                                        <div className={classes.wrapperTitleAndId}>\r\n                                            <div className={classes.fontStyle}>\r\n                                                {device.title}\r\n                                            </div>\r\n                                            <div className={classes.fontStyleId}>\r\n                                                {device.id}\r\n                                            </div>\r\n                                        </div>\r\n                                        <Tooltip title={I18n.t('Edit')}>\r\n                                            <div>\r\n                                                <IconButton\r\n                                                    onClick={() => setOpenEdit(device)}\r\n                                                    disabled={startTheProcess}\r\n                                                >\r\n                                                    <IconEdit />\r\n                                                </IconButton>\r\n                                            </div>\r\n                                        </Tooltip>\r\n                                    </div>\r\n                                </div>\r\n                                <div className={classes.enumsWrapper}>\r\n                                    {renderEnumCell(device.id, 'functions')}\r\n                                    {renderEnumCell(device.id, 'rooms')}\r\n                                    {/* {checkDeviceInObjects(device.title, device.id)} */}\r\n                                </div>\r\n                            </div>)}\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </DialogContent>\r\n            <DialogActions>\r\n                <Button\r\n                    variant=\"contained\"\r\n                    autoFocus\r\n                    disabled={!checkedSelect.length || startTheProcess}\r\n                    onClick={async () => {\r\n                        setStartTheProcess(true);\r\n                        await onChangeCopy();\r\n                        onClose();\r\n                    }}\r\n                    startIcon={<IconCheck />}\r\n                    color=\"primary\">\r\n                    {I18n.t('Import')}\r\n                </Button>\r\n                <Button\r\n                    variant=\"contained\"\r\n                    disabled={startTheProcess}\r\n                    onClick={() =>\r\n                        onClose()}\r\n                    startIcon={<IconClose />}\r\n                    color=\"default\">\r\n                    {I18n.t('Close')}\r\n                </Button>\r\n            </DialogActions>\r\n        </Dialog>\r\n    </ThemeProvider>;\r\n}\r\n\r\nexport default DialogImporter;","import * as React from 'react';\r\n\r\nexport function useStateLocal(defaultValue, key) {\r\n    const [state, setState] = React.useState(\r\n        window.localStorage.getItem(key) ?\r\n            JSON.parse(window.localStorage.getItem(key))\r\n            :\r\n            defaultValue\r\n    );\r\n\r\n    const eventsToInstall = newValue => {\r\n        window.localStorage.setItem(key, JSON.stringify(newValue));\r\n        setState(newValue);\r\n    };\r\n\r\n    return [state, eventsToInstall, !!window.localStorage.getItem(key)];\r\n}","/**\r\n * Copyright 2019-2021 bluefox <dogafox@gmail.com>\r\n *\r\n * MIT License\r\n *\r\n **/\r\nimport React, { Component, createRef } from 'react';\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport PropTypes from 'prop-types';\r\nimport clsx from 'clsx';\r\nimport { DndProvider } from 'react-dnd';\r\nimport { HTML5Backend } from 'react-dnd-html5-backend';\r\nimport { TouchBackend } from 'react-dnd-touch-backend';\r\n\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport CircularProgress from '@material-ui/core/CircularProgress';\r\nimport Table from '@material-ui/core/Table';\r\nimport TableBody from '@material-ui/core/TableBody';\r\nimport TableCell from '@material-ui/core/TableCell';\r\nimport TableHead from '@material-ui/core/TableHead';\r\nimport TableRow from '@material-ui/core/TableRow';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport ButtonBase from '@material-ui/core/ButtonBase';\r\nimport { Toolbar, InputAdornment, ListItemIcon, TextField, Tooltip, withWidth } from '@material-ui/core';\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\nimport Select from '@material-ui/core/Select';\r\n\r\nimport { MdAdd as IconAdd } from 'react-icons/md';\r\nimport { MdRefresh as IconRefresh } from 'react-icons/md';\r\nimport { MdClear as IconClear } from 'react-icons/md';\r\nimport { FaInfoCircle as IconInfo } from 'react-icons/fa';\r\nimport { MdDelete as IconDelete } from 'react-icons/md';\r\nimport { MdModeEdit as IconEdit } from 'react-icons/md';\r\nimport { FaPowerOff as IconOn } from 'react-icons/fa';\r\nimport { FaThermometerHalf as IconTemperature } from 'react-icons/fa';\r\nimport { FaLongArrowAltUp as IconUp } from 'react-icons/fa';\r\nimport { FaLongArrowAltDown as IconDown } from 'react-icons/fa';\r\nimport { FaPercentage as IconPercentage } from 'react-icons/fa';\r\nimport { FaPalette as IconColor } from 'react-icons/fa';\r\nimport { FaLightbulb as IconBulb } from 'react-icons/fa';\r\nimport { FaLockOpen as IconLock } from 'react-icons/fa';\r\nimport { FaThermometer as IconThermometer } from 'react-icons/fa';\r\nimport { HiLink } from 'react-icons/hi';\r\nimport { FaFolderOpen as IconFolderOpened } from 'react-icons/fa';\r\nimport { FaFolder as IconFolder } from 'react-icons/fa';\r\nimport DvrIcon from '@material-ui/icons/Dvr';\r\nimport FileCopyIcon from '@material-ui/icons/FileCopy';\r\nimport CreateNewFolderIcon from '@material-ui/icons/CreateNewFolder';\r\n\r\nimport { Types } from 'iobroker.type-detector';\r\nimport I18n from '@iobroker/adapter-react/i18n';\r\nimport MessageDialog from '@iobroker/adapter-react/Dialogs/Message';\r\nimport Router from '@iobroker/adapter-react/Components/Router';\r\nimport Utils from '@iobroker/adapter-react/Components/Utils';\r\nimport Icon from '@iobroker/adapter-react/Components/Icon';\r\nimport SelectWithIcon from '@iobroker/adapter-react/Components/SelectWithIcon';\r\n\r\nimport SmartDetector from '../Devices/SmartDetector';\r\nimport DialogEdit from '../Dialogs/DialogEditDevice';\r\nimport DialogNew from '../Dialogs/DialogNewDevice';\r\nimport LocalUtils from '../Components/helpers/LocalUtils';\r\nimport DialogEditEnums from '../Dialogs/DialogEditEnums';\r\nimport TypeIcon from '../Components/TypeIcon';\r\nimport { deleteFolderAndDeviceCallBack } from '../Dialogs/DialogDeleteFolder';\r\nimport DialogEditFolder from '../Dialogs/DialogEditFolder';\r\nimport TYPE_OPTIONS, { ICONS_TYPE } from '../Components/TypeOptions';\r\nimport DragWrapper from '../Components/DragWrapper';\r\nimport DropWrapper from '../Components/DropWrapper';\r\nimport DialogImporter from '../Dialogs/DialogImporter';\r\n\r\nconst colorOn = '#aba613';\r\nconst colorOff = '#444';\r\nconst colorSet = '#00c6ff';\r\nconst colorRead = '#00bc00';\r\nconst colorLinkedDevices = '#2cbd1c';\r\nconst colorNativeDevices = '#F1C40F';\r\n\r\nconst actionsMapping = {\r\n    turnOn: { color: colorOn, icon: IconOn, desc: 'Turn on' },\r\n    turnOff: { color: colorOff, icon: IconOn, desc: 'Turn off' },\r\n\r\n    setTargetTemperature: { color: colorSet, icon: IconTemperature, desc: 'Set target temperature' },\r\n    incrementTargetTemperature: { color: colorOn, icon: IconUp, desc: 'Increment target temperature' },\r\n    decrementTargetTemperature: { color: colorOff, icon: IconDown, desc: 'Decrement target temperature' },\r\n\r\n    setPercentage: { color: colorSet, icon: IconPercentage, desc: 'Set percentage' },\r\n    incrementPercentage: { color: colorOn, icon: IconUp, desc: 'Increment percentage' },\r\n    decrementPercentage: { color: colorOff, icon: IconDown, desc: 'Decrement percentage' },\r\n\r\n    setColor: { color: colorSet, icon: IconColor, desc: 'Set color' },\r\n\r\n    setColorTemperature: { color: colorSet, icon: IconBulb, desc: 'Set color temperature' },\r\n    incrementColorTemperature: { color: colorOn, icon: IconUp, desc: 'Increment color temperature' },\r\n    decrementColorTemperature: { color: colorOff, icon: IconDown, desc: 'Decrement color temperature' },\r\n\r\n    getTargetTemperature: { color: colorRead, icon: IconThermometer, desc: 'Get target temperature' },\r\n    getTemperatureReading: { color: colorRead, icon: IconThermometer, desc: 'Get actual temperature' },\r\n\r\n    setLockState: { color: colorSet, icon: IconLock, desc: 'Set lock state' },\r\n    getLockState: { color: colorRead, icon: IconLock, desc: 'Read lock state' },\r\n};\r\n\r\nconst TYPES_MAPPING = {\r\n    button: 'boolean',\r\n    value: 'number',\r\n    level: 'number',\r\n    indicator: 'boolean',\r\n    action: 'boolean'\r\n};\r\n\r\nconst UNSUPPORTED_TYPES = [\r\n    Types.unknown\r\n];\r\n\r\nfunction getParentId(id) {\r\n    const pos = id.lastIndexOf('.');\r\n    if (pos !== -1) {\r\n        return id.substring(0, pos);\r\n    } else {\r\n        return '';\r\n    }\r\n}\r\n\r\nfunction getLastPart(id) {\r\n    const pos = id.lastIndexOf('.');\r\n    if (pos !== -1) {\r\n        return id.substring(pos + 1);\r\n    } else {\r\n        return id;\r\n    }\r\n}\r\n\r\nconst prepareList = (data, root, objects) => {\r\n    const result = [];\r\n    const ids = Object.keys(data);\r\n    root = root || '';\r\n\r\n    // place common and global scripts at the end\r\n    ids.sort();\r\n\r\n    for (let i = 0; i < ids.length; i++) {\r\n        const obj = data[ids[i]];\r\n        const parts = ids[i].split('.');\r\n        parts.pop();\r\n\r\n        result.push({\r\n            id: obj.obj?._id || ids[i],\r\n            title: Utils.getObjectName(data, ids[i], { language: I18n.getLanguage() }),\r\n            icon: obj.common?.icon || null,\r\n            color: obj.common?.color || null,\r\n            depth: parts.length - 1,\r\n            type: obj.type,\r\n            role: obj.role,\r\n            obj: obj.obj,\r\n            noEdit: !!obj?.noEdit,\r\n            showId: !!obj?.showId,\r\n            importer: !!obj?.importer,\r\n            originalId: obj?.native?.originalId || null,\r\n            parent: parts.length > 2 ? parts.join('.') : null,\r\n            instance: obj.common?.engine ? parseInt(obj.common.engine.split('.').pop(), 10) || 0 : null\r\n        });\r\n    }\r\n\r\n    // Place all folder-less items at start\r\n    result\r\n        .sort((a, b) => {\r\n            if (a.title === b.title) {\r\n                return 0;\r\n            } else {\r\n                return a.title > b.title ? 1 : -1;\r\n            }\r\n        })\r\n        .sort((a, b) => {\r\n            if (a.id === 'alias.0.automatically_detected' && b.type === 'folder') return 1;\r\n            if (b.id === 'alias.0.automatically_detected' && a.type !== 'folder') return -1;\r\n            if (b.id === 'alias.0.automatically_detected' && a.type === 'folder') return -1;\r\n            if (a.id === 'alias.0.linked_devices' && b.type === 'folder') return 1;\r\n            if (b.id === 'alias.0.linked_devices' && a.type !== 'folder') return -1;\r\n            if (b.id === 'alias.0.linked_devices' && a.type === 'folder') return -1;\r\n            return 0\r\n        })\r\n        .sort((a, b) => {\r\n            if (!a.parent && a.type !== 'folder' && !b.parent && b.type !== 'folder') {\r\n                if (a.title === b.title) {\r\n                    return 0;\r\n                } else {\r\n                    return a.title > b.title ? 1 : -1;\r\n                }\r\n            }\r\n            else if (!a.parent && a.type !== 'folder') {\r\n                return 1;\r\n            } else if (!b.parent && b.type !== 'folder') {\r\n                return -1;\r\n            }\r\n            return 0\r\n        });\r\n\r\n    // Fill all index\r\n    result.forEach((item, i) => item.index = i);\r\n\r\n    let modified;\r\n    const regEx = new RegExp('^' + root.replace(/\\./g, '\\\\.'));\r\n    do {\r\n        modified = false;\r\n        // check if all parents exists\r\n\r\n        // eslint-disable-next-line no-loop-func\r\n        result.forEach(item => {\r\n            if (item.parent) {\r\n                const parent = result.find(it => it.id === item.parent);\r\n                if (!parent) {\r\n                    let obj = {};\r\n                    if (item.id.startsWith('linkeddevices.0.')) {\r\n                        const partsLinkedDevices = item.id.split('.');\r\n                        partsLinkedDevices.pop();\r\n                        obj = objects[partsLinkedDevices.join('.')];\r\n                    }\r\n                    const parts = item.parent.split('.');\r\n                    parts.pop();\r\n                    result.push({\r\n                        id: item.parent,\r\n                        title: root ? item.parent.replace(regEx, '') : item.parent.split('.').pop(),\r\n                        depth: parts.length - 1,\r\n                        type: 'folder',\r\n                        obj: obj,\r\n                        noEdit: !!obj?.noEdit,\r\n                        showId: !!obj?.showId,\r\n                        originalId: obj?.native?.originalId || null,\r\n                        importer: !!obj?.importer,\r\n                        parent: parts.length >= 2 ? parts.join('.') : null\r\n                    });\r\n                    modified = true;\r\n                }\r\n            }\r\n        });\r\n    } while (modified);\r\n\r\n    // Fill all parentIndex\r\n    result.forEach(item => {\r\n        if (item.parent) {\r\n            const parent = result.find(it => it.id === item.parent);\r\n            if (parent) {\r\n                item.parentIndex = parent.index;\r\n            }\r\n        }\r\n    });\r\n\r\n    return result;\r\n};\r\n\r\nconst WIDTHS = [\r\n    1350,\r\n    1050,\r\n    950,\r\n    1250,\r\n    600,\r\n    500,\r\n    450\r\n];\r\n\r\nconst ALIAS = 'alias.';\r\nconst LINKEDDEVICES = 'linkeddevices.';\r\nconst IS_CHROME = /Chrome/.test(navigator.userAgent) && /Google Inc/.test(navigator.vendor);\r\n\r\nconst styles = theme => ({\r\n    tab: {\r\n        width: '100%',\r\n        height: '100%'\r\n    },\r\n    column: {\r\n        display: 'inline-block',\r\n        verticalAlign: 'top',\r\n        marginRight: 20,\r\n        height: '100%',\r\n        overflow: 'hidden'\r\n    },\r\n    columnDiv: {\r\n        height: 'calc(100% - 40px)',\r\n        overflow: 'auto',\r\n        minWidth: 300\r\n    },\r\n    filter: {\r\n        margin: 0,\r\n    },\r\n    button: {\r\n        marginRight: 20\r\n    },\r\n    buttonLinkedDevices: {\r\n        background: '#17faff'\r\n    },\r\n    devLineExpand: {\r\n        marginRight: 10,\r\n    },\r\n    devLineEnabled: {\r\n        position: 'absolute',\r\n        right: 0,\r\n        top: 0,\r\n    },\r\n    devLineEdit: {\r\n        position: 'absolute',\r\n        top: 5,\r\n        right: 50\r\n    },\r\n    devLineDelete: {\r\n        position: 'absolute',\r\n        top: 5,\r\n        right: 0\r\n    },\r\n    devLineName: {\r\n\r\n    },\r\n    devLineNumber: {\r\n        display: 'inline-block',\r\n        verticalAlign: 'middle',\r\n        width: 15,\r\n    },\r\n    editedId: {\r\n        fontStyle: 'italic'\r\n    },\r\n    enumLineSubName: {\r\n        fontStyle: 'italic',\r\n    },\r\n    devLine: {\r\n        height: 48,\r\n        width: '100%',\r\n        position: 'relative'\r\n    },\r\n    devLineDescription: {\r\n        display: 'block',\r\n        fontStyle: 'italic',\r\n        fontSize: 12\r\n    },\r\n    devLineActions: {\r\n        fontStyle: 'italic',\r\n        fontSize: 12,\r\n        paddingLeft: 50,\r\n        display: 'inline-block',\r\n    },\r\n    devLineProgress: {\r\n        position: 'absolute',\r\n        top: 0,\r\n        left: 0,\r\n    },\r\n    channelLineActions: {\r\n        width: 80\r\n    },\r\n    devLineNameBlock: {\r\n        display: 'inline-block',\r\n        width: 'calc(100% - 350px)'\r\n    },\r\n    columnHeader: {\r\n        background: theme.palette.primary.light,\r\n        padding: 10,\r\n        color: theme.palette.primary.contrastText\r\n    },\r\n    devModified: {\r\n        fontStyle: 'italic'\r\n    },\r\n    actionIcon: {\r\n        width: 16\r\n    },\r\n\r\n    devSubLine: {\r\n        position: 'relative',\r\n        height: 48\r\n    },\r\n    devSubLineName: {\r\n        marginLeft: 5,\r\n        marginTop: 14,\r\n        display: 'inline-block',\r\n        fontSize: 13,\r\n        width: 'calc(100% - 400px)'\r\n    },\r\n    devSubSubLineName: {\r\n        fontSize: 8,\r\n        fontStyle: 'italic',\r\n        display: 'block'\r\n    },\r\n    devSubLineByOn: {\r\n        marginLeft: 5\r\n    },\r\n    devSubLineDelete: {\r\n        position: 'absolute',\r\n        top: 12,\r\n        right: 12,\r\n        padding: 0\r\n    },\r\n    devSubLineEdit: {\r\n        position: 'absolute',\r\n        top: 12,\r\n        right: 62,\r\n        padding: 0\r\n    },\r\n    devSubLineTypeTitle: {\r\n        marginTop: 0\r\n    },\r\n    orderSelector: {\r\n        marginRight: 10,\r\n    },\r\n    paperTable: {\r\n        width: '100%',\r\n        height: 'calc(100% - 57px)',\r\n        overflowX: 'hidden',\r\n        overflowY: 'auto',\r\n        marginTop: 5,\r\n    },\r\n    tableLine: {\r\n        height: 50,\r\n        '&:hover': {\r\n            background: `#3399cccc !important`,\r\n            '& *': {\r\n                color: '#ffffff !important'\r\n            }\r\n        }\r\n    },\r\n    tableIconImg: {\r\n        width: 20,\r\n        height: 20,\r\n        color: theme.palette.type === 'dark' ? '#FFF' : '#000',\r\n    },\r\n    tableIcon: {\r\n        width: 32,\r\n        height: 32,\r\n        display: 'flex',\r\n        padding: 2,\r\n        background: theme.palette.type === 'dark' ? '#3b3b3b' : '#e0e0e0',\r\n        borderRadius: 3,\r\n        alignItems: 'center',\r\n        justifyContent: 'center'\r\n    },\r\n    tableNameCell: {\r\n        whiteSpace: 'nowrap',\r\n        width: IS_CHROME ? undefined : 150,\r\n        textOverflow: 'ellipsis',\r\n    },\r\n    tableSmartName: {\r\n        fontSize: 10,\r\n        opacity: 0.8,\r\n    },\r\n    tableIdCell: {\r\n        whiteSpace: 'nowrap',\r\n        textOverflow: 'ellipsis',\r\n        maxWidth: 150,\r\n        overflow: 'hidden',\r\n        direction: 'rtl',\r\n        textAlign: 'left'\r\n    },\r\n    headerCell: {\r\n        fontWeight: 'bold'\r\n    },\r\n    tableExpandIconCell: {\r\n        padding: 0,\r\n        width: 40,\r\n    },\r\n    tableIconCell: {\r\n        padding: 0,\r\n        width: 40\r\n    },\r\n    tableEditButtonCell: {\r\n        padding: 0,\r\n        width: 40,\r\n    },\r\n    buttonsCellHeader: {\r\n        width: 90,\r\n    },\r\n    buttonsCell: {\r\n        width: IS_CHROME ? undefined : 90,\r\n        padding: '0 !important',\r\n    },\r\n    tableGroup: {\r\n        background: theme.palette.secondary.main,\r\n        borderTop: '5px solid ' + theme.palette.background.paper,\r\n    },\r\n    tableGroupCell: {\r\n        fontWeight: 'bold',\r\n        fontSize: 18,\r\n        color: '#FFF',\r\n        cursor: 'pointer',\r\n        textTransform: 'uppercase'\r\n    },\r\n    tableExpandIcon: {\r\n        marginRight: 5,\r\n        marginLeft: 10,\r\n        marginTop: 6,\r\n        color: '#FFF',\r\n        width: 20,\r\n        height: 20,\r\n        cursor: 'pointer',\r\n    },\r\n    tableGroupIcon: {\r\n        height: 20,\r\n        marginRight: 5,\r\n        color: '#ffffff'\r\n    },\r\n\r\n    enumsEdit: {\r\n        minHeight: 20,\r\n        minWidth: 100,\r\n        textAlign: 'left',\r\n        justifyContent: 'left',\r\n        padding: 3,\r\n        whiteSpace: 'nowrap',\r\n        '&:hover, &$focusVisible': {\r\n            zIndex: 1,\r\n            opacity: 0.7,\r\n            borderRadius: 3,\r\n            background: 'gray'\r\n        },\r\n    },\r\n    enumsEditFocusVisible: {},\r\n    wrapperButtonEnum: {\r\n        maxWidth: 200,\r\n        display: 'flex',\r\n        overflow: 'hidden'\r\n    },\r\n    emptyClear: {\r\n        width: 32\r\n    },\r\n    wrapperButton: {\r\n        marginRight: 10,\r\n        display: 'flex',\r\n        justifyContent: 'flex-end'\r\n    },\r\n    emptyBlock: {\r\n        width: 48\r\n    },\r\n    displayFlex: {\r\n        display: 'flex',\r\n        alignItems: 'center'\r\n    },\r\n    iconCommon: {\r\n        width: 20,\r\n        height: 20,\r\n        position: 'absolute',\r\n        top: 10,\r\n        left: 8,\r\n        opacity: 0.8\r\n    },\r\n    iconStyle: {\r\n        position: 'relative',\r\n        minWidth: 36\r\n    },\r\n    fontStyle: {\r\n        // maxWidth: 160,\r\n        whiteSpace: 'nowrap',\r\n        overflow: 'hidden',\r\n        textOverflow: 'ellipsis',\r\n        fontWeight: 'bold'\r\n    },\r\n    wrapperTitleAndId: {\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        overflow: 'hidden'\r\n    },\r\n    fontStyleId: {\r\n        whiteSpace: 'nowrap',\r\n        overflow: 'hidden',\r\n        textOverflow: 'ellipsis',\r\n        fontWeight: 'bold',\r\n        fontSize: 9,\r\n        opacity: 0.6,\r\n        fontStyle: 'italic'\r\n    },\r\n    wrapperIconEnumCell: {\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n        marginLeft: 3,\r\n        marginRight: 3\r\n    },\r\n    enumIcon: {\r\n        width: 16,\r\n        height: 16,\r\n    },\r\n    iconInSelect: {\r\n        marginRight: 4,\r\n    },\r\n    nameEnumCell: {\r\n        marginLeft: 3\r\n    },\r\n    emptyBlockFlex: {\r\n        flexGrow: 1\r\n    },\r\n    wrapperName: {\r\n        fontWeight: 800,\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n        marginRight: 10\r\n    },\r\n    table: {\r\n        '& th': {\r\n            background: theme.name === 'dark' ? '#202020' : theme.name === 'blue' ? '#22292d' : 'white'\r\n        }\r\n    },\r\n    spaceBetween: {\r\n        justifyContent: 'space-between'\r\n\r\n    },\r\n    iconWrapper: {\r\n        display: 'flex',\r\n        alignItems: 'center'\r\n    },\r\n    iconStyleType: {\r\n        width: 16,\r\n        height: 16,\r\n        margin: '0 3px'\r\n    },\r\n    emptyIcon: {\r\n        width: 16,\r\n        height: 16,\r\n        margin: '0 3px'\r\n    },\r\n    typeCellNameAndIcon: {\r\n        display: 'flex',\r\n        alignItems: 'center'\r\n    },\r\n    iconOpen: {\r\n        transform: 'skew(147deg, 183deg) scale(0.5) translate(-43px, 11px)'\r\n    },\r\n    hoverRow: {\r\n        '&:hover:after': {\r\n            width: '100%',\r\n        },\r\n        position: 'relative',\r\n        transform: 'scale(1)',\r\n        '&:after': {\r\n            content: '\"\"',\r\n            position: 'absolute',\r\n            top: 0,\r\n            left: 0,\r\n            height: '100%',\r\n            background: '#ffffff36',\r\n            pointerEvents: 'none'\r\n        }\r\n    },\r\n    selected: {\r\n        background: theme.palette.type === 'dark' ? theme.palette.primary.dark : theme.palette.primary.light,\r\n    },\r\n    wrapperHeadButtons:{\r\n        display: 'flex',\r\n        overflowY: 'auto',\r\n        marginRight: 'auto'\r\n    },\r\n    '@media screen and (max-width: 700px)': {\r\n        hide700: {\r\n            display: 'none'\r\n        },\r\n        wrapperName:{\r\n            marginLeft:10\r\n        }\r\n    },\r\n    '@media screen and (max-width: 600px)': {\r\n        emptyBlock: {\r\n            width: 24\r\n        },\r\n    },\r\n    '@media screen and (max-width: 500px)': {\r\n        wrapperTitleAndId: {\r\n            maxWidth: 200\r\n        },\r\n    },\r\n    '@media screen and (max-width: 440px)': {\r\n        wrapperTitleAndId: {\r\n            maxWidth: 150\r\n        },\r\n        fontStyle: {\r\n            fontSize: 11\r\n        },\r\n        fontStyleId: {\r\n            fontSize: 7\r\n        },\r\n        wrapperName:{\r\n            '& span':{\r\n                display: 'none'\r\n            }\r\n        }\r\n    },\r\n    '@media screen and (max-width: 360px)': {\r\n        wrapperTitleAndId: {\r\n            maxWidth: 120\r\n        },\r\n    },\r\n    filterType: {\r\n        minWidth: 100\r\n    },\r\n    searchText: {\r\n        color: 'orange'\r\n    },\r\n    textStyle: {\r\n        overflow: 'hidden',\r\n        whiteSpace: 'nowrap',\r\n        padding: '0 16px 0 16px'\r\n    }\r\n});\r\n\r\nclass ListDevices extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        if (!actionsMapping.translated) {\r\n            Object.keys(actionsMapping).forEach(a => actionsMapping[a].desc = I18n.t(actionsMapping[a].desc));\r\n            actionsMapping.translated = true;\r\n        }\r\n        const location = Router.getLocation();\r\n\r\n        let expanded = window.localStorage.getItem('Devices.expanded') || '[]';\r\n        try {\r\n            expanded = JSON.parse(expanded);\r\n        } catch (e) {\r\n            expanded = [];\r\n        }\r\n\r\n        let expandedIDs = window.localStorage ? window.localStorage.getItem('IDs.expanded') : '';\r\n        try {\r\n            expandedIDs = expandedIDs ? JSON.parse(expandedIDs) || null : null;\r\n        } catch (e) {\r\n            expandedIDs = null;\r\n        }\r\n\r\n        const selected = window.localStorage.getItem('Devices.selected') || '';\r\n        if (expandedIDs && selected) {\r\n            // be sure, that selected element is visible\r\n            const parts = selected.split('.');\r\n            let id = parts[0] + '.' + parts[1];\r\n            for (let i = 2; i < parts.length; i++) {\r\n                id += '.' + parts[i];\r\n                if (!expandedIDs.includes(id)) {\r\n                    expandedIDs.push(id);\r\n                }\r\n            }\r\n            expandedIDs.sort();\r\n        }\r\n\r\n        this.state = {\r\n            editId: location.dialog === 'edit' ? location.id : null,\r\n            copyId: null,\r\n            // deleteIndex: null,\r\n            deleteId: '',\r\n            editEnum: null,\r\n            listItems: [],\r\n            expandedIDs,\r\n\r\n            windowWidth: window.innerWidth,\r\n            showAddDialog: '',\r\n            showConfirmation: '',\r\n            changed: [],\r\n            devices: [],\r\n            message: '',\r\n            loading: true,\r\n            browse: false,\r\n            expanded,\r\n            lastChanged: '',\r\n            linkeddevices: '',\r\n            filter: {\r\n                func: window.localStorage.getItem('Devices.filter.func') || '',\r\n                room: window.localStorage.getItem('Devices.filter.room') || '',\r\n                type: window.localStorage.getItem('Devices.filter.type') || '',\r\n                text: window.localStorage.getItem('Devices.filter.text') || '',\r\n                noInfo: window.localStorage.getItem('Devices.filter.noInfo') !== 'false',\r\n            },\r\n            selected,\r\n            iot: '',\r\n            iotNoCommon: false,\r\n            showImporterDialog: null,\r\n            showEditFolder: undefined,\r\n            newFolder: false,\r\n            // onlyAliases: window.localStorage.getItem('Devices.onlyAliases') ? JSON.parse(window.localStorage.getItem('Devices.onlyAliases')) : true,\r\n            onlyAliases: false,\r\n            updating: [],\r\n        };\r\n\r\n        this.inputRef = createRef();\r\n\r\n        this.timerChanged = null;\r\n\r\n        this.waitForUpdateID = null;\r\n\r\n        this.objects = {};\r\n        this.states = {};\r\n        this.instances = [];\r\n        this.enumObj = {};\r\n\r\n        this.filter = this.state.filter.text;\r\n\r\n        this.subscribes = {};\r\n        this.onUpdateBound = this.onUpdate.bind(this);\r\n\r\n        this.detector = new SmartDetector();\r\n        this.patterns = this.detector.getPatterns();\r\n\r\n        // read if linkeddevices installed\r\n        this.props.socket.getAdapterInstances('linkeddevices')\r\n            .catch(e => [])\r\n            .then(linkedDevices => {\r\n                // read if iot installed\r\n                this.props.socket.getAdapterInstances('iot')\r\n                    .catch(e => [])\r\n                    .then(iot => {\r\n                        const newState = {};\r\n                        let changed = false;\r\n                        // always take the first one\r\n                        if (linkedDevices && linkedDevices.length && linkedDevices[0] && linkedDevices[0]._id) {\r\n                            newState.linkeddevices = linkedDevices[0]._id.replace('system.adapter.', '') || '';\r\n                            changed = true;\r\n                        }\r\n                        if (iot && iot.length && iot[0] && iot[0]._id) {\r\n                            newState.iotNoCommon = iot[0].native && iot[0].native.noCommon;\r\n                            newState.iot = iot[0]._id.replace('system.adapter.', '') || '';\r\n                            changed = true;\r\n                        }\r\n                        changed && this.setState(newState);\r\n                    });\r\n\r\n                this.detectDevices();\r\n            });\r\n    }\r\n\r\n    setStateAsync(newState) {\r\n        return new Promise(resolve => this.setState(newState, () => resolve()));\r\n    }\r\n\r\n    componentDidMount() {\r\n        window.addEventListener('resize', this.onResize, false);\r\n        this.props.socket.subscribeObject('*', this.onObjectChanged);\r\n        window.addEventListener('hashchange', this.onHashChange, false);\r\n\r\n        setTimeout(() => {\r\n            const el = document.getElementById('td_' + this.state.selected);\r\n            if (el) {\r\n                el.scrollIntoView({ block: 'center' });\r\n            }\r\n        }, 300);\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        window.removeEventListener('resize', this.onResize, false);\r\n        window.removeEventListener('hashchange', this.onHashChange, false);\r\n        this.props.socket.unsubscribeObject('*', this.onObjectChanged);\r\n        this.updateTimeout && clearTimeout(this.updateTimeout);\r\n        this.updateTimeout = null;\r\n        this.resizeTimer && clearTimeout(this.resizeTimer);\r\n        this.resizeTimer = null;\r\n    }\r\n\r\n    onHashChange = () => {\r\n        const location = Router.getLocation();\r\n        if (location.dialog === 'edit' && location.id && location.id !== this.state.editId) {\r\n            this.setState({ editId: location.id });\r\n        }\r\n    }\r\n\r\n    onSelect(selected) {\r\n            this.setState({ selected });\r\n            window.localStorage.setItem('Devices.selected', selected);\r\n    }\r\n\r\n    disabledButtons = () =>{\r\n        return this.state.selected.startsWith('alias.0.automatically_detected') ||\r\n            this.state.selected.startsWith('alias.0.linked_devices') ||\r\n            !this.state.selected.startsWith('alias.0');\r\n    }\r\n\r\n    onObjectChanged = (id, obj) => {\r\n        if (this.state.loading) {\r\n            return;\r\n        }\r\n\r\n        if (!obj) {\r\n            if (this.objects[id]) {\r\n                delete this.objects[id];\r\n            }\r\n        } else {\r\n            this.objects[id] = obj;\r\n        }\r\n\r\n        this.updateTimeout && clearTimeout(this.updateTimeout);\r\n        this.updateTimeout = setTimeout(async () => {\r\n            this.updateTimeout = null;\r\n            await this.updateListItems();\r\n        }, 300);\r\n    };\r\n\r\n    onResize = () => {\r\n        this.resizeTimer && clearTimeout(this.resizeTimer);\r\n        this.resizeTimer = setTimeout(() => {\r\n            this.resizeTimer = null;\r\n            this.setState({ windowWidth: window.innerWidth });\r\n        }, 300);\r\n    }\r\n\r\n    updateListItems = async () => {\r\n        const idsInEnums = [];\r\n\r\n        this.enumIDs.forEach(en => {\r\n            const e = this.enumObj[en];\r\n            e?.common?.members && e.common.members.forEach(id =>\r\n                !idsInEnums.includes(id) && idsInEnums.push(id));\r\n        });\r\n\r\n        // List all devices in aliases\r\n        const keys = Object.keys(this.objects).sort();\r\n\r\n        for (let i = 0; i < keys.length; i++) {\r\n            if (keys[i] < ALIAS) {\r\n                // go to the next\r\n            } else\r\n                if (keys[i] > LINKEDDEVICES + '\\u9999') {\r\n                    break;\r\n                } else\r\n                    if ((keys[i].startsWith(ALIAS) || keys[i].startsWith(LINKEDDEVICES)) && this.objects[keys[i]] && !idsInEnums.includes(keys[i])) {\r\n                        if (this.objects[keys[i]].type === 'device') {\r\n                            idsInEnums.push(keys[i]);\r\n                        } else if (this.objects[keys[i]].type === 'channel') {\r\n                            const parts = keys[i].split('.');\r\n                            parts.pop();\r\n\r\n                            const parentId = parts.join('.');\r\n                            // if parent was not yet included\r\n                            if (!this.objects[parentId] || !idsInEnums.includes(parentId)) {\r\n                                idsInEnums.push(keys[i]);\r\n                            }\r\n                        }\r\n                    }\r\n        }\r\n\r\n        idsInEnums.sort();\r\n\r\n        const _usedIdsOptional = [];\r\n        const devices = [];\r\n        idsInEnums.forEach(id => {\r\n            const result = this.detector.detect({ id, objects: this.objects, _usedIdsOptional, _keysOptional: keys });\r\n            result && result.forEach(device => devices.push(device));\r\n        });\r\n\r\n        this.funcEnums = this.enumIDs.filter(id => id.startsWith('enum.functions.'));\r\n        this.roomsEnums = this.enumIDs.filter(id => id.startsWith('enum.rooms.'));\r\n\r\n        // find channelID for every device\r\n        devices.map(device =>\r\n            this.updateEnumsForOneDevice(device, this.funcEnums, this.roomsEnums));\r\n\r\n        const listItems = this.onObjectsGenerate(this.objects || {}, JSON.parse(JSON.stringify(devices)));\r\n\r\n        let expandedIDs = this.state.expandedIDs;\r\n        if (expandedIDs === null) {\r\n            expandedIDs = [];\r\n            listItems.forEach(item =>\r\n                expandedIDs.includes(item.parent) && expandedIDs.push(item.parent));\r\n        }\r\n\r\n        this.applyFilter(listItems, devices);\r\n\r\n        await this.setStateAsync({ devices, expandedIDs, listItems, loading: false, browse: false });\r\n\r\n        if (this.editCreatedId && this.objects[this.editCreatedId]) {\r\n            const id = this.editCreatedId;\r\n            this.editCreatedId = null;\r\n            Router.doNavigate('list', 'edit', id);\r\n        }\r\n    }\r\n\r\n    async detectDevices() {\r\n        // read objects\r\n        await this.setStateAsync({ browse: true });\r\n\r\n        this.instances = await this.props.socket.getAdapters();\r\n        this.objects = await this.props.socket.getObjects(true);\r\n        const enums = await this.props.socket.getEnums();\r\n        this.enumIDs = Object.keys(enums).sort();\r\n        this.enumObj = enums;\r\n\r\n        await this.updateListItems();\r\n    }\r\n\r\n    onObjectsGenerate = (objects, devices) => {\r\n        this.prefix = this.props.prefix || 'alias.0';\r\n\r\n        let keys = Object.keys(objects).sort();\r\n\r\n        const prefix = this.prefix.startsWith('alias.') ? this.prefix.replace(/\\d+$/, '') : this.prefix; // alias.0 => alias.\r\n\r\n        const ids = [];\r\n\r\n        for (let j = 0; j < keys.length; j++) {\r\n            const id = keys[j];\r\n            if (id < prefix) {\r\n\r\n            } else\r\n                if (id.startsWith(prefix) &&\r\n                    objects[id] &&\r\n                    objects[id].common &&\r\n                    (objects[id].type === 'channel' || objects[id].type === 'device' || objects[id].type === 'folder')\r\n                ) {\r\n                    let parentId;\r\n                    // getParentId\r\n                    if (objects[id].type === 'channel' || objects[id].type === 'device' || objects[id].type === 'folder') {\r\n                        parentId = id;\r\n                    } else {\r\n                        parentId = getParentId(id);\r\n                    }\r\n\r\n                    if (parentId && !ids.includes(parentId)) {\r\n                        ids.push(parentId);\r\n                    }\r\n                } else\r\n                    if (id > prefix + '\\u9999') {\r\n                        break;\r\n                    }\r\n        }\r\n\r\n        this.typesWords = {};\r\n\r\n        Object.keys(Types)\r\n            .filter(id => !UNSUPPORTED_TYPES.includes(id))\r\n            .forEach(typeId => this.typesWords[typeId] = I18n.t('type-' + Types[typeId]));\r\n\r\n        // sort types by ABC in the current language\r\n        this.types = Object.keys(this.typesWords).sort((a, b) => {\r\n            if (this.typesWords[a] === this.typesWords[b]) {\r\n                return 0;\r\n            } else\r\n                if (this.typesWords[a] > this.typesWords[b]) {\r\n                    return 1;\r\n                } else {\r\n                    return -1;\r\n                }\r\n        });\r\n\r\n        const stateIds = {};\r\n        const language = I18n.getLanguage();\r\n        ids.forEach(id => {\r\n            stateIds[id] = {\r\n                common: {\r\n                    name: objects[id]?.type === 'folder' ? Utils.getObjectName(objects, id, { language }) : getLastPart(id),\r\n                    nondeletable: true,\r\n                    color: objects[id]?.common?.color || null,\r\n                    icon: objects[id]?.common?.icon || this.searchIcon(id.channelId)\r\n                },\r\n                obj: objects[id],\r\n                type: objects[id].type,\r\n                role: objects[id].type !== 'folder' && objects[id].common ? objects[id].common.role || null : null\r\n            };\r\n        });\r\n\r\n        stateIds[`${this.prefix}.automatically_detected`] = {\r\n            common: {\r\n                name: I18n.t('Automatically detected'),\r\n                nondeletable: true,\r\n                noEdit: true,\r\n                showId: true,\r\n            },\r\n            type: 'folder'\r\n        };\r\n\r\n        let devicesArr = devices || this.state.devices;\r\n\r\n        devicesArr = devicesArr.filter(({ channelId }) => !channelId.startsWith('alias.0') && !channelId.startsWith('linkeddevices.0'));\r\n\r\n        devicesArr.forEach(device => {\r\n            let [adapter, instance] = device.channelId.split('.');\r\n            const name = adapter + '-' + instance;\r\n            if (!stateIds[`${this.prefix}.automatically_detected.${name}`]) {\r\n                const instances = this.instances.find(inst => inst._id.replace('system.adapter.', '') === adapter);\r\n                stateIds[`${this.prefix}.automatically_detected.${name}`] = {\r\n                    common: {\r\n                        name,\r\n                        nondeletable: true,\r\n                        icon: instances?.common?.extIcon || this.searchIcon(device.channelId)\r\n                    },\r\n                    noEdit: true,\r\n                    importer: true,\r\n                    showId: true,\r\n                    // obj:instances,\r\n                    type: 'folder'\r\n                };\r\n            }\r\n        });\r\n\r\n        devicesArr.forEach(device => {\r\n            let [adapter, instance] = device.channelId.split('.');\r\n            const name = adapter + '-' + instance;\r\n            stateIds[`${this.prefix}.automatically_detected.${name}.${device.channelId.replace(/[\\s.,%]/g, '')}`] = {\r\n                common: {\r\n                    name: Utils.getObjectName(objects, device.channelId, { language }),\r\n                    nondeletable: true,\r\n                    color: objects[device.channelId]?.common && objects[device.channelId].common.color ? objects[device.channelId].common.color : null,\r\n                    icon: objects[device.channelId]?.common && objects[device.channelId].common.icon ? objects[device.channelId].common.icon : this.searchIcon(device.channelId)\r\n                },\r\n                obj: objects[device.channelId],\r\n                type: objects[device.channelId]?.type,\r\n                role: device.type\r\n            };\r\n        });\r\n\r\n        if (this.state.linkeddevices) {\r\n            let devicesArrLinkeddevices = devices || this.state.devices;\r\n\r\n            devicesArrLinkeddevices = devicesArrLinkeddevices.filter(({ channelId }) => channelId.startsWith('linkeddevices.0'));\r\n            stateIds[`${this.prefix}.linked_devices`] = {\r\n                common: {\r\n                    name: I18n.t('Linked devices'),\r\n                    nondeletable: true,\r\n                    noEdit: true,\r\n                    showId: true,\r\n                    icon: <HiLink style={{ color: 'black' }} className={this.props.classes.iconCommon}\r\n                    />\r\n                },\r\n                type: 'folder'\r\n            };\r\n\r\n            devicesArrLinkeddevices.forEach(device => {\r\n                stateIds[`${this.prefix}.linked_devices.${device.channelId.replace('linkeddevices.0.', '')}`] = {\r\n                    common: {\r\n                        name: Utils.getObjectName(objects, device.channelId, { language }),\r\n                        nondeletable: true,\r\n                        color: objects[device.channelId]?.common && objects[device.channelId].common.color ? objects[device.channelId].common.color : null,\r\n                        icon: objects[device.channelId]?.common && objects[device.channelId].common.icon ? objects[device.channelId].common.icon : this.searchIcon(device.channelId)\r\n                    },\r\n                    obj: objects[device.channelId],\r\n                    type: objects[device.channelId]?.type,\r\n                    role: device.type\r\n                }\r\n            });\r\n        }\r\n\r\n        return prepareList(stateIds, null, objects);\r\n    }\r\n\r\n    updateEnumsForOneDevice(device, funcEnums, roomsEnums) {\r\n        funcEnums = funcEnums || this.enumIDs.filter(id => id.startsWith('enum.functions.'));\r\n        roomsEnums = roomsEnums || this.enumIDs.filter(id => id.startsWith('enum.rooms.'));\r\n        if (!device) {\r\n            return;\r\n        }\r\n        const stateId = device.states.find(state => state.id).id;\r\n        let statesCount = device.states.filter(state => state.id).length;\r\n        const pos = stateId.lastIndexOf('.');\r\n        let channelId = stateId;\r\n        if (pos !== -1 && (statesCount > 1 || channelId.startsWith(ALIAS) || channelId.startsWith(LINKEDDEVICES))) {\r\n            channelId = stateId.substring(0, pos);\r\n            if (!this.objects[channelId] ||\r\n                !this.objects[channelId].common ||\r\n                (this.objects[channelId].type !== 'channel' && this.objects[channelId].type !== 'device')) {\r\n                channelId = stateId;\r\n            }\r\n        }\r\n        device.usedStates = device.states.filter(state => state.id).length;\r\n        device.mainStateId = stateId;\r\n        device.channelId = channelId;\r\n\r\n        const functions = funcEnums.filter(id => {\r\n            const obj = this.objects[id];\r\n            return obj &&\r\n                obj.common &&\r\n                obj.common.members &&\r\n                (obj.common.members.includes(device.channelId) ||\r\n                    obj.common.members.includes(device.mainStateId));\r\n        });\r\n\r\n        const rooms = roomsEnums.filter(id => {\r\n            const obj = this.objects[id];\r\n            return obj &&\r\n                obj.common &&\r\n                obj.common.members &&\r\n                (obj.common.members.includes(device.channelId) ||\r\n                    obj.common.members.includes(device.mainStateId));\r\n        });\r\n\r\n        device.functions = functions;\r\n        device.functionsNames = functions.map(id => Utils.getObjectNameFromObj(this.objects[id], null, { language: I18n.getLanguage() })).join(', ');\r\n        device.rooms = rooms;\r\n        device.roomsNames = rooms.map(id => Utils.getObjectNameFromObj(this.objects[id], null, { language: I18n.getLanguage() })).join(', ');\r\n        device.name = LocalUtils.getObjectName(this.objects, device.channelId, null, null, this.enumIDs);\r\n\r\n        device.icon = Utils.getObjectIcon(device.channelId, this.objects[device.channelId]) || this.searchIcon(device.channelId);\r\n\r\n        device.color = this.objects[channelId]?.common?.color || null;\r\n        if (!device.icon) {\r\n            const parts = device.channelId.split('.');\r\n            parts.pop();\r\n            const deviceId = parts.join('.');\r\n\r\n            if (this.objects[deviceId] && (this.objects[deviceId].type === 'channel' || this.objects[deviceId].type === 'device')) {\r\n                device.icon = Utils.getObjectIcon(deviceId, this.objects[deviceId]) || this.searchIcon(device.channelId);\r\n            }\r\n        }\r\n    }\r\n\r\n    searchIcon = (channelId) => {\r\n        if (!this.objects) {\r\n            return null;\r\n        }\r\n        let icon = null;\r\n        if (channelId) {\r\n            // check the parent\r\n            if (channelId && channelId.split('.').length > 2) {\r\n                const channelObj = this.objects[channelId];\r\n                if (channelObj && (channelObj.type === 'channel' || channelObj.type === 'device' || channelObj.type === 'state')) {\r\n                    if (channelObj.common?.icon) {\r\n                        icon = channelObj.common?.icon;\r\n                    } else {\r\n                        // check the parent\r\n                        const deviceId = Utils.getParentId(channelId);\r\n                        if (deviceId && deviceId.split('.').length > 2) {\r\n                            const arrayParent = deviceId.split('.');\r\n                            let parentId = deviceId;\r\n                            for (let i = 0; i < arrayParent.length - 2; i++) {\r\n                                const deviceObj = this.objects[parentId];\r\n                                if (deviceObj && (deviceObj.type === 'channel' || deviceObj.type === 'device')) {\r\n                                    if (deviceObj.common?.icon) {\r\n                                        icon = deviceObj.common?.icon;\r\n                                        break;\r\n                                    }\r\n                                }\r\n                                parentId = Utils.getParentId(parentId);\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        let imagePrefix = '../..';\r\n\r\n        const objects = this.objects;\r\n        const cIcon = icon;\r\n        const id = channelId;\r\n\r\n        if (cIcon && !cIcon.startsWith('data:image/') && cIcon.includes('.')) {\r\n            let instance;\r\n            if (objects[id].type === 'instance' || objects[id].type === 'adapter') {\r\n                icon = `${imagePrefix}/adapter/${objects[id].common.name}/${cIcon}`;\r\n            } else if (id && id.startsWith('system.adapter.')) {\r\n                instance = id.split('.', 3);\r\n                if (cIcon[0] === '/') {\r\n                    instance[2] += cIcon;\r\n                } else {\r\n                    instance[2] += '/' + cIcon;\r\n                }\r\n                icon = `${imagePrefix}/adapter/${instance[2]}`;\r\n            } else {\r\n                instance = id.split('.', 2);\r\n                if (cIcon[0] === '/') {\r\n                    instance[0] += cIcon;\r\n                } else {\r\n                    instance[0] += '/' + cIcon;\r\n                }\r\n                icon = `${imagePrefix}/adapter/${instance[0]}`;\r\n            }\r\n        }\r\n        return icon;\r\n    }\r\n\r\n    addChanged(id, cb) {\r\n        const changed = JSON.parse(JSON.stringify(this.state.changed));\r\n        if (!changed.includes(id)) {\r\n            changed.push(id);\r\n            this.setState({ changed }, () => cb && cb());\r\n        } else {\r\n            cb && cb();\r\n        }\r\n    }\r\n\r\n    removeChanged(id) {\r\n        const changed = JSON.parse(JSON.stringify(this.state.changed));\r\n        const pos = changed.indexOf(id);\r\n\r\n        if (pos !== -1) {\r\n            changed.splice(pos, 1);\r\n            this.setState({ changed });\r\n        }\r\n    }\r\n\r\n    renderMessage() {\r\n        if (this.state.message) {\r\n            return <MessageDialog text={this.state.message} onClose={() => this.setState({ message: '' })} />;\r\n        } else {\r\n            return null;\r\n        }\r\n    }\r\n\r\n    onUpdate(id, state) {\r\n        if (this.subscribes[id]) {\r\n            this.states[id] = state;\r\n            this.subscribes[id].forEach(elem => elem.updateState(id, state));\r\n        }\r\n    }\r\n\r\n    onEdit(editId, e) {\r\n        e && e.preventDefault();\r\n        e && e.stopPropagation();\r\n        Router.doNavigate('list', 'edit', editId.toString());\r\n        this.setState({ editId });\r\n    }\r\n\r\n    onCopy(copyId, e) {\r\n        e && e.preventDefault();\r\n        e && e.stopPropagation();\r\n        this.setState({ copyId, showAddDialog: ALIAS + '0' });\r\n    }\r\n\r\n    onEditEnum(values, enums, index) {\r\n        this.setState({ editEnum: { values, enums, index } });\r\n    }\r\n\r\n    renderEnumCell(names, values, enums, index) {\r\n        const objs = values.map(id => ({\r\n            icon: Utils.getObjectIcon(id, this.objects[id]),\r\n            name: Utils.getObjectName(this.objects, id, { language: I18n.getLanguage() }),\r\n            id\r\n        }));\r\n\r\n        const content = objs.map(obj =>\r\n            <div className={this.props.classes.wrapperIconEnumCell} key={obj.id}>\r\n                {obj.icon && <Icon className={this.props.classes.enumIcon} src={obj.icon} alt={obj.id} />}\r\n                <div className={this.props.classes.nameEnumCell}>{obj.name}</div>\r\n            </div>);\r\n\r\n        return <Tooltip title={content}>\r\n            <ButtonBase\r\n                focusRipple\r\n                onClick={() => this.onEditEnum(values, enums, index)}\r\n                className={this.props.classes.enumsEdit}\r\n                focusVisibleClassName={this.props.classes.enumsEditFocusVisible}>\r\n                <div className={this.props.classes.wrapperButtonEnum}>\r\n                    {objs.map(obj =>\r\n                        <div className={this.props.classes.wrapperIconEnumCell} key={obj.id}>\r\n                            {obj.icon && <Icon className={this.props.classes.enumIcon} src={obj.icon} alt={obj.id} />}\r\n                            <div className={this.props.classes.nameEnumCell}>{obj.name}</div>\r\n                        </div>)}\r\n                </div>\r\n            </ButtonBase>\r\n        </Tooltip>;\r\n    }\r\n\r\n    renderTypeCell(type) {\r\n        return <div className={clsx(this.props.classes.wrapperIconEnumCell, this.props.classes.spaceBetween)}>\r\n            <div className={this.props.classes.typeCellNameAndIcon}>\r\n                <TypeIcon className={this.props.classes.enumIcon} type={type} />\r\n                <div className={this.props.classes.nameEnumCell}>{I18n.t('type-' + type)}</div>\r\n            </div>\r\n            <div className={this.props.classes.iconWrapper}>\r\n                {Object.keys(TYPE_OPTIONS[type])\r\n                    .map(key => TYPE_OPTIONS[type][key] ?\r\n                        <Icon key={key} className={this.props.classes.iconStyleType} src={ICONS_TYPE[key]} title={I18n.t('Supported by \"%s\"', key)} /> :\r\n                        <div key={key} className={this.props.classes.emptyIcon} />\r\n                    )\r\n                }\r\n            </div>\r\n        </div>;\r\n    }\r\n\r\n    saveExpanded(expandedIDs) {\r\n        window.localStorage.setItem('IDs.expanded', JSON.stringify(expandedIDs || this.state.expandedIDs));\r\n    }\r\n\r\n    toggleExpanded(id, open) {\r\n        const expandedIDs = this.state.expandedIDs.slice();\r\n        const pos = expandedIDs.indexOf(id);\r\n        if (pos === -1) {\r\n            expandedIDs.push(id);\r\n            expandedIDs.sort();\r\n        } else if (!open) {\r\n            expandedIDs.splice(pos, 1);\r\n        }\r\n        this.setState({ expandedIDs });\r\n        this.saveExpanded(expandedIDs);\r\n    }\r\n\r\n    applyFilter(listItems, devices, filter) {\r\n        filter = filter || this.state.filter;\r\n        devices = devices || this.state.devices;\r\n\r\n        let setState;\r\n        if (!listItems) {\r\n            listItems = JSON.parse(JSON.stringify(this.state.listItems));\r\n            setState = true;\r\n        }\r\n\r\n        // hasVisibleChildren\r\n        // visible\r\n        listItems.forEach(item => {\r\n            const device = devices.find(el => el.channelId === item.id);\r\n            item.visible = true;\r\n\r\n            if (device) {\r\n                if (filter.type && device.type !== filter.type) {\r\n                    item.visible = false;\r\n                } else if (filter.room && !device.rooms.includes(filter.room)) {\r\n                    item.visible = false;\r\n                } else if (filter.func && !device.functions.includes(filter.func)) {\r\n                    item.visible = false;\r\n                } else if (filter.noInfo && device.type === 'info') {\r\n                    item.visible = false;\r\n                }\r\n            }\r\n\r\n            if (item.visible &&\r\n                filter.text &&\r\n                !item.title.includes(filter.text) &&\r\n                !item.id.toLowerCase().includes(filter.text)\r\n            ) {\r\n                item.visible = false;\r\n            }\r\n        });\r\n\r\n        const someFilterActive = filter.type || filter.func || filter.room || filter.text;\r\n\r\n        let someChanges = false;\r\n        let folders = listItems.filter(item => item.type === 'folder');\r\n        do {\r\n            someChanges = false;\r\n            for (let f = 0; f < folders.length; f++) {\r\n                const item = folders[f];\r\n                item.hasVisibleChildren = listItems.filter(_item => _item.parent === item.id && _item.visible).length;\r\n                if (someFilterActive && !item.hasVisibleChildren && item.visible) {\r\n                    item.visible = false;\r\n                    someChanges = true;\r\n                }\r\n            }\r\n        } while (someChanges);\r\n\r\n        setState && this.setState({listItems});\r\n    }\r\n\r\n    renderOneItem(items, item) {\r\n        if (!item.visible && !item.hasVisibleChildren) {\r\n            return null;\r\n        }\r\n\r\n        let children = items.filter(i => i.parent === item.id);\r\n\r\n        let isExpanded = false;\r\n        if (children && children.length) {\r\n            isExpanded = this.state.expandedIDs.includes(item.id);\r\n        }\r\n\r\n        const depthPx = item.depth * (this.state.windowWidth <= WIDTHS[6] ? 8 : 20) + 10;\r\n\r\n        let title = item.title;\r\n        let searchId = item.id;\r\n\r\n        if (this.state.filter.text) {\r\n            let pos = title.toLowerCase().indexOf(this.state.filter.text);\r\n            if (pos !== -1) {\r\n                title = [\r\n                    <span key=\"0\">{title.substring(0, pos)}</span>,\r\n                    <span key=\"1\" className={this.props.classes.searchText}>{title.substring(pos, pos + this.state.filter.text.length)}</span>,\r\n                    <span key=\"2\">{title.substring(pos + this.state.filter.text.length)}</span>,\r\n                ];\r\n            }\r\n            pos = searchId.toLowerCase().indexOf(this.state.filter.text);\r\n            if (pos !== -1) {\r\n                searchId = [\r\n                    <span key=\"0\">{searchId.substring(0, pos)}</span>,\r\n                    <span key=\"1\" className={this.props.classes.searchText}>{searchId.substring(pos, pos + this.state.filter.text.length)}</span>,\r\n                    <span key=\"2\">{searchId.substring(pos + this.state.filter.text.length)}</span>,\r\n                ];\r\n            }\r\n        }\r\n\r\n        const style = Object.assign({\r\n            paddingLeft: depthPx,\r\n            cursor: 'pointer',\r\n            opacity: item.visible ? 1 : 0.5,\r\n        });\r\n\r\n        let iconStyle = {};\r\n        let countSpan = children.length ?\r\n            <span className={this.props.classes.childrenCount}>{\r\n                children.length !== item.hasVisibleChildren ?\r\n                    item.hasVisibleChildren + ' (' + children.length + ')' : children.length}\r\n            </span>\r\n            : null;\r\n\r\n        const searchStyle = {};\r\n\r\n        if (!countSpan) {\r\n            iconStyle.opacity = 0.5;\r\n        }\r\n        if (!countSpan && item.type === 'folder') {\r\n            searchStyle.opacity = 0.5;\r\n        }\r\n\r\n        if (item.hasVisibleChildren && !item.visible) {\r\n            searchStyle.opacity = 0.5;\r\n            iconStyle.opacity = 0.5;\r\n        }\r\n\r\n        iconStyle.color = '#448dde';\r\n        iconStyle.width = 36;\r\n        iconStyle.height = 36;\r\n\r\n        let backgroundRow = null;\r\n\r\n        if (item.id === 'alias.0.automatically_detected') {\r\n            iconStyle.color = colorNativeDevices;\r\n            backgroundRow = colorNativeDevices + '33';\r\n        } else\r\n        if (item.id === 'alias.0.linked_devices') {\r\n            iconStyle.color = colorLinkedDevices;\r\n            backgroundRow = colorLinkedDevices + '33';\r\n        } else\r\n        if ((item.id === 'alias.0.automatically_detected' || item.id === 'alias.0.linked_devices') && !countSpan) {\r\n            return null;\r\n        }\r\n\r\n        const classes = this.props.classes;\r\n        let background;\r\n        let color;\r\n        let index = null;\r\n\r\n        const device = this.state.devices.find(el => el.channelId === item.id);\r\n        const deviceIdx = this.state.devices.indexOf(device);\r\n        const roomsEnums = this.enumIDs.filter(id => id.startsWith('enum.rooms.'));\r\n        const funcEnums = this.enumIDs.filter(id => id.startsWith('enum.functions.'));\r\n\r\n        if (device) {\r\n            background = this.objects[device.channelId] && this.objects[device.channelId].common && this.objects[device.channelId].common.color;\r\n            color = Utils.invertColor(background, true);\r\n            index = this.state.devices.indexOf(device);\r\n        } else {\r\n            background = item.color;\r\n            color = Utils.invertColor(background, true);\r\n        }\r\n\r\n        if (background && item.type === 'folder') {\r\n            iconStyle.color = background;\r\n        }\r\n\r\n        let j = 0;\r\n        const WrapperRow = item.type === 'folder' ? DropWrapper : DragWrapper;\r\n        const inner = <WrapperRow\r\n            id={item.id}\r\n            objects={this.objects}\r\n            deleteDevice={this.deleteDevice}\r\n            onCopyDevice={this.onCopyDevice}\r\n            openFolder={() => this.toggleExpanded(item.id, true)}\r\n            deviceIdx={deviceIdx}\r\n            backgroundRow={backgroundRow}\r\n            className={Utils.clsx(this.props.classes.hoverRow, this.state.selected === item.id && this.props.classes.selected)}\r\n            key={item.id || title}\r\n            padding=\"default\"\r\n            onClick={() => this.onSelect(item.id)}\r\n        >\r\n            <TableCell\r\n                id={'td_' + item.id}\r\n                colSpan={3}\r\n                style={Object.assign({ maxWidth: 300 }, style)}\r\n                onDoubleClick={() => this.toggleExpanded(item.id)}\r\n                className={item.type === 'folder' ? this.props.classes.folder : this.props.classes.element}\r\n            >\r\n                <div className={classes.displayFlex}>\r\n                    <ListItemIcon className={this.props.classes.iconStyle}>\r\n                        {item.type === 'folder' ?\r\n                            (isExpanded ?\r\n                                <IconFolderOpened onClick={() => this.toggleExpanded(item.id)} style={iconStyle} /> :\r\n                                <IconFolder onClick={() => this.toggleExpanded(item.id)} style={iconStyle} />)\r\n                            :\r\n                            <Tooltip title={I18n.t('You can drag & drop device')}>\r\n                                <div style={{ background }} className={this.props.classes.tableIcon}>\r\n                                    <TypeIcon src={item.icon} style={{ color }} className={this.props.classes.tableIconImg} type={item.role} />\r\n                                </div>\r\n                            </Tooltip>}\r\n                        {item.type === 'folder' && item.icon &&\r\n                            <div className={clsx(isExpanded && this.props.classes.iconOpen)} onClick={() => this.toggleExpanded(item.id)}>\r\n                                <Icon className={this.props.classes.iconCommon} onClick={() => this.toggleExpanded(item.id)} alt={item.type} src={item.icon} />\r\n                            </div>}\r\n                    </ListItemIcon>\r\n                    <Tooltip title={<div>\r\n                        <div>{`${I18n.t('Name')}: ${title}`}</div>\r\n                        {!item.showId && item.id !== 'alias.0.automatically_detected' && item.id !== 'alias.0.linked_devices' &&\r\n                            <div>{`${I18n.t('Id')}: ${item.id}`}</div>\r\n                        }\r\n                    </div>}>\r\n                        <div className={this.props.classes.wrapperTitleAndId}>\r\n                            <div\r\n                                style={searchStyle}\r\n                                className={clsx(this.props.classes.fontStyle, this.props.classes.textStyle)}\r\n                            >{title}</div>\r\n                            {!item.showId && item.id !== 'alias.0.automatically_detected' && item.id !== 'alias.0.linked_devices' && <div\r\n                                style={searchStyle}\r\n                                className={clsx(this.props.classes.fontStyleId, this.props.classes.textStyle)}\r\n                            >{searchId}</div>}\r\n                        </div>\r\n                    </Tooltip>\r\n                </div>\r\n            </TableCell>\r\n            {device && this.state.windowWidth >= WIDTHS[1 + j++] ? <TableCell>\r\n                {this.renderEnumCell(device.functionsNames, device.functions, funcEnums, index)}\r\n            </TableCell> : null}\r\n\r\n            {device && this.state.windowWidth >= WIDTHS[1 + j++] ? <TableCell>\r\n                {this.renderEnumCell(device.roomsNames, device.rooms, roomsEnums, index)}\r\n            </TableCell> : null}\r\n            {device && this.state.windowWidth >= WIDTHS[1 + j++] ? <TableCell>{this.renderTypeCell(device.type)}</TableCell> : null}\r\n            {device && this.state.windowWidth >= WIDTHS[0] ? <TableCell>{device.usedStates}</TableCell> : null}\r\n            {device && <TableCell align=\"right\" className={classes.buttonsCell}>\r\n                <div className={classes.wrapperButton}>\r\n                    <Tooltip title={I18n.t('Copy device')}>\r\n                        <IconButton\r\n                            size={this.state.windowWidth <= WIDTHS[4] ? 'small' : 'medium'}\r\n                            onClick={e => this.onCopy(item.id, e)}>\r\n                            <FileCopyIcon />\r\n                        </IconButton>\r\n                    </Tooltip>\r\n                    <Tooltip title={I18n.t('Edit states')}>\r\n                        <IconButton\r\n                            size={this.state.windowWidth <= WIDTHS[4] ? 'small' : 'medium'}\r\n                            onClick={e => this.onEdit(item.id, e)}>\r\n                            <IconEdit />\r\n                        </IconButton>\r\n                    </Tooltip>\r\n                    {(device.channelId.startsWith(ALIAS) || device.channelId.startsWith(LINKEDDEVICES)) ?\r\n                        <Tooltip title={I18n.t('Delete device with all states')}>\r\n                            <IconButton\r\n                                size={this.state.windowWidth <= WIDTHS[4] ? 'small' : 'medium'}\r\n                                onClick={e =>\r\n                                    deleteFolderAndDeviceCallBack(result =>\r\n                                        result && this.deleteDevice(index), true)}\r\n                            >\r\n                                <IconDelete />\r\n                            </IconButton>\r\n                        </Tooltip> : <div className={classes.emptyBlock} />}\r\n\r\n                </div>\r\n            </TableCell>}\r\n            {!device && this.state.windowWidth >= WIDTHS[1 + j++] && <TableCell colSpan={1} />}\r\n            {!device && this.state.windowWidth >= WIDTHS[1 + j++] && <TableCell colSpan={1} />}\r\n            {!device && this.state.windowWidth >= WIDTHS[1 + j++] && <TableCell colSpan={1} />}\r\n            {!device && this.state.windowWidth >= WIDTHS[0] && <TableCell colSpan={1} >{countSpan}</TableCell>}\r\n            {!device && <TableCell align=\"right\" className={classes.buttonsCell}>\r\n                {item.importer &&\r\n                    <div className={classes.wrapperButton}>\r\n                        <Tooltip title={I18n.t('Importer')}>\r\n                            <IconButton\r\n                                size={this.state.windowWidth <= WIDTHS[4] ? 'small' : 'medium'}\r\n                                onClick={() => this.setState({ showImporterDialog: item })}\r\n                            >\r\n                                <FileCopyIcon />\r\n                            </IconButton>\r\n                        </Tooltip>\r\n                        <div className={classes.emptyBlock} />\r\n                        <div className={classes.emptyBlock} />\r\n                    </div>}\r\n                {!item.noEdit && item.id !== 'alias.0.automatically_detected' && item.id !== 'alias.0.linked_devices' &&\r\n                    <div className={classes.wrapperButton}>\r\n                        <Tooltip title={I18n.t('Edit folder')}>\r\n                            <IconButton\r\n                                size={this.state.windowWidth <= WIDTHS[4] ? 'small' : 'medium'}\r\n                                onClick={_ => this.setState({ showEditFolder: item.obj })}>\r\n                                <IconEdit />\r\n                            </IconButton>\r\n                        </Tooltip>\r\n                        {!countSpan ?\r\n                            <Tooltip title={I18n.t('Delete folder')}>\r\n                                <IconButton\r\n                                    size={this.state.windowWidth <= WIDTHS[4] ? 'small' : 'medium'}\r\n                                    onClick={e =>\r\n                                        deleteFolderAndDeviceCallBack(result =>\r\n                                            result && this.props.socket.delObjects(item.id, true), false)}\r\n                                >\r\n                                    <IconDelete />\r\n                                </IconButton>\r\n                            </Tooltip> : <div className={classes.emptyBlock} />}\r\n                    </div>\r\n                }\r\n            </TableCell>}\r\n        </WrapperRow>;\r\n\r\n        const result = [inner];\r\n\r\n        if (isExpanded) {\r\n            children.forEach(it => result.push(this.renderOneItem(items, it)));\r\n        }\r\n        return result;\r\n    }\r\n\r\n    changeFilter(func, room, type, text, noInfo) {\r\n        const filter = JSON.parse(JSON.stringify(this.state.filter));\r\n        if (func !== undefined && func !== null) {\r\n            filter.func = func === '_' ? '' : func;\r\n            window.localStorage.setItem('Devices.filter.func', filter.func);\r\n        }\r\n        if (room !== undefined && room !== null) {\r\n            filter.room = room === '_' ? '' : room;\r\n            window.localStorage.setItem('Devices.filter.room', filter.room);\r\n        }\r\n        if (type !== undefined && type !== null) {\r\n            filter.type = type === '_' ? '' : type;\r\n            window.localStorage.setItem('Devices.filter.type', filter.type);\r\n        }\r\n        if (text !== undefined && text !== null) {\r\n            filter.text = text.toLowerCase();\r\n            window.localStorage.setItem('Devices.filter.text', filter.text);\r\n        }\r\n        if (noInfo !== undefined && noInfo !== null) {\r\n            filter.noInfo = noInfo;\r\n            window.localStorage.setItem('Devices.filter.noInfo', filter.noInfo ? 'true' : 'false');\r\n        }\r\n\r\n        const listItems = this.state.listItems; //JSON.parse(JSON.stringify(this.state.listItems));\r\n        this.applyFilter(listItems, null, filter);\r\n        this.setState({/*listItems,*/ filter});\r\n    }\r\n\r\n    renderAllItems(items) {\r\n        return items\r\n            .filter(item => !item.parent)\r\n            .map(item => this.renderOneItem(items, item));\r\n    }\r\n\r\n    renderHeaderType() {\r\n        let result = [];\r\n        const noInfo = this.state.filter.noInfo;\r\n        this.state.devices.forEach(el => (!noInfo || el.type !== 'info') && !result.includes(el.type) && result.push(el.type));\r\n        result = result.map(type => ({value: type, label: I18n.t('type-' + type)}));\r\n        result.sort((a, b) => a.label > b.label ? 1 : (a.label < b.label ? -1 : 0))\r\n\r\n        return <Select\r\n            value={this.state.filter.type || '_'}\r\n            onChange={e => this.changeFilter(null, null, e.target.value)}\r\n        >\r\n            <MenuItem value={'_'}><span style={{color: this.props.themeType === 'dark' ? '#FFFFFF40' : '#00000040'}}>{I18n.t('Type')}</span></MenuItem>\r\n            {result.map(item => <MenuItem key={item.value} value={item.value}>\r\n                <TypeIcon className={clsx(this.props.classes.enumIcon, this.props.classes.iconInSelect)} type={item.value} />\r\n                {item.label}\r\n            </MenuItem>)}\r\n        </Select>;\r\n    }\r\n\r\n    renderHeaderFunction() {\r\n        if (!this.funcEnums) {\r\n            return I18n.t('Function');\r\n        } else {\r\n            const list = this.funcEnums.map(id => this.objects[id]);\r\n            list.unshift({\r\n                _id: '_',\r\n                common: {\r\n                    name: I18n.t('Function'),\r\n                    color: this.props.themeType === 'dark' ? '#FFFFFF40' : '#00000040'\r\n                }\r\n            });\r\n\r\n            return <SelectWithIcon\r\n                t={I18n.t}\r\n                dense\r\n                lang={I18n.getLanguage()}\r\n                themeType={this.props.themeType}\r\n                value={this.state.filter.func || '_'}\r\n                list={list}\r\n                onChange={text => this.changeFilter(text)}\r\n            />;\r\n        }\r\n    }\r\n\r\n    renderHeaderRoom() {\r\n        if (!this.roomsEnums) {\r\n            return I18n.t('Room');\r\n        } else {\r\n            const list = this.roomsEnums.map(id => this.objects[id]);\r\n            list.unshift({\r\n                _id: '_',\r\n                common: {\r\n                    name: I18n.t('Room'),\r\n                    color: this.props.themeType === 'dark' ? '#FFFFFF40' : '#00000040'\r\n                }\r\n            });\r\n\r\n            return <SelectWithIcon\r\n                t={I18n.t}\r\n                dense\r\n                lang={I18n.getLanguage()}\r\n                themeType={this.props.themeType}\r\n                value={this.state.filter.func || '_'}\r\n                list={list}\r\n                onChange={text => this.changeFilter(text)}\r\n            />;\r\n        }\r\n    }\r\n\r\n    renderDevices() {\r\n        const classes = this.props.classes;\r\n\r\n        let j = 0;\r\n\r\n        return <Paper className={classes.paperTable}>\r\n            <Table stickyHeader className={classes.table} size=\"small\">\r\n                <TableHead>\r\n                    <TableRow>\r\n                        <TableCell className={classes.tableExpandIconCell} />\r\n                        <TableCell className={classes.tableIconCell} />\r\n                        <TableCell className={classes.headerCell + ' ' + classes.tableNameCell}>{I18n.t('Name')}</TableCell>\r\n                        {this.state.windowWidth >= WIDTHS[1 + j++] ? <TableCell className={classes.headerCell}>{this.renderHeaderFunction()}</TableCell> : null}\r\n                        {this.state.windowWidth >= WIDTHS[1 + j++] ? <TableCell className={classes.headerCell}>{this.renderHeaderRoom()}</TableCell> : null}\r\n                        {this.state.windowWidth >= WIDTHS[1 + j++] ? <TableCell className={classes.headerCell}>{this.renderHeaderType()}</TableCell> : null}\r\n                        {this.state.windowWidth >= WIDTHS[0] ? <TableCell style={{ width: 50 }} className={classes.headerCell}>{I18n.t('States')}</TableCell> : null}\r\n                        <TableCell className={classes.headerCell + ' ' + classes.buttonsCellHeader} />\r\n                    </TableRow>\r\n                </TableHead>\r\n                <TableBody>{this.renderAllItems(this.state.listItems)}</TableBody>\r\n            </Table>\r\n        </Paper>;\r\n    }\r\n\r\n    onExpand(group) {\r\n        if (!this.state.expanded.includes(group)) {\r\n            const expanded = JSON.parse(JSON.stringify(this.state.expanded));\r\n            expanded.push(group);\r\n            window.localStorage.setItem('Devices.expanded', JSON.stringify(expanded));\r\n            this.setState({ expanded });\r\n        }\r\n    }\r\n\r\n    onCollapse(group) {\r\n        const pos = this.state.expanded.indexOf(group);\r\n        if (pos !== -1) {\r\n            const expanded = JSON.parse(JSON.stringify(this.state.expanded));\r\n            expanded.splice(pos, 1);\r\n            window.localStorage.setItem('Devices.expanded', JSON.stringify(expanded));\r\n            this.setState({ expanded });\r\n        }\r\n    }\r\n\r\n    onToggle(group) {\r\n        if (!this.state.expanded.includes(group)) {\r\n            this.onExpand(group);\r\n        } else {\r\n            this.onCollapse(group);\r\n        }\r\n    }\r\n\r\n    setSmartName(obj, newSmartName, language) {\r\n        // set smartName\r\n        language = language || I18n.getLanguage();\r\n        if (newSmartName || newSmartName === false) {\r\n            if (this.state.iotNoCommon) {\r\n                const iot = this.state.iot || 'iot.0';\r\n                obj.common.custom = obj.common.custom || {};\r\n                obj.common.custom[iot] = obj.common.custom[iot] || {};\r\n                obj.common.custom[iot].smartName = obj.common.custom[iot].smartName || {};\r\n                obj.common.custom[iot].smartName[language] = newSmartName;\r\n            } else {\r\n                obj.common.smartName = obj.common.smartName || {};\r\n                obj.common.smartName[language] = newSmartName;\r\n            }\r\n        } else {\r\n            if (this.state.iotNoCommon) {\r\n                const iot = this.state.iot || 'iot.0';\r\n                if (obj.common.custom && obj.common.custom[iot]) {\r\n                    obj.common.custom[iot].smartName[language] = '';\r\n                }\r\n            } else {\r\n                if (obj.common.smartName) {\r\n                    obj.common.smartName[language] = '';\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    getSmartName(obj, language) {\r\n        language = language || I18n.getLanguage();\r\n        let smartName;\r\n        if (obj &&\r\n            obj.common &&\r\n            obj.common.custom) {\r\n            if (this.state.iotNoCommon) {\r\n                const iot = this.state.iot || 'iot.0';\r\n                if (obj.common.custom[iot] && obj.common.custom[iot].smartName) {\r\n                    smartName = obj.common.custom[iot].smartName;\r\n                }\r\n            } else {\r\n                smartName = obj.common.smartName;\r\n            }\r\n        }\r\n\r\n        if (smartName && typeof smartName === 'object') {\r\n            smartName = smartName[language] || smartName.en || '';\r\n        }\r\n        return smartName || '';\r\n    }\r\n\r\n    addToEnum = async (enumId, id) => {\r\n        const obj = await this.props.socket.getObject(enumId);\r\n        if (obj && obj.common) {\r\n            obj.common.members = obj.common.members || [];\r\n            if (!obj.common.members.includes(id)) {\r\n                obj.common.members.push(id);\r\n                obj.common.members.sort();\r\n                return this.props.socket.setObject(enumId, obj);\r\n            }\r\n        }\r\n    }\r\n\r\n    removeFromEnum = async (enumId, id) => {\r\n        const obj = await this.props.socket.getObject(enumId);\r\n\r\n        if (obj?.common?.members) {\r\n            const pos = obj.common.members.indexOf(id);\r\n            if (pos !== -1) {\r\n                obj.common.members.splice(pos, 1);\r\n                await this.props.socket.setObject(enumId, obj);\r\n            }\r\n        }\r\n    }\r\n\r\n    processTasks = async tasks => {\r\n        for (let t = 0; t < tasks.length; t++) {\r\n            const task = tasks[t];\r\n\r\n            if (task.obj) {\r\n                if (task.enums) {\r\n                    for (let i = 0; i < task.enums.length; i++) {\r\n                        let enumId = task.enums[i];\r\n                        try {\r\n                            await this.addToEnum(enumId, task.id);\r\n                        } catch (e) {\r\n                            window.alert('Cannot change enum: ' + e);\r\n                        }\r\n                    }\r\n                }\r\n\r\n                try {\r\n                    await this.props.socket.setObject(task.id, task.obj);\r\n                } catch (e) {\r\n                    window.alert('Cannot change object: ' + e);\r\n                }\r\n            } else {\r\n                // delete\r\n                if (task.enums) {\r\n                    for (let i = 0; i < task.enums.length; i++) {\r\n                        let enumId = task.enums[i];\r\n                        try {\r\n                            await this.removeFromEnum(enumId, task.id);\r\n                        } catch (e) {\r\n                            window.alert('Cannot change enum: ' + e);\r\n                        }\r\n                    }\r\n                }\r\n\r\n            }\r\n        }\r\n    }\r\n\r\n    onCopyDevice = async (id, newChannelId) => {\r\n        // if this is device not from linkeddevice or from alias\r\n        const copyDevice = this.state.devices.find(device => device.channelId === id);\r\n\r\n        if (!copyDevice) {\r\n            return;\r\n        }\r\n\r\n        const channelId = copyDevice.channelId;\r\n        const isAlias = channelId.startsWith('alias.') || channelId.startsWith('linkeddevices.');\r\n\r\n        const channelObj = this.objects[channelId];\r\n        const { functions, rooms, icon, states, color, type } = copyDevice;\r\n        const tasks = [];\r\n\r\n        const patterns = this.detector.getPatterns();\r\n        const role = patterns[type]?.states && patterns[type].states.find(item => item.defaultChannelRole);\r\n\r\n        const obj = {\r\n            id: newChannelId,\r\n            obj: {\r\n                common: {\r\n                    name: channelObj.common.name,\r\n                    color,\r\n                    desc: channelObj.common.desc,\r\n                    role: role?.defaultChannelRole || type,\r\n                    icon: icon && icon.startsWith('adapter/') ? `../../${icon}` : icon,\r\n                },\r\n                native: {},\r\n                type: 'channel'\r\n            },\r\n            enums: rooms.concat(functions)\r\n        }\r\n\r\n        if (!obj.obj.common.color) {\r\n            delete obj.obj.common.color;\r\n        }\r\n\r\n        if (!isAlias) {\r\n            obj.obj.native.originalId = id;\r\n        }\r\n\r\n        tasks.push(obj);\r\n\r\n        states.forEach(state => {\r\n            if (!state.id) {\r\n                return;\r\n            }\r\n            const obj = JSON.parse(JSON.stringify(this.objects[state.id]));\r\n            obj._id = newChannelId + '.' + state.name;\r\n\r\n            obj.native = {};\r\n\r\n            if(obj?.common?.custom){\r\n                delete obj.common.custom;\r\n            }\r\n\r\n            if(obj?.common?.smartName){\r\n                delete obj.common.smartName;\r\n            }\r\n\r\n            if (!isAlias) {\r\n                obj.common.alias = { id: state.id };\r\n            }\r\n\r\n            tasks.push({ id: obj._id, obj });\r\n        });\r\n\r\n        await this.processTasks(tasks);\r\n    }\r\n\r\n    onEditFinished = async (data, refresh, cb) => {\r\n        let somethingChanged = false;\r\n        const device = this.state.devices.find(({ channelId }) => channelId === this.state.editId);\r\n        if (data) {\r\n            // const device = this.state.devices[this.state.editIndex];\r\n            const channelId = device.channelId;\r\n\r\n            if (channelId.startsWith(ALIAS)) {\r\n                for (let s = 0; s < device.states.length; s++) {\r\n                    const state = device.states[s];\r\n                    const obj = state.id ? (await this.props.socket.getObject(state.id)) : null;\r\n                    if (obj?.common?.alias) {\r\n                        if (data.ids[state.name] !== obj.common.alias.id ||\r\n                            obj.common.alias.read !== data.fx[state.name].read ||\r\n                            obj.common.alias.write !== data.fx[state.name].write) {\r\n                            // update alias ID\r\n                            if (!state.required && !data.ids[state.name]) {\r\n                                // delete state\r\n                                await this.props.socket.delObject(state.id);\r\n                            } else {\r\n                                // update state\r\n                                const stateObj = await this.props.socket.getObject(state.id);\r\n                                stateObj.common = stateObj.common || {};\r\n                                stateObj.common.alias = stateObj.common.alias || {};\r\n                                stateObj.common.alias.id = data.ids[state.name];\r\n                                if (!data.fx[state.name].read) {\r\n                                    delete stateObj.common.alias.read;\r\n                                } else {\r\n                                    stateObj.common.alias.read = data.fx[state.name].read;\r\n                                }\r\n                                if (!data.fx[state.name].write) {\r\n                                    delete stateObj.common.alias.write;\r\n                                } else {\r\n                                    stateObj.common.alias.write = data.fx[state.name].write;\r\n                                }\r\n                                await this.props.socket.setObject(stateObj._id, stateObj);\r\n                            }\r\n                        } // else nothing changed\r\n                    } else if (data.ids[state.name]) {\r\n                        state.id = state.id || (channelId + '.' + state.name);\r\n\r\n                        // Object not yet exists or invalid\r\n                        let stateObj;\r\n                        try {\r\n                            stateObj = await this.props.socket.getObject(state.id);\r\n                        } catch (e) {\r\n\r\n                        }\r\n                        stateObj = stateObj || {};\r\n                        stateObj._id = state.id;\r\n                        stateObj.native = stateObj.native || {};\r\n                        stateObj.type = 'state';\r\n                        stateObj.common = stateObj.common || {};\r\n                        const common = stateObj.common;\r\n                        common.alias = common.alias || {};\r\n                        common.alias.id = data.ids[state.name];\r\n                        common.name = common.name || state.name;\r\n                        common.role = state.defaultRole;\r\n                        if (state.read !== undefined) {\r\n                            common.read = state.read;\r\n                        }\r\n                        if (state.write !== undefined) {\r\n                            common.write = state.write;\r\n                        }\r\n\r\n                        if (state.defaultStates) {\r\n                            common.states = state.defaultStates;\r\n                        }\r\n\r\n                        if (data.fx[state.name].read) {\r\n                            stateObj.common.alias.read = data.fx[state.name].read;\r\n                        }\r\n                        if (data.fx[state.name].write) {\r\n                            stateObj.common.alias.write = data.fx[state.name].write;\r\n                        }\r\n\r\n                        common.type = state.type ? (typeof state.type === 'object' ? state.type[0] : state.type) : TYPES_MAPPING[state.defaultRole.split('.')[0]] || 'state';\r\n\r\n                        if (state.defaultMin !== undefined) {\r\n                            common.min = state.defaultMin;\r\n                        } else\r\n                            if (state.min !== undefined) {\r\n                                common.min = 0;\r\n                            }\r\n\r\n                        if (state.defaultMax !== undefined) {\r\n                            common.max = state.defaultMax;\r\n                        } else\r\n                            if (state.max !== undefined) {\r\n                                common.max = 100;\r\n                            }\r\n\r\n                        if (state.defaultUnit) {\r\n                            common.unit = state.defaultUnit;\r\n                        } else if (state.unit) {\r\n                            common.unit = state.unit;\r\n                        }\r\n                        somethingChanged = true;\r\n                        await this.props.socket.setObject(stateObj._id, stateObj);\r\n                    }\r\n                }\r\n            } else\r\n                if (channelId.startsWith(LINKEDDEVICES)) {\r\n                    for (let s = 0; s < device.states.length; s++) {\r\n                        let state = device.states[s];\r\n                        const obj = state.id && (await this.props.socket.getObject(state.id));\r\n                        let attrs;\r\n                        if (state.id && obj && obj.common && obj.common.custom && (attrs = Object.keys(obj.common.custom).filter(id => id.startsWith(LINKEDDEVICES))).length) {\r\n                            const attr = attrs[0];\r\n                            if (data.ids[state.name] !== obj.common.custom[attr].parentId ||\r\n                                !obj.common.custom[attr].enabled ||\r\n                                !obj.common.custom[attr].isLinked) {\r\n                                // update alias ID\r\n                                if (!state.required && !data.ids[state.name]) {\r\n                                    // delete state\r\n                                    await this.props.socket.delObject(state.id);\r\n                                    somethingChanged = true;\r\n                                } else {\r\n                                    // update state\r\n                                    obj.common = obj.common || {};\r\n                                    obj.common.custom = obj.common.custom || {};\r\n                                    obj.common.custom[attr] = obj.common.custom[attr] || {};\r\n                                    obj.common.custom[attr].parentId = data.ids[state.name];\r\n                                    obj.common.custom[attr].enabled = true;\r\n                                    obj.common.custom[attr].isLinked = true;\r\n                                    somethingChanged = true;\r\n                                    await this.props.socket.setObject(obj._id, obj);\r\n                                }\r\n                            } // else nothing changed\r\n                        } else if (data.ids[state.name]) {\r\n                            state.id = state.id || (channelId + '.' + state.name);\r\n\r\n                            // Object not yet exists or invalid\r\n                            let stateObj;\r\n                            try {\r\n                                stateObj = await this.props.socket.getObject(state.id);\r\n                            } catch (e) {\r\n\r\n                            }\r\n                            stateObj = stateObj || {};\r\n                            stateObj._id = state.id;\r\n                            stateObj.native = stateObj.native || {};\r\n                            stateObj.type = 'state';\r\n                            stateObj.common = stateObj.common || {};\r\n                            const common = stateObj.common;\r\n                            const attr = this.state.linkeddevices;\r\n                            common.custom = common.custom || {};\r\n                            common.custom[attr] = common.custom[attr] || {};\r\n                            common.custom[attr].parentId = data.ids[state.name];\r\n                            common.custom[attr].enabled = true;\r\n                            common.custom[attr].isLinked = true;\r\n                            common.custom[attr].parentType = 'mixed';\r\n\r\n                            common.name = common.name || state.name;\r\n                            common.role = state.defaultRole;\r\n\r\n                            if (state.read !== undefined) {\r\n                                common.read = state.read;\r\n                            }\r\n                            if (state.write !== undefined) {\r\n                                common.write = state.write;\r\n                            }\r\n\r\n                            if (state.defaultStates) {\r\n                                common.states = state.defaultStates;\r\n                            }\r\n                            common.type = state.type ? (typeof state.type === 'object' ? state.type[0] : state.type) : TYPES_MAPPING[state.defaultRole.split('.')[0]] || 'state';\r\n\r\n                            if (state.defaultMin !== undefined) {\r\n                                common.min = state.defaultMin;\r\n                            } else\r\n                                if (state.min !== undefined) {\r\n                                    common.min = 0;\r\n                                }\r\n\r\n                            if (state.defaultMax !== undefined) {\r\n                                common.max = state.defaultMax;\r\n                            } else\r\n                                if (state.max !== undefined) {\r\n                                    common.max = 100;\r\n                                }\r\n\r\n                            if (state.defaultUnit) {\r\n                                common.unit = state.defaultUnit;\r\n                            } else if (state.unit) {\r\n                                common.unit = state.unit;\r\n                            }\r\n                            somethingChanged = true;\r\n                            await this.props.socket.setObject(stateObj._id, stateObj);\r\n                        }\r\n                    }\r\n                }\r\n        }\r\n\r\n        // update expert mode if was changed\r\n        const newState = { editId: null, expertMode: window.localStorage.getItem('Devices.expertMode') === 'true' };\r\n        if (somethingChanged) {\r\n            //const devices = JSON.parse(JSON.stringify(this.state.devices));\r\n            // update enums, name\r\n            this.updateEnumsForOneDevice(device); // TODO: here the device will be changed directly in state!\r\n            //newState.devices = devices;\r\n        }\r\n        cb && cb();\r\n        await this.setStateAsync(newState);\r\n        refresh && (await this.detectDevices(true));\r\n        Router.doNavigate(null, '', '');\r\n    }\r\n\r\n    onSaveProperties = async data => {\r\n        let somethingChanged = false;\r\n        const device = this.state.devices.find(({ channelId }) => channelId === this.state.editId);\r\n        if (data) {\r\n            const language = I18n.getLanguage();\r\n            const channelId = device.channelId;\r\n            const oldName = Utils.getObjectNameFromObj(this.objects[channelId], null, { language });\r\n\r\n            let oldSmartName = this.getSmartName(this.objects[channelId], language);\r\n\r\n            if (this.objects[channelId] && this.objects[channelId].common &&\r\n                (oldName !== data.name ||\r\n                    oldSmartName !== data.smartName ||\r\n                    (this.objects[channelId].common.color || '') !== data.color ||\r\n                    (this.objects[channelId].common.icon || '') !== data.icon)\r\n            ) {\r\n                // update channel\r\n                let obj = await this.props.socket.getObject(channelId);\r\n                obj = obj || {};\r\n                obj.common = obj.common || {};\r\n                if (typeof obj.common.name !== 'object') {\r\n                    obj.common.name = { [language]: obj.common.name || '' };\r\n                }\r\n                obj.common.name[language] = data.name;\r\n                // obj._id = data.name.replace(Utils.FORBIDDEN_CHARS, '_').replace(/\\s/g, '_').replace(/\\./g, '_');\r\n                obj.common.role = device.type;\r\n                obj.common.color = data.color;\r\n                if (!data.color) {\r\n                    delete obj.common.color;\r\n                }\r\n                obj.common.icon = data.icon;\r\n                if (!data.icon) {\r\n                    delete obj.common.icon;\r\n                }\r\n                obj.type = obj.type || 'channel';\r\n\r\n                if (data.smartName === false) {\r\n                    obj.common.smartName = false;\r\n                } else {\r\n                    this.setSmartName(obj, data.smartName, language);\r\n                }\r\n\r\n                await this.props.socket.setObject(obj._id, obj);\r\n                somethingChanged = true;\r\n            }\r\n\r\n            if (await this.setEnumsOfDevice(channelId, data.functions, data.rooms)) {\r\n                somethingChanged = true;\r\n            }\r\n        }\r\n\r\n        if (somethingChanged) {\r\n            const devices = JSON.parse(JSON.stringify(this.state.devices));\r\n            // update enums, name\r\n            this.updateEnumsForOneDevice(device);\r\n            this.setState({ devices });\r\n        }\r\n    }\r\n\r\n    renderEditDialog() {\r\n        if (this.state.editId === null) {\r\n            return null;\r\n        }\r\n        const device = this.state.devices.find(({ channelId }) => channelId === this.state.editId);\r\n        if (!device) {\r\n            return null;\r\n        }\r\n        if (!this.objects[this.state.editId]) {\r\n            window.alert('Device not found');\r\n            Router.doNavigate(null, '', '');\r\n            return this.setState({ editId: null });\r\n        }\r\n\r\n        return <DialogEdit\r\n            channelId={device.channelId}\r\n            type={device.type}\r\n            channelInfo={device}\r\n            objects={this.objects}\r\n            states={this.states}\r\n            patterns={this.patterns}\r\n            themeType={this.props.themeType}\r\n            processTasks={this.processTasks}\r\n            enumIDs={this.enumIDs}\r\n            socket={this.props.socket}\r\n            onCopyDevice={async (id, newId) => {\r\n                await this.onCopyDevice(id, newId);\r\n                const copiedDevice = this.state.devices.find(device => device.channelId === id);\r\n                if (copiedDevice) {\r\n                    await this.deleteDevice(this.state.devices.indexOf(copiedDevice));\r\n                }\r\n            }}\r\n            onSaveProperties={data => this.onSaveProperties(data)}\r\n            onClose={(data, refresh, cb) => this.onEditFinished(data, refresh, cb)}\r\n        />;\r\n    }\r\n\r\n    async setEnumsOfDevice(channelId, functions, rooms) {\r\n        let somethingChanged = false;\r\n\r\n        for (let e = 0; e < this.enumIDs.length; e++) {\r\n            const id = this.enumIDs[e];\r\n            const members = (this.objects[id] && this.objects[id].common && this.objects[id].common.members) || [];\r\n            // if this channel is in enum\r\n            if (id.startsWith('enum.functions.') && functions) {\r\n                if (functions.includes(id)) {\r\n                    if (!members.includes(channelId)) {\r\n                        const obj = await this.props.socket.getObject(id);\r\n                        obj.common = obj.common || {};\r\n                        obj.common.members = obj.common.members || [];\r\n                        obj.common.members.push(channelId);\r\n                        obj.common.members.sort();\r\n                        await this.props.socket.setObject(obj._id, obj);\r\n                        somethingChanged = true;\r\n                    }\r\n                } else {\r\n                    if (members.includes(channelId)) {\r\n                        const obj = await this.props.socket.getObject(id);\r\n                        obj.common = obj.common || {};\r\n                        obj.common.members = obj.common.members || [];\r\n                        const pos = obj.common.members.indexOf(channelId);\r\n                        if (pos !== -1) {\r\n                            obj.common.members.splice(pos, 1);\r\n                            obj.common.members.sort();\r\n                            await this.props.socket.setObject(obj._id, obj);\r\n                            somethingChanged = true;\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n\r\n            if (id.startsWith('enum.rooms.') && rooms) {\r\n                if (rooms.includes(id)) {\r\n                    if (!members.includes(channelId)) {\r\n                        const obj = await this.props.socket.getObject(id)\r\n                        obj.common = obj.common || {};\r\n                        obj.common.members = obj.common.members || [];\r\n                        obj.common.members.push(channelId);\r\n                        obj.common.members.sort();\r\n                        await this.props.socket.setObject(obj._id, obj);\r\n                        somethingChanged = true;\r\n                    }\r\n                } else {\r\n                    if (members.includes(channelId)) {\r\n                        const obj = await this.props.socket.getObject(id);\r\n                        obj.common = obj.common || {};\r\n                        obj.common.members = obj.common.members || [];\r\n                        const pos = obj.common.members.indexOf(channelId);\r\n                        if (pos !== -1) {\r\n                            obj.common.members.splice(pos, 1);\r\n                            obj.common.members.sort();\r\n                            await this.props.socket.setObject(obj._id, obj);\r\n                            somethingChanged = true;\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        return somethingChanged;\r\n    }\r\n\r\n    deleteDevice = async (index, devices) => {\r\n        devices = devices || JSON.parse(JSON.stringify(this.state.devices));\r\n        const device = devices[index];\r\n        if (!device) {\r\n            return;\r\n        }\r\n\r\n        // remove this device from all enums\r\n        for (let i = 0; i < this.enumIDs.length; i++) {\r\n            const enumId = this.enumIDs[i];\r\n            if (this.objects[enumId] && this.objects[enumId].common && this.objects[enumId].common.members) {\r\n                if (device.states.find(state => state.id && this.objects[enumId].common.members.includes(state.id)) ||\r\n                    this.objects[enumId].common.members.includes(device.channelId)\r\n                ) {\r\n                    const obj = await this.props.socket.getObject(enumId);\r\n                    if (!obj || !obj.common || !obj.common.members) {\r\n                        continue;\r\n                    }\r\n                    const members = [];\r\n\r\n                    obj.common.members.forEach(sid => {\r\n                        if (!device.states.find(state => state.id === sid) && sid !== device.channelId) {\r\n                            members.push(sid);\r\n                        }\r\n                    });\r\n\r\n                    if (JSON.stringify(members) !== JSON.stringify(obj.common.members)) {\r\n                        obj.common.members = members;\r\n                        await this.props.socket.setObject(obj._id, obj);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        // delete all states of this device\r\n        for (let i = 0; i < device.states.length; i++) {\r\n            const state = device.states[i];\r\n            if (state.id) {\r\n                const id = state.id;\r\n                await this.props.socket.delObject(id);\r\n            }\r\n        }\r\n\r\n        if (device.channelId && device.channelId !== device.mainStateId) {\r\n            await this.props.socket.delObject(device.channelId);\r\n        }\r\n\r\n        devices.splice(index, 1);\r\n\r\n        return devices;\r\n    }\r\n\r\n    async createDevice(options) {\r\n        const patterns = this.detector.getPatterns();\r\n        let states = Object.keys(patterns).find(t => patterns[t].type === options.type);\r\n        if (!states) {\r\n            return await this.setStateAsync({ message: I18n.t('Unknown type!') + options.type });\r\n        }\r\n        states = patterns[states].states;\r\n        if (options.states.length) {\r\n            states = options.states;\r\n        }\r\n\r\n        // try to find channelRole\r\n        const role = states.find(item => item.defaultChannelRole);\r\n\r\n        const obj = {\r\n            _id: options.id,\r\n            common: {\r\n                name: { [I18n.getLanguage()]: options.name },\r\n                role: role?.defaultChannelRole || options.type,\r\n                icon: options.icon,\r\n                color: options.color,\r\n            },\r\n            native: {},\r\n            type: 'channel'\r\n        };\r\n\r\n        // create channel\r\n        await this.props.socket.setObject(options.id, obj);\r\n\r\n        for (let s = 0; s < states.length; s++) {\r\n            const state = states[s];\r\n\r\n            if (state.required && state.defaultRole) {\r\n                const common = {\r\n                    name: state.name,\r\n                    role: state.defaultRole,\r\n                    type: state.type ? (typeof state.type === 'object' ? state.type[0] : state.type) : TYPES_MAPPING[state.defaultRole.split('.')[0]] || 'state',\r\n                    read: state.read === undefined ? true : state.read,\r\n                    write: state.write === undefined ? false : state.write,\r\n                    alias: {\r\n                        id: ''\r\n                    }\r\n                };\r\n                if (state.defaultStates) {\r\n                    common.states = state.defaultStates;\r\n                }\r\n\r\n                if (state.defaultMin !== undefined) {\r\n                    common.min = state.defaultMin;\r\n                } else\r\n                    if (state.min !== undefined) {\r\n                        common.min = 0;\r\n                    }\r\n\r\n                if (state.defaultMax !== undefined) {\r\n                    common.max = state.defaultMax;\r\n                } else\r\n                    if (state.max !== undefined) {\r\n                        common.max = 100;\r\n                    }\r\n\r\n                if (state.defaultUnit) {\r\n                    common.unit = state.defaultUnit;\r\n                } else\r\n                    if (state.unit) {\r\n                        common.unit = state.unit;\r\n                    }\r\n\r\n                const obj = {\r\n                    _id: options.id + '.' + state.name,\r\n                    common,\r\n                    native: {},\r\n                    type: 'state'\r\n                };\r\n                await this.props.socket.setObject(options.id + '.' + state.name, obj);\r\n            }\r\n\r\n            await this.setEnumsOfDevice(options.id, options.functions, options.rooms);\r\n        }\r\n\r\n        /*const devices = JSON.parse(JSON.stringify(this.state.devices));\r\n        const result = this.detector.detect({ id: options.id, objects: this.objects, forceRebuildKeys: true });\r\n\r\n        if (result) {\r\n            for (let r = 0; r < result.length; r++) {\r\n                this.updateEnumsForOneDevice(result[r]);\r\n                devices.push(result[r]);\r\n            }\r\n        }*/\r\n\r\n        this.editCreatedId = obj._id;\r\n        /*await this.setStateAsync({ devices, editId: obj._id });\r\n        Router.doNavigate('list', 'edit', obj._id);*/\r\n    }\r\n\r\n    renderAddDialog() {\r\n        if (!this.state.showAddDialog) {\r\n            return null;\r\n        } else {\r\n            return <DialogNew\r\n                themeType={this.props.themeType}\r\n                theme={this.props.theme}\r\n                detector={this.detector}\r\n                objects={this.objects}\r\n                socket={this.props.socket}\r\n                processTasks={this.processTasks}\r\n                enumIDs={this.enumIDs}\r\n                selected={this.state.selected}\r\n                prefix={this.state.showAddDialog}\r\n                copyDevice={this.state.copyId ? this.state.devices.find(el => el.channelId === this.state.copyId) || null : null}\r\n                onClose={options =>\r\n                    this.setState({ showAddDialog: '', copyId: '' }, () =>\r\n                        options && this.createDevice(options))}\r\n            />;\r\n        }\r\n    }\r\n\r\n    renderImporterDialog = () => {\r\n        if (!this.state.showImporterDialog) {\r\n            return null;\r\n        } else {\r\n            return <DialogImporter\r\n                item={this.state.showImporterDialog}\r\n                socket={this.props.socket}\r\n                devices={this.state.devices}\r\n                objects={this.objects}\r\n                onCopyDevice={this.onCopyDevice}\r\n                onClose={result =>\r\n                    this.setState({ showImporterDialog: null }, () =>\r\n                        result && this.detectDevices(true))}\r\n                listItems={this.state.listItems}\r\n            />;\r\n        }\r\n    }\r\n\r\n    renderEditFolder = () => {\r\n        if (!this.state.showEditFolder && !this.state.newFolder) {\r\n            return null;\r\n        } else {\r\n            return <DialogEditFolder\r\n                processTasks={this.processTasks}\r\n                deleteDevice={async (index, devices) => await this.deleteDevice(index, devices)}\r\n                objects={this.objects}\r\n                socket={this.props.socket}\r\n                detector={this.detector}\r\n                devices={this.state.devices}\r\n                data={this.state.showEditFolder}\r\n                selected={this.disabledButtons() ? undefined : this.state.selected}\r\n                newFolder={this.state.newFolder}\r\n                onClose={() =>\r\n                    this.setState({ showEditFolder: undefined, newFolder: false })}\r\n            />;\r\n        }\r\n    }\r\n\r\n    // renderDeleteDialog() {\r\n    //     if (this.state.deleteIndex === null) {\r\n    //         return null;\r\n    //     } else {\r\n    //         const time = window.localStorage.getItem('DeleteDeviceTime');\r\n    //         const fiveMin = 1000 * 60 * 5;\r\n    //         const index = this.state.deleteIndex;\r\n    //         if (time && new Date().getTime() - time < fiveMin) {\r\n    //             return this.setState({ deleteIndex: null }, () => {\r\n    //                 this.deleteDevice(index);\r\n    //             })\r\n    //         }\r\n    //         return <DialogConfirm\r\n    //             title={I18n.t('Please confirm...')}\r\n    //             text={I18n.t('Device and all states will be deleted. Are you sure?')}\r\n    //             onClose={result => {\r\n    //                 const index = this.state.deleteIndex;\r\n    //                 this.setState({ deleteIndex: null }, async () => {\r\n    //                     if (result) {\r\n    //                         window.localStorage.setItem('DeleteDeviceTime', new Date().getTime());\r\n    //                         const devices = await this.deleteDevice(index);\r\n    //                         this.setState({ devices });\r\n    //                     }\r\n    //                 })\r\n    //             }}\r\n    //         />;\r\n    //     }\r\n    // }\r\n\r\n    renderEditEnumDialog() {\r\n        if (!this.state.editEnum) {\r\n            return null;\r\n        } else {\r\n            return <DialogEditEnums\r\n                objects={this.objects}\r\n                values={this.state.editEnum.values}\r\n                enumIDs={this.state.editEnum.enums}\r\n                deviceName={this.state.devices[this.state.editEnum.index].name}\r\n                onClose={async values => {\r\n                    if (values && JSON.stringify(values) !== JSON.stringify(this.state.editEnum.values)) {\r\n                        if (this.state.editEnum.enums[0] && this.state.editEnum.enums[0].startsWith('enum.functions.')) {\r\n                            await this.setEnumsOfDevice(this.state.devices[this.state.editEnum.index].channelId, values);\r\n                        } else {\r\n                            await this.setEnumsOfDevice(this.state.devices[this.state.editEnum.index].channelId, undefined, values);\r\n                        }\r\n                        const devices = JSON.parse(JSON.stringify(this.state.devices));\r\n                        // update enums, name\r\n                        this.updateEnumsForOneDevice(devices[this.state.editEnum.index]);\r\n                        this.setState({ editEnum: null, devices });\r\n                    } else {\r\n                        this.setState({ editEnum: null });\r\n                    }\r\n                }}\r\n            />;\r\n        }\r\n    }\r\n\r\n    setFilter(value) {\r\n        this.filter = value.toLowerCase();\r\n        this.filterTimer && clearTimeout(this.filterTimer);\r\n        this.filterTimer = setTimeout(() => {\r\n            this.filterTimer = null;\r\n            this.changeFilter(null, null, null, this.filter);\r\n        }, 400);\r\n    }\r\n\r\n    onCollapseAll() {\r\n        this.setState({ expandedIDs: [] });\r\n        this.saveExpanded([]);\r\n    }\r\n\r\n    onExpandAll() {\r\n        const expandedIDs = [];\r\n        this.state.listItems.forEach(item =>\r\n            this.state.listItems.find(it => it.parent === item.id) && expandedIDs.push(item.id));\r\n        this.setState({ expandedIDs });\r\n        this.saveExpanded(expandedIDs);\r\n    }\r\n\r\n    render() {\r\n        if (this.state.loading) {\r\n            return <CircularProgress />;\r\n        } else {\r\n            const classes = this.props.classes;\r\n            const small = this.props.width === 'xs' || this.props.width === 'sm';\r\n            const disabledButtons = this.disabledButtons();\r\n\r\n            return <DndProvider backend={!small ? HTML5Backend : TouchBackend}>\r\n                <div className={classes.tab}>\r\n                    <Toolbar variant=\"dense\">\r\n                        <div className={classes.wrapperHeadButtons}>\r\n                        <Tooltip title={I18n.t('Create new device with Aliases')}>\r\n                            <div>\r\n                                <IconButton\r\n                                        disabled={disabledButtons}\r\n                                        onClick={() => this.setState({ showAddDialog: ALIAS + '0' })}>\r\n                                    <IconAdd color={this.state.viewCategory ? 'primary' : 'inherit'} />\r\n                                </IconButton>\r\n                            </div>\r\n                        </Tooltip>\r\n                        {this.state.linkeddevices && <Tooltip title={I18n.t('Create new device with LinkedDevices')}>\r\n                            <IconButton onClick={() => this.setState({ showAddDialog: this.state.linkeddevices })}>\r\n                                <IconAdd style={{ color: colorLinkedDevices }} />\r\n                            </IconButton>\r\n                        </Tooltip>}\r\n                        <Tooltip title={I18n.t('Refresh')}>\r\n                            <IconButton onClick={() => this.detectDevices()} disabled={this.state.browse}>\r\n                                {this.state.browse ? <CircularProgress size={20} /> : <IconRefresh />}\r\n                            </IconButton>\r\n                        </Tooltip>\r\n                        <Tooltip title={I18n.t('Hide info devices')}>\r\n                            <IconButton\r\n                                color={this.state.filter.noInfo ? 'primary' : 'inherit'}\r\n                                onClick={() => this.changeFilter(null, null, null, null, !this.state.filter.noInfo)}>\r\n                                <IconInfo />\r\n                            </IconButton>\r\n                        </Tooltip>\r\n                        <Tooltip title={disabledButtons ? I18n.t('Create new folder in root') : I18n.t('Create new folder')}>\r\n                            <IconButton\r\n                                color={disabledButtons ? 'secondary' : 'primary'}\r\n                                onClick={_ => this.setState({ newFolder: true })}>\r\n                                <CreateNewFolderIcon />\r\n                            </IconButton>\r\n                        </Tooltip>\r\n                        <Tooltip title={I18n.t('Expand all nodes')}>\r\n                            <IconButton\r\n                                color=\"primary\"\r\n                                onClick={() => this.onExpandAll()}>\r\n                                <IconFolderOpened />\r\n                            </IconButton>\r\n                        </Tooltip>\r\n                        <Tooltip title={I18n.t('Collapse all nodes')}>\r\n                            <IconButton\r\n                                color=\"primary\"\r\n                                onClick={() => this.onCollapseAll()}>\r\n                                <IconFolder />\r\n                            </IconButton>\r\n                        </Tooltip>\r\n                        </div>\r\n                        <TextField\r\n                            margin=\"dense\"\r\n                            inputRef={this.inputRef}\r\n                            placeholder={I18n.t('Filter')}\r\n                            InputLabelProps={{ shrink: true }}\r\n                            defaultValue={this.filter}\r\n                            className={classes.hide700}\r\n                            onChange={e => this.setFilter(e.target.value)}\r\n                            InputProps={{\r\n                                endAdornment: (\r\n                                    this.filter ? <InputAdornment position=\"end\">\r\n                                        <IconButton\r\n                                            size=\"small\"\r\n                                            onClick={() => {\r\n                                                this.setFilter('');\r\n                                                this.inputRef.current.value = '';\r\n                                            }}\r\n                                        >\r\n                                            <IconClear />\r\n                                        </IconButton>\r\n                                    </InputAdornment> : <div className={classes.emptyClear} />\r\n                                ),\r\n                            }}\r\n                        />\r\n                        <div className={classes.emptyBlockFlex} />\r\n                        <div className={classes.wrapperName}>\r\n                            <DvrIcon color={this.state.themeName !== 'colored' ? 'primary' : 'inherit'} style={{ marginRight: 5 }} />\r\n                            <span>{I18n.t('Devices')}</span>\r\n                        </div>\r\n                    </Toolbar>\r\n                    {this.renderDevices()}\r\n                    {this.renderMessage()}\r\n                    {this.renderEditDialog()}\r\n                    {this.renderAddDialog()}\r\n                    {this.renderEditEnumDialog()}\r\n                    {this.renderImporterDialog()}\r\n                    {this.renderEditFolder()}\r\n                </div>\r\n            </DndProvider>;\r\n        }\r\n    }\r\n}\r\n\r\nListDevices.propTypes = {\r\n    adapterName: PropTypes.string.isRequired,\r\n    onError: PropTypes.func,\r\n    onLoad: PropTypes.func,\r\n    onChange: PropTypes.func,\r\n    socket: PropTypes.object.isRequired,\r\n    theme: PropTypes.object,\r\n    themeType: PropTypes.string,\r\n};\r\n\r\nexport default withWidth()(withStyles(styles)(ListDevices));\r\n","import React from 'react';\r\nimport { ThemeProvider, withStyles } from '@material-ui/core/styles';\r\n// import I18n from '@iobroker/adapter-react/i18n';\r\n\r\nimport { Paper } from '@material-ui/core';\r\n\r\nimport GenericApp from '@iobroker/adapter-react/GenericApp';\r\nimport Utils from '@iobroker/adapter-react/Components/Utils';\r\nimport Loader from '@iobroker/adapter-react/Components/Loader'\r\n// import ToggleThemeMenu from './Components/ToggleThemeMenu';\r\n\r\nimport TabDevices from './Tabs/ListDevices';\r\n\r\nconst styles = theme => ({\r\n    root: {},\r\n    tabContent: {\r\n        //padding: 10,\r\n        height: '100%',\r\n        overflow: 'auto',\r\n    },\r\n    wrapperMenu: {\r\n        display: 'flex',\r\n        justifyContent: 'space-between'\r\n    },\r\n    wrapperIconHeader: {\r\n\r\n    },\r\n    wrapperName: {\r\n        fontWeight: 800,\r\n        display: 'flex',\r\n        alignItems: 'center'\r\n    }\r\n});\r\n\r\nclass App extends GenericApp {\r\n    constructor(props) {\r\n        const extendedProps = { ...props };\r\n        extendedProps.bottomButtons = false;\r\n        extendedProps.adapterName = 'devices';\r\n        extendedProps.translations = {\r\n            'en': require('./i18n/en'),\r\n            'de': require('./i18n/de'),\r\n            'ru': require('./i18n/ru'),\r\n            'pt': require('./i18n/pt'),\r\n            'nl': require('./i18n/nl'),\r\n            'fr': require('./i18n/fr'),\r\n            'it': require('./i18n/it'),\r\n            'es': require('./i18n/es'),\r\n            'pl': require('./i18n/pl'),\r\n            'zh-cn': require('./i18n/zh-cn'),\r\n        };\r\n        super(props, extendedProps);\r\n\r\n        const theme = this.createTheme();\r\n        this.state = {\r\n            theme,\r\n            themeName: this.getThemeName(theme),\r\n            themeType: this.getThemeType(theme),\r\n        }\r\n    }\r\n\r\n    onHashChanged() {\r\n        //const location = GenericApp.getLocation();\r\n    }\r\n\r\n    getSelectedTab() {\r\n        const tab = this.state.selectedTab;\r\n        if (!tab || tab === 'list') {\r\n            return 0;\r\n        }\r\n    }\r\n    /**\r\n     * Changes the current theme\r\n     */\r\n    toggleTheme = currentThemeName => {\r\n        const themeName = this.state.themeName;\r\n\r\n        // dark => blue => colored => light => dark\r\n        let newThemeName = themeName === 'dark' ? 'blue' :\r\n            (themeName === 'blue' ? 'colored' :\r\n                (themeName === 'colored' ? 'light' : 'dark'));\r\n\r\n        if (currentThemeName) {\r\n            newThemeName = currentThemeName;\r\n        }\r\n\r\n        Utils.setThemeName(newThemeName);\r\n\r\n        const theme = this.createTheme(newThemeName);\r\n\r\n        this.setState({\r\n            theme: theme,\r\n            themeName: this.getThemeName(theme),\r\n            themeType: this.getThemeType(theme)\r\n        });\r\n    }\r\n\r\n    render() {\r\n        if (!this.state.loaded) {\r\n            return <Loader theme={this.state.themeType} />;\r\n        }\r\n\r\n        return <ThemeProvider theme={this.state.theme}>\r\n            {/* <ToggleThemeMenu\r\n                                toggleTheme={this.toggleTheme}\r\n                                themeName={this.state.themeName}\r\n                                t={I18n.t} /> */}\r\n            <Paper square elevation={0} className={this.props.classes.tabContent}>\r\n                {(this.state.selectedTab === 'list' || !this.state.selectedTab) ?\r\n                <TabDevices\r\n                    theme={this.state.theme}\r\n                    themeType={this.state.themeType}\r\n                    key=\"options\"\r\n                    common={this.common}\r\n                    socket={this.socket}\r\n                    native={this.state.native}\r\n                    onError={text => this.setState({ errorText: text })}\r\n                    onLoad={native => this.onLoadConfig(native)}\r\n                    instance={this.instance}\r\n                    adapterName={this.adapterName}\r\n                    onChange={(attr, value) => this.updateNativeValue(attr, value)}\r\n                />\r\n                : null}\r\n\r\n            </Paper>\r\n            {this.renderError()}\r\n            {this.renderSaveCloseButtons()}\r\n        </ThemeProvider>;\r\n    }\r\n}\r\n\r\nexport default withStyles(styles)(App);\r\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && !contentType.includes('javascript'))\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport {version} from '../package.json';\r\nimport { MuiThemeProvider} from '@material-ui/core/styles';\r\nimport * as Sentry from '@sentry/browser';\r\nimport * as SentryIntegrations from '@sentry/integrations';\r\n\r\nimport theme from '@iobroker/adapter-react/Theme';\r\nimport Utils from '@iobroker/adapter-react/Components/Utils';\r\nimport App from './App';\r\n\r\nimport * as serviceWorker from './serviceWorker';\r\nimport '@iobroker/adapter-react/index.css';\r\n\r\nwindow.adapterName = 'devices';\r\n\r\nconsole.log('iobroker.' + window.adapterName + '@' + version);\r\nlet themeName = Utils.getThemeName();\r\n\r\nfunction build() {\r\n    return ReactDOM.render(<MuiThemeProvider theme={ theme(themeName) }>\r\n        <App onThemeChange={_themeName => {\r\n            themeName = _themeName;\r\n            build();\r\n        }}/>\r\n    </MuiThemeProvider>, document.getElementById('root'));\r\n}\r\n\r\nif (window.location.host !== 'localhost:3000') {\r\n    Sentry.init({\r\n        dsn: 'https://3cedc5ceb5544e2e8248053c817fc98b@sentry.iobroker.net/131',\r\n        integrations: [\r\n            new SentryIntegrations.Dedupe()\r\n        ]\r\n    });\r\n}\r\n\r\nbuild();\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\nserviceWorker.unregister();\r\n"],"sourceRoot":""}